var TO=Object.defineProperty;var SO=(t,e,r)=>e in t?TO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var fe=(t,e,r)=>SO(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var PO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function IO(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function CO(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var SE={exports:{}},nm={},PE={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bd=Symbol.for("react.element"),OO=Symbol.for("react.portal"),NO=Symbol.for("react.fragment"),jO=Symbol.for("react.strict_mode"),MO=Symbol.for("react.profiler"),RO=Symbol.for("react.provider"),AO=Symbol.for("react.context"),FO=Symbol.for("react.forward_ref"),kO=Symbol.for("react.suspense"),LO=Symbol.for("react.memo"),VO=Symbol.for("react.lazy"),_x=Symbol.iterator;function zO(t){return t===null||typeof t!="object"?null:(t=_x&&t[_x]||t["@@iterator"],typeof t=="function"?t:null)}var IE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},CE=Object.assign,OE={};function ju(t,e,r){this.props=t,this.context=e,this.refs=OE,this.updater=r||IE}ju.prototype.isReactComponent={};ju.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ju.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function NE(){}NE.prototype=ju.prototype;function Lv(t,e,r){this.props=t,this.context=e,this.refs=OE,this.updater=r||IE}var Vv=Lv.prototype=new NE;Vv.constructor=Lv;CE(Vv,ju.prototype);Vv.isPureReactComponent=!0;var xx=Array.isArray,jE=Object.prototype.hasOwnProperty,zv={current:null},ME={key:!0,ref:!0,__self:!0,__source:!0};function RE(t,e,r){var n,s={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)jE.call(e,n)&&!ME.hasOwnProperty(n)&&(s[n]=e[n]);var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){for(var d=Array(c),h=0;h<c;h++)d[h]=arguments[h+2];s.children=d}if(t&&t.defaultProps)for(n in c=t.defaultProps,c)s[n]===void 0&&(s[n]=c[n]);return{$$typeof:bd,type:t,key:i,ref:o,props:s,_owner:zv.current}}function UO(t,e){return{$$typeof:bd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Uv(t){return typeof t=="object"&&t!==null&&t.$$typeof===bd}function BO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var wx=/\/+/g;function fg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?BO(""+t.key):e.toString(36)}function Wf(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case bd:case OO:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+fg(o,0):n,xx(s)?(r="",t!=null&&(r=t.replace(wx,"$&/")+"/"),Wf(s,e,r,"",function(h){return h})):s!=null&&(Uv(s)&&(s=UO(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(wx,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",xx(t))for(var c=0;c<t.length;c++){i=t[c];var d=n+fg(i,c);o+=Wf(i,e,r,d,s)}else if(d=zO(t),typeof d=="function")for(t=d.call(t),c=0;!(i=t.next()).done;)i=i.value,d=n+fg(i,c++),o+=Wf(i,e,r,d,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function sf(t,e,r){if(t==null)return t;var n=[],s=0;return Wf(t,n,"","",function(i){return e.call(r,i,s++)}),n}function WO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Vr={current:null},$f={transition:null},$O={ReactCurrentDispatcher:Vr,ReactCurrentBatchConfig:$f,ReactCurrentOwner:zv};function AE(){throw Error("act(...) is not supported in production builds of React.")}ze.Children={map:sf,forEach:function(t,e,r){sf(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return sf(t,function(){e++}),e},toArray:function(t){return sf(t,function(e){return e})||[]},only:function(t){if(!Uv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ze.Component=ju;ze.Fragment=NO;ze.Profiler=MO;ze.PureComponent=Lv;ze.StrictMode=jO;ze.Suspense=kO;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$O;ze.act=AE;ze.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=CE({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=zv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(d in e)jE.call(e,d)&&!ME.hasOwnProperty(d)&&(n[d]=e[d]===void 0&&c!==void 0?c[d]:e[d])}var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){c=Array(d);for(var h=0;h<d;h++)c[h]=arguments[h+2];n.children=c}return{$$typeof:bd,type:t.type,key:s,ref:i,props:n,_owner:o}};ze.createContext=function(t){return t={$$typeof:AO,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:RO,_context:t},t.Consumer=t};ze.createElement=RE;ze.createFactory=function(t){var e=RE.bind(null,t);return e.type=t,e};ze.createRef=function(){return{current:null}};ze.forwardRef=function(t){return{$$typeof:FO,render:t}};ze.isValidElement=Uv;ze.lazy=function(t){return{$$typeof:VO,_payload:{_status:-1,_result:t},_init:WO}};ze.memo=function(t,e){return{$$typeof:LO,type:t,compare:e===void 0?null:e}};ze.startTransition=function(t){var e=$f.transition;$f.transition={};try{t()}finally{$f.transition=e}};ze.unstable_act=AE;ze.useCallback=function(t,e){return Vr.current.useCallback(t,e)};ze.useContext=function(t){return Vr.current.useContext(t)};ze.useDebugValue=function(){};ze.useDeferredValue=function(t){return Vr.current.useDeferredValue(t)};ze.useEffect=function(t,e){return Vr.current.useEffect(t,e)};ze.useId=function(){return Vr.current.useId()};ze.useImperativeHandle=function(t,e,r){return Vr.current.useImperativeHandle(t,e,r)};ze.useInsertionEffect=function(t,e){return Vr.current.useInsertionEffect(t,e)};ze.useLayoutEffect=function(t,e){return Vr.current.useLayoutEffect(t,e)};ze.useMemo=function(t,e){return Vr.current.useMemo(t,e)};ze.useReducer=function(t,e,r){return Vr.current.useReducer(t,e,r)};ze.useRef=function(t){return Vr.current.useRef(t)};ze.useState=function(t){return Vr.current.useState(t)};ze.useSyncExternalStore=function(t,e,r){return Vr.current.useSyncExternalStore(t,e,r)};ze.useTransition=function(){return Vr.current.useTransition()};ze.version="18.3.1";PE.exports=ze;var z=PE.exports;const zn=IO(z);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HO=z,YO=Symbol.for("react.element"),qO=Symbol.for("react.fragment"),GO=Object.prototype.hasOwnProperty,KO=HO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QO={key:!0,ref:!0,__self:!0,__source:!0};function FE(t,e,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)GO.call(e,n)&&!QO.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:YO,type:t,key:i,ref:o,props:s,_owner:KO.current}}nm.Fragment=qO;nm.jsx=FE;nm.jsxs=FE;SE.exports=nm;var u=SE.exports,vp={},kE={exports:{}},wn={},LE={exports:{}},VE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ee,de){var ue=ee.length;ee.push(de);e:for(;0<ue;){var De=ue-1>>>1,X=ee[De];if(0<s(X,de))ee[De]=de,ee[ue]=X,ue=De;else break e}}function r(ee){return ee.length===0?null:ee[0]}function n(ee){if(ee.length===0)return null;var de=ee[0],ue=ee.pop();if(ue!==de){ee[0]=ue;e:for(var De=0,X=ee.length,G=X>>>1;De<G;){var B=2*(De+1)-1,F=ee[B],K=B+1,ae=ee[K];if(0>s(F,ue))K<X&&0>s(ae,F)?(ee[De]=ae,ee[K]=ue,De=K):(ee[De]=F,ee[B]=ue,De=B);else if(K<X&&0>s(ae,ue))ee[De]=ae,ee[K]=ue,De=K;else break e}}return de}function s(ee,de){var ue=ee.sortIndex-de.sortIndex;return ue!==0?ue:ee.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var d=[],h=[],g=1,v=null,y=3,E=!1,N=!1,D=!1,k=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(ee){for(var de=r(h);de!==null;){if(de.callback===null)n(h);else if(de.startTime<=ee)n(h),de.sortIndex=de.expirationTime,e(d,de);else break;de=r(h)}}function R(ee){if(D=!1,C(ee),!N)if(r(d)!==null)N=!0,le(Y);else{var de=r(h);de!==null&&Oe(R,de.startTime-ee)}}function Y(ee,de){N=!1,D&&(D=!1,S(b),b=-1),E=!0;var ue=y;try{for(C(de),v=r(d);v!==null&&(!(v.expirationTime>de)||ee&&!M());){var De=v.callback;if(typeof De=="function"){v.callback=null,y=v.priorityLevel;var X=De(v.expirationTime<=de);de=t.unstable_now(),typeof X=="function"?v.callback=X:v===r(d)&&n(d),C(de)}else n(d);v=r(d)}if(v!==null)var G=!0;else{var B=r(h);B!==null&&Oe(R,B.startTime-de),G=!1}return G}finally{v=null,y=ue,E=!1}}var q=!1,T=null,b=-1,I=5,j=-1;function M(){return!(t.unstable_now()-j<I)}function V(){if(T!==null){var ee=t.unstable_now();j=ee;var de=!0;try{de=T(!0,ee)}finally{de?O():(q=!1,T=null)}}else q=!1}var O;if(typeof P=="function")O=function(){P(V)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,tt=et.port2;et.port1.onmessage=V,O=function(){tt.postMessage(null)}}else O=function(){k(V,0)};function le(ee){T=ee,q||(q=!0,O())}function Oe(ee,de){b=k(function(){ee(t.unstable_now())},de)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_continueExecution=function(){N||E||(N=!0,le(Y))},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return r(d)},t.unstable_next=function(ee){switch(y){case 1:case 2:case 3:var de=3;break;default:de=y}var ue=y;y=de;try{return ee()}finally{y=ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ee,de){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ue=y;y=ee;try{return de()}finally{y=ue}},t.unstable_scheduleCallback=function(ee,de,ue){var De=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?De+ue:De):ue=De,ee){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=ue+X,ee={id:g++,callback:de,priorityLevel:ee,startTime:ue,expirationTime:X,sortIndex:-1},ue>De?(ee.sortIndex=ue,e(h,ee),r(d)===null&&ee===r(h)&&(D?(S(b),b=-1):D=!0,Oe(R,ue-De))):(ee.sortIndex=X,e(d,ee),N||E||(N=!0,le(Y))),ee},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(ee){var de=y;return function(){var ue=y;y=de;try{return ee.apply(this,arguments)}finally{y=ue}}}})(VE);LE.exports=VE;var XO=LE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JO=z,_n=XO;function ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zE=new Set,Qc={};function fl(t,e){mu(t,e),mu(t+"Capture",e)}function mu(t,e){for(Qc[t]=e,t=0;t<e.length;t++)zE.add(e[t])}var Yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yp=Object.prototype.hasOwnProperty,ZO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bx={},Ex={};function eN(t){return yp.call(Ex,t)?!0:yp.call(bx,t)?!1:ZO.test(t)?Ex[t]=!0:(bx[t]=!0,!1)}function tN(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function rN(t,e,r,n){if(e===null||typeof e>"u"||tN(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zr(t,e,r,n,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var hr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){hr[t]=new zr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];hr[e]=new zr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){hr[t]=new zr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){hr[t]=new zr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){hr[t]=new zr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){hr[t]=new zr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){hr[t]=new zr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){hr[t]=new zr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){hr[t]=new zr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Bv=/[\-:]([a-z])/g;function Wv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Bv,Wv);hr[e]=new zr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Bv,Wv);hr[e]=new zr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Bv,Wv);hr[e]=new zr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){hr[t]=new zr(t,1,!1,t.toLowerCase(),null,!1,!1)});hr.xlinkHref=new zr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){hr[t]=new zr(t,1,!1,t.toLowerCase(),null,!0,!0)});function $v(t,e,r,n){var s=hr.hasOwnProperty(e)?hr[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(rN(e,r,s,n)&&(r=null),n||s===null?eN(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var ra=JO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,af=Symbol.for("react.element"),Hl=Symbol.for("react.portal"),Yl=Symbol.for("react.fragment"),Hv=Symbol.for("react.strict_mode"),_p=Symbol.for("react.profiler"),UE=Symbol.for("react.provider"),BE=Symbol.for("react.context"),Yv=Symbol.for("react.forward_ref"),xp=Symbol.for("react.suspense"),wp=Symbol.for("react.suspense_list"),qv=Symbol.for("react.memo"),Wa=Symbol.for("react.lazy"),WE=Symbol.for("react.offscreen"),Dx=Symbol.iterator;function rc(t){return t===null||typeof t!="object"?null:(t=Dx&&t[Dx]||t["@@iterator"],typeof t=="function"?t:null)}var It=Object.assign,hg;function Dc(t){if(hg===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);hg=e&&e[1]||""}return`
`+hg+t}var mg=!1;function gg(t,e){if(!t||mg)return"";mg=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var n=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){n=h}t.call(e.prototype)}else{try{throw Error()}catch(h){n=h}t()}}catch(h){if(h&&n&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var d=`
`+s[o].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=o&&0<=c);break}}}finally{mg=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Dc(t):""}function nN(t){switch(t.tag){case 5:return Dc(t.type);case 16:return Dc("Lazy");case 13:return Dc("Suspense");case 19:return Dc("SuspenseList");case 0:case 2:case 15:return t=gg(t.type,!1),t;case 11:return t=gg(t.type.render,!1),t;case 1:return t=gg(t.type,!0),t;default:return""}}function bp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Yl:return"Fragment";case Hl:return"Portal";case _p:return"Profiler";case Hv:return"StrictMode";case xp:return"Suspense";case wp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case BE:return(t.displayName||"Context")+".Consumer";case UE:return(t._context.displayName||"Context")+".Provider";case Yv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qv:return e=t.displayName||null,e!==null?e:bp(t.type)||"Memo";case Wa:e=t._payload,t=t._init;try{return bp(t(e))}catch{}}return null}function sN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bp(e);case 8:return e===Hv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ho(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $E(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function iN(t){var e=$E(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function of(t){t._valueTracker||(t._valueTracker=iN(t))}function HE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=$E(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function ch(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ep(t,e){var r=e.checked;return It({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Tx(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=ho(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function YE(t,e){e=e.checked,e!=null&&$v(t,"checked",e,!1)}function Dp(t,e){YE(t,e);var r=ho(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Tp(t,e.type,r):e.hasOwnProperty("defaultValue")&&Tp(t,e.type,ho(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Sx(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Tp(t,e,r){(e!=="number"||ch(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Tc=Array.isArray;function su(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+ho(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Sp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ne(91));return It({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Px(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ne(92));if(Tc(r)){if(1<r.length)throw Error(ne(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:ho(r)}}function qE(t,e){var r=ho(e.value),n=ho(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Ix(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function GE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?GE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var lf,KE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(lf=lf||document.createElement("div"),lf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Xc(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Mc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aN=["Webkit","ms","Moz","O"];Object.keys(Mc).forEach(function(t){aN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Mc[e]=Mc[t]})});function QE(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Mc.hasOwnProperty(t)&&Mc[t]?(""+e).trim():e+"px"}function XE(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=QE(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var oN=It({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ip(t,e){if(e){if(oN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ne(62))}}function Cp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Op=null;function Gv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Np=null,iu=null,au=null;function Cx(t){if(t=Td(t)){if(typeof Np!="function")throw Error(ne(280));var e=t.stateNode;e&&(e=lm(e),Np(t.stateNode,t.type,e))}}function JE(t){iu?au?au.push(t):au=[t]:iu=t}function ZE(){if(iu){var t=iu,e=au;if(au=iu=null,Cx(t),e)for(t=0;t<e.length;t++)Cx(e[t])}}function e2(t,e){return t(e)}function t2(){}var pg=!1;function r2(t,e,r){if(pg)return t(e,r);pg=!0;try{return e2(t,e,r)}finally{pg=!1,(iu!==null||au!==null)&&(t2(),ZE())}}function Jc(t,e){var r=t.stateNode;if(r===null)return null;var n=lm(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ne(231,e,typeof r));return r}var jp=!1;if(Yi)try{var nc={};Object.defineProperty(nc,"passive",{get:function(){jp=!0}}),window.addEventListener("test",nc,nc),window.removeEventListener("test",nc,nc)}catch{jp=!1}function lN(t,e,r,n,s,i,o,c,d){var h=Array.prototype.slice.call(arguments,3);try{e.apply(r,h)}catch(g){this.onError(g)}}var Rc=!1,dh=null,fh=!1,Mp=null,uN={onError:function(t){Rc=!0,dh=t}};function cN(t,e,r,n,s,i,o,c,d){Rc=!1,dh=null,lN.apply(uN,arguments)}function dN(t,e,r,n,s,i,o,c,d){if(cN.apply(this,arguments),Rc){if(Rc){var h=dh;Rc=!1,dh=null}else throw Error(ne(198));fh||(fh=!0,Mp=h)}}function hl(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function n2(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ox(t){if(hl(t)!==t)throw Error(ne(188))}function fN(t){var e=t.alternate;if(!e){if(e=hl(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Ox(s),t;if(i===n)return Ox(s),e;i=i.sibling}throw Error(ne(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,c=s.child;c;){if(c===r){o=!0,r=s,n=i;break}if(c===n){o=!0,n=s,r=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===r){o=!0,r=i,n=s;break}if(c===n){o=!0,n=i,r=s;break}c=c.sibling}if(!o)throw Error(ne(189))}}if(r.alternate!==n)throw Error(ne(190))}if(r.tag!==3)throw Error(ne(188));return r.stateNode.current===r?t:e}function s2(t){return t=fN(t),t!==null?i2(t):null}function i2(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=i2(t);if(e!==null)return e;t=t.sibling}return null}var a2=_n.unstable_scheduleCallback,Nx=_n.unstable_cancelCallback,hN=_n.unstable_shouldYield,mN=_n.unstable_requestPaint,zt=_n.unstable_now,gN=_n.unstable_getCurrentPriorityLevel,Kv=_n.unstable_ImmediatePriority,o2=_n.unstable_UserBlockingPriority,hh=_n.unstable_NormalPriority,pN=_n.unstable_LowPriority,l2=_n.unstable_IdlePriority,sm=null,Ks=null;function vN(t){if(Ks&&typeof Ks.onCommitFiberRoot=="function")try{Ks.onCommitFiberRoot(sm,t,void 0,(t.current.flags&128)===128)}catch{}}var gs=Math.clz32?Math.clz32:xN,yN=Math.log,_N=Math.LN2;function xN(t){return t>>>=0,t===0?32:31-(yN(t)/_N|0)|0}var uf=64,cf=4194304;function Sc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mh(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,o=r&268435455;if(o!==0){var c=o&~s;c!==0?n=Sc(c):(i&=o,i!==0&&(n=Sc(i)))}else o=r&~s,o!==0?n=Sc(o):i!==0&&(n=Sc(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-gs(e),s=1<<r,n|=t[r],e&=~s;return n}function wN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bN(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-gs(i),c=1<<o,d=s[o];d===-1?(!(c&r)||c&n)&&(s[o]=wN(c,e)):d<=e&&(t.expiredLanes|=c),i&=~c}}function Rp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function u2(){var t=uf;return uf<<=1,!(uf&4194240)&&(uf=64),t}function vg(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Ed(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gs(e),t[e]=r}function EN(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-gs(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function Qv(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-gs(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var rt=0;function c2(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var d2,Xv,f2,h2,m2,Ap=!1,df=[],Za=null,eo=null,to=null,Zc=new Map,ed=new Map,Ha=[],DN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jx(t,e){switch(t){case"focusin":case"focusout":Za=null;break;case"dragenter":case"dragleave":eo=null;break;case"mouseover":case"mouseout":to=null;break;case"pointerover":case"pointerout":Zc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ed.delete(e.pointerId)}}function sc(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Td(e),e!==null&&Xv(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function TN(t,e,r,n,s){switch(e){case"focusin":return Za=sc(Za,t,e,r,n,s),!0;case"dragenter":return eo=sc(eo,t,e,r,n,s),!0;case"mouseover":return to=sc(to,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Zc.set(i,sc(Zc.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,ed.set(i,sc(ed.get(i)||null,t,e,r,n,s)),!0}return!1}function g2(t){var e=Yo(t.target);if(e!==null){var r=hl(e);if(r!==null){if(e=r.tag,e===13){if(e=n2(r),e!==null){t.blockedOn=e,m2(t.priority,function(){f2(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Fp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Op=n,r.target.dispatchEvent(n),Op=null}else return e=Td(r),e!==null&&Xv(e),t.blockedOn=r,!1;e.shift()}return!0}function Mx(t,e,r){Hf(t)&&r.delete(e)}function SN(){Ap=!1,Za!==null&&Hf(Za)&&(Za=null),eo!==null&&Hf(eo)&&(eo=null),to!==null&&Hf(to)&&(to=null),Zc.forEach(Mx),ed.forEach(Mx)}function ic(t,e){t.blockedOn===e&&(t.blockedOn=null,Ap||(Ap=!0,_n.unstable_scheduleCallback(_n.unstable_NormalPriority,SN)))}function td(t){function e(s){return ic(s,t)}if(0<df.length){ic(df[0],t);for(var r=1;r<df.length;r++){var n=df[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Za!==null&&ic(Za,t),eo!==null&&ic(eo,t),to!==null&&ic(to,t),Zc.forEach(e),ed.forEach(e),r=0;r<Ha.length;r++)n=Ha[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ha.length&&(r=Ha[0],r.blockedOn===null);)g2(r),r.blockedOn===null&&Ha.shift()}var ou=ra.ReactCurrentBatchConfig,gh=!0;function PN(t,e,r,n){var s=rt,i=ou.transition;ou.transition=null;try{rt=1,Jv(t,e,r,n)}finally{rt=s,ou.transition=i}}function IN(t,e,r,n){var s=rt,i=ou.transition;ou.transition=null;try{rt=4,Jv(t,e,r,n)}finally{rt=s,ou.transition=i}}function Jv(t,e,r,n){if(gh){var s=Fp(t,e,r,n);if(s===null)Pg(t,e,n,ph,r),jx(t,n);else if(TN(s,t,e,r,n))n.stopPropagation();else if(jx(t,n),e&4&&-1<DN.indexOf(t)){for(;s!==null;){var i=Td(s);if(i!==null&&d2(i),i=Fp(t,e,r,n),i===null&&Pg(t,e,n,ph,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Pg(t,e,n,null,r)}}var ph=null;function Fp(t,e,r,n){if(ph=null,t=Gv(n),t=Yo(t),t!==null)if(e=hl(t),e===null)t=null;else if(r=e.tag,r===13){if(t=n2(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ph=t,null}function p2(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gN()){case Kv:return 1;case o2:return 4;case hh:case pN:return 16;case l2:return 536870912;default:return 16}default:return 16}}var Qa=null,Zv=null,Yf=null;function v2(){if(Yf)return Yf;var t,e=Zv,r=e.length,n,s="value"in Qa?Qa.value:Qa.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[i-n];n++);return Yf=s.slice(t,1<n?1-n:void 0)}function qf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ff(){return!0}function Rx(){return!1}function bn(t){function e(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(r=t[c],this[c]=r?r(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ff:Rx,this.isPropagationStopped=Rx,this}return It(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ff)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ff)},persist:function(){},isPersistent:ff}),e}var Mu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},e0=bn(Mu),Dd=It({},Mu,{view:0,detail:0}),CN=bn(Dd),yg,_g,ac,im=It({},Dd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:t0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ac&&(ac&&t.type==="mousemove"?(yg=t.screenX-ac.screenX,_g=t.screenY-ac.screenY):_g=yg=0,ac=t),yg)},movementY:function(t){return"movementY"in t?t.movementY:_g}}),Ax=bn(im),ON=It({},im,{dataTransfer:0}),NN=bn(ON),jN=It({},Dd,{relatedTarget:0}),xg=bn(jN),MN=It({},Mu,{animationName:0,elapsedTime:0,pseudoElement:0}),RN=bn(MN),AN=It({},Mu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),FN=bn(AN),kN=It({},Mu,{data:0}),Fx=bn(kN),LN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zN[t])?!!e[t]:!1}function t0(){return UN}var BN=It({},Dd,{key:function(t){if(t.key){var e=LN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=qf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?VN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:t0,charCode:function(t){return t.type==="keypress"?qf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),WN=bn(BN),$N=It({},im,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kx=bn($N),HN=It({},Dd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:t0}),YN=bn(HN),qN=It({},Mu,{propertyName:0,elapsedTime:0,pseudoElement:0}),GN=bn(qN),KN=It({},im,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),QN=bn(KN),XN=[9,13,27,32],r0=Yi&&"CompositionEvent"in window,Ac=null;Yi&&"documentMode"in document&&(Ac=document.documentMode);var JN=Yi&&"TextEvent"in window&&!Ac,y2=Yi&&(!r0||Ac&&8<Ac&&11>=Ac),Lx=" ",Vx=!1;function _2(t,e){switch(t){case"keyup":return XN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function x2(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ql=!1;function ZN(t,e){switch(t){case"compositionend":return x2(e);case"keypress":return e.which!==32?null:(Vx=!0,Lx);case"textInput":return t=e.data,t===Lx&&Vx?null:t;default:return null}}function ej(t,e){if(ql)return t==="compositionend"||!r0&&_2(t,e)?(t=v2(),Yf=Zv=Qa=null,ql=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return y2&&e.locale!=="ko"?null:e.data;default:return null}}var tj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tj[t.type]:e==="textarea"}function w2(t,e,r,n){JE(n),e=vh(e,"onChange"),0<e.length&&(r=new e0("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Fc=null,rd=null;function rj(t){j2(t,0)}function am(t){var e=Ql(t);if(HE(e))return t}function nj(t,e){if(t==="change")return e}var b2=!1;if(Yi){var wg;if(Yi){var bg="oninput"in document;if(!bg){var Ux=document.createElement("div");Ux.setAttribute("oninput","return;"),bg=typeof Ux.oninput=="function"}wg=bg}else wg=!1;b2=wg&&(!document.documentMode||9<document.documentMode)}function Bx(){Fc&&(Fc.detachEvent("onpropertychange",E2),rd=Fc=null)}function E2(t){if(t.propertyName==="value"&&am(rd)){var e=[];w2(e,rd,t,Gv(t)),r2(rj,e)}}function sj(t,e,r){t==="focusin"?(Bx(),Fc=e,rd=r,Fc.attachEvent("onpropertychange",E2)):t==="focusout"&&Bx()}function ij(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return am(rd)}function aj(t,e){if(t==="click")return am(e)}function oj(t,e){if(t==="input"||t==="change")return am(e)}function lj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ys=typeof Object.is=="function"?Object.is:lj;function nd(t,e){if(ys(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!yp.call(e,s)||!ys(t[s],e[s]))return!1}return!0}function Wx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $x(t,e){var r=Wx(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Wx(r)}}function D2(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?D2(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function T2(){for(var t=window,e=ch();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=ch(t.document)}return e}function n0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function uj(t){var e=T2(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&D2(r.ownerDocument.documentElement,r)){if(n!==null&&n0(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=$x(r,i);var o=$x(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cj=Yi&&"documentMode"in document&&11>=document.documentMode,Gl=null,kp=null,kc=null,Lp=!1;function Hx(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Lp||Gl==null||Gl!==ch(n)||(n=Gl,"selectionStart"in n&&n0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),kc&&nd(kc,n)||(kc=n,n=vh(kp,"onSelect"),0<n.length&&(e=new e0("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Gl)))}function hf(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Kl={animationend:hf("Animation","AnimationEnd"),animationiteration:hf("Animation","AnimationIteration"),animationstart:hf("Animation","AnimationStart"),transitionend:hf("Transition","TransitionEnd")},Eg={},S2={};Yi&&(S2=document.createElement("div").style,"AnimationEvent"in window||(delete Kl.animationend.animation,delete Kl.animationiteration.animation,delete Kl.animationstart.animation),"TransitionEvent"in window||delete Kl.transitionend.transition);function om(t){if(Eg[t])return Eg[t];if(!Kl[t])return t;var e=Kl[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in S2)return Eg[t]=e[r];return t}var P2=om("animationend"),I2=om("animationiteration"),C2=om("animationstart"),O2=om("transitionend"),N2=new Map,Yx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xo(t,e){N2.set(t,e),fl(e,[t])}for(var Dg=0;Dg<Yx.length;Dg++){var Tg=Yx[Dg],dj=Tg.toLowerCase(),fj=Tg[0].toUpperCase()+Tg.slice(1);xo(dj,"on"+fj)}xo(P2,"onAnimationEnd");xo(I2,"onAnimationIteration");xo(C2,"onAnimationStart");xo("dblclick","onDoubleClick");xo("focusin","onFocus");xo("focusout","onBlur");xo(O2,"onTransitionEnd");mu("onMouseEnter",["mouseout","mouseover"]);mu("onMouseLeave",["mouseout","mouseover"]);mu("onPointerEnter",["pointerout","pointerover"]);mu("onPointerLeave",["pointerout","pointerover"]);fl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fl("onBeforeInput",["compositionend","keypress","textInput","paste"]);fl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pc));function qx(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,dN(n,e,void 0,t),t.currentTarget=null}function j2(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var c=n[o],d=c.instance,h=c.currentTarget;if(c=c.listener,d!==i&&s.isPropagationStopped())break e;qx(s,c,h),i=d}else for(o=0;o<n.length;o++){if(c=n[o],d=c.instance,h=c.currentTarget,c=c.listener,d!==i&&s.isPropagationStopped())break e;qx(s,c,h),i=d}}}if(fh)throw t=Mp,fh=!1,Mp=null,t}function vt(t,e){var r=e[Wp];r===void 0&&(r=e[Wp]=new Set);var n=t+"__bubble";r.has(n)||(M2(e,t,2,!1),r.add(n))}function Sg(t,e,r){var n=0;e&&(n|=4),M2(r,t,n,e)}var mf="_reactListening"+Math.random().toString(36).slice(2);function sd(t){if(!t[mf]){t[mf]=!0,zE.forEach(function(r){r!=="selectionchange"&&(hj.has(r)||Sg(r,!1,t),Sg(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[mf]||(e[mf]=!0,Sg("selectionchange",!1,e))}}function M2(t,e,r,n){switch(p2(e)){case 1:var s=PN;break;case 4:s=IN;break;default:s=Jv}r=s.bind(null,e,r,t),s=void 0,!jp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Pg(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var c=n.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;o=o.return}for(;c!==null;){if(o=Yo(c),o===null)return;if(d=o.tag,d===5||d===6){n=i=o;continue e}c=c.parentNode}}n=n.return}r2(function(){var h=i,g=Gv(r),v=[];e:{var y=N2.get(t);if(y!==void 0){var E=e0,N=t;switch(t){case"keypress":if(qf(r)===0)break e;case"keydown":case"keyup":E=WN;break;case"focusin":N="focus",E=xg;break;case"focusout":N="blur",E=xg;break;case"beforeblur":case"afterblur":E=xg;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=Ax;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=NN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=YN;break;case P2:case I2:case C2:E=RN;break;case O2:E=GN;break;case"scroll":E=CN;break;case"wheel":E=QN;break;case"copy":case"cut":case"paste":E=FN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=kx}var D=(e&4)!==0,k=!D&&t==="scroll",S=D?y!==null?y+"Capture":null:y;D=[];for(var P=h,C;P!==null;){C=P;var R=C.stateNode;if(C.tag===5&&R!==null&&(C=R,S!==null&&(R=Jc(P,S),R!=null&&D.push(id(P,R,C)))),k)break;P=P.return}0<D.length&&(y=new E(y,N,null,r,g),v.push({event:y,listeners:D}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",y&&r!==Op&&(N=r.relatedTarget||r.fromElement)&&(Yo(N)||N[qi]))break e;if((E||y)&&(y=g.window===g?g:(y=g.ownerDocument)?y.defaultView||y.parentWindow:window,E?(N=r.relatedTarget||r.toElement,E=h,N=N?Yo(N):null,N!==null&&(k=hl(N),N!==k||N.tag!==5&&N.tag!==6)&&(N=null)):(E=null,N=h),E!==N)){if(D=Ax,R="onMouseLeave",S="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(D=kx,R="onPointerLeave",S="onPointerEnter",P="pointer"),k=E==null?y:Ql(E),C=N==null?y:Ql(N),y=new D(R,P+"leave",E,r,g),y.target=k,y.relatedTarget=C,R=null,Yo(g)===h&&(D=new D(S,P+"enter",N,r,g),D.target=C,D.relatedTarget=k,R=D),k=R,E&&N)t:{for(D=E,S=N,P=0,C=D;C;C=Rl(C))P++;for(C=0,R=S;R;R=Rl(R))C++;for(;0<P-C;)D=Rl(D),P--;for(;0<C-P;)S=Rl(S),C--;for(;P--;){if(D===S||S!==null&&D===S.alternate)break t;D=Rl(D),S=Rl(S)}D=null}else D=null;E!==null&&Gx(v,y,E,D,!1),N!==null&&k!==null&&Gx(v,k,N,D,!0)}}e:{if(y=h?Ql(h):window,E=y.nodeName&&y.nodeName.toLowerCase(),E==="select"||E==="input"&&y.type==="file")var Y=nj;else if(zx(y))if(b2)Y=oj;else{Y=ij;var q=sj}else(E=y.nodeName)&&E.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(Y=aj);if(Y&&(Y=Y(t,h))){w2(v,Y,r,g);break e}q&&q(t,y,h),t==="focusout"&&(q=y._wrapperState)&&q.controlled&&y.type==="number"&&Tp(y,"number",y.value)}switch(q=h?Ql(h):window,t){case"focusin":(zx(q)||q.contentEditable==="true")&&(Gl=q,kp=h,kc=null);break;case"focusout":kc=kp=Gl=null;break;case"mousedown":Lp=!0;break;case"contextmenu":case"mouseup":case"dragend":Lp=!1,Hx(v,r,g);break;case"selectionchange":if(cj)break;case"keydown":case"keyup":Hx(v,r,g)}var T;if(r0)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else ql?_2(t,r)&&(b="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(b="onCompositionStart");b&&(y2&&r.locale!=="ko"&&(ql||b!=="onCompositionStart"?b==="onCompositionEnd"&&ql&&(T=v2()):(Qa=g,Zv="value"in Qa?Qa.value:Qa.textContent,ql=!0)),q=vh(h,b),0<q.length&&(b=new Fx(b,t,null,r,g),v.push({event:b,listeners:q}),T?b.data=T:(T=x2(r),T!==null&&(b.data=T)))),(T=JN?ZN(t,r):ej(t,r))&&(h=vh(h,"onBeforeInput"),0<h.length&&(g=new Fx("onBeforeInput","beforeinput",null,r,g),v.push({event:g,listeners:h}),g.data=T))}j2(v,e)})}function id(t,e,r){return{instance:t,listener:e,currentTarget:r}}function vh(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Jc(t,r),i!=null&&n.unshift(id(t,i,s)),i=Jc(t,e),i!=null&&n.push(id(t,i,s))),t=t.return}return n}function Rl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Gx(t,e,r,n,s){for(var i=e._reactName,o=[];r!==null&&r!==n;){var c=r,d=c.alternate,h=c.stateNode;if(d!==null&&d===n)break;c.tag===5&&h!==null&&(c=h,s?(d=Jc(r,i),d!=null&&o.unshift(id(r,d,c))):s||(d=Jc(r,i),d!=null&&o.push(id(r,d,c)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var mj=/\r\n?/g,gj=/\u0000|\uFFFD/g;function Kx(t){return(typeof t=="string"?t:""+t).replace(mj,`
`).replace(gj,"")}function gf(t,e,r){if(e=Kx(e),Kx(t)!==e&&r)throw Error(ne(425))}function yh(){}var Vp=null,zp=null;function Up(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bp=typeof setTimeout=="function"?setTimeout:void 0,pj=typeof clearTimeout=="function"?clearTimeout:void 0,Qx=typeof Promise=="function"?Promise:void 0,vj=typeof queueMicrotask=="function"?queueMicrotask:typeof Qx<"u"?function(t){return Qx.resolve(null).then(t).catch(yj)}:Bp;function yj(t){setTimeout(function(){throw t})}function Ig(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),td(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);td(e)}function ro(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Xx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ru=Math.random().toString(36).slice(2),qs="__reactFiber$"+Ru,ad="__reactProps$"+Ru,qi="__reactContainer$"+Ru,Wp="__reactEvents$"+Ru,_j="__reactListeners$"+Ru,xj="__reactHandles$"+Ru;function Yo(t){var e=t[qs];if(e)return e;for(var r=t.parentNode;r;){if(e=r[qi]||r[qs]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Xx(t);t!==null;){if(r=t[qs])return r;t=Xx(t)}return e}t=r,r=t.parentNode}return null}function Td(t){return t=t[qs]||t[qi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ql(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function lm(t){return t[ad]||null}var $p=[],Xl=-1;function wo(t){return{current:t}}function _t(t){0>Xl||(t.current=$p[Xl],$p[Xl]=null,Xl--)}function mt(t,e){Xl++,$p[Xl]=t.current,t.current=e}var mo={},Ir=wo(mo),Zr=wo(!1),rl=mo;function gu(t,e){var r=t.type.contextTypes;if(!r)return mo;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function en(t){return t=t.childContextTypes,t!=null}function _h(){_t(Zr),_t(Ir)}function Jx(t,e,r){if(Ir.current!==mo)throw Error(ne(168));mt(Ir,e),mt(Zr,r)}function R2(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(ne(108,sN(t)||"Unknown",s));return It({},r,n)}function xh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||mo,rl=Ir.current,mt(Ir,t),mt(Zr,Zr.current),!0}function Zx(t,e,r){var n=t.stateNode;if(!n)throw Error(ne(169));r?(t=R2(t,e,rl),n.__reactInternalMemoizedMergedChildContext=t,_t(Zr),_t(Ir),mt(Ir,t)):_t(Zr),mt(Zr,r)}var ji=null,um=!1,Cg=!1;function A2(t){ji===null?ji=[t]:ji.push(t)}function wj(t){um=!0,A2(t)}function bo(){if(!Cg&&ji!==null){Cg=!0;var t=0,e=rt;try{var r=ji;for(rt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}ji=null,um=!1}catch(s){throw ji!==null&&(ji=ji.slice(t+1)),a2(Kv,bo),s}finally{rt=e,Cg=!1}}return null}var Jl=[],Zl=0,wh=null,bh=0,An=[],Fn=0,nl=null,ki=1,Li="";function Fo(t,e){Jl[Zl++]=bh,Jl[Zl++]=wh,wh=t,bh=e}function F2(t,e,r){An[Fn++]=ki,An[Fn++]=Li,An[Fn++]=nl,nl=t;var n=ki;t=Li;var s=32-gs(n)-1;n&=~(1<<s),r+=1;var i=32-gs(e)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,ki=1<<32-gs(e)+s|r<<s|n,Li=i+t}else ki=1<<i|r<<s|n,Li=t}function s0(t){t.return!==null&&(Fo(t,1),F2(t,1,0))}function i0(t){for(;t===wh;)wh=Jl[--Zl],Jl[Zl]=null,bh=Jl[--Zl],Jl[Zl]=null;for(;t===nl;)nl=An[--Fn],An[Fn]=null,Li=An[--Fn],An[Fn]=null,ki=An[--Fn],An[Fn]=null}var vn=null,pn=null,bt=!1,hs=null;function k2(t,e){var r=Vn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function ew(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vn=t,pn=ro(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vn=t,pn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=nl!==null?{id:ki,overflow:Li}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Vn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,vn=t,pn=null,!0):!1;default:return!1}}function Hp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Yp(t){if(bt){var e=pn;if(e){var r=e;if(!ew(t,e)){if(Hp(t))throw Error(ne(418));e=ro(r.nextSibling);var n=vn;e&&ew(t,e)?k2(n,r):(t.flags=t.flags&-4097|2,bt=!1,vn=t)}}else{if(Hp(t))throw Error(ne(418));t.flags=t.flags&-4097|2,bt=!1,vn=t}}}function tw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vn=t}function pf(t){if(t!==vn)return!1;if(!bt)return tw(t),bt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Up(t.type,t.memoizedProps)),e&&(e=pn)){if(Hp(t))throw L2(),Error(ne(418));for(;e;)k2(t,e),e=ro(e.nextSibling)}if(tw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){pn=ro(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}pn=null}}else pn=vn?ro(t.stateNode.nextSibling):null;return!0}function L2(){for(var t=pn;t;)t=ro(t.nextSibling)}function pu(){pn=vn=null,bt=!1}function a0(t){hs===null?hs=[t]:hs.push(t)}var bj=ra.ReactCurrentBatchConfig;function oc(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ne(309));var n=r.stateNode}if(!n)throw Error(ne(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ne(284));if(!r._owner)throw Error(ne(290,t))}return t}function vf(t,e){throw t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function rw(t){var e=t._init;return e(t._payload)}function V2(t){function e(S,P){if(t){var C=S.deletions;C===null?(S.deletions=[P],S.flags|=16):C.push(P)}}function r(S,P){if(!t)return null;for(;P!==null;)e(S,P),P=P.sibling;return null}function n(S,P){for(S=new Map;P!==null;)P.key!==null?S.set(P.key,P):S.set(P.index,P),P=P.sibling;return S}function s(S,P){return S=ao(S,P),S.index=0,S.sibling=null,S}function i(S,P,C){return S.index=C,t?(C=S.alternate,C!==null?(C=C.index,C<P?(S.flags|=2,P):C):(S.flags|=2,P)):(S.flags|=1048576,P)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function c(S,P,C,R){return P===null||P.tag!==6?(P=Fg(C,S.mode,R),P.return=S,P):(P=s(P,C),P.return=S,P)}function d(S,P,C,R){var Y=C.type;return Y===Yl?g(S,P,C.props.children,R,C.key):P!==null&&(P.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===Wa&&rw(Y)===P.type)?(R=s(P,C.props),R.ref=oc(S,P,C),R.return=S,R):(R=eh(C.type,C.key,C.props,null,S.mode,R),R.ref=oc(S,P,C),R.return=S,R)}function h(S,P,C,R){return P===null||P.tag!==4||P.stateNode.containerInfo!==C.containerInfo||P.stateNode.implementation!==C.implementation?(P=kg(C,S.mode,R),P.return=S,P):(P=s(P,C.children||[]),P.return=S,P)}function g(S,P,C,R,Y){return P===null||P.tag!==7?(P=Jo(C,S.mode,R,Y),P.return=S,P):(P=s(P,C),P.return=S,P)}function v(S,P,C){if(typeof P=="string"&&P!==""||typeof P=="number")return P=Fg(""+P,S.mode,C),P.return=S,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case af:return C=eh(P.type,P.key,P.props,null,S.mode,C),C.ref=oc(S,null,P),C.return=S,C;case Hl:return P=kg(P,S.mode,C),P.return=S,P;case Wa:var R=P._init;return v(S,R(P._payload),C)}if(Tc(P)||rc(P))return P=Jo(P,S.mode,C,null),P.return=S,P;vf(S,P)}return null}function y(S,P,C,R){var Y=P!==null?P.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return Y!==null?null:c(S,P,""+C,R);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case af:return C.key===Y?d(S,P,C,R):null;case Hl:return C.key===Y?h(S,P,C,R):null;case Wa:return Y=C._init,y(S,P,Y(C._payload),R)}if(Tc(C)||rc(C))return Y!==null?null:g(S,P,C,R,null);vf(S,C)}return null}function E(S,P,C,R,Y){if(typeof R=="string"&&R!==""||typeof R=="number")return S=S.get(C)||null,c(P,S,""+R,Y);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case af:return S=S.get(R.key===null?C:R.key)||null,d(P,S,R,Y);case Hl:return S=S.get(R.key===null?C:R.key)||null,h(P,S,R,Y);case Wa:var q=R._init;return E(S,P,C,q(R._payload),Y)}if(Tc(R)||rc(R))return S=S.get(C)||null,g(P,S,R,Y,null);vf(P,R)}return null}function N(S,P,C,R){for(var Y=null,q=null,T=P,b=P=0,I=null;T!==null&&b<C.length;b++){T.index>b?(I=T,T=null):I=T.sibling;var j=y(S,T,C[b],R);if(j===null){T===null&&(T=I);break}t&&T&&j.alternate===null&&e(S,T),P=i(j,P,b),q===null?Y=j:q.sibling=j,q=j,T=I}if(b===C.length)return r(S,T),bt&&Fo(S,b),Y;if(T===null){for(;b<C.length;b++)T=v(S,C[b],R),T!==null&&(P=i(T,P,b),q===null?Y=T:q.sibling=T,q=T);return bt&&Fo(S,b),Y}for(T=n(S,T);b<C.length;b++)I=E(T,S,b,C[b],R),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?b:I.key),P=i(I,P,b),q===null?Y=I:q.sibling=I,q=I);return t&&T.forEach(function(M){return e(S,M)}),bt&&Fo(S,b),Y}function D(S,P,C,R){var Y=rc(C);if(typeof Y!="function")throw Error(ne(150));if(C=Y.call(C),C==null)throw Error(ne(151));for(var q=Y=null,T=P,b=P=0,I=null,j=C.next();T!==null&&!j.done;b++,j=C.next()){T.index>b?(I=T,T=null):I=T.sibling;var M=y(S,T,j.value,R);if(M===null){T===null&&(T=I);break}t&&T&&M.alternate===null&&e(S,T),P=i(M,P,b),q===null?Y=M:q.sibling=M,q=M,T=I}if(j.done)return r(S,T),bt&&Fo(S,b),Y;if(T===null){for(;!j.done;b++,j=C.next())j=v(S,j.value,R),j!==null&&(P=i(j,P,b),q===null?Y=j:q.sibling=j,q=j);return bt&&Fo(S,b),Y}for(T=n(S,T);!j.done;b++,j=C.next())j=E(T,S,b,j.value,R),j!==null&&(t&&j.alternate!==null&&T.delete(j.key===null?b:j.key),P=i(j,P,b),q===null?Y=j:q.sibling=j,q=j);return t&&T.forEach(function(V){return e(S,V)}),bt&&Fo(S,b),Y}function k(S,P,C,R){if(typeof C=="object"&&C!==null&&C.type===Yl&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case af:e:{for(var Y=C.key,q=P;q!==null;){if(q.key===Y){if(Y=C.type,Y===Yl){if(q.tag===7){r(S,q.sibling),P=s(q,C.props.children),P.return=S,S=P;break e}}else if(q.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===Wa&&rw(Y)===q.type){r(S,q.sibling),P=s(q,C.props),P.ref=oc(S,q,C),P.return=S,S=P;break e}r(S,q);break}else e(S,q);q=q.sibling}C.type===Yl?(P=Jo(C.props.children,S.mode,R,C.key),P.return=S,S=P):(R=eh(C.type,C.key,C.props,null,S.mode,R),R.ref=oc(S,P,C),R.return=S,S=R)}return o(S);case Hl:e:{for(q=C.key;P!==null;){if(P.key===q)if(P.tag===4&&P.stateNode.containerInfo===C.containerInfo&&P.stateNode.implementation===C.implementation){r(S,P.sibling),P=s(P,C.children||[]),P.return=S,S=P;break e}else{r(S,P);break}else e(S,P);P=P.sibling}P=kg(C,S.mode,R),P.return=S,S=P}return o(S);case Wa:return q=C._init,k(S,P,q(C._payload),R)}if(Tc(C))return N(S,P,C,R);if(rc(C))return D(S,P,C,R);vf(S,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,P!==null&&P.tag===6?(r(S,P.sibling),P=s(P,C),P.return=S,S=P):(r(S,P),P=Fg(C,S.mode,R),P.return=S,S=P),o(S)):r(S,P)}return k}var vu=V2(!0),z2=V2(!1),Eh=wo(null),Dh=null,eu=null,o0=null;function l0(){o0=eu=Dh=null}function u0(t){var e=Eh.current;_t(Eh),t._currentValue=e}function qp(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function lu(t,e){Dh=t,o0=eu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Jr=!0),t.firstContext=null)}function Bn(t){var e=t._currentValue;if(o0!==t)if(t={context:t,memoizedValue:e,next:null},eu===null){if(Dh===null)throw Error(ne(308));eu=t,Dh.dependencies={lanes:0,firstContext:t}}else eu=eu.next=t;return e}var qo=null;function c0(t){qo===null?qo=[t]:qo.push(t)}function U2(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,c0(e)):(r.next=s.next,s.next=r),e.interleaved=r,Gi(t,n)}function Gi(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var $a=!1;function d0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function B2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $i(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function no(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Ke&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Gi(t,r)}return s=n.interleaved,s===null?(e.next=e,c0(n)):(e.next=s.next,s.next=e),n.interleaved=e,Gi(t,r)}function Gf(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Qv(t,r)}}function nw(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Th(t,e,r,n){var s=t.updateQueue;$a=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var d=c,h=d.next;d.next=null,o===null?i=h:o.next=h,o=d;var g=t.alternate;g!==null&&(g=g.updateQueue,c=g.lastBaseUpdate,c!==o&&(c===null?g.firstBaseUpdate=h:c.next=h,g.lastBaseUpdate=d))}if(i!==null){var v=s.baseState;o=0,g=h=d=null,c=i;do{var y=c.lane,E=c.eventTime;if((n&y)===y){g!==null&&(g=g.next={eventTime:E,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var N=t,D=c;switch(y=e,E=r,D.tag){case 1:if(N=D.payload,typeof N=="function"){v=N.call(E,v,y);break e}v=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=D.payload,y=typeof N=="function"?N.call(E,v,y):N,y==null)break e;v=It({},v,y);break e;case 2:$a=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,y=s.effects,y===null?s.effects=[c]:y.push(c))}else E={eventTime:E,lane:y,tag:c.tag,payload:c.payload,callback:c.callback,next:null},g===null?(h=g=E,d=v):g=g.next=E,o|=y;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;y=c,c=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);if(g===null&&(d=v),s.baseState=d,s.firstBaseUpdate=h,s.lastBaseUpdate=g,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);il|=o,t.lanes=o,t.memoizedState=v}}function sw(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ne(191,s));s.call(n)}}}var Sd={},Qs=wo(Sd),od=wo(Sd),ld=wo(Sd);function Go(t){if(t===Sd)throw Error(ne(174));return t}function f0(t,e){switch(mt(ld,e),mt(od,t),mt(Qs,Sd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Pp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Pp(e,t)}_t(Qs),mt(Qs,e)}function yu(){_t(Qs),_t(od),_t(ld)}function W2(t){Go(ld.current);var e=Go(Qs.current),r=Pp(e,t.type);e!==r&&(mt(od,t),mt(Qs,r))}function h0(t){od.current===t&&(_t(Qs),_t(od))}var St=wo(0);function Sh(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Og=[];function m0(){for(var t=0;t<Og.length;t++)Og[t]._workInProgressVersionPrimary=null;Og.length=0}var Kf=ra.ReactCurrentDispatcher,Ng=ra.ReactCurrentBatchConfig,sl=0,Pt=null,qt=null,rr=null,Ph=!1,Lc=!1,ud=0,Ej=0;function xr(){throw Error(ne(321))}function g0(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!ys(t[r],e[r]))return!1;return!0}function p0(t,e,r,n,s,i){if(sl=i,Pt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Kf.current=t===null||t.memoizedState===null?Pj:Ij,t=r(n,s),Lc){i=0;do{if(Lc=!1,ud=0,25<=i)throw Error(ne(301));i+=1,rr=qt=null,e.updateQueue=null,Kf.current=Cj,t=r(n,s)}while(Lc)}if(Kf.current=Ih,e=qt!==null&&qt.next!==null,sl=0,rr=qt=Pt=null,Ph=!1,e)throw Error(ne(300));return t}function v0(){var t=ud!==0;return ud=0,t}function Ys(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rr===null?Pt.memoizedState=rr=t:rr=rr.next=t,rr}function Wn(){if(qt===null){var t=Pt.alternate;t=t!==null?t.memoizedState:null}else t=qt.next;var e=rr===null?Pt.memoizedState:rr.next;if(e!==null)rr=e,qt=t;else{if(t===null)throw Error(ne(310));qt=t,t={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},rr===null?Pt.memoizedState=rr=t:rr=rr.next=t}return rr}function cd(t,e){return typeof e=="function"?e(t):e}function jg(t){var e=Wn(),r=e.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=t;var n=qt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var c=o=null,d=null,h=i;do{var g=h.lane;if((sl&g)===g)d!==null&&(d=d.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),n=h.hasEagerState?h.eagerState:t(n,h.action);else{var v={lane:g,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};d===null?(c=d=v,o=n):d=d.next=v,Pt.lanes|=g,il|=g}h=h.next}while(h!==null&&h!==i);d===null?o=n:d.next=c,ys(n,e.memoizedState)||(Jr=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=d,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,Pt.lanes|=i,il|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Mg(t){var e=Wn(),r=e.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);ys(i,e.memoizedState)||(Jr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function $2(){}function H2(t,e){var r=Pt,n=Wn(),s=e(),i=!ys(n.memoizedState,s);if(i&&(n.memoizedState=s,Jr=!0),n=n.queue,y0(G2.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||rr!==null&&rr.memoizedState.tag&1){if(r.flags|=2048,dd(9,q2.bind(null,r,n,s,e),void 0,null),nr===null)throw Error(ne(349));sl&30||Y2(r,e,s)}return s}function Y2(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Pt.updateQueue,e===null?(e={lastEffect:null,stores:null},Pt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function q2(t,e,r,n){e.value=r,e.getSnapshot=n,K2(e)&&Q2(t)}function G2(t,e,r){return r(function(){K2(e)&&Q2(t)})}function K2(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ys(t,r)}catch{return!0}}function Q2(t){var e=Gi(t,1);e!==null&&ps(e,t,1,-1)}function iw(t){var e=Ys();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cd,lastRenderedState:t},e.queue=t,t=t.dispatch=Sj.bind(null,Pt,t),[e.memoizedState,t]}function dd(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Pt.updateQueue,e===null?(e={lastEffect:null,stores:null},Pt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function X2(){return Wn().memoizedState}function Qf(t,e,r,n){var s=Ys();Pt.flags|=t,s.memoizedState=dd(1|e,r,void 0,n===void 0?null:n)}function cm(t,e,r,n){var s=Wn();n=n===void 0?null:n;var i=void 0;if(qt!==null){var o=qt.memoizedState;if(i=o.destroy,n!==null&&g0(n,o.deps)){s.memoizedState=dd(e,r,i,n);return}}Pt.flags|=t,s.memoizedState=dd(1|e,r,i,n)}function aw(t,e){return Qf(8390656,8,t,e)}function y0(t,e){return cm(2048,8,t,e)}function J2(t,e){return cm(4,2,t,e)}function Z2(t,e){return cm(4,4,t,e)}function eD(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function tD(t,e,r){return r=r!=null?r.concat([t]):null,cm(4,4,eD.bind(null,e,t),r)}function _0(){}function rD(t,e){var r=Wn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&g0(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function nD(t,e){var r=Wn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&g0(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function sD(t,e,r){return sl&21?(ys(r,e)||(r=u2(),Pt.lanes|=r,il|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Jr=!0),t.memoizedState=r)}function Dj(t,e){var r=rt;rt=r!==0&&4>r?r:4,t(!0);var n=Ng.transition;Ng.transition={};try{t(!1),e()}finally{rt=r,Ng.transition=n}}function iD(){return Wn().memoizedState}function Tj(t,e,r){var n=io(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},aD(t))oD(e,r);else if(r=U2(t,e,r,n),r!==null){var s=Lr();ps(r,t,n,s),lD(r,e,n)}}function Sj(t,e,r){var n=io(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(aD(t))oD(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,r);if(s.hasEagerState=!0,s.eagerState=c,ys(c,o)){var d=e.interleaved;d===null?(s.next=s,c0(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}r=U2(t,e,s,n),r!==null&&(s=Lr(),ps(r,t,n,s),lD(r,e,n))}}function aD(t){var e=t.alternate;return t===Pt||e!==null&&e===Pt}function oD(t,e){Lc=Ph=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function lD(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Qv(t,r)}}var Ih={readContext:Bn,useCallback:xr,useContext:xr,useEffect:xr,useImperativeHandle:xr,useInsertionEffect:xr,useLayoutEffect:xr,useMemo:xr,useReducer:xr,useRef:xr,useState:xr,useDebugValue:xr,useDeferredValue:xr,useTransition:xr,useMutableSource:xr,useSyncExternalStore:xr,useId:xr,unstable_isNewReconciler:!1},Pj={readContext:Bn,useCallback:function(t,e){return Ys().memoizedState=[t,e===void 0?null:e],t},useContext:Bn,useEffect:aw,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Qf(4194308,4,eD.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Qf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Qf(4,2,t,e)},useMemo:function(t,e){var r=Ys();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Ys();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Tj.bind(null,Pt,t),[n.memoizedState,t]},useRef:function(t){var e=Ys();return t={current:t},e.memoizedState=t},useState:iw,useDebugValue:_0,useDeferredValue:function(t){return Ys().memoizedState=t},useTransition:function(){var t=iw(!1),e=t[0];return t=Dj.bind(null,t[1]),Ys().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Pt,s=Ys();if(bt){if(r===void 0)throw Error(ne(407));r=r()}else{if(r=e(),nr===null)throw Error(ne(349));sl&30||Y2(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,aw(G2.bind(null,n,i,t),[t]),n.flags|=2048,dd(9,q2.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=Ys(),e=nr.identifierPrefix;if(bt){var r=Li,n=ki;r=(n&~(1<<32-gs(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=ud++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Ej++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ij={readContext:Bn,useCallback:rD,useContext:Bn,useEffect:y0,useImperativeHandle:tD,useInsertionEffect:J2,useLayoutEffect:Z2,useMemo:nD,useReducer:jg,useRef:X2,useState:function(){return jg(cd)},useDebugValue:_0,useDeferredValue:function(t){var e=Wn();return sD(e,qt.memoizedState,t)},useTransition:function(){var t=jg(cd)[0],e=Wn().memoizedState;return[t,e]},useMutableSource:$2,useSyncExternalStore:H2,useId:iD,unstable_isNewReconciler:!1},Cj={readContext:Bn,useCallback:rD,useContext:Bn,useEffect:y0,useImperativeHandle:tD,useInsertionEffect:J2,useLayoutEffect:Z2,useMemo:nD,useReducer:Mg,useRef:X2,useState:function(){return Mg(cd)},useDebugValue:_0,useDeferredValue:function(t){var e=Wn();return qt===null?e.memoizedState=t:sD(e,qt.memoizedState,t)},useTransition:function(){var t=Mg(cd)[0],e=Wn().memoizedState;return[t,e]},useMutableSource:$2,useSyncExternalStore:H2,useId:iD,unstable_isNewReconciler:!1};function ds(t,e){if(t&&t.defaultProps){e=It({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Gp(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:It({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var dm={isMounted:function(t){return(t=t._reactInternals)?hl(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Lr(),s=io(t),i=$i(n,s);i.payload=e,r!=null&&(i.callback=r),e=no(t,i,s),e!==null&&(ps(e,t,s,n),Gf(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Lr(),s=io(t),i=$i(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=no(t,i,s),e!==null&&(ps(e,t,s,n),Gf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Lr(),n=io(t),s=$i(r,n);s.tag=2,e!=null&&(s.callback=e),e=no(t,s,n),e!==null&&(ps(e,t,n,r),Gf(e,t,n))}};function ow(t,e,r,n,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!nd(r,n)||!nd(s,i):!0}function uD(t,e,r){var n=!1,s=mo,i=e.contextType;return typeof i=="object"&&i!==null?i=Bn(i):(s=en(e)?rl:Ir.current,n=e.contextTypes,i=(n=n!=null)?gu(t,s):mo),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dm,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function lw(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&dm.enqueueReplaceState(e,e.state,null)}function Kp(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},d0(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Bn(i):(i=en(e)?rl:Ir.current,s.context=gu(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Gp(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&dm.enqueueReplaceState(s,s.state,null),Th(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function _u(t,e){try{var r="",n=e;do r+=nN(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Rg(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Qp(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Oj=typeof WeakMap=="function"?WeakMap:Map;function cD(t,e,r){r=$i(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Oh||(Oh=!0,av=n),Qp(t,e)},r}function dD(t,e,r){r=$i(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){Qp(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Qp(t,e),typeof n!="function"&&(so===null?so=new Set([this]):so.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function uw(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Oj;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=$j.bind(null,t,e,r),e.then(t,t))}function cw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function dw(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=$i(-1,1),e.tag=2,no(r,e,1))),r.lanes|=1),t)}var Nj=ra.ReactCurrentOwner,Jr=!1;function kr(t,e,r,n){e.child=t===null?z2(e,null,r,n):vu(e,t.child,r,n)}function fw(t,e,r,n,s){r=r.render;var i=e.ref;return lu(e,s),n=p0(t,e,r,n,i,s),r=v0(),t!==null&&!Jr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ki(t,e,s)):(bt&&r&&s0(e),e.flags|=1,kr(t,e,n,s),e.child)}function hw(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!P0(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,fD(t,e,i,n,s)):(t=eh(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:nd,r(o,n)&&t.ref===e.ref)return Ki(t,e,s)}return e.flags|=1,t=ao(i,n),t.ref=e.ref,t.return=e,e.child=t}function fD(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(nd(i,n)&&t.ref===e.ref)if(Jr=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(Jr=!0);else return e.lanes=t.lanes,Ki(t,e,s)}return Xp(t,e,r,n,s)}function hD(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(ru,mn),mn|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,mt(ru,mn),mn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,mt(ru,mn),mn|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,mt(ru,mn),mn|=n;return kr(t,e,s,r),e.child}function mD(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Xp(t,e,r,n,s){var i=en(r)?rl:Ir.current;return i=gu(e,i),lu(e,s),r=p0(t,e,r,n,i,s),n=v0(),t!==null&&!Jr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ki(t,e,s)):(bt&&n&&s0(e),e.flags|=1,kr(t,e,r,s),e.child)}function mw(t,e,r,n,s){if(en(r)){var i=!0;xh(e)}else i=!1;if(lu(e,s),e.stateNode===null)Xf(t,e),uD(e,r,n),Kp(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var d=o.context,h=r.contextType;typeof h=="object"&&h!==null?h=Bn(h):(h=en(r)?rl:Ir.current,h=gu(e,h));var g=r.getDerivedStateFromProps,v=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function";v||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==n||d!==h)&&lw(e,o,n,h),$a=!1;var y=e.memoizedState;o.state=y,Th(e,n,o,s),d=e.memoizedState,c!==n||y!==d||Zr.current||$a?(typeof g=="function"&&(Gp(e,r,g,n),d=e.memoizedState),(c=$a||ow(e,r,c,n,y,d,h))?(v||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=d),o.props=n,o.state=d,o.context=h,n=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,B2(t,e),c=e.memoizedProps,h=e.type===e.elementType?c:ds(e.type,c),o.props=h,v=e.pendingProps,y=o.context,d=r.contextType,typeof d=="object"&&d!==null?d=Bn(d):(d=en(r)?rl:Ir.current,d=gu(e,d));var E=r.getDerivedStateFromProps;(g=typeof E=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==v||y!==d)&&lw(e,o,n,d),$a=!1,y=e.memoizedState,o.state=y,Th(e,n,o,s);var N=e.memoizedState;c!==v||y!==N||Zr.current||$a?(typeof E=="function"&&(Gp(e,r,E,n),N=e.memoizedState),(h=$a||ow(e,r,h,n,y,N,d)||!1)?(g||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,N,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,N,d)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=N),o.props=n,o.state=N,o.context=d,n=h):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),n=!1)}return Jp(t,e,r,n,i,s)}function Jp(t,e,r,n,s,i){mD(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&Zx(e,r,!1),Ki(t,e,i);n=e.stateNode,Nj.current=e;var c=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=vu(e,t.child,null,i),e.child=vu(e,null,c,i)):kr(t,e,c,i),e.memoizedState=n.state,s&&Zx(e,r,!0),e.child}function gD(t){var e=t.stateNode;e.pendingContext?Jx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Jx(t,e.context,!1),f0(t,e.containerInfo)}function gw(t,e,r,n,s){return pu(),a0(s),e.flags|=256,kr(t,e,r,n),e.child}var Zp={dehydrated:null,treeContext:null,retryLane:0};function ev(t){return{baseLanes:t,cachePool:null,transitions:null}}function pD(t,e,r){var n=e.pendingProps,s=St.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),mt(St,s&1),t===null)return Yp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=mm(o,n,0,null),t=Jo(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ev(r),e.memoizedState=Zp,t):x0(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return jj(t,e,o,n,c,s,r);if(i){i=n.fallback,o=e.mode,s=t.child,c=s.sibling;var d={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=d,e.deletions=null):(n=ao(s,d),n.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=ao(c,i):(i=Jo(i,o,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?ev(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~r,e.memoizedState=Zp,n}return i=t.child,t=i.sibling,n=ao(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function x0(t,e){return e=mm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function yf(t,e,r,n){return n!==null&&a0(n),vu(e,t.child,null,r),t=x0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jj(t,e,r,n,s,i,o){if(r)return e.flags&256?(e.flags&=-257,n=Rg(Error(ne(422))),yf(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=mm({mode:"visible",children:n.children},s,0,null),i=Jo(i,s,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&vu(e,t.child,null,o),e.child.memoizedState=ev(o),e.memoizedState=Zp,i);if(!(e.mode&1))return yf(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var c=n.dgst;return n=c,i=Error(ne(419)),n=Rg(i,n,void 0),yf(t,e,o,n)}if(c=(o&t.childLanes)!==0,Jr||c){if(n=nr,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Gi(t,s),ps(n,t,s,-1))}return S0(),n=Rg(Error(ne(421))),yf(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Hj.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,pn=ro(s.nextSibling),vn=e,bt=!0,hs=null,t!==null&&(An[Fn++]=ki,An[Fn++]=Li,An[Fn++]=nl,ki=t.id,Li=t.overflow,nl=e),e=x0(e,n.children),e.flags|=4096,e)}function pw(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),qp(t.return,e,r)}function Ag(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function vD(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(kr(t,e,n.children,r),n=St.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&pw(t,r,e);else if(t.tag===19)pw(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(mt(St,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Sh(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Ag(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Sh(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Ag(e,!0,r,null,i);break;case"together":Ag(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ki(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),il|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,r=ao(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ao(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Mj(t,e,r){switch(e.tag){case 3:gD(e),pu();break;case 5:W2(e);break;case 1:en(e.type)&&xh(e);break;case 4:f0(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;mt(Eh,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(mt(St,St.current&1),e.flags|=128,null):r&e.child.childLanes?pD(t,e,r):(mt(St,St.current&1),t=Ki(t,e,r),t!==null?t.sibling:null);mt(St,St.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return vD(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),mt(St,St.current),n)break;return null;case 22:case 23:return e.lanes=0,hD(t,e,r)}return Ki(t,e,r)}var yD,tv,_D,xD;yD=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};tv=function(){};_D=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Go(Qs.current);var i=null;switch(r){case"input":s=Ep(t,s),n=Ep(t,n),i=[];break;case"select":s=It({},s,{value:void 0}),n=It({},n,{value:void 0}),i=[];break;case"textarea":s=Sp(t,s),n=Sp(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=yh)}Ip(r,n);var o;r=null;for(h in s)if(!n.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var c=s[h];for(o in c)c.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Qc.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in n){var d=n[h];if(c=s!=null?s[h]:void 0,n.hasOwnProperty(h)&&d!==c&&(d!=null||c!=null))if(h==="style")if(c){for(o in c)!c.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in d)d.hasOwnProperty(o)&&c[o]!==d[o]&&(r||(r={}),r[o]=d[o])}else r||(i||(i=[]),i.push(h,r)),r=d;else h==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(i=i||[]).push(h,d)):h==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(h,""+d):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Qc.hasOwnProperty(h)?(d!=null&&h==="onScroll"&&vt("scroll",t),i||c===d||(i=[])):(i=i||[]).push(h,d))}r&&(i=i||[]).push("style",r);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};xD=function(t,e,r,n){r!==n&&(e.flags|=4)};function lc(t,e){if(!bt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function wr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Rj(t,e,r){var n=e.pendingProps;switch(i0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wr(e),null;case 1:return en(e.type)&&_h(),wr(e),null;case 3:return n=e.stateNode,yu(),_t(Zr),_t(Ir),m0(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(pf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hs!==null&&(uv(hs),hs=null))),tv(t,e),wr(e),null;case 5:h0(e);var s=Go(ld.current);if(r=e.type,t!==null&&e.stateNode!=null)_D(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ne(166));return wr(e),null}if(t=Go(Qs.current),pf(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[qs]=e,n[ad]=i,t=(e.mode&1)!==0,r){case"dialog":vt("cancel",n),vt("close",n);break;case"iframe":case"object":case"embed":vt("load",n);break;case"video":case"audio":for(s=0;s<Pc.length;s++)vt(Pc[s],n);break;case"source":vt("error",n);break;case"img":case"image":case"link":vt("error",n),vt("load",n);break;case"details":vt("toggle",n);break;case"input":Tx(n,i),vt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},vt("invalid",n);break;case"textarea":Px(n,i),vt("invalid",n)}Ip(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?n.textContent!==c&&(i.suppressHydrationWarning!==!0&&gf(n.textContent,c,t),s=["children",c]):typeof c=="number"&&n.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&gf(n.textContent,c,t),s=["children",""+c]):Qc.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&vt("scroll",n)}switch(r){case"input":of(n),Sx(n,i,!0);break;case"textarea":of(n),Ix(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=yh)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=GE(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[qs]=e,t[ad]=n,yD(t,e,!1,!1),e.stateNode=t;e:{switch(o=Cp(r,n),r){case"dialog":vt("cancel",t),vt("close",t),s=n;break;case"iframe":case"object":case"embed":vt("load",t),s=n;break;case"video":case"audio":for(s=0;s<Pc.length;s++)vt(Pc[s],t);s=n;break;case"source":vt("error",t),s=n;break;case"img":case"image":case"link":vt("error",t),vt("load",t),s=n;break;case"details":vt("toggle",t),s=n;break;case"input":Tx(t,n),s=Ep(t,n),vt("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=It({},n,{value:void 0}),vt("invalid",t);break;case"textarea":Px(t,n),s=Sp(t,n),vt("invalid",t);break;default:s=n}Ip(r,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var d=c[i];i==="style"?XE(t,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&KE(t,d)):i==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&Xc(t,d):typeof d=="number"&&Xc(t,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Qc.hasOwnProperty(i)?d!=null&&i==="onScroll"&&vt("scroll",t):d!=null&&$v(t,i,d,o))}switch(r){case"input":of(t),Sx(t,n,!1);break;case"textarea":of(t),Ix(t);break;case"option":n.value!=null&&t.setAttribute("value",""+ho(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?su(t,!!n.multiple,i,!1):n.defaultValue!=null&&su(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=yh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wr(e),null;case 6:if(t&&e.stateNode!=null)xD(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ne(166));if(r=Go(ld.current),Go(Qs.current),pf(e)){if(n=e.stateNode,r=e.memoizedProps,n[qs]=e,(i=n.nodeValue!==r)&&(t=vn,t!==null))switch(t.tag){case 3:gf(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gf(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[qs]=e,e.stateNode=n}return wr(e),null;case 13:if(_t(St),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(bt&&pn!==null&&e.mode&1&&!(e.flags&128))L2(),pu(),e.flags|=98560,i=!1;else if(i=pf(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(ne(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ne(317));i[qs]=e}else pu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wr(e),i=!1}else hs!==null&&(uv(hs),hs=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||St.current&1?Kt===0&&(Kt=3):S0())),e.updateQueue!==null&&(e.flags|=4),wr(e),null);case 4:return yu(),tv(t,e),t===null&&sd(e.stateNode.containerInfo),wr(e),null;case 10:return u0(e.type._context),wr(e),null;case 17:return en(e.type)&&_h(),wr(e),null;case 19:if(_t(St),i=e.memoizedState,i===null)return wr(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)lc(i,!1);else{if(Kt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Sh(t),o!==null){for(e.flags|=128,lc(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return mt(St,St.current&1|2),e.child}t=t.sibling}i.tail!==null&&zt()>xu&&(e.flags|=128,n=!0,lc(i,!1),e.lanes=4194304)}else{if(!n)if(t=Sh(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),lc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!bt)return wr(e),null}else 2*zt()-i.renderingStartTime>xu&&r!==1073741824&&(e.flags|=128,n=!0,lc(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(r=i.last,r!==null?r.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=zt(),e.sibling=null,r=St.current,mt(St,n?r&1|2:r&1),e):(wr(e),null);case 22:case 23:return T0(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?mn&1073741824&&(wr(e),e.subtreeFlags&6&&(e.flags|=8192)):wr(e),null;case 24:return null;case 25:return null}throw Error(ne(156,e.tag))}function Aj(t,e){switch(i0(e),e.tag){case 1:return en(e.type)&&_h(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yu(),_t(Zr),_t(Ir),m0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return h0(e),null;case 13:if(_t(St),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));pu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _t(St),null;case 4:return yu(),null;case 10:return u0(e.type._context),null;case 22:case 23:return T0(),null;case 24:return null;default:return null}}var _f=!1,Sr=!1,Fj=typeof WeakSet=="function"?WeakSet:Set,me=null;function tu(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Mt(t,e,n)}else r.current=null}function rv(t,e,r){try{r()}catch(n){Mt(t,e,n)}}var vw=!1;function kj(t,e){if(Vp=gh,t=T2(),n0(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,c=-1,d=-1,h=0,g=0,v=t,y=null;t:for(;;){for(var E;v!==r||s!==0&&v.nodeType!==3||(c=o+s),v!==i||n!==0&&v.nodeType!==3||(d=o+n),v.nodeType===3&&(o+=v.nodeValue.length),(E=v.firstChild)!==null;)y=v,v=E;for(;;){if(v===t)break t;if(y===r&&++h===s&&(c=o),y===i&&++g===n&&(d=o),(E=v.nextSibling)!==null)break;v=y,y=v.parentNode}v=E}r=c===-1||d===-1?null:{start:c,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(zp={focusedElem:t,selectionRange:r},gh=!1,me=e;me!==null;)if(e=me,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,me=t;else for(;me!==null;){e=me;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var D=N.memoizedProps,k=N.memoizedState,S=e.stateNode,P=S.getSnapshotBeforeUpdate(e.elementType===e.type?D:ds(e.type,D),k);S.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(R){Mt(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,me=t;break}me=e.return}return N=vw,vw=!1,N}function Vc(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&rv(e,r,i)}s=s.next}while(s!==n)}}function fm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function nv(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function wD(t){var e=t.alternate;e!==null&&(t.alternate=null,wD(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qs],delete e[ad],delete e[Wp],delete e[_j],delete e[xj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function bD(t){return t.tag===5||t.tag===3||t.tag===4}function yw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bD(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sv(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=yh));else if(n!==4&&(t=t.child,t!==null))for(sv(t,e,r),t=t.sibling;t!==null;)sv(t,e,r),t=t.sibling}function iv(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(iv(t,e,r),t=t.sibling;t!==null;)iv(t,e,r),t=t.sibling}var lr=null,fs=!1;function Fa(t,e,r){for(r=r.child;r!==null;)ED(t,e,r),r=r.sibling}function ED(t,e,r){if(Ks&&typeof Ks.onCommitFiberUnmount=="function")try{Ks.onCommitFiberUnmount(sm,r)}catch{}switch(r.tag){case 5:Sr||tu(r,e);case 6:var n=lr,s=fs;lr=null,Fa(t,e,r),lr=n,fs=s,lr!==null&&(fs?(t=lr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):lr.removeChild(r.stateNode));break;case 18:lr!==null&&(fs?(t=lr,r=r.stateNode,t.nodeType===8?Ig(t.parentNode,r):t.nodeType===1&&Ig(t,r),td(t)):Ig(lr,r.stateNode));break;case 4:n=lr,s=fs,lr=r.stateNode.containerInfo,fs=!0,Fa(t,e,r),lr=n,fs=s;break;case 0:case 11:case 14:case 15:if(!Sr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&rv(r,e,o),s=s.next}while(s!==n)}Fa(t,e,r);break;case 1:if(!Sr&&(tu(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(c){Mt(r,e,c)}Fa(t,e,r);break;case 21:Fa(t,e,r);break;case 22:r.mode&1?(Sr=(n=Sr)||r.memoizedState!==null,Fa(t,e,r),Sr=n):Fa(t,e,r);break;default:Fa(t,e,r)}}function _w(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Fj),e.forEach(function(n){var s=Yj.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function cs(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:lr=c.stateNode,fs=!1;break e;case 3:lr=c.stateNode.containerInfo,fs=!0;break e;case 4:lr=c.stateNode.containerInfo,fs=!0;break e}c=c.return}if(lr===null)throw Error(ne(160));ED(i,o,s),lr=null,fs=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(h){Mt(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)DD(e,t),e=e.sibling}function DD(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(cs(e,t),Ws(t),n&4){try{Vc(3,t,t.return),fm(3,t)}catch(D){Mt(t,t.return,D)}try{Vc(5,t,t.return)}catch(D){Mt(t,t.return,D)}}break;case 1:cs(e,t),Ws(t),n&512&&r!==null&&tu(r,r.return);break;case 5:if(cs(e,t),Ws(t),n&512&&r!==null&&tu(r,r.return),t.flags&32){var s=t.stateNode;try{Xc(s,"")}catch(D){Mt(t,t.return,D)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=r!==null?r.memoizedProps:i,c=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&YE(s,i),Cp(c,o);var h=Cp(c,i);for(o=0;o<d.length;o+=2){var g=d[o],v=d[o+1];g==="style"?XE(s,v):g==="dangerouslySetInnerHTML"?KE(s,v):g==="children"?Xc(s,v):$v(s,g,v,h)}switch(c){case"input":Dp(s,i);break;case"textarea":qE(s,i);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var E=i.value;E!=null?su(s,!!i.multiple,E,!1):y!==!!i.multiple&&(i.defaultValue!=null?su(s,!!i.multiple,i.defaultValue,!0):su(s,!!i.multiple,i.multiple?[]:"",!1))}s[ad]=i}catch(D){Mt(t,t.return,D)}}break;case 6:if(cs(e,t),Ws(t),n&4){if(t.stateNode===null)throw Error(ne(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(D){Mt(t,t.return,D)}}break;case 3:if(cs(e,t),Ws(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{td(e.containerInfo)}catch(D){Mt(t,t.return,D)}break;case 4:cs(e,t),Ws(t);break;case 13:cs(e,t),Ws(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(E0=zt())),n&4&&_w(t);break;case 22:if(g=r!==null&&r.memoizedState!==null,t.mode&1?(Sr=(h=Sr)||g,cs(e,t),Sr=h):cs(e,t),Ws(t),n&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!g&&t.mode&1)for(me=t,g=t.child;g!==null;){for(v=me=g;me!==null;){switch(y=me,E=y.child,y.tag){case 0:case 11:case 14:case 15:Vc(4,y,y.return);break;case 1:tu(y,y.return);var N=y.stateNode;if(typeof N.componentWillUnmount=="function"){n=y,r=y.return;try{e=n,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(D){Mt(n,r,D)}}break;case 5:tu(y,y.return);break;case 22:if(y.memoizedState!==null){ww(v);continue}}E!==null?(E.return=y,me=E):ww(v)}g=g.sibling}e:for(g=null,v=t;;){if(v.tag===5){if(g===null){g=v;try{s=v.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=v.stateNode,d=v.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=QE("display",o))}catch(D){Mt(t,t.return,D)}}}else if(v.tag===6){if(g===null)try{v.stateNode.nodeValue=h?"":v.memoizedProps}catch(D){Mt(t,t.return,D)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;g===v&&(g=null),v=v.return}g===v&&(g=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:cs(e,t),Ws(t),n&4&&_w(t);break;case 21:break;default:cs(e,t),Ws(t)}}function Ws(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(bD(r)){var n=r;break e}r=r.return}throw Error(ne(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Xc(s,""),n.flags&=-33);var i=yw(t);iv(t,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,c=yw(t);sv(t,c,o);break;default:throw Error(ne(161))}}catch(d){Mt(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Lj(t,e,r){me=t,TD(t)}function TD(t,e,r){for(var n=(t.mode&1)!==0;me!==null;){var s=me,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||_f;if(!o){var c=s.alternate,d=c!==null&&c.memoizedState!==null||Sr;c=_f;var h=Sr;if(_f=o,(Sr=d)&&!h)for(me=s;me!==null;)o=me,d=o.child,o.tag===22&&o.memoizedState!==null?bw(s):d!==null?(d.return=o,me=d):bw(s);for(;i!==null;)me=i,TD(i),i=i.sibling;me=s,_f=c,Sr=h}xw(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,me=i):xw(t)}}function xw(t){for(;me!==null;){var e=me;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Sr||fm(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Sr)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:ds(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&sw(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}sw(e,o,r)}break;case 5:var c=e.stateNode;if(r===null&&e.flags&4){r=c;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var g=h.memoizedState;if(g!==null){var v=g.dehydrated;v!==null&&td(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}Sr||e.flags&512&&nv(e)}catch(y){Mt(e,e.return,y)}}if(e===t){me=null;break}if(r=e.sibling,r!==null){r.return=e.return,me=r;break}me=e.return}}function ww(t){for(;me!==null;){var e=me;if(e===t){me=null;break}var r=e.sibling;if(r!==null){r.return=e.return,me=r;break}me=e.return}}function bw(t){for(;me!==null;){var e=me;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{fm(4,e)}catch(d){Mt(e,r,d)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(d){Mt(e,s,d)}}var i=e.return;try{nv(e)}catch(d){Mt(e,i,d)}break;case 5:var o=e.return;try{nv(e)}catch(d){Mt(e,o,d)}}}catch(d){Mt(e,e.return,d)}if(e===t){me=null;break}var c=e.sibling;if(c!==null){c.return=e.return,me=c;break}me=e.return}}var Vj=Math.ceil,Ch=ra.ReactCurrentDispatcher,w0=ra.ReactCurrentOwner,Un=ra.ReactCurrentBatchConfig,Ke=0,nr=null,$t=null,dr=0,mn=0,ru=wo(0),Kt=0,fd=null,il=0,hm=0,b0=0,zc=null,Xr=null,E0=0,xu=1/0,Ni=null,Oh=!1,av=null,so=null,xf=!1,Xa=null,Nh=0,Uc=0,ov=null,Jf=-1,Zf=0;function Lr(){return Ke&6?zt():Jf!==-1?Jf:Jf=zt()}function io(t){return t.mode&1?Ke&2&&dr!==0?dr&-dr:bj.transition!==null?(Zf===0&&(Zf=u2()),Zf):(t=rt,t!==0||(t=window.event,t=t===void 0?16:p2(t.type)),t):1}function ps(t,e,r,n){if(50<Uc)throw Uc=0,ov=null,Error(ne(185));Ed(t,r,n),(!(Ke&2)||t!==nr)&&(t===nr&&(!(Ke&2)&&(hm|=r),Kt===4&&Ya(t,dr)),tn(t,n),r===1&&Ke===0&&!(e.mode&1)&&(xu=zt()+500,um&&bo()))}function tn(t,e){var r=t.callbackNode;bN(t,e);var n=mh(t,t===nr?dr:0);if(n===0)r!==null&&Nx(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Nx(r),e===1)t.tag===0?wj(Ew.bind(null,t)):A2(Ew.bind(null,t)),vj(function(){!(Ke&6)&&bo()}),r=null;else{switch(c2(n)){case 1:r=Kv;break;case 4:r=o2;break;case 16:r=hh;break;case 536870912:r=l2;break;default:r=hh}r=MD(r,SD.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function SD(t,e){if(Jf=-1,Zf=0,Ke&6)throw Error(ne(327));var r=t.callbackNode;if(uu()&&t.callbackNode!==r)return null;var n=mh(t,t===nr?dr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=jh(t,n);else{e=n;var s=Ke;Ke|=2;var i=ID();(nr!==t||dr!==e)&&(Ni=null,xu=zt()+500,Xo(t,e));do try{Bj();break}catch(c){PD(t,c)}while(!0);l0(),Ch.current=i,Ke=s,$t!==null?e=0:(nr=null,dr=0,e=Kt)}if(e!==0){if(e===2&&(s=Rp(t),s!==0&&(n=s,e=lv(t,s))),e===1)throw r=fd,Xo(t,0),Ya(t,n),tn(t,zt()),r;if(e===6)Ya(t,n);else{if(s=t.current.alternate,!(n&30)&&!zj(s)&&(e=jh(t,n),e===2&&(i=Rp(t),i!==0&&(n=i,e=lv(t,i))),e===1))throw r=fd,Xo(t,0),Ya(t,n),tn(t,zt()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(ne(345));case 2:ko(t,Xr,Ni);break;case 3:if(Ya(t,n),(n&130023424)===n&&(e=E0+500-zt(),10<e)){if(mh(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Lr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Bp(ko.bind(null,t,Xr,Ni),e);break}ko(t,Xr,Ni);break;case 4:if(Ya(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-gs(n);i=1<<o,o=e[o],o>s&&(s=o),n&=~i}if(n=s,n=zt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Vj(n/1960))-n,10<n){t.timeoutHandle=Bp(ko.bind(null,t,Xr,Ni),n);break}ko(t,Xr,Ni);break;case 5:ko(t,Xr,Ni);break;default:throw Error(ne(329))}}}return tn(t,zt()),t.callbackNode===r?SD.bind(null,t):null}function lv(t,e){var r=zc;return t.current.memoizedState.isDehydrated&&(Xo(t,e).flags|=256),t=jh(t,e),t!==2&&(e=Xr,Xr=r,e!==null&&uv(e)),t}function uv(t){Xr===null?Xr=t:Xr.push.apply(Xr,t)}function zj(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!ys(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ya(t,e){for(e&=~b0,e&=~hm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-gs(e),n=1<<r;t[r]=-1,e&=~n}}function Ew(t){if(Ke&6)throw Error(ne(327));uu();var e=mh(t,0);if(!(e&1))return tn(t,zt()),null;var r=jh(t,e);if(t.tag!==0&&r===2){var n=Rp(t);n!==0&&(e=n,r=lv(t,n))}if(r===1)throw r=fd,Xo(t,0),Ya(t,e),tn(t,zt()),r;if(r===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ko(t,Xr,Ni),tn(t,zt()),null}function D0(t,e){var r=Ke;Ke|=1;try{return t(e)}finally{Ke=r,Ke===0&&(xu=zt()+500,um&&bo())}}function al(t){Xa!==null&&Xa.tag===0&&!(Ke&6)&&uu();var e=Ke;Ke|=1;var r=Un.transition,n=rt;try{if(Un.transition=null,rt=1,t)return t()}finally{rt=n,Un.transition=r,Ke=e,!(Ke&6)&&bo()}}function T0(){mn=ru.current,_t(ru)}function Xo(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,pj(r)),$t!==null)for(r=$t.return;r!==null;){var n=r;switch(i0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&_h();break;case 3:yu(),_t(Zr),_t(Ir),m0();break;case 5:h0(n);break;case 4:yu();break;case 13:_t(St);break;case 19:_t(St);break;case 10:u0(n.type._context);break;case 22:case 23:T0()}r=r.return}if(nr=t,$t=t=ao(t.current,null),dr=mn=e,Kt=0,fd=null,b0=hm=il=0,Xr=zc=null,qo!==null){for(e=0;e<qo.length;e++)if(r=qo[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}qo=null}return t}function PD(t,e){do{var r=$t;try{if(l0(),Kf.current=Ih,Ph){for(var n=Pt.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ph=!1}if(sl=0,rr=qt=Pt=null,Lc=!1,ud=0,w0.current=null,r===null||r.return===null){Kt=1,fd=e,$t=null;break}e:{var i=t,o=r.return,c=r,d=e;if(e=dr,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var h=d,g=c,v=g.tag;if(!(g.mode&1)&&(v===0||v===11||v===15)){var y=g.alternate;y?(g.updateQueue=y.updateQueue,g.memoizedState=y.memoizedState,g.lanes=y.lanes):(g.updateQueue=null,g.memoizedState=null)}var E=cw(o);if(E!==null){E.flags&=-257,dw(E,o,c,i,e),E.mode&1&&uw(i,h,e),e=E,d=h;var N=e.updateQueue;if(N===null){var D=new Set;D.add(d),e.updateQueue=D}else N.add(d);break e}else{if(!(e&1)){uw(i,h,e),S0();break e}d=Error(ne(426))}}else if(bt&&c.mode&1){var k=cw(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),dw(k,o,c,i,e),a0(_u(d,c));break e}}i=d=_u(d,c),Kt!==4&&(Kt=2),zc===null?zc=[i]:zc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var S=cD(i,d,e);nw(i,S);break e;case 1:c=d;var P=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof P.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(so===null||!so.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=dD(i,c,e);nw(i,R);break e}}i=i.return}while(i!==null)}OD(r)}catch(Y){e=Y,$t===r&&r!==null&&($t=r=r.return);continue}break}while(!0)}function ID(){var t=Ch.current;return Ch.current=Ih,t===null?Ih:t}function S0(){(Kt===0||Kt===3||Kt===2)&&(Kt=4),nr===null||!(il&268435455)&&!(hm&268435455)||Ya(nr,dr)}function jh(t,e){var r=Ke;Ke|=2;var n=ID();(nr!==t||dr!==e)&&(Ni=null,Xo(t,e));do try{Uj();break}catch(s){PD(t,s)}while(!0);if(l0(),Ke=r,Ch.current=n,$t!==null)throw Error(ne(261));return nr=null,dr=0,Kt}function Uj(){for(;$t!==null;)CD($t)}function Bj(){for(;$t!==null&&!hN();)CD($t)}function CD(t){var e=jD(t.alternate,t,mn);t.memoizedProps=t.pendingProps,e===null?OD(t):$t=e,w0.current=null}function OD(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Aj(r,e),r!==null){r.flags&=32767,$t=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Kt=6,$t=null;return}}else if(r=Rj(r,e,mn),r!==null){$t=r;return}if(e=e.sibling,e!==null){$t=e;return}$t=e=t}while(e!==null);Kt===0&&(Kt=5)}function ko(t,e,r){var n=rt,s=Un.transition;try{Un.transition=null,rt=1,Wj(t,e,r,n)}finally{Un.transition=s,rt=n}return null}function Wj(t,e,r,n){do uu();while(Xa!==null);if(Ke&6)throw Error(ne(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(EN(t,i),t===nr&&($t=nr=null,dr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||xf||(xf=!0,MD(hh,function(){return uu(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Un.transition,Un.transition=null;var o=rt;rt=1;var c=Ke;Ke|=4,w0.current=null,kj(t,r),DD(r,t),uj(zp),gh=!!Vp,zp=Vp=null,t.current=r,Lj(r),mN(),Ke=c,rt=o,Un.transition=i}else t.current=r;if(xf&&(xf=!1,Xa=t,Nh=s),i=t.pendingLanes,i===0&&(so=null),vN(r.stateNode),tn(t,zt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Oh)throw Oh=!1,t=av,av=null,t;return Nh&1&&t.tag!==0&&uu(),i=t.pendingLanes,i&1?t===ov?Uc++:(Uc=0,ov=t):Uc=0,bo(),null}function uu(){if(Xa!==null){var t=c2(Nh),e=Un.transition,r=rt;try{if(Un.transition=null,rt=16>t?16:t,Xa===null)var n=!1;else{if(t=Xa,Xa=null,Nh=0,Ke&6)throw Error(ne(331));var s=Ke;for(Ke|=4,me=t.current;me!==null;){var i=me,o=i.child;if(me.flags&16){var c=i.deletions;if(c!==null){for(var d=0;d<c.length;d++){var h=c[d];for(me=h;me!==null;){var g=me;switch(g.tag){case 0:case 11:case 15:Vc(8,g,i)}var v=g.child;if(v!==null)v.return=g,me=v;else for(;me!==null;){g=me;var y=g.sibling,E=g.return;if(wD(g),g===h){me=null;break}if(y!==null){y.return=E,me=y;break}me=E}}}var N=i.alternate;if(N!==null){var D=N.child;if(D!==null){N.child=null;do{var k=D.sibling;D.sibling=null,D=k}while(D!==null)}}me=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,me=o;else e:for(;me!==null;){if(i=me,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Vc(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,me=S;break e}me=i.return}}var P=t.current;for(me=P;me!==null;){o=me;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,me=C;else e:for(o=P;me!==null;){if(c=me,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:fm(9,c)}}catch(Y){Mt(c,c.return,Y)}if(c===o){me=null;break e}var R=c.sibling;if(R!==null){R.return=c.return,me=R;break e}me=c.return}}if(Ke=s,bo(),Ks&&typeof Ks.onPostCommitFiberRoot=="function")try{Ks.onPostCommitFiberRoot(sm,t)}catch{}n=!0}return n}finally{rt=r,Un.transition=e}}return!1}function Dw(t,e,r){e=_u(r,e),e=cD(t,e,1),t=no(t,e,1),e=Lr(),t!==null&&(Ed(t,1,e),tn(t,e))}function Mt(t,e,r){if(t.tag===3)Dw(t,t,r);else for(;e!==null;){if(e.tag===3){Dw(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(so===null||!so.has(n))){t=_u(r,t),t=dD(e,t,1),e=no(e,t,1),t=Lr(),e!==null&&(Ed(e,1,t),tn(e,t));break}}e=e.return}}function $j(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Lr(),t.pingedLanes|=t.suspendedLanes&r,nr===t&&(dr&r)===r&&(Kt===4||Kt===3&&(dr&130023424)===dr&&500>zt()-E0?Xo(t,0):b0|=r),tn(t,e)}function ND(t,e){e===0&&(t.mode&1?(e=cf,cf<<=1,!(cf&130023424)&&(cf=4194304)):e=1);var r=Lr();t=Gi(t,e),t!==null&&(Ed(t,e,r),tn(t,r))}function Hj(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),ND(t,r)}function Yj(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ne(314))}n!==null&&n.delete(e),ND(t,r)}var jD;jD=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Zr.current)Jr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Jr=!1,Mj(t,e,r);Jr=!!(t.flags&131072)}else Jr=!1,bt&&e.flags&1048576&&F2(e,bh,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Xf(t,e),t=e.pendingProps;var s=gu(e,Ir.current);lu(e,r),s=p0(null,e,n,t,s,r);var i=v0();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,en(n)?(i=!0,xh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,d0(e),s.updater=dm,e.stateNode=s,s._reactInternals=e,Kp(e,n,t,r),e=Jp(null,e,n,!0,i,r)):(e.tag=0,bt&&i&&s0(e),kr(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Xf(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=Gj(n),t=ds(n,t),s){case 0:e=Xp(null,e,n,t,r);break e;case 1:e=mw(null,e,n,t,r);break e;case 11:e=fw(null,e,n,t,r);break e;case 14:e=hw(null,e,n,ds(n.type,t),r);break e}throw Error(ne(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:ds(n,s),Xp(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:ds(n,s),mw(t,e,n,s,r);case 3:e:{if(gD(e),t===null)throw Error(ne(387));n=e.pendingProps,i=e.memoizedState,s=i.element,B2(t,e),Th(e,n,null,r);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=_u(Error(ne(423)),e),e=gw(t,e,n,r,s);break e}else if(n!==s){s=_u(Error(ne(424)),e),e=gw(t,e,n,r,s);break e}else for(pn=ro(e.stateNode.containerInfo.firstChild),vn=e,bt=!0,hs=null,r=z2(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(pu(),n===s){e=Ki(t,e,r);break e}kr(t,e,n,r)}e=e.child}return e;case 5:return W2(e),t===null&&Yp(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Up(n,s)?o=null:i!==null&&Up(n,i)&&(e.flags|=32),mD(t,e),kr(t,e,o,r),e.child;case 6:return t===null&&Yp(e),null;case 13:return pD(t,e,r);case 4:return f0(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=vu(e,null,n,r):kr(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:ds(n,s),fw(t,e,n,s,r);case 7:return kr(t,e,e.pendingProps,r),e.child;case 8:return kr(t,e,e.pendingProps.children,r),e.child;case 12:return kr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,mt(Eh,n._currentValue),n._currentValue=o,i!==null)if(ys(i.value,o)){if(i.children===s.children&&!Zr.current){e=Ki(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var d=c.firstContext;d!==null;){if(d.context===n){if(i.tag===1){d=$i(-1,r&-r),d.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var g=h.pending;g===null?d.next=d:(d.next=g.next,g.next=d),h.pending=d}}i.lanes|=r,d=i.alternate,d!==null&&(d.lanes|=r),qp(i.return,r,e),c.lanes|=r;break}d=d.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ne(341));o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),qp(o,r,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}kr(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,lu(e,r),s=Bn(s),n=n(s),e.flags|=1,kr(t,e,n,r),e.child;case 14:return n=e.type,s=ds(n,e.pendingProps),s=ds(n.type,s),hw(t,e,n,s,r);case 15:return fD(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:ds(n,s),Xf(t,e),e.tag=1,en(n)?(t=!0,xh(e)):t=!1,lu(e,r),uD(e,n,s),Kp(e,n,s,r),Jp(null,e,n,!0,t,r);case 19:return vD(t,e,r);case 22:return hD(t,e,r)}throw Error(ne(156,e.tag))};function MD(t,e){return a2(t,e)}function qj(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(t,e,r,n){return new qj(t,e,r,n)}function P0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Gj(t){if(typeof t=="function")return P0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yv)return 11;if(t===qv)return 14}return 2}function ao(t,e){var r=t.alternate;return r===null?(r=Vn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function eh(t,e,r,n,s,i){var o=2;if(n=t,typeof t=="function")P0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Yl:return Jo(r.children,s,i,e);case Hv:o=8,s|=8;break;case _p:return t=Vn(12,r,e,s|2),t.elementType=_p,t.lanes=i,t;case xp:return t=Vn(13,r,e,s),t.elementType=xp,t.lanes=i,t;case wp:return t=Vn(19,r,e,s),t.elementType=wp,t.lanes=i,t;case WE:return mm(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case UE:o=10;break e;case BE:o=9;break e;case Yv:o=11;break e;case qv:o=14;break e;case Wa:o=16,n=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return e=Vn(o,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function Jo(t,e,r,n){return t=Vn(7,t,n,e),t.lanes=r,t}function mm(t,e,r,n){return t=Vn(22,t,n,e),t.elementType=WE,t.lanes=r,t.stateNode={isHidden:!1},t}function Fg(t,e,r){return t=Vn(6,t,null,e),t.lanes=r,t}function kg(t,e,r){return e=Vn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Kj(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vg(0),this.expirationTimes=vg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vg(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function I0(t,e,r,n,s,i,o,c,d){return t=new Kj(t,e,r,c,d),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Vn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},d0(i),t}function Qj(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hl,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function RD(t){if(!t)return mo;t=t._reactInternals;e:{if(hl(t)!==t||t.tag!==1)throw Error(ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(en(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ne(171))}if(t.tag===1){var r=t.type;if(en(r))return R2(t,r,e)}return e}function AD(t,e,r,n,s,i,o,c,d){return t=I0(r,n,!0,t,s,i,o,c,d),t.context=RD(null),r=t.current,n=Lr(),s=io(r),i=$i(n,s),i.callback=e??null,no(r,i,s),t.current.lanes=s,Ed(t,s,n),tn(t,n),t}function gm(t,e,r,n){var s=e.current,i=Lr(),o=io(s);return r=RD(r),e.context===null?e.context=r:e.pendingContext=r,e=$i(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=no(s,e,o),t!==null&&(ps(t,s,o,i),Gf(t,s,o)),o}function Mh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Tw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function C0(t,e){Tw(t,e),(t=t.alternate)&&Tw(t,e)}function Xj(){return null}var FD=typeof reportError=="function"?reportError:function(t){console.error(t)};function O0(t){this._internalRoot=t}pm.prototype.render=O0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));gm(t,e,null,null)};pm.prototype.unmount=O0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;al(function(){gm(null,t,null,null)}),e[qi]=null}};function pm(t){this._internalRoot=t}pm.prototype.unstable_scheduleHydration=function(t){if(t){var e=h2();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ha.length&&e!==0&&e<Ha[r].priority;r++);Ha.splice(r,0,t),r===0&&g2(t)}};function N0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Sw(){}function Jj(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var h=Mh(o);i.call(h)}}var o=AD(e,n,t,0,null,!1,!1,"",Sw);return t._reactRootContainer=o,t[qi]=o.current,sd(t.nodeType===8?t.parentNode:t),al(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var c=n;n=function(){var h=Mh(d);c.call(h)}}var d=I0(t,0,!1,null,null,!1,!1,"",Sw);return t._reactRootContainer=d,t[qi]=d.current,sd(t.nodeType===8?t.parentNode:t),al(function(){gm(e,d,r,n)}),d}function ym(t,e,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var d=Mh(o);c.call(d)}}gm(e,o,t,s)}else o=Jj(r,e,t,s,n);return Mh(o)}d2=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Sc(e.pendingLanes);r!==0&&(Qv(e,r|1),tn(e,zt()),!(Ke&6)&&(xu=zt()+500,bo()))}break;case 13:al(function(){var n=Gi(t,1);if(n!==null){var s=Lr();ps(n,t,1,s)}}),C0(t,1)}};Xv=function(t){if(t.tag===13){var e=Gi(t,134217728);if(e!==null){var r=Lr();ps(e,t,134217728,r)}C0(t,134217728)}};f2=function(t){if(t.tag===13){var e=io(t),r=Gi(t,e);if(r!==null){var n=Lr();ps(r,t,e,n)}C0(t,e)}};h2=function(){return rt};m2=function(t,e){var r=rt;try{return rt=t,e()}finally{rt=r}};Np=function(t,e,r){switch(e){case"input":if(Dp(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=lm(n);if(!s)throw Error(ne(90));HE(n),Dp(n,s)}}}break;case"textarea":qE(t,r);break;case"select":e=r.value,e!=null&&su(t,!!r.multiple,e,!1)}};e2=D0;t2=al;var Zj={usingClientEntryPoint:!1,Events:[Td,Ql,lm,JE,ZE,D0]},uc={findFiberByHostInstance:Yo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eM={bundleType:uc.bundleType,version:uc.version,rendererPackageName:uc.rendererPackageName,rendererConfig:uc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=s2(t),t===null?null:t.stateNode},findFiberByHostInstance:uc.findFiberByHostInstance||Xj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wf.isDisabled&&wf.supportsFiber)try{sm=wf.inject(eM),Ks=wf}catch{}}wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zj;wn.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!N0(e))throw Error(ne(200));return Qj(t,e,null,r)};wn.createRoot=function(t,e){if(!N0(t))throw Error(ne(299));var r=!1,n="",s=FD;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=I0(t,1,!1,null,null,r,!1,n,s),t[qi]=e.current,sd(t.nodeType===8?t.parentNode:t),new O0(e)};wn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=s2(e),t=t===null?null:t.stateNode,t};wn.flushSync=function(t){return al(t)};wn.hydrate=function(t,e,r){if(!vm(e))throw Error(ne(200));return ym(null,t,e,!0,r)};wn.hydrateRoot=function(t,e,r){if(!N0(t))throw Error(ne(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=FD;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=AD(e,null,t,1,r??null,s,!1,i,o),t[qi]=e.current,sd(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new pm(e)};wn.render=function(t,e,r){if(!vm(e))throw Error(ne(200));return ym(null,t,e,!1,r)};wn.unmountComponentAtNode=function(t){if(!vm(t))throw Error(ne(40));return t._reactRootContainer?(al(function(){ym(null,null,t,!1,function(){t._reactRootContainer=null,t[qi]=null})}),!0):!1};wn.unstable_batchedUpdates=D0;wn.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!vm(r))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return ym(t,e,r,!1,n)};wn.version="18.3.1-next-f1338f8080-20240426";function kD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kD)}catch(t){console.error(t)}}kD(),kE.exports=wn;var tM=kE.exports,Pw=tM;vp.createRoot=Pw.createRoot,vp.hydrateRoot=Pw.hydrateRoot;var j0={},Pd={},LD={exports:{}},rM="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",nM=rM,sM=nM;function VD(){}function zD(){}zD.resetWarningCache=VD;var iM=function(){function t(n,s,i,o,c,d){if(d!==sM){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:zD,resetWarningCache:VD};return r.PropTypes=r,r};LD.exports=iM();var na=LD.exports,Id={},Qi={},UD={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function r(){for(var i="",o=0;o<arguments.length;o++){var c=arguments[o];c&&(i=s(i,n(c)))}return i}function n(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return r.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var o="";for(var c in i)e.call(i,c)&&i[c]&&(o=s(o,c));return o}function s(i,o){return o?i?i+" "+o:i+o:i}t.exports?(r.default=r,t.exports=r):window.classNames=r})()})(UD);var ml=UD.exports,Eo={},M0={},si={},we={},ie={};ie.secondsInYear=ie.secondsInWeek=ie.secondsInQuarter=ie.secondsInMonth=ie.secondsInMinute=ie.secondsInHour=ie.secondsInDay=ie.quartersInYear=ie.monthsInYear=ie.monthsInQuarter=ie.minutesInYear=ie.minutesInMonth=ie.minutesInHour=ie.minutesInDay=ie.minTime=ie.millisecondsInWeek=ie.millisecondsInSecond=ie.millisecondsInMinute=ie.millisecondsInHour=ie.millisecondsInDay=ie.maxTime=ie.daysInYear=ie.daysInWeek=ie.constructFromSymbol=void 0;ie.daysInWeek=7;const aM=ie.daysInYear=365.2425,oM=ie.maxTime=Math.pow(10,8)*24*60*60*1e3;ie.minTime=-oM;ie.millisecondsInWeek=6048e5;ie.millisecondsInDay=864e5;ie.millisecondsInMinute=6e4;ie.millisecondsInHour=36e5;ie.millisecondsInSecond=1e3;ie.minutesInYear=525600;ie.minutesInMonth=43200;ie.minutesInDay=1440;ie.minutesInHour=60;ie.monthsInQuarter=3;ie.monthsInYear=12;ie.quartersInYear=4;const lM=ie.secondsInHour=3600;ie.secondsInMinute=60;const BD=ie.secondsInDay=lM*24;ie.secondsInWeek=BD*7;const uM=ie.secondsInYear=BD*aM,cM=ie.secondsInMonth=uM/12;ie.secondsInQuarter=cM*3;ie.constructFromSymbol=Symbol.for("constructDateFrom");we.constructFrom=dM;var Iw=ie;function dM(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Iw.constructFromSymbol in t?t[Iw.constructFromSymbol](e):t instanceof Date?new t.constructor(e):new Date(e)}var Q={};Q.toDate=hM;var fM=we;function hM(t,e){return(0,fM.constructFrom)(e||t,t)}si.addDays=pM;var mM=we,gM=Q;function pM(t,e,r){const n=(0,gM.toDate)(t,r==null?void 0:r.in);return isNaN(e)?(0,mM.constructFrom)((r==null?void 0:r.in)||t,NaN):(e&&n.setDate(n.getDate()+e),n)}var Au={};Au.addMonths=yM;var Cw=we,vM=Q;function yM(t,e,r){const n=(0,vM.toDate)(t,r==null?void 0:r.in);if(isNaN(e))return(0,Cw.constructFrom)((r==null?void 0:r.in)||t,NaN);if(!e)return n;const s=n.getDate(),i=(0,Cw.constructFrom)((r==null?void 0:r.in)||t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const o=i.getDate();return s>=o?i:(n.setFullYear(i.getFullYear(),i.getMonth(),s),n)}M0.add=EM;var _M=si,xM=Au,wM=we,bM=Q;function EM(t,e,r){const{years:n=0,months:s=0,weeks:i=0,days:o=0,hours:c=0,minutes:d=0,seconds:h=0}=e,g=(0,bM.toDate)(t,r==null?void 0:r.in),v=s||n?(0,xM.addMonths)(g,s+n*12):g,y=o||i?(0,_M.addDays)(v,o+i*7):v,E=d+c*60,D=(h+E*60)*1e3;return(0,wM.constructFrom)((r==null?void 0:r.in)||t,+y+D)}var R0={},A0={};A0.isSaturday=TM;var DM=Q;function TM(t,e){return(0,DM.toDate)(t,e==null?void 0:e.in).getDay()===6}var F0={};F0.isSunday=PM;var SM=Q;function PM(t,e){return(0,SM.toDate)(t,e==null?void 0:e.in).getDay()===0}var Cd={};Cd.isWeekend=CM;var IM=Q;function CM(t,e){const r=(0,IM.toDate)(t,e==null?void 0:e.in).getDay();return r===0||r===6}R0.addBusinessDays=RM;var OM=we,NM=A0,jM=F0,Lg=Cd,MM=Q;function RM(t,e,r){const n=(0,MM.toDate)(t,r==null?void 0:r.in),s=(0,Lg.isWeekend)(n,r);if(isNaN(e))return(0,OM.constructFrom)(r==null?void 0:r.in,NaN);const i=n.getHours(),o=e<0?-1:1,c=Math.trunc(e/5);n.setDate(n.getDate()+c*7);let d=Math.abs(e%5);for(;d>0;)n.setDate(n.getDate()+o),(0,Lg.isWeekend)(n,r)||(d-=1);return s&&(0,Lg.isWeekend)(n,r)&&e!==0&&((0,NM.isSaturday)(n,r)&&n.setDate(n.getDate()+(o<0?2:-1)),(0,jM.isSunday)(n,r)&&n.setDate(n.getDate()+(o<0?1:-2))),n.setHours(i),n}var k0={},Od={};Od.addMilliseconds=kM;var AM=we,FM=Q;function kM(t,e,r){return(0,AM.constructFrom)((r==null?void 0:r.in)||t,+(0,FM.toDate)(t)+e)}k0.addHours=zM;var LM=Od,VM=ie;function zM(t,e,r){return(0,LM.addMilliseconds)(t,e*VM.millisecondsInHour,r)}var L0={},Do={},ii={},_s={},gr={};gr.getDefaultOptions=UM;gr.setDefaultOptions=BM;let WD={};function UM(){return WD}function BM(t){WD=t}_s.startOfWeek=HM;var WM=gr,$M=Q;function HM(t,e){var c,d,h,g;const r=(0,WM.getDefaultOptions)(),n=(e==null?void 0:e.weekStartsOn)??((d=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??r.weekStartsOn??((g=(h=r.locale)==null?void 0:h.options)==null?void 0:g.weekStartsOn)??0,s=(0,$M.toDate)(t,e==null?void 0:e.in),i=s.getDay(),o=(i<n?7:0)+i-n;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}ii.startOfISOWeek=qM;var YM=_s;function qM(t,e){return(0,YM.startOfWeek)(t,{...e,weekStartsOn:1})}Do.getISOWeekYear=KM;var Ow=we,Nw=ii,GM=Q;function KM(t,e){const r=(0,GM.toDate)(t,e==null?void 0:e.in),n=r.getFullYear(),s=(0,Ow.constructFrom)(r,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const i=(0,Nw.startOfISOWeek)(s),o=(0,Ow.constructFrom)(r,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const c=(0,Nw.startOfISOWeek)(o);return r.getTime()>=i.getTime()?n+1:r.getTime()>=c.getTime()?n:n-1}var V0={},sa={},ia={};ia.getTimezoneOffsetInMilliseconds=XM;var QM=Q;function XM(t){const e=(0,QM.toDate)(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}var st={};st.normalizeDates=ZM;var JM=we;function ZM(t,...e){const r=JM.constructFrom.bind(null,t||e.find(n=>typeof n=="object"));return e.map(r)}var Nd={};Nd.startOfDay=t4;var e4=Q;function t4(t,e){const r=(0,e4.toDate)(t,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}sa.differenceInCalendarDays=s4;var jw=ia,r4=st,n4=ie,Mw=Nd;function s4(t,e,r){const[n,s]=(0,r4.normalizeDates)(r==null?void 0:r.in,t,e),i=(0,Mw.startOfDay)(n),o=(0,Mw.startOfDay)(s),c=+i-(0,jw.getTimezoneOffsetInMilliseconds)(i),d=+o-(0,jw.getTimezoneOffsetInMilliseconds)(o);return Math.round((c-d)/n4.millisecondsInDay)}var Fu={};Fu.startOfISOWeekYear=l4;var i4=we,a4=Do,o4=ii;function l4(t,e){const r=(0,a4.getISOWeekYear)(t,e),n=(0,i4.constructFrom)((e==null?void 0:e.in)||t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),(0,o4.startOfISOWeek)(n)}V0.setISOWeekYear=f4;var u4=we,c4=sa,Rw=Fu,d4=Q;function f4(t,e,r){let n=(0,d4.toDate)(t,r==null?void 0:r.in);const s=(0,c4.differenceInCalendarDays)(n,(0,Rw.startOfISOWeekYear)(n,r)),i=(0,u4.constructFrom)((r==null?void 0:r.in)||t,0);return i.setFullYear(e,0,4),i.setHours(0,0,0,0),n=(0,Rw.startOfISOWeekYear)(i),n.setDate(n.getDate()+s),n}L0.addISOWeekYears=g4;var h4=Do,m4=V0;function g4(t,e,r){return(0,m4.setISOWeekYear)(t,(0,h4.getISOWeekYear)(t,r)+e,r)}var _m={};_m.addMinutes=y4;var p4=ie,v4=Q;function y4(t,e,r){const n=(0,v4.toDate)(t,r==null?void 0:r.in);return n.setTime(n.getTime()+e*p4.millisecondsInMinute),n}var xm={};xm.addQuarters=x4;var _4=Au;function x4(t,e,r){return(0,_4.addMonths)(t,e*3,r)}var z0={};z0.addSeconds=b4;var w4=Od;function b4(t,e,r){return(0,w4.addMilliseconds)(t,e*1e3,r)}var jd={};jd.addWeeks=D4;var E4=si;function D4(t,e,r){return(0,E4.addDays)(t,e*7,r)}var U0={};U0.addYears=S4;var T4=Au;function S4(t,e,r){return(0,T4.addMonths)(t,e*12,r)}var $D={};$D.areIntervalsOverlapping=P4;var bf=Q;function P4(t,e,r){const[n,s]=[+(0,bf.toDate)(t.start,r==null?void 0:r.in),+(0,bf.toDate)(t.end,r==null?void 0:r.in)].sort((c,d)=>c-d),[i,o]=[+(0,bf.toDate)(e.start,r==null?void 0:r.in),+(0,bf.toDate)(e.end,r==null?void 0:r.in)].sort((c,d)=>c-d);return r!=null&&r.inclusive?n<=o&&i<=s:n<o&&i<s}var HD={},B0={};B0.max=C4;var Aw=we,I4=Q;function C4(t,e){let r,n=e==null?void 0:e.in;return t.forEach(s=>{!n&&typeof s=="object"&&(n=Aw.constructFrom.bind(null,s));const i=(0,I4.toDate)(s,n);(!r||r<i||isNaN(+i))&&(r=i)}),(0,Aw.constructFrom)(n,r||NaN)}var W0={};W0.min=N4;var Fw=we,O4=Q;function N4(t,e){let r,n=e==null?void 0:e.in;return t.forEach(s=>{!n&&typeof s=="object"&&(n=Fw.constructFrom.bind(null,s));const i=(0,O4.toDate)(s,n);(!r||r>i||isNaN(+i))&&(r=i)}),(0,Fw.constructFrom)(n,r||NaN)}HD.clamp=A4;var j4=st,M4=B0,R4=W0;function A4(t,e,r){const[n,s,i]=(0,j4.normalizeDates)(r==null?void 0:r.in,t,e.start,e.end);return(0,R4.min)([(0,M4.max)([n,s],r),i],r)}var $0={};$0.closestIndexTo=F4;var kw=Q;function F4(t,e){const r=+(0,kw.toDate)(t);if(isNaN(r))return NaN;let n,s;return e.forEach((i,o)=>{const c=(0,kw.toDate)(i);if(isNaN(+c)){n=NaN,s=NaN;return}const d=Math.abs(r-+c);(n==null||d<s)&&(n=o,s=d)}),n}var YD={};YD.closestTo=z4;var k4=st,L4=$0,V4=we;function z4(t,e,r){const[n,...s]=(0,k4.normalizeDates)(r==null?void 0:r.in,t,...e),i=(0,L4.closestIndexTo)(n,s);if(typeof i=="number"&&isNaN(i))return(0,V4.constructFrom)(n,NaN);if(i!==void 0)return s[i]}var gl={};gl.compareAsc=U4;var Lw=Q;function U4(t,e){const r=+(0,Lw.toDate)(t)-+(0,Lw.toDate)(e);return r<0?-1:r>0?1:r}var qD={};qD.compareDesc=B4;var Vw=Q;function B4(t,e){const r=+(0,Vw.toDate)(t)-+(0,Vw.toDate)(e);return r>0?-1:r<0?1:r}var Jt={};Jt.constructNow=$4;var W4=we;function $4(t){return(0,W4.constructFrom)(t,Date.now())}var GD={};GD.daysToWeeks=Y4;var H4=ie;function Y4(t){const e=Math.trunc(t/H4.daysInWeek);return e===0?0:e}var KD={},ku={};ku.isSameDay=G4;var q4=st,zw=Nd;function G4(t,e,r){const[n,s]=(0,q4.normalizeDates)(r==null?void 0:r.in,t,e);return+(0,zw.startOfDay)(n)==+(0,zw.startOfDay)(s)}var aa={},H0={};H0.isDate=K4;function K4(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}aa.isValid=J4;var Q4=H0,X4=Q;function J4(t){return!(!(0,Q4.isDate)(t)&&typeof t!="number"||isNaN(+(0,X4.toDate)(t)))}KD.differenceInBusinessDays=nR;var Z4=st,Uw=si,eR=sa,tR=ku,Bw=aa,rR=Cd;function nR(t,e,r){const[n,s]=(0,Z4.normalizeDates)(r==null?void 0:r.in,t,e);if(!(0,Bw.isValid)(n)||!(0,Bw.isValid)(s))return NaN;const i=(0,eR.differenceInCalendarDays)(n,s),o=i<0?-1:1,c=Math.trunc(i/7);let d=c*5,h=(0,Uw.addDays)(s,c*7);for(;!(0,tR.isSameDay)(n,h);)d+=(0,rR.isWeekend)(h,r)?0:o,h=(0,Uw.addDays)(h,o);return d===0?0:d}var Y0={};Y0.differenceInCalendarISOWeekYears=iR;var sR=st,Ww=Do;function iR(t,e,r){const[n,s]=(0,sR.normalizeDates)(r==null?void 0:r.in,t,e);return(0,Ww.getISOWeekYear)(n,r)-(0,Ww.getISOWeekYear)(s,r)}var QD={};QD.differenceInCalendarISOWeeks=lR;var $w=ia,aR=st,oR=ie,Hw=ii;function lR(t,e,r){const[n,s]=(0,aR.normalizeDates)(r==null?void 0:r.in,t,e),i=(0,Hw.startOfISOWeek)(n),o=(0,Hw.startOfISOWeek)(s),c=+i-(0,$w.getTimezoneOffsetInMilliseconds)(i),d=+o-(0,$w.getTimezoneOffsetInMilliseconds)(o);return Math.round((c-d)/oR.millisecondsInWeek)}var wm={};wm.differenceInCalendarMonths=cR;var uR=st;function cR(t,e,r){const[n,s]=(0,uR.normalizeDates)(r==null?void 0:r.in,t,e),i=n.getFullYear()-s.getFullYear(),o=n.getMonth()-s.getMonth();return i*12+o}var q0={},G0={};G0.getQuarter=fR;var dR=Q;function fR(t,e){const r=(0,dR.toDate)(t,e==null?void 0:e.in);return Math.trunc(r.getMonth()/3)+1}q0.differenceInCalendarQuarters=mR;var hR=st,Yw=G0;function mR(t,e,r){const[n,s]=(0,hR.normalizeDates)(r==null?void 0:r.in,t,e),i=n.getFullYear()-s.getFullYear(),o=(0,Yw.getQuarter)(n)-(0,Yw.getQuarter)(s);return i*4+o}var bm={};bm.differenceInCalendarWeeks=vR;var qw=ia,gR=st,pR=ie,Gw=_s;function vR(t,e,r){const[n,s]=(0,gR.normalizeDates)(r==null?void 0:r.in,t,e),i=(0,Gw.startOfWeek)(n,r),o=(0,Gw.startOfWeek)(s,r),c=+i-(0,qw.getTimezoneOffsetInMilliseconds)(i),d=+o-(0,qw.getTimezoneOffsetInMilliseconds)(o);return Math.round((c-d)/pR.millisecondsInWeek)}var Em={};Em.differenceInCalendarYears=_R;var yR=st;function _R(t,e,r){const[n,s]=(0,yR.normalizeDates)(r==null?void 0:r.in,t,e);return n.getFullYear()-s.getFullYear()}var Dm={};Dm.differenceInDays=bR;var xR=st,wR=sa;function bR(t,e,r){const[n,s]=(0,xR.normalizeDates)(r==null?void 0:r.in,t,e),i=Kw(n,s),o=Math.abs((0,wR.differenceInCalendarDays)(n,s));n.setDate(n.getDate()-i*o);const c=+(Kw(n,s)===-i),d=i*(o-c);return d===0?0:d}function Kw(t,e){const r=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return r<0?-1:r>0?1:r}var Tm={},oa={};oa.getRoundingMethod=ER;function ER(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}Tm.differenceInHours=PR;var DR=oa,TR=st,SR=ie;function PR(t,e,r){const[n,s]=(0,TR.normalizeDates)(r==null?void 0:r.in,t,e),i=(+n-+s)/SR.millisecondsInHour;return(0,DR.getRoundingMethod)(r==null?void 0:r.roundingMethod)(i)}var XD={},K0={};K0.subISOWeekYears=CR;var IR=L0;function CR(t,e,r){return(0,IR.addISOWeekYears)(t,-e,r)}XD.differenceInISOWeekYears=MR;var OR=st,Qw=gl,NR=Y0,jR=K0;function MR(t,e,r){const[n,s]=(0,OR.normalizeDates)(r==null?void 0:r.in,t,e),i=(0,Qw.compareAsc)(n,s),o=Math.abs((0,NR.differenceInCalendarISOWeekYears)(n,s,r)),c=(0,jR.subISOWeekYears)(n,i*o,r),d=+((0,Qw.compareAsc)(c,s)===-i),h=i*(o-d);return h===0?0:h}var Sm={};Sm.differenceInMilliseconds=RR;var Xw=Q;function RR(t,e){return+(0,Xw.toDate)(t)-+(0,Xw.toDate)(e)}var Pm={};Pm.differenceInMinutes=LR;var AR=oa,FR=ie,kR=Sm;function LR(t,e,r){const n=(0,kR.differenceInMilliseconds)(t,e)/FR.millisecondsInMinute;return(0,AR.getRoundingMethod)(r==null?void 0:r.roundingMethod)(n)}var Md={},Q0={},Im={};Im.endOfDay=zR;var VR=Q;function zR(t,e){const r=(0,VR.toDate)(t,e==null?void 0:e.in);return r.setHours(23,59,59,999),r}var Cm={};Cm.endOfMonth=BR;var UR=Q;function BR(t,e){const r=(0,UR.toDate)(t,e==null?void 0:e.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}Q0.isLastDayOfMonth=YR;var WR=Im,$R=Cm,HR=Q;function YR(t,e){const r=(0,HR.toDate)(t,e==null?void 0:e.in);return+(0,WR.endOfDay)(r,e)==+(0,$R.endOfMonth)(r,e)}Md.differenceInMonths=QR;var qR=st,Vg=gl,GR=wm,KR=Q0;function QR(t,e,r){const[n,s,i]=(0,qR.normalizeDates)(r==null?void 0:r.in,t,t,e),o=(0,Vg.compareAsc)(s,i),c=Math.abs((0,GR.differenceInCalendarMonths)(s,i));if(c<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-o*c);let d=(0,Vg.compareAsc)(s,i)===-o;(0,KR.isLastDayOfMonth)(n)&&c===1&&(0,Vg.compareAsc)(n,i)===1&&(d=!1);const h=o*(c-+d);return h===0?0:h}var JD={};JD.differenceInQuarters=ZR;var XR=oa,JR=Md;function ZR(t,e,r){const n=(0,JR.differenceInMonths)(t,e,r)/3;return(0,XR.getRoundingMethod)(r==null?void 0:r.roundingMethod)(n)}var Rd={};Rd.differenceInSeconds=rA;var eA=oa,tA=Sm;function rA(t,e,r){const n=(0,tA.differenceInMilliseconds)(t,e)/1e3;return(0,eA.getRoundingMethod)(r==null?void 0:r.roundingMethod)(n)}var ZD={};ZD.differenceInWeeks=iA;var nA=oa,sA=Dm;function iA(t,e,r){const n=(0,sA.differenceInDays)(t,e,r)/7;return(0,nA.getRoundingMethod)(r==null?void 0:r.roundingMethod)(n)}var X0={};X0.differenceInYears=lA;var aA=st,Jw=gl,oA=Em;function lA(t,e,r){const[n,s]=(0,aA.normalizeDates)(r==null?void 0:r.in,t,e),i=(0,Jw.compareAsc)(n,s),o=Math.abs((0,oA.differenceInCalendarYears)(n,s));n.setFullYear(1584),s.setFullYear(1584);const c=(0,Jw.compareAsc)(n,s)===-i,d=i*(o-+c);return d===0?0:d}var J0={},ai={};ai.normalizeInterval=cA;var uA=st;function cA(t,e){const[r,n]=(0,uA.normalizeDates)(t,e.start,e.end);return{start:r,end:n}}J0.eachDayOfInterval=hA;var dA=ai,fA=we;function hA(t,e){const{start:r,end:n}=(0,dA.normalizeInterval)(e==null?void 0:e.in,t);let s=+r>+n;const i=s?+r:+n,o=s?n:r;o.setHours(0,0,0,0);let c=(e==null?void 0:e.step)??1;if(!c)return[];c<0&&(c=-c,s=!s);const d=[];for(;+o<=i;)d.push((0,fA.constructFrom)(r,o)),o.setDate(o.getDate()+c),o.setHours(0,0,0,0);return s?d.reverse():d}var eT={};eT.eachHourOfInterval=pA;var mA=ai,gA=we;function pA(t,e){const{start:r,end:n}=(0,mA.normalizeInterval)(e==null?void 0:e.in,t);let s=+r>+n;const i=s?+r:+n,o=s?n:r;o.setMinutes(0,0,0);let c=(e==null?void 0:e.step)??1;if(!c)return[];c<0&&(c=-c,s=!s);const d=[];for(;+o<=i;)d.push((0,gA.constructFrom)(r,o)),o.setHours(o.getHours()+c);return s?d.reverse():d}var tT={};tT.eachMinuteOfInterval=xA;var vA=ai,yA=_m,_A=we;function xA(t,e){const{start:r,end:n}=(0,vA.normalizeInterval)(e==null?void 0:e.in,t);r.setSeconds(0,0);let s=+r>+n;const i=s?+r:+n;let o=s?n:r,c=(e==null?void 0:e.step)??1;if(!c)return[];c<0&&(c=-c,s=!s);const d=[];for(;+o<=i;)d.push((0,_A.constructFrom)(r,o)),o=(0,yA.addMinutes)(o,c);return s?d.reverse():d}var rT={};rT.eachMonthOfInterval=EA;var wA=ai,bA=we;function EA(t,e){const{start:r,end:n}=(0,wA.normalizeInterval)(e==null?void 0:e.in,t);let s=+r>+n;const i=s?+r:+n,o=s?n:r;o.setHours(0,0,0,0),o.setDate(1);let c=(e==null?void 0:e.step)??1;if(!c)return[];c<0&&(c=-c,s=!s);const d=[];for(;+o<=i;)d.push((0,bA.constructFrom)(r,o)),o.setMonth(o.getMonth()+c);return s?d.reverse():d}var nT={},Om={};Om.startOfQuarter=TA;var DA=Q;function TA(t,e){const r=(0,DA.toDate)(t,e==null?void 0:e.in),n=r.getMonth(),s=n-n%3;return r.setMonth(s,1),r.setHours(0,0,0,0),r}nT.eachQuarterOfInterval=CA;var SA=ai,PA=xm,IA=we,Ef=Om;function CA(t,e){const{start:r,end:n}=(0,SA.normalizeInterval)(e==null?void 0:e.in,t);let s=+r>+n;const i=s?+(0,Ef.startOfQuarter)(r):+(0,Ef.startOfQuarter)(n);let o=s?(0,Ef.startOfQuarter)(n):(0,Ef.startOfQuarter)(r),c=(e==null?void 0:e.step)??1;if(!c)return[];c<0&&(c=-c,s=!s);const d=[];for(;+o<=i;)d.push((0,IA.constructFrom)(r,o)),o=(0,PA.addQuarters)(o,c);return s?d.reverse():d}var sT={};sT.eachWeekOfInterval=MA;var OA=ai,NA=jd,jA=we,Df=_s;function MA(t,e){const{start:r,end:n}=(0,OA.normalizeInterval)(e==null?void 0:e.in,t);let s=+r>+n;const i=s?(0,Df.startOfWeek)(n,e):(0,Df.startOfWeek)(r,e),o=s?(0,Df.startOfWeek)(r,e):(0,Df.startOfWeek)(n,e);i.setHours(15),o.setHours(15);const c=+o.getTime();let d=i,h=(e==null?void 0:e.step)??1;if(!h)return[];h<0&&(h=-h,s=!s);const g=[];for(;+d<=c;)d.setHours(0),g.push((0,jA.constructFrom)(r,d)),d=(0,NA.addWeeks)(d,h),d.setHours(15);return s?g.reverse():g}var Nm={};Nm.eachWeekendOfInterval=LA;var RA=ai,AA=we,FA=J0,kA=Cd;function LA(t,e){const{start:r,end:n}=(0,RA.normalizeInterval)(e==null?void 0:e.in,t),s=(0,FA.eachDayOfInterval)({start:r,end:n},e),i=[];let o=0;for(;o<s.length;){const c=s[o++];(0,kA.isWeekend)(c)&&i.push((0,AA.constructFrom)(r,c))}return i}var iT={},Ad={};Ad.startOfMonth=zA;var VA=Q;function zA(t,e){const r=(0,VA.toDate)(t,e==null?void 0:e.in);return r.setDate(1),r.setHours(0,0,0,0),r}iT.eachWeekendOfMonth=$A;var UA=Nm,BA=Cm,WA=Ad;function $A(t,e){const r=(0,WA.startOfMonth)(t,e),n=(0,BA.endOfMonth)(t,e);return(0,UA.eachWeekendOfInterval)({start:r,end:n},e)}var aT={},Z0={};Z0.endOfYear=YA;var HA=Q;function YA(t,e){const r=(0,HA.toDate)(t,e==null?void 0:e.in),n=r.getFullYear();return r.setFullYear(n+1,0,0),r.setHours(23,59,59,999),r}var jm={};jm.startOfYear=GA;var qA=Q;function GA(t,e){const r=(0,qA.toDate)(t,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}aT.eachWeekendOfYear=JA;var KA=Nm,QA=Z0,XA=jm;function JA(t,e){const r=(0,XA.startOfYear)(t,e),n=(0,QA.endOfYear)(t,e);return(0,KA.eachWeekendOfInterval)({start:r,end:n},e)}var oT={};oT.eachYearOfInterval=t3;var ZA=ai,e3=we;function t3(t,e){const{start:r,end:n}=(0,ZA.normalizeInterval)(e==null?void 0:e.in,t);let s=+r>+n;const i=s?+r:+n,o=s?n:r;o.setHours(0,0,0,0),o.setMonth(0,1);let c=(e==null?void 0:e.step)??1;if(!c)return[];c<0&&(c=-c,s=!s);const d=[];for(;+o<=i;)d.push((0,e3.constructFrom)(r,o)),o.setFullYear(o.getFullYear()+c);return s?d.reverse():d}var lT={};lT.endOfDecade=n3;var r3=Q;function n3(t,e){const r=(0,r3.toDate)(t,e==null?void 0:e.in),n=r.getFullYear(),s=9+Math.floor(n/10)*10;return r.setFullYear(s,11,31),r.setHours(23,59,59,999),r}var uT={};uT.endOfHour=i3;var s3=Q;function i3(t,e){const r=(0,s3.toDate)(t,e==null?void 0:e.in);return r.setMinutes(59,59,999),r}var cT={},ey={};ey.endOfWeek=l3;var a3=gr,o3=Q;function l3(t,e){var c,d,h,g;const r=(0,a3.getDefaultOptions)(),n=(e==null?void 0:e.weekStartsOn)??((d=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??r.weekStartsOn??((g=(h=r.locale)==null?void 0:h.options)==null?void 0:g.weekStartsOn)??0,s=(0,o3.toDate)(t,e==null?void 0:e.in),i=s.getDay(),o=(i<n?-7:0)+6-(i-n);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}cT.endOfISOWeek=c3;var u3=ey;function c3(t,e){return(0,u3.endOfWeek)(t,{...e,weekStartsOn:1})}var dT={};dT.endOfISOWeekYear=m3;var d3=we,f3=Do,h3=ii;function m3(t,e){const r=(0,f3.getISOWeekYear)(t,e),n=(0,d3.constructFrom)((e==null?void 0:e.in)||t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=(0,h3.startOfISOWeek)(n,e);return s.setMilliseconds(s.getMilliseconds()-1),s}var fT={};fT.endOfMinute=p3;var g3=Q;function p3(t,e){const r=(0,g3.toDate)(t,e==null?void 0:e.in);return r.setSeconds(59,999),r}var hT={};hT.endOfQuarter=y3;var v3=Q;function y3(t,e){const r=(0,v3.toDate)(t,e==null?void 0:e.in),n=r.getMonth(),s=n-n%3+3;return r.setMonth(s,0),r.setHours(23,59,59,999),r}var mT={};mT.endOfSecond=x3;var _3=Q;function x3(t,e){const r=(0,_3.toDate)(t,e==null?void 0:e.in);return r.setMilliseconds(999),r}var gT={};gT.endOfToday=b3;var w3=Im;function b3(t){return(0,w3.endOfDay)(Date.now(),t)}var pT={};pT.endOfTomorrow=E3;var Zw=Jt;function E3(t){const e=(0,Zw.constructNow)(t==null?void 0:t.in),r=e.getFullYear(),n=e.getMonth(),s=e.getDate(),i=(0,Zw.constructNow)(t==null?void 0:t.in);return i.setFullYear(r,n,s+1),i.setHours(23,59,59,999),t!=null&&t.in?t.in(i):i}var vT={};vT.endOfYesterday=S3;var D3=we,T3=Jt;function S3(t){const e=(0,T3.constructNow)(t==null?void 0:t.in),r=(0,D3.constructFrom)(t==null?void 0:t.in,0);return r.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()-1),r.setHours(23,59,59,999),r}var ty={},pl={},Mm={},ry={};ry.formatDistance=void 0;const P3={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},I3=(t,e,r)=>{let n;const s=P3[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};ry.formatDistance=I3;var ny={},yT={};yT.buildFormatLongFn=C3;function C3(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}ny.formatLong=void 0;var zg=yT;const O3={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},N3={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},j3={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"};ny.formatLong={date:(0,zg.buildFormatLongFn)({formats:O3,defaultWidth:"full"}),time:(0,zg.buildFormatLongFn)({formats:N3,defaultWidth:"full"}),dateTime:(0,zg.buildFormatLongFn)({formats:j3,defaultWidth:"full"})};var sy={};sy.formatRelative=void 0;const M3={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},R3=(t,e,r,n)=>M3[t];sy.formatRelative=R3;var iy={},_T={};_T.buildLocalizeFn=A3;function A3(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,c=r!=null&&r.width?String(r.width):o;s=t.formattingValues[c]||t.formattingValues[o]}else{const o=t.defaultWidth,c=r!=null&&r.width?String(r.width):t.defaultWidth;s=t.values[c]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}iy.localize=void 0;var cc=_T;const F3={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},k3={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},L3={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},V3={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},z3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},U3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},B3=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"};iy.localize={ordinalNumber:B3,era:(0,cc.buildLocalizeFn)({values:F3,defaultWidth:"wide"}),quarter:(0,cc.buildLocalizeFn)({values:k3,defaultWidth:"wide",argumentCallback:t=>t-1}),month:(0,cc.buildLocalizeFn)({values:L3,defaultWidth:"wide"}),day:(0,cc.buildLocalizeFn)({values:V3,defaultWidth:"wide"}),dayPeriod:(0,cc.buildLocalizeFn)({values:z3,defaultWidth:"wide",formattingValues:U3,defaultFormattingWidth:"wide"})};var ay={},xT={};xT.buildMatchFn=W3;function W3(t){return(e,r={})=>{const n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],c=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(c)?H3(c,v=>v.test(o)):$3(c,v=>v.test(o));let h;h=t.valueCallback?t.valueCallback(d):d,h=r.valueCallback?r.valueCallback(h):h;const g=e.slice(o.length);return{value:h,rest:g}}}function $3(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function H3(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}var wT={};wT.buildMatchPatternFn=Y3;function Y3(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const s=n[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const c=e.slice(s.length);return{value:o,rest:c}}}ay.match=void 0;var dc=xT,q3=wT;const G3=/^(\d+)(th|st|nd|rd)?/i,K3=/\d+/i,Q3={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},X3={any:[/^b/i,/^(a|c)/i]},J3={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Z3={any:[/1/i,/2/i,/3/i,/4/i]},eF={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},tF={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},rF={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},nF={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},sF={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},iF={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}};ay.match={ordinalNumber:(0,q3.buildMatchPatternFn)({matchPattern:G3,parsePattern:K3,valueCallback:t=>parseInt(t,10)}),era:(0,dc.buildMatchFn)({matchPatterns:Q3,defaultMatchWidth:"wide",parsePatterns:X3,defaultParseWidth:"any"}),quarter:(0,dc.buildMatchFn)({matchPatterns:J3,defaultMatchWidth:"wide",parsePatterns:Z3,defaultParseWidth:"any",valueCallback:t=>t+1}),month:(0,dc.buildMatchFn)({matchPatterns:eF,defaultMatchWidth:"wide",parsePatterns:tF,defaultParseWidth:"any"}),day:(0,dc.buildMatchFn)({matchPatterns:rF,defaultMatchWidth:"wide",parsePatterns:nF,defaultParseWidth:"any"}),dayPeriod:(0,dc.buildMatchFn)({matchPatterns:sF,defaultMatchWidth:"any",parsePatterns:iF,defaultParseWidth:"any"})};Mm.enUS=void 0;var aF=ry,oF=ny,lF=sy,uF=iy,cF=ay;Mm.enUS={code:"en-US",formatDistance:aF.formatDistance,formatLong:oF.formatLong,formatRelative:lF.formatRelative,localize:uF.localize,match:cF.match,options:{weekStartsOn:0,firstWeekContainsDate:1}};(function(t){Object.defineProperty(t,"defaultLocale",{enumerable:!0,get:function(){return e.enUS}});var e=Mm})(pl);var oy={},ly={};ly.getDayOfYear=mF;var dF=sa,fF=jm,hF=Q;function mF(t,e){const r=(0,hF.toDate)(t,e==null?void 0:e.in);return(0,dF.differenceInCalendarDays)(r,(0,fF.startOfYear)(r))+1}var Rm={};Rm.getISOWeek=_F;var gF=ie,pF=ii,vF=Fu,yF=Q;function _F(t,e){const r=(0,yF.toDate)(t,e==null?void 0:e.in),n=+(0,pF.startOfISOWeek)(r)-+(0,vF.startOfISOWeekYear)(r);return Math.round(n/gF.millisecondsInWeek)+1}var Am={},Fm={},Fd={};Fd.getWeekYear=bF;var xF=gr,eb=we,tb=_s,wF=Q;function bF(t,e){var g,v,y,E;const r=(0,wF.toDate)(t,e==null?void 0:e.in),n=r.getFullYear(),s=(0,xF.getDefaultOptions)(),i=(e==null?void 0:e.firstWeekContainsDate)??((v=(g=e==null?void 0:e.locale)==null?void 0:g.options)==null?void 0:v.firstWeekContainsDate)??s.firstWeekContainsDate??((E=(y=s.locale)==null?void 0:y.options)==null?void 0:E.firstWeekContainsDate)??1,o=(0,eb.constructFrom)((e==null?void 0:e.in)||t,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const c=(0,tb.startOfWeek)(o,e),d=(0,eb.constructFrom)((e==null?void 0:e.in)||t,0);d.setFullYear(n,0,i),d.setHours(0,0,0,0);const h=(0,tb.startOfWeek)(d,e);return+r>=+c?n+1:+r>=+h?n:n-1}Fm.startOfWeekYear=PF;var EF=gr,DF=we,TF=Fd,SF=_s;function PF(t,e){var c,d,h,g;const r=(0,EF.getDefaultOptions)(),n=(e==null?void 0:e.firstWeekContainsDate)??((d=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(h=r.locale)==null?void 0:h.options)==null?void 0:g.firstWeekContainsDate)??1,s=(0,TF.getWeekYear)(t,e),i=(0,DF.constructFrom)((e==null?void 0:e.in)||t,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),(0,SF.startOfWeek)(i,e)}Am.getWeek=jF;var IF=ie,CF=_s,OF=Fm,NF=Q;function jF(t,e){const r=(0,NF.toDate)(t,e==null?void 0:e.in),n=+(0,CF.startOfWeek)(r,e)-+(0,OF.startOfWeekYear)(r,e);return Math.round(n/IF.millisecondsInWeek)+1}var vl={};vl.addLeadingZeros=MF;function MF(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}var km={};km.lightFormatters=void 0;var ka=vl;km.lightFormatters={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return(0,ka.addLeadingZeros)(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):(0,ka.addLeadingZeros)(r+1,2)},d(t,e){return(0,ka.addLeadingZeros)(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return(0,ka.addLeadingZeros)(t.getHours()%12||12,e.length)},H(t,e){return(0,ka.addLeadingZeros)(t.getHours(),e.length)},m(t,e){return(0,ka.addLeadingZeros)(t.getMinutes(),e.length)},s(t,e){return(0,ka.addLeadingZeros)(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return(0,ka.addLeadingZeros)(s,e.length)}};oy.formatters=void 0;var RF=ly,AF=Rm,FF=Do,kF=Am,LF=Fd,Lt=vl,La=km;const Al={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"};oy.formatters={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return La.lightFormatters.y(t,e)},Y:function(t,e,r,n){const s=(0,LF.getWeekYear)(t,n),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return(0,Lt.addLeadingZeros)(o,2)}return e==="Yo"?r.ordinalNumber(i,{unit:"year"}):(0,Lt.addLeadingZeros)(i,e.length)},R:function(t,e){const r=(0,FF.getISOWeekYear)(t);return(0,Lt.addLeadingZeros)(r,e.length)},u:function(t,e){const r=t.getFullYear();return(0,Lt.addLeadingZeros)(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return(0,Lt.addLeadingZeros)(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return(0,Lt.addLeadingZeros)(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return La.lightFormatters.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return(0,Lt.addLeadingZeros)(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const s=(0,kF.getWeek)(t,n);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):(0,Lt.addLeadingZeros)(s,e.length)},I:function(t,e,r){const n=(0,AF.getISOWeek)(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):(0,Lt.addLeadingZeros)(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):La.lightFormatters.d(t,e)},D:function(t,e,r){const n=(0,RF.getDayOfYear)(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):(0,Lt.addLeadingZeros)(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return(0,Lt.addLeadingZeros)(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return(0,Lt.addLeadingZeros)(i,e.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return(0,Lt.addLeadingZeros)(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let s;switch(n===12?s=Al.noon:n===0?s=Al.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let s;switch(n>=17?s=Al.evening:n>=12?s=Al.afternoon:n>=4?s=Al.morning:s=Al.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return La.lightFormatters.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):La.lightFormatters.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):(0,Lt.addLeadingZeros)(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):(0,Lt.addLeadingZeros)(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):La.lightFormatters.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):La.lightFormatters.s(t,e)},S:function(t,e){return La.lightFormatters.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return nb(n);case"XXXX":case"XX":return Lo(n);case"XXXXX":case"XXX":default:return Lo(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return nb(n);case"xxxx":case"xx":return Lo(n);case"xxxxx":case"xxx":default:return Lo(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+rb(n,":");case"OOOO":default:return"GMT"+Lo(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+rb(n,":");case"zzzz":default:return"GMT"+Lo(n,":")}},t:function(t,e,r){const n=Math.trunc(+t/1e3);return(0,Lt.addLeadingZeros)(n,e.length)},T:function(t,e,r){return(0,Lt.addLeadingZeros)(+t,e.length)}};function rb(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),i=n%60;return i===0?r+String(s):r+String(s)+e+(0,Lt.addLeadingZeros)(i,2)}function nb(t,e){return t%60===0?(t>0?"-":"+")+(0,Lt.addLeadingZeros)(Math.abs(t)/60,2):Lo(t,e)}function Lo(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=(0,Lt.addLeadingZeros)(Math.trunc(n/60),2),i=(0,Lt.addLeadingZeros)(n%60,2);return r+s+e+i}var Lm={};Lm.longFormatters=void 0;const sb=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},bT=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},VF=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return sb(t,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",sb(n,e)).replace("{{time}}",bT(s,e))};Lm.longFormatters={p:bT,P:VF};var kd={};kd.isProtectedDayOfYearToken=WF;kd.isProtectedWeekYearToken=$F;kd.warnOrThrowProtectedError=HF;const zF=/^D+$/,UF=/^Y+$/,BF=["D","DD","YY","YYYY"];function WF(t){return zF.test(t)}function $F(t){return UF.test(t)}function HF(t,e,r){const n=YF(t,e,r);if(console.warn(n),BF.includes(t))throw new RangeError(n)}function YF(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(function(t){t.format=t.formatDate=E,Object.defineProperty(t,"formatters",{enumerable:!0,get:function(){return n.formatters}}),Object.defineProperty(t,"longFormatters",{enumerable:!0,get:function(){return s.longFormatters}});var e=pl,r=gr,n=oy,s=Lm,i=kd,o=aa,c=Q;const d=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,h=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,g=/^'([^]*?)'?$/,v=/''/g,y=/[a-zA-Z]/;function E(D,k,S){var I,j,M,V,O,et,tt,le;const P=(0,r.getDefaultOptions)(),C=(S==null?void 0:S.locale)??P.locale??e.defaultLocale,R=(S==null?void 0:S.firstWeekContainsDate)??((j=(I=S==null?void 0:S.locale)==null?void 0:I.options)==null?void 0:j.firstWeekContainsDate)??P.firstWeekContainsDate??((V=(M=P.locale)==null?void 0:M.options)==null?void 0:V.firstWeekContainsDate)??1,Y=(S==null?void 0:S.weekStartsOn)??((et=(O=S==null?void 0:S.locale)==null?void 0:O.options)==null?void 0:et.weekStartsOn)??P.weekStartsOn??((le=(tt=P.locale)==null?void 0:tt.options)==null?void 0:le.weekStartsOn)??0,q=(0,c.toDate)(D,S==null?void 0:S.in);if(!(0,o.isValid)(q))throw new RangeError("Invalid time value");let T=k.match(h).map(Oe=>{const ee=Oe[0];if(ee==="p"||ee==="P"){const de=s.longFormatters[ee];return de(Oe,C.formatLong)}return Oe}).join("").match(d).map(Oe=>{if(Oe==="''")return{isToken:!1,value:"'"};const ee=Oe[0];if(ee==="'")return{isToken:!1,value:N(Oe)};if(n.formatters[ee])return{isToken:!0,value:Oe};if(ee.match(y))throw new RangeError("Format string contains an unescaped latin alphabet character `"+ee+"`");return{isToken:!1,value:Oe}});C.localize.preprocessor&&(T=C.localize.preprocessor(q,T));const b={firstWeekContainsDate:R,weekStartsOn:Y,locale:C};return T.map(Oe=>{if(!Oe.isToken)return Oe.value;const ee=Oe.value;(!(S!=null&&S.useAdditionalWeekYearTokens)&&(0,i.isProtectedWeekYearToken)(ee)||!(S!=null&&S.useAdditionalDayOfYearTokens)&&(0,i.isProtectedDayOfYearToken)(ee))&&(0,i.warnOrThrowProtectedError)(ee,k,String(D));const de=n.formatters[ee[0]];return de(q,ee,C.localize,b)}).join("")}function N(D){const k=D.match(g);return k?k[1].replace(v,"'"):D}})(ty);var uy={};uy.formatDistance=ZF;var qF=pl,GF=gr,ib=ia,KF=st,QF=gl,Fl=ie,XF=Md,JF=Rd;function ZF(t,e,r){const n=(0,GF.getDefaultOptions)(),s=(r==null?void 0:r.locale)??n.locale??qF.defaultLocale,i=2520,o=(0,QF.compareAsc)(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const c=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o}),[d,h]=(0,KF.normalizeDates)(r==null?void 0:r.in,...o>0?[e,t]:[t,e]),g=(0,JF.differenceInSeconds)(h,d),v=((0,ib.getTimezoneOffsetInMilliseconds)(h)-(0,ib.getTimezoneOffsetInMilliseconds)(d))/1e3,y=Math.round((g-v)/60);let E;if(y<2)return r!=null&&r.includeSeconds?g<5?s.formatDistance("lessThanXSeconds",5,c):g<10?s.formatDistance("lessThanXSeconds",10,c):g<20?s.formatDistance("lessThanXSeconds",20,c):g<40?s.formatDistance("halfAMinute",0,c):g<60?s.formatDistance("lessThanXMinutes",1,c):s.formatDistance("xMinutes",1,c):y===0?s.formatDistance("lessThanXMinutes",1,c):s.formatDistance("xMinutes",y,c);if(y<45)return s.formatDistance("xMinutes",y,c);if(y<90)return s.formatDistance("aboutXHours",1,c);if(y<Fl.minutesInDay){const N=Math.round(y/60);return s.formatDistance("aboutXHours",N,c)}else{if(y<i)return s.formatDistance("xDays",1,c);if(y<Fl.minutesInMonth){const N=Math.round(y/Fl.minutesInDay);return s.formatDistance("xDays",N,c)}else if(y<Fl.minutesInMonth*2)return E=Math.round(y/Fl.minutesInMonth),s.formatDistance("aboutXMonths",E,c)}if(E=(0,XF.differenceInMonths)(h,d),E<12){const N=Math.round(y/Fl.minutesInMonth);return s.formatDistance("xMonths",N,c)}else{const N=E%12,D=Math.trunc(E/12);return N<3?s.formatDistance("aboutXYears",D,c):N<9?s.formatDistance("overXYears",D,c):s.formatDistance("almostXYears",D+1,c)}}var cy={};cy.formatDistanceStrict=i6;var e6=pl,t6=gr,r6=oa,ab=ia,n6=st,s6=gl,Va=ie;function i6(t,e,r){const n=(0,t6.getDefaultOptions)(),s=(r==null?void 0:r.locale)??n.locale??e6.defaultLocale,i=(0,s6.compareAsc)(t,e);if(isNaN(i))throw new RangeError("Invalid time value");const o=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:i}),[c,d]=(0,n6.normalizeDates)(r==null?void 0:r.in,...i>0?[e,t]:[t,e]),h=(0,r6.getRoundingMethod)((r==null?void 0:r.roundingMethod)??"round"),g=d.getTime()-c.getTime(),v=g/Va.millisecondsInMinute,y=(0,ab.getTimezoneOffsetInMilliseconds)(d)-(0,ab.getTimezoneOffsetInMilliseconds)(c),E=(g-y)/Va.millisecondsInMinute,N=r==null?void 0:r.unit;let D;if(N?D=N:v<1?D="second":v<60?D="minute":v<Va.minutesInDay?D="hour":E<Va.minutesInMonth?D="day":E<Va.minutesInYear?D="month":D="year",D==="second"){const k=h(g/1e3);return s.formatDistance("xSeconds",k,o)}else if(D==="minute"){const k=h(v);return s.formatDistance("xMinutes",k,o)}else if(D==="hour"){const k=h(v/60);return s.formatDistance("xHours",k,o)}else if(D==="day"){const k=h(E/Va.minutesInDay);return s.formatDistance("xDays",k,o)}else if(D==="month"){const k=h(E/Va.minutesInMonth);return k===12&&N!=="month"?s.formatDistance("xYears",1,o):s.formatDistance("xMonths",k,o)}else{const k=h(E/Va.minutesInYear);return s.formatDistance("xYears",k,o)}}var ET={};ET.formatDistanceToNow=l6;var a6=Jt,o6=uy;function l6(t,e){return(0,o6.formatDistance)(t,(0,a6.constructNow)(t),e)}var DT={};DT.formatDistanceToNowStrict=d6;var u6=Jt,c6=cy;function d6(t,e){return(0,c6.formatDistanceStrict)(t,(0,u6.constructNow)(t),e)}var TT={};TT.formatDuration=g6;var f6=pl,h6=gr;const m6=["years","months","weeks","days","hours","minutes","seconds"];function g6(t,e){const r=(0,h6.getDefaultOptions)(),n=(e==null?void 0:e.locale)??r.locale??f6.defaultLocale,s=(e==null?void 0:e.format)??m6,i=(e==null?void 0:e.zero)??!1,o=(e==null?void 0:e.delimiter)??" ";return n.formatDistance?s.reduce((d,h)=>{const g=`x${h.replace(/(^.)/,y=>y.toUpperCase())}`,v=t[h];return v!==void 0&&(i||t[h])?d.concat(n.formatDistance(g,v)):d},[]).join(o):""}var ST={};ST.formatISO=v6;var za=vl,p6=Q;function v6(t,e){const r=(0,p6.toDate)(t,e==null?void 0:e.in);if(isNaN(+r))throw new RangeError("Invalid time value");const n=(e==null?void 0:e.format)??"extended",s=(e==null?void 0:e.representation)??"complete";let i="",o="";const c=n==="extended"?"-":"",d=n==="extended"?":":"";if(s!=="time"){const h=(0,za.addLeadingZeros)(r.getDate(),2),g=(0,za.addLeadingZeros)(r.getMonth()+1,2);i=`${(0,za.addLeadingZeros)(r.getFullYear(),4)}${c}${g}${c}${h}`}if(s!=="date"){const h=r.getTimezoneOffset();if(h!==0){const D=Math.abs(h),k=(0,za.addLeadingZeros)(Math.trunc(D/60),2),S=(0,za.addLeadingZeros)(D%60,2);o=`${h<0?"+":"-"}${k}:${S}`}else o="Z";const g=(0,za.addLeadingZeros)(r.getHours(),2),v=(0,za.addLeadingZeros)(r.getMinutes(),2),y=(0,za.addLeadingZeros)(r.getSeconds(),2),E=i===""?"":"T",N=[g,v,y].join(d);i=`${i}${E}${N}${o}`}return i}var PT={};PT.formatISO9075=x6;var kl=vl,y6=aa,_6=Q;function x6(t,e){const r=(0,_6.toDate)(t,e==null?void 0:e.in);if(!(0,y6.isValid)(r))throw new RangeError("Invalid time value");const n=(e==null?void 0:e.format)??"extended",s=(e==null?void 0:e.representation)??"complete";let i="";const o=n==="extended"?"-":"",c=n==="extended"?":":"";if(s!=="time"){const d=(0,kl.addLeadingZeros)(r.getDate(),2),h=(0,kl.addLeadingZeros)(r.getMonth()+1,2);i=`${(0,kl.addLeadingZeros)(r.getFullYear(),4)}${o}${h}${o}${d}`}if(s!=="date"){const d=(0,kl.addLeadingZeros)(r.getHours(),2),h=(0,kl.addLeadingZeros)(r.getMinutes(),2),g=(0,kl.addLeadingZeros)(r.getSeconds(),2);i=`${i}${i===""?"":" "}${d}${c}${h}${c}${g}`}return i}var IT={};IT.formatISODuration=w6;function w6(t){const{years:e=0,months:r=0,days:n=0,hours:s=0,minutes:i=0,seconds:o=0}=t;return`P${e}Y${r}M${n}DT${s}H${i}M${o}S`}var CT={};CT.formatRFC3339=D6;var Ua=vl,b6=aa,E6=Q;function D6(t,e){const r=(0,E6.toDate)(t,e==null?void 0:e.in);if(!(0,b6.isValid)(r))throw new RangeError("Invalid time value");const n=(e==null?void 0:e.fractionDigits)??0,s=(0,Ua.addLeadingZeros)(r.getDate(),2),i=(0,Ua.addLeadingZeros)(r.getMonth()+1,2),o=r.getFullYear(),c=(0,Ua.addLeadingZeros)(r.getHours(),2),d=(0,Ua.addLeadingZeros)(r.getMinutes(),2),h=(0,Ua.addLeadingZeros)(r.getSeconds(),2);let g="";if(n>0){const E=r.getMilliseconds(),N=Math.trunc(E*Math.pow(10,n-3));g="."+(0,Ua.addLeadingZeros)(N,n)}let v="";const y=r.getTimezoneOffset();if(y!==0){const E=Math.abs(y),N=(0,Ua.addLeadingZeros)(Math.trunc(E/60),2),D=(0,Ua.addLeadingZeros)(E%60,2);v=`${y<0?"+":"-"}${N}:${D}`}else v="Z";return`${o}-${i}-${s}T${c}:${d}:${h}${g}${v}`}var OT={};OT.formatRFC7231=C6;var Tf=vl,T6=aa,S6=Q;const P6=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],I6=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C6(t){const e=(0,S6.toDate)(t);if(!(0,T6.isValid)(e))throw new RangeError("Invalid time value");const r=P6[e.getUTCDay()],n=(0,Tf.addLeadingZeros)(e.getUTCDate(),2),s=I6[e.getUTCMonth()],i=e.getUTCFullYear(),o=(0,Tf.addLeadingZeros)(e.getUTCHours(),2),c=(0,Tf.addLeadingZeros)(e.getUTCMinutes(),2),d=(0,Tf.addLeadingZeros)(e.getUTCSeconds(),2);return`${r}, ${n} ${s} ${i} ${o}:${c}:${d} GMT`}var NT={};NT.formatRelative=A6;var O6=pl,N6=gr,j6=st,M6=sa,R6=ty;function A6(t,e,r){var v,y,E,N;const[n,s]=(0,j6.normalizeDates)(r==null?void 0:r.in,t,e),i=(0,N6.getDefaultOptions)(),o=(r==null?void 0:r.locale)??i.locale??O6.defaultLocale,c=(r==null?void 0:r.weekStartsOn)??((y=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:y.weekStartsOn)??i.weekStartsOn??((N=(E=i.locale)==null?void 0:E.options)==null?void 0:N.weekStartsOn)??0,d=(0,M6.differenceInCalendarDays)(n,s);if(isNaN(d))throw new RangeError("Invalid time value");let h;d<-6?h="other":d<-1?h="lastWeek":d<0?h="yesterday":d<1?h="today":d<2?h="tomorrow":d<7?h="nextWeek":h="other";const g=o.formatRelative(h,n,s,{locale:o,weekStartsOn:c});return(0,R6.format)(n,g,{locale:o,weekStartsOn:c})}var jT={};jT.fromUnixTime=k6;var F6=Q;function k6(t,e){return(0,F6.toDate)(t*1e3,e==null?void 0:e.in)}var dy={};dy.getDate=V6;var L6=Q;function V6(t,e){return(0,L6.toDate)(t,e==null?void 0:e.in).getDate()}var Ld={};Ld.getDay=U6;var z6=Q;function U6(t,e){return(0,z6.toDate)(t,e==null?void 0:e.in).getDay()}var fy={};fy.getDaysInMonth=$6;var B6=we,W6=Q;function $6(t,e){const r=(0,W6.toDate)(t,e==null?void 0:e.in),n=r.getFullYear(),s=r.getMonth(),i=(0,B6.constructFrom)(r,0);return i.setFullYear(n,s+1,0),i.setHours(0,0,0,0),i.getDate()}var MT={},hy={};hy.isLeapYear=Y6;var H6=Q;function Y6(t,e){const n=(0,H6.toDate)(t,e==null?void 0:e.in).getFullYear();return n%400===0||n%4===0&&n%100!==0}MT.getDaysInYear=K6;var q6=hy,G6=Q;function K6(t,e){const r=(0,G6.toDate)(t,e==null?void 0:e.in);return Number.isNaN(+r)?NaN:(0,q6.isLeapYear)(r)?366:365}var RT={};RT.getDecade=X6;var Q6=Q;function X6(t,e){const n=(0,Q6.toDate)(t,e==null?void 0:e.in).getFullYear();return Math.floor(n/10)*10}var my={};my.getDefaultOptions=Z6;var J6=gr;function Z6(){return Object.assign({},(0,J6.getDefaultOptions)())}var AT={};AT.getHours=tk;var ek=Q;function tk(t,e){return(0,ek.toDate)(t,e==null?void 0:e.in).getHours()}var gy={};gy.getISODay=nk;var rk=Q;function nk(t,e){const r=(0,rk.toDate)(t,e==null?void 0:e.in).getDay();return r===0?7:r}var FT={};FT.getISOWeeksInYear=ak;var sk=jd,ik=ie,ob=Fu;function ak(t,e){const r=(0,ob.startOfISOWeekYear)(t,e),s=+(0,ob.startOfISOWeekYear)((0,sk.addWeeks)(r,60))-+r;return Math.round(s/ik.millisecondsInWeek)}var kT={};kT.getMilliseconds=lk;var ok=Q;function lk(t){return(0,ok.toDate)(t).getMilliseconds()}var LT={};LT.getMinutes=ck;var uk=Q;function ck(t,e){return(0,uk.toDate)(t,e==null?void 0:e.in).getMinutes()}var VT={};VT.getMonth=fk;var dk=Q;function fk(t,e){return(0,dk.toDate)(t,e==null?void 0:e.in).getMonth()}var zT={};zT.getOverlappingDaysInIntervals=mk;var lb=ia,hk=ie,Sf=Q;function mk(t,e){const[r,n]=[+(0,Sf.toDate)(t.start),+(0,Sf.toDate)(t.end)].sort((v,y)=>v-y),[s,i]=[+(0,Sf.toDate)(e.start),+(0,Sf.toDate)(e.end)].sort((v,y)=>v-y);if(!(r<i&&s<n))return 0;const c=s<r?r:s,d=c-(0,lb.getTimezoneOffsetInMilliseconds)(c),h=i>n?n:i,g=h-(0,lb.getTimezoneOffsetInMilliseconds)(h);return Math.ceil((g-d)/hk.millisecondsInDay)}var UT={};UT.getSeconds=pk;var gk=Q;function pk(t){return(0,gk.toDate)(t).getSeconds()}var BT={};BT.getTime=yk;var vk=Q;function yk(t){return+(0,vk.toDate)(t)}var WT={};WT.getUnixTime=xk;var _k=Q;function xk(t){return Math.trunc(+(0,_k.toDate)(t)/1e3)}var $T={};$T.getWeekOfMonth=Sk;var wk=gr,bk=dy,Ek=Ld,Dk=Ad,Tk=Q;function Sk(t,e){var d,h,g,v;const r=(0,wk.getDefaultOptions)(),n=(e==null?void 0:e.weekStartsOn)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??r.weekStartsOn??((v=(g=r.locale)==null?void 0:g.options)==null?void 0:v.weekStartsOn)??0,s=(0,bk.getDate)((0,Tk.toDate)(t,e==null?void 0:e.in));if(isNaN(s))return NaN;const i=(0,Ek.getDay)((0,Dk.startOfMonth)(t,e));let o=n-i;o<=0&&(o+=7);const c=s-o;return Math.ceil(c/7)+1}var HT={},py={};py.lastDayOfMonth=Pk;var ub=Q;function Pk(t,e){const r=(0,ub.toDate)(t,e==null?void 0:e.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(0,0,0,0),(0,ub.toDate)(r,e==null?void 0:e.in)}HT.getWeeksInMonth=jk;var Ik=bm,Ck=py,Ok=Ad,Nk=Q;function jk(t,e){const r=(0,Nk.toDate)(t,e==null?void 0:e.in);return(0,Ik.differenceInCalendarWeeks)((0,Ck.lastDayOfMonth)(r,e),(0,Ok.startOfMonth)(r,e),e)+1}var YT={};YT.getYear=Rk;var Mk=Q;function Rk(t,e){return(0,Mk.toDate)(t,e==null?void 0:e.in).getFullYear()}var qT={};qT.hoursToMilliseconds=Fk;var Ak=ie;function Fk(t){return Math.trunc(t*Ak.millisecondsInHour)}var GT={};GT.hoursToMinutes=Lk;var kk=ie;function Lk(t){return Math.trunc(t*kk.minutesInHour)}var KT={};KT.hoursToSeconds=zk;var Vk=ie;function zk(t){return Math.trunc(t*Vk.secondsInHour)}var QT={};QT.interval=Bk;var Uk=st;function Bk(t,e,r){const[n,s]=(0,Uk.normalizeDates)(r==null?void 0:r.in,t,e);if(isNaN(+n))throw new TypeError("Start date is invalid");if(isNaN(+s))throw new TypeError("End date is invalid");if(r!=null&&r.assertPositive&&+n>+s)throw new TypeError("End date must be after start date");return{start:n,end:s}}var XT={};XT.intervalToDuration=Qk;var Wk=ai,fc=M0,$k=Dm,Hk=Tm,Yk=Pm,qk=Md,Gk=Rd,Kk=X0;function Qk(t,e){const{start:r,end:n}=(0,Wk.normalizeInterval)(e==null?void 0:e.in,t),s={},i=(0,Kk.differenceInYears)(n,r);i&&(s.years=i);const o=(0,fc.add)(r,{years:s.years}),c=(0,qk.differenceInMonths)(n,o);c&&(s.months=c);const d=(0,fc.add)(o,{months:s.months}),h=(0,$k.differenceInDays)(n,d);h&&(s.days=h);const g=(0,fc.add)(d,{days:s.days}),v=(0,Hk.differenceInHours)(n,g);v&&(s.hours=v);const y=(0,fc.add)(g,{hours:s.hours}),E=(0,Yk.differenceInMinutes)(n,y);E&&(s.minutes=E);const N=(0,fc.add)(y,{minutes:s.minutes}),D=(0,Gk.differenceInSeconds)(n,N);return D&&(s.seconds=D),s}var JT={};JT.intlFormat=Jk;var Xk=Q;function Jk(t,e,r){let n;return Zk(e)?n=e:r=e,new Intl.DateTimeFormat(r==null?void 0:r.locale,n).format((0,Xk.toDate)(t))}function Zk(t){return t!==void 0&&!("locale"in t)}var ZT={};ZT.intlFormatDistance=tL;var eL=st,Oo=ie,Ug=sa,cb=wm,Bg=q0,db=bm,Wg=Em,fb=Tm,hb=Pm,$g=Rd;function tL(t,e,r){let n=0,s;const[i,o]=(0,eL.normalizeDates)(r==null?void 0:r.in,t,e);if(r!=null&&r.unit)s=r==null?void 0:r.unit,s==="second"?n=(0,$g.differenceInSeconds)(i,o):s==="minute"?n=(0,hb.differenceInMinutes)(i,o):s==="hour"?n=(0,fb.differenceInHours)(i,o):s==="day"?n=(0,Ug.differenceInCalendarDays)(i,o):s==="week"?n=(0,db.differenceInCalendarWeeks)(i,o):s==="month"?n=(0,cb.differenceInCalendarMonths)(i,o):s==="quarter"?n=(0,Bg.differenceInCalendarQuarters)(i,o):s==="year"&&(n=(0,Wg.differenceInCalendarYears)(i,o));else{const d=(0,$g.differenceInSeconds)(i,o);Math.abs(d)<Oo.secondsInMinute?(n=(0,$g.differenceInSeconds)(i,o),s="second"):Math.abs(d)<Oo.secondsInHour?(n=(0,hb.differenceInMinutes)(i,o),s="minute"):Math.abs(d)<Oo.secondsInDay&&Math.abs((0,Ug.differenceInCalendarDays)(i,o))<1?(n=(0,fb.differenceInHours)(i,o),s="hour"):Math.abs(d)<Oo.secondsInWeek&&(n=(0,Ug.differenceInCalendarDays)(i,o))&&Math.abs(n)<7?s="day":Math.abs(d)<Oo.secondsInMonth?(n=(0,db.differenceInCalendarWeeks)(i,o),s="week"):Math.abs(d)<Oo.secondsInQuarter?(n=(0,cb.differenceInCalendarMonths)(i,o),s="month"):Math.abs(d)<Oo.secondsInYear&&(0,Bg.differenceInCalendarQuarters)(i,o)<4?(n=(0,Bg.differenceInCalendarQuarters)(i,o),s="quarter"):(n=(0,Wg.differenceInCalendarYears)(i,o),s="year")}return new Intl.RelativeTimeFormat(r==null?void 0:r.locale,{numeric:"auto",...r}).format(n,s)}var eS={};eS.isAfter=rL;var mb=Q;function rL(t,e){return+(0,mb.toDate)(t)>+(0,mb.toDate)(e)}var tS={};tS.isBefore=nL;var gb=Q;function nL(t,e){return+(0,gb.toDate)(t)<+(0,gb.toDate)(e)}var rS={};rS.isEqual=sL;var pb=Q;function sL(t,e){return+(0,pb.toDate)(t)==+(0,pb.toDate)(e)}var nS={};nS.isExists=iL;function iL(t,e,r){const n=new Date(t,e,r);return n.getFullYear()===t&&n.getMonth()===e&&n.getDate()===r}var sS={};sS.isFirstDayOfMonth=oL;var aL=Q;function oL(t,e){return(0,aL.toDate)(t,e==null?void 0:e.in).getDate()===1}var iS={};iS.isFriday=uL;var lL=Q;function uL(t,e){return(0,lL.toDate)(t,e==null?void 0:e.in).getDay()===5}var aS={};aS.isFuture=dL;var cL=Q;function dL(t){return+(0,cL.toDate)(t)>Date.now()}var oS={},vy={},oo={},yy={};yy.transpose=hL;var fL=we;function hL(t,e){const r=mL(e)?new e(0):(0,fL.constructFrom)(e,0);return r.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),r.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),r}function mL(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}oo.ValueSetter=oo.Setter=oo.DateTimezoneSetter=void 0;var vb=we,gL=yy;const pL=10;class _y{constructor(){fe(this,"subPriority",0)}validate(e,r){return!0}}oo.Setter=_y;class vL extends _y{constructor(e,r,n,s,i){super(),this.value=e,this.validateValue=r,this.setValue=n,this.priority=s,i&&(this.subPriority=i)}validate(e,r){return this.validateValue(e,this.value,r)}set(e,r,n){return this.setValue(e,r,this.value,n)}}oo.ValueSetter=vL;class yL extends _y{constructor(r,n){super();fe(this,"priority",pL);fe(this,"subPriority",-1);this.context=r||(s=>(0,vb.constructFrom)(n,s))}set(r,n){return n.timestampIsSet?r:(0,vb.constructFrom)(r,(0,gL.transpose)(r,this.context))}}oo.DateTimezoneSetter=yL;var xy={},wy={},Qe={};Qe.Parser=void 0;var _L=oo;class xL{run(e,r,n,s){const i=this.parse(e,r,n,s);return i?{setter:new _L.ValueSetter(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(e,r,n){return!0}}Qe.Parser=xL;wy.EraParser=void 0;var wL=Qe;class bL extends wL.Parser{constructor(){super(...arguments);fe(this,"priority",140);fe(this,"incompatibleTokens",["R","u","t","T"])}parse(r,n,s){switch(n){case"G":case"GG":case"GGG":return s.era(r,{width:"abbreviated"})||s.era(r,{width:"narrow"});case"GGGGG":return s.era(r,{width:"narrow"});case"GGGG":default:return s.era(r,{width:"wide"})||s.era(r,{width:"abbreviated"})||s.era(r,{width:"narrow"})}}set(r,n,s){return n.era=s,r.setFullYear(s,0,1),r.setHours(0,0,0,0),r}}wy.EraParser=bL;var by={},ke={},Xt={};Xt.timezonePatterns=Xt.numericPatterns=void 0;Xt.numericPatterns={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/};Xt.timezonePatterns={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};ke.dayPeriodEnumToHours=IL;ke.isLeapYearIndex=OL;ke.mapValue=EL;ke.normalizeTwoDigitYear=CL;ke.parseAnyDigitsSigned=TL;ke.parseNDigits=SL;ke.parseNDigitsSigned=PL;ke.parseNumericPattern=kn;ke.parseTimezonePattern=DL;var Hg=ie,Vi=Xt;function EL(t,e){return t&&{value:e(t.value),rest:t.rest}}function kn(t,e){const r=e.match(t);return r?{value:parseInt(r[0],10),rest:e.slice(r[0].length)}:null}function DL(t,e){const r=e.match(t);if(!r)return null;if(r[0]==="Z")return{value:0,rest:e.slice(1)};const n=r[1]==="+"?1:-1,s=r[2]?parseInt(r[2],10):0,i=r[3]?parseInt(r[3],10):0,o=r[5]?parseInt(r[5],10):0;return{value:n*(s*Hg.millisecondsInHour+i*Hg.millisecondsInMinute+o*Hg.millisecondsInSecond),rest:e.slice(r[0].length)}}function TL(t){return kn(Vi.numericPatterns.anyDigitsSigned,t)}function SL(t,e){switch(t){case 1:return kn(Vi.numericPatterns.singleDigit,e);case 2:return kn(Vi.numericPatterns.twoDigits,e);case 3:return kn(Vi.numericPatterns.threeDigits,e);case 4:return kn(Vi.numericPatterns.fourDigits,e);default:return kn(new RegExp("^\\d{1,"+t+"}"),e)}}function PL(t,e){switch(t){case 1:return kn(Vi.numericPatterns.singleDigitSigned,e);case 2:return kn(Vi.numericPatterns.twoDigitsSigned,e);case 3:return kn(Vi.numericPatterns.threeDigitsSigned,e);case 4:return kn(Vi.numericPatterns.fourDigitsSigned,e);default:return kn(new RegExp("^-?\\d{1,"+t+"}"),e)}}function IL(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function CL(t,e){const r=e>0,n=r?e:1-e;let s;if(n<=50)s=t||100;else{const i=n+50,o=Math.trunc(i/100)*100,c=t>=i%100;s=t+o-(c?100:0)}return r?s:1-s}function OL(t){return t%400===0||t%4===0&&t%100!==0}by.YearParser=void 0;var NL=Qe,Ll=ke;class jL extends NL.Parser{constructor(){super(...arguments);fe(this,"priority",130);fe(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(r,n,s){const i=o=>({year:o,isTwoDigitYear:n==="yy"});switch(n){case"y":return(0,Ll.mapValue)((0,Ll.parseNDigits)(4,r),i);case"yo":return(0,Ll.mapValue)(s.ordinalNumber(r,{unit:"year"}),i);default:return(0,Ll.mapValue)((0,Ll.parseNDigits)(n.length,r),i)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,s){const i=r.getFullYear();if(s.isTwoDigitYear){const c=(0,Ll.normalizeTwoDigitYear)(s.year,i);return r.setFullYear(c,0,1),r.setHours(0,0,0,0),r}const o=!("era"in n)||n.era===1?s.year:1-s.year;return r.setFullYear(o,0,1),r.setHours(0,0,0,0),r}}by.YearParser=jL;var Ey={};Ey.LocalWeekYearParser=void 0;var ML=Fd,yb=_s,RL=Qe,Vl=ke;class AL extends RL.Parser{constructor(){super(...arguments);fe(this,"priority",130);fe(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(r,n,s){const i=o=>({year:o,isTwoDigitYear:n==="YY"});switch(n){case"Y":return(0,Vl.mapValue)((0,Vl.parseNDigits)(4,r),i);case"Yo":return(0,Vl.mapValue)(s.ordinalNumber(r,{unit:"year"}),i);default:return(0,Vl.mapValue)((0,Vl.parseNDigits)(n.length,r),i)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,s,i){const o=(0,ML.getWeekYear)(r,i);if(s.isTwoDigitYear){const d=(0,Vl.normalizeTwoDigitYear)(s.year,o);return r.setFullYear(d,0,i.firstWeekContainsDate),r.setHours(0,0,0,0),(0,yb.startOfWeek)(r,i)}const c=!("era"in n)||n.era===1?s.year:1-s.year;return r.setFullYear(c,0,i.firstWeekContainsDate),r.setHours(0,0,0,0),(0,yb.startOfWeek)(r,i)}}Ey.LocalWeekYearParser=AL;var Dy={};Dy.ISOWeekYearParser=void 0;var FL=ii,kL=we,LL=Qe,_b=ke;class VL extends LL.Parser{constructor(){super(...arguments);fe(this,"priority",130);fe(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(r,n){return n==="R"?(0,_b.parseNDigitsSigned)(4,r):(0,_b.parseNDigitsSigned)(n.length,r)}set(r,n,s){const i=(0,kL.constructFrom)(r,0);return i.setFullYear(s,0,4),i.setHours(0,0,0,0),(0,FL.startOfISOWeek)(i)}}Dy.ISOWeekYearParser=VL;var Ty={};Ty.ExtendedYearParser=void 0;var zL=Qe,xb=ke;class UL extends zL.Parser{constructor(){super(...arguments);fe(this,"priority",130);fe(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(r,n){return n==="u"?(0,xb.parseNDigitsSigned)(4,r):(0,xb.parseNDigitsSigned)(n.length,r)}set(r,n,s){return r.setFullYear(s,0,1),r.setHours(0,0,0,0),r}}Ty.ExtendedYearParser=UL;var Sy={};Sy.QuarterParser=void 0;var BL=Qe,WL=ke;class $L extends BL.Parser{constructor(){super(...arguments);fe(this,"priority",120);fe(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,s){switch(n){case"Q":case"QQ":return(0,WL.parseNDigits)(n.length,r);case"Qo":return s.ordinalNumber(r,{unit:"quarter"});case"QQQ":return s.quarter(r,{width:"abbreviated",context:"formatting"})||s.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(r,{width:"wide",context:"formatting"})||s.quarter(r,{width:"abbreviated",context:"formatting"})||s.quarter(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=1&&n<=4}set(r,n,s){return r.setMonth((s-1)*3,1),r.setHours(0,0,0,0),r}}Sy.QuarterParser=$L;var Py={};Py.StandAloneQuarterParser=void 0;var HL=Qe,YL=ke;class qL extends HL.Parser{constructor(){super(...arguments);fe(this,"priority",120);fe(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,s){switch(n){case"q":case"qq":return(0,YL.parseNDigits)(n.length,r);case"qo":return s.ordinalNumber(r,{unit:"quarter"});case"qqq":return s.quarter(r,{width:"abbreviated",context:"standalone"})||s.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(r,{width:"wide",context:"standalone"})||s.quarter(r,{width:"abbreviated",context:"standalone"})||s.quarter(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=1&&n<=4}set(r,n,s){return r.setMonth((s-1)*3,1),r.setHours(0,0,0,0),r}}Py.StandAloneQuarterParser=qL;var Iy={};Iy.MonthParser=void 0;var GL=Xt,KL=Qe,hc=ke;class QL extends KL.Parser{constructor(){super(...arguments);fe(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);fe(this,"priority",110)}parse(r,n,s){const i=o=>o-1;switch(n){case"M":return(0,hc.mapValue)((0,hc.parseNumericPattern)(GL.numericPatterns.month,r),i);case"MM":return(0,hc.mapValue)((0,hc.parseNDigits)(2,r),i);case"Mo":return(0,hc.mapValue)(s.ordinalNumber(r,{unit:"month"}),i);case"MMM":return s.month(r,{width:"abbreviated",context:"formatting"})||s.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(r,{width:"wide",context:"formatting"})||s.month(r,{width:"abbreviated",context:"formatting"})||s.month(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=11}set(r,n,s){return r.setMonth(s,1),r.setHours(0,0,0,0),r}}Iy.MonthParser=QL;var Cy={};Cy.StandAloneMonthParser=void 0;var XL=Xt,JL=Qe,mc=ke;class ZL extends JL.Parser{constructor(){super(...arguments);fe(this,"priority",110);fe(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(r,n,s){const i=o=>o-1;switch(n){case"L":return(0,mc.mapValue)((0,mc.parseNumericPattern)(XL.numericPatterns.month,r),i);case"LL":return(0,mc.mapValue)((0,mc.parseNDigits)(2,r),i);case"Lo":return(0,mc.mapValue)(s.ordinalNumber(r,{unit:"month"}),i);case"LLL":return s.month(r,{width:"abbreviated",context:"standalone"})||s.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(r,{width:"wide",context:"standalone"})||s.month(r,{width:"abbreviated",context:"standalone"})||s.month(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=11}set(r,n,s){return r.setMonth(s,1),r.setHours(0,0,0,0),r}}Cy.StandAloneMonthParser=ZL;var Oy={},Ny={};Ny.setWeek=t5;var e5=Am,wb=Q;function t5(t,e,r){const n=(0,wb.toDate)(t,r==null?void 0:r.in),s=(0,e5.getWeek)(n,r)-e;return n.setDate(n.getDate()-s*7),(0,wb.toDate)(n,r==null?void 0:r.in)}Oy.LocalWeekParser=void 0;var r5=Ny,n5=_s,s5=Xt,i5=Qe,bb=ke;class a5 extends i5.Parser{constructor(){super(...arguments);fe(this,"priority",100);fe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(r,n,s){switch(n){case"w":return(0,bb.parseNumericPattern)(s5.numericPatterns.week,r);case"wo":return s.ordinalNumber(r,{unit:"week"});default:return(0,bb.parseNDigits)(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,s,i){return(0,n5.startOfWeek)((0,r5.setWeek)(r,s,i),i)}}Oy.LocalWeekParser=a5;var jy={},My={};My.setISOWeek=u5;var o5=Rm,l5=Q;function u5(t,e,r){const n=(0,l5.toDate)(t,r==null?void 0:r.in),s=(0,o5.getISOWeek)(n,r)-e;return n.setDate(n.getDate()-s*7),n}jy.ISOWeekParser=void 0;var c5=My,d5=ii,f5=Xt,h5=Qe,Eb=ke;class m5 extends h5.Parser{constructor(){super(...arguments);fe(this,"priority",100);fe(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(r,n,s){switch(n){case"I":return(0,Eb.parseNumericPattern)(f5.numericPatterns.week,r);case"Io":return s.ordinalNumber(r,{unit:"week"});default:return(0,Eb.parseNDigits)(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,s){return(0,d5.startOfISOWeek)((0,c5.setISOWeek)(r,s))}}jy.ISOWeekParser=m5;var Ry={};Ry.DateParser=void 0;var g5=Xt,p5=Qe,Yg=ke;const v5=[31,28,31,30,31,30,31,31,30,31,30,31],y5=[31,29,31,30,31,30,31,31,30,31,30,31];class _5 extends p5.Parser{constructor(){super(...arguments);fe(this,"priority",90);fe(this,"subPriority",1);fe(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(r,n,s){switch(n){case"d":return(0,Yg.parseNumericPattern)(g5.numericPatterns.date,r);case"do":return s.ordinalNumber(r,{unit:"date"});default:return(0,Yg.parseNDigits)(n.length,r)}}validate(r,n){const s=r.getFullYear(),i=(0,Yg.isLeapYearIndex)(s),o=r.getMonth();return i?n>=1&&n<=y5[o]:n>=1&&n<=v5[o]}set(r,n,s){return r.setDate(s),r.setHours(0,0,0,0),r}}Ry.DateParser=_5;var Ay={};Ay.DayOfYearParser=void 0;var x5=Xt,w5=Qe,qg=ke;class b5 extends w5.Parser{constructor(){super(...arguments);fe(this,"priority",90);fe(this,"subpriority",1);fe(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(r,n,s){switch(n){case"D":case"DD":return(0,qg.parseNumericPattern)(x5.numericPatterns.dayOfYear,r);case"Do":return s.ordinalNumber(r,{unit:"date"});default:return(0,qg.parseNDigits)(n.length,r)}}validate(r,n){const s=r.getFullYear();return(0,qg.isLeapYearIndex)(s)?n>=1&&n<=366:n>=1&&n<=365}set(r,n,s){return r.setMonth(0,s),r.setHours(0,0,0,0),r}}Ay.DayOfYearParser=b5;var Fy={},Vd={};Vd.setDay=S5;var E5=gr,D5=si,T5=Q;function S5(t,e,r){var v,y,E,N;const n=(0,E5.getDefaultOptions)(),s=(r==null?void 0:r.weekStartsOn)??((y=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:y.weekStartsOn)??n.weekStartsOn??((N=(E=n.locale)==null?void 0:E.options)==null?void 0:N.weekStartsOn)??0,i=(0,T5.toDate)(t,r==null?void 0:r.in),o=i.getDay(),d=(e%7+7)%7,h=7-s,g=e<0||e>6?e-(o+h)%7:(d+h)%7-(o+h)%7;return(0,D5.addDays)(i,g,r)}Fy.DayParser=void 0;var P5=Vd,I5=Qe;class C5 extends I5.Parser{constructor(){super(...arguments);fe(this,"priority",90);fe(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(r,n,s){switch(n){case"E":case"EE":case"EEE":return s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(r,{width:"wide",context:"formatting"})||s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,s,i){return r=(0,P5.setDay)(r,s,i),r.setHours(0,0,0,0),r}}Fy.DayParser=C5;var ky={};ky.LocalDayParser=void 0;var O5=Vd,N5=Qe,Gg=ke;class j5 extends N5.Parser{constructor(){super(...arguments);fe(this,"priority",90);fe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(r,n,s,i){const o=c=>{const d=Math.floor((c-1)/7)*7;return(c+i.weekStartsOn+6)%7+d};switch(n){case"e":case"ee":return(0,Gg.mapValue)((0,Gg.parseNDigits)(n.length,r),o);case"eo":return(0,Gg.mapValue)(s.ordinalNumber(r,{unit:"day"}),o);case"eee":return s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"});case"eeeee":return s.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(r,{width:"wide",context:"formatting"})||s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,s,i){return r=(0,O5.setDay)(r,s,i),r.setHours(0,0,0,0),r}}ky.LocalDayParser=j5;var Ly={};Ly.StandAloneLocalDayParser=void 0;var M5=Vd,R5=Qe,Kg=ke;class A5 extends R5.Parser{constructor(){super(...arguments);fe(this,"priority",90);fe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(r,n,s,i){const o=c=>{const d=Math.floor((c-1)/7)*7;return(c+i.weekStartsOn+6)%7+d};switch(n){case"c":case"cc":return(0,Kg.mapValue)((0,Kg.parseNDigits)(n.length,r),o);case"co":return(0,Kg.mapValue)(s.ordinalNumber(r,{unit:"day"}),o);case"ccc":return s.day(r,{width:"abbreviated",context:"standalone"})||s.day(r,{width:"short",context:"standalone"})||s.day(r,{width:"narrow",context:"standalone"});case"ccccc":return s.day(r,{width:"narrow",context:"standalone"});case"cccccc":return s.day(r,{width:"short",context:"standalone"})||s.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(r,{width:"wide",context:"standalone"})||s.day(r,{width:"abbreviated",context:"standalone"})||s.day(r,{width:"short",context:"standalone"})||s.day(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=6}set(r,n,s,i){return r=(0,M5.setDay)(r,s,i),r.setHours(0,0,0,0),r}}Ly.StandAloneLocalDayParser=A5;var Vy={},zy={};zy.setISODay=V5;var F5=si,k5=gy,L5=Q;function V5(t,e,r){const n=(0,L5.toDate)(t,r==null?void 0:r.in),s=(0,k5.getISODay)(n,r),i=e-s;return(0,F5.addDays)(n,i,r)}Vy.ISODayParser=void 0;var z5=zy,U5=Qe,gc=ke;class B5 extends U5.Parser{constructor(){super(...arguments);fe(this,"priority",90);fe(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(r,n,s){const i=o=>o===0?7:o;switch(n){case"i":case"ii":return(0,gc.parseNDigits)(n.length,r);case"io":return s.ordinalNumber(r,{unit:"day"});case"iii":return(0,gc.mapValue)(s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"}),i);case"iiiii":return(0,gc.mapValue)(s.day(r,{width:"narrow",context:"formatting"}),i);case"iiiiii":return(0,gc.mapValue)(s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"}),i);case"iiii":default:return(0,gc.mapValue)(s.day(r,{width:"wide",context:"formatting"})||s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"}),i)}}validate(r,n){return n>=1&&n<=7}set(r,n,s){return r=(0,z5.setISODay)(r,s),r.setHours(0,0,0,0),r}}Vy.ISODayParser=B5;var Uy={};Uy.AMPMParser=void 0;var W5=Qe,$5=ke;class H5 extends W5.Parser{constructor(){super(...arguments);fe(this,"priority",80);fe(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(r,n,s){switch(n){case"a":case"aa":case"aaa":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(r,{width:"wide",context:"formatting"})||s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,s){return r.setHours((0,$5.dayPeriodEnumToHours)(s),0,0,0),r}}Uy.AMPMParser=H5;var By={};By.AMPMMidnightParser=void 0;var Y5=Qe,q5=ke;class G5 extends Y5.Parser{constructor(){super(...arguments);fe(this,"priority",80);fe(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(r,n,s){switch(n){case"b":case"bb":case"bbb":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(r,{width:"wide",context:"formatting"})||s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,s){return r.setHours((0,q5.dayPeriodEnumToHours)(s),0,0,0),r}}By.AMPMMidnightParser=G5;var Wy={};Wy.DayPeriodParser=void 0;var K5=Qe,Q5=ke;class X5 extends K5.Parser{constructor(){super(...arguments);fe(this,"priority",80);fe(this,"incompatibleTokens",["a","b","t","T"])}parse(r,n,s){switch(n){case"B":case"BB":case"BBB":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(r,{width:"wide",context:"formatting"})||s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,s){return r.setHours((0,Q5.dayPeriodEnumToHours)(s),0,0,0),r}}Wy.DayPeriodParser=X5;var $y={};$y.Hour1to12Parser=void 0;var J5=Xt,Z5=Qe,Db=ke;class e9 extends Z5.Parser{constructor(){super(...arguments);fe(this,"priority",70);fe(this,"incompatibleTokens",["H","K","k","t","T"])}parse(r,n,s){switch(n){case"h":return(0,Db.parseNumericPattern)(J5.numericPatterns.hour12h,r);case"ho":return s.ordinalNumber(r,{unit:"hour"});default:return(0,Db.parseNDigits)(n.length,r)}}validate(r,n){return n>=1&&n<=12}set(r,n,s){const i=r.getHours()>=12;return i&&s<12?r.setHours(s+12,0,0,0):!i&&s===12?r.setHours(0,0,0,0):r.setHours(s,0,0,0),r}}$y.Hour1to12Parser=e9;var Hy={};Hy.Hour0to23Parser=void 0;var t9=Xt,r9=Qe,Tb=ke;class n9 extends r9.Parser{constructor(){super(...arguments);fe(this,"priority",70);fe(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(r,n,s){switch(n){case"H":return(0,Tb.parseNumericPattern)(t9.numericPatterns.hour23h,r);case"Ho":return s.ordinalNumber(r,{unit:"hour"});default:return(0,Tb.parseNDigits)(n.length,r)}}validate(r,n){return n>=0&&n<=23}set(r,n,s){return r.setHours(s,0,0,0),r}}Hy.Hour0to23Parser=n9;var Yy={};Yy.Hour0To11Parser=void 0;var s9=Xt,i9=Qe,Sb=ke;class a9 extends i9.Parser{constructor(){super(...arguments);fe(this,"priority",70);fe(this,"incompatibleTokens",["h","H","k","t","T"])}parse(r,n,s){switch(n){case"K":return(0,Sb.parseNumericPattern)(s9.numericPatterns.hour11h,r);case"Ko":return s.ordinalNumber(r,{unit:"hour"});default:return(0,Sb.parseNDigits)(n.length,r)}}validate(r,n){return n>=0&&n<=11}set(r,n,s){return r.getHours()>=12&&s<12?r.setHours(s+12,0,0,0):r.setHours(s,0,0,0),r}}Yy.Hour0To11Parser=a9;var qy={};qy.Hour1To24Parser=void 0;var o9=Xt,l9=Qe,Pb=ke;class u9 extends l9.Parser{constructor(){super(...arguments);fe(this,"priority",70);fe(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(r,n,s){switch(n){case"k":return(0,Pb.parseNumericPattern)(o9.numericPatterns.hour24h,r);case"ko":return s.ordinalNumber(r,{unit:"hour"});default:return(0,Pb.parseNDigits)(n.length,r)}}validate(r,n){return n>=1&&n<=24}set(r,n,s){const i=s<=24?s%24:s;return r.setHours(i,0,0,0),r}}qy.Hour1To24Parser=u9;var Gy={};Gy.MinuteParser=void 0;var c9=Xt,d9=Qe,Ib=ke;class f9 extends d9.Parser{constructor(){super(...arguments);fe(this,"priority",60);fe(this,"incompatibleTokens",["t","T"])}parse(r,n,s){switch(n){case"m":return(0,Ib.parseNumericPattern)(c9.numericPatterns.minute,r);case"mo":return s.ordinalNumber(r,{unit:"minute"});default:return(0,Ib.parseNDigits)(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,s){return r.setMinutes(s,0,0),r}}Gy.MinuteParser=f9;var Ky={};Ky.SecondParser=void 0;var h9=Xt,m9=Qe,Cb=ke;class g9 extends m9.Parser{constructor(){super(...arguments);fe(this,"priority",50);fe(this,"incompatibleTokens",["t","T"])}parse(r,n,s){switch(n){case"s":return(0,Cb.parseNumericPattern)(h9.numericPatterns.second,r);case"so":return s.ordinalNumber(r,{unit:"second"});default:return(0,Cb.parseNDigits)(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,s){return r.setSeconds(s,0),r}}Ky.SecondParser=g9;var Qy={};Qy.FractionOfSecondParser=void 0;var p9=Qe,Ob=ke;class v9 extends p9.Parser{constructor(){super(...arguments);fe(this,"priority",30);fe(this,"incompatibleTokens",["t","T"])}parse(r,n){const s=i=>Math.trunc(i*Math.pow(10,-n.length+3));return(0,Ob.mapValue)((0,Ob.parseNDigits)(n.length,r),s)}set(r,n,s){return r.setMilliseconds(s),r}}Qy.FractionOfSecondParser=v9;var Xy={};Xy.ISOTimezoneWithZParser=void 0;var y9=we,_9=ia,pc=Xt,x9=Qe,vc=ke;class w9 extends x9.Parser{constructor(){super(...arguments);fe(this,"priority",10);fe(this,"incompatibleTokens",["t","T","x"])}parse(r,n){switch(n){case"X":return(0,vc.parseTimezonePattern)(pc.timezonePatterns.basicOptionalMinutes,r);case"XX":return(0,vc.parseTimezonePattern)(pc.timezonePatterns.basic,r);case"XXXX":return(0,vc.parseTimezonePattern)(pc.timezonePatterns.basicOptionalSeconds,r);case"XXXXX":return(0,vc.parseTimezonePattern)(pc.timezonePatterns.extendedOptionalSeconds,r);case"XXX":default:return(0,vc.parseTimezonePattern)(pc.timezonePatterns.extended,r)}}set(r,n,s){return n.timestampIsSet?r:(0,y9.constructFrom)(r,r.getTime()-(0,_9.getTimezoneOffsetInMilliseconds)(r)-s)}}Xy.ISOTimezoneWithZParser=w9;var Jy={};Jy.ISOTimezoneParser=void 0;var b9=we,E9=ia,yc=Xt,D9=Qe,_c=ke;class T9 extends D9.Parser{constructor(){super(...arguments);fe(this,"priority",10);fe(this,"incompatibleTokens",["t","T","X"])}parse(r,n){switch(n){case"x":return(0,_c.parseTimezonePattern)(yc.timezonePatterns.basicOptionalMinutes,r);case"xx":return(0,_c.parseTimezonePattern)(yc.timezonePatterns.basic,r);case"xxxx":return(0,_c.parseTimezonePattern)(yc.timezonePatterns.basicOptionalSeconds,r);case"xxxxx":return(0,_c.parseTimezonePattern)(yc.timezonePatterns.extendedOptionalSeconds,r);case"xxx":default:return(0,_c.parseTimezonePattern)(yc.timezonePatterns.extended,r)}}set(r,n,s){return n.timestampIsSet?r:(0,b9.constructFrom)(r,r.getTime()-(0,E9.getTimezoneOffsetInMilliseconds)(r)-s)}}Jy.ISOTimezoneParser=T9;var Zy={};Zy.TimestampSecondsParser=void 0;var S9=we,P9=Qe,I9=ke;class C9 extends P9.Parser{constructor(){super(...arguments);fe(this,"priority",40);fe(this,"incompatibleTokens","*")}parse(r){return(0,I9.parseAnyDigitsSigned)(r)}set(r,n,s){return[(0,S9.constructFrom)(r,s*1e3),{timestampIsSet:!0}]}}Zy.TimestampSecondsParser=C9;var e_={};e_.TimestampMillisecondsParser=void 0;var O9=we,N9=Qe,j9=ke;class M9 extends N9.Parser{constructor(){super(...arguments);fe(this,"priority",20);fe(this,"incompatibleTokens","*")}parse(r){return(0,j9.parseAnyDigitsSigned)(r)}set(r,n,s){return[(0,O9.constructFrom)(r,s),{timestampIsSet:!0}]}}e_.TimestampMillisecondsParser=M9;xy.parsers=void 0;var R9=wy,A9=by,F9=Ey,k9=Dy,L9=Ty,V9=Sy,z9=Py,U9=Iy,B9=Cy,W9=Oy,$9=jy,H9=Ry,Y9=Ay,q9=Fy,G9=ky,K9=Ly,Q9=Vy,X9=Uy,J9=By,Z9=Wy,eV=$y,tV=Hy,rV=Yy,nV=qy,sV=Gy,iV=Ky,aV=Qy,oV=Xy,lV=Jy,uV=Zy,cV=e_;xy.parsers={G:new R9.EraParser,y:new A9.YearParser,Y:new F9.LocalWeekYearParser,R:new k9.ISOWeekYearParser,u:new L9.ExtendedYearParser,Q:new V9.QuarterParser,q:new z9.StandAloneQuarterParser,M:new U9.MonthParser,L:new B9.StandAloneMonthParser,w:new W9.LocalWeekParser,I:new $9.ISOWeekParser,d:new H9.DateParser,D:new Y9.DayOfYearParser,E:new q9.DayParser,e:new G9.LocalDayParser,c:new K9.StandAloneLocalDayParser,i:new Q9.ISODayParser,a:new X9.AMPMParser,b:new J9.AMPMMidnightParser,B:new Z9.DayPeriodParser,h:new eV.Hour1to12Parser,H:new tV.Hour0to23Parser,K:new rV.Hour0To11Parser,k:new nV.Hour1To24Parser,m:new sV.MinuteParser,s:new iV.SecondParser,S:new aV.FractionOfSecondParser,X:new oV.ISOTimezoneWithZParser,x:new lV.ISOTimezoneParser,t:new uV.TimestampSecondsParser,T:new cV.TimestampMillisecondsParser};(function(t){Object.defineProperty(t,"longFormatters",{enumerable:!0,get:function(){return r.longFormatters}}),t.parse=D,Object.defineProperty(t,"parsers",{enumerable:!0,get:function(){return d.parsers}});var e=pl,r=Lm,n=kd,s=we,i=my,o=Q,c=oo,d=xy;const h=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,g=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,v=/^'([^]*?)'?$/,y=/''/g,E=/\S/,N=/[a-zA-Z]/;function D(S,P,C,R){var Oe,ee,de,ue,De,X,G,B;const Y=()=>(0,s.constructFrom)((R==null?void 0:R.in)||C,NaN),q=(0,i.getDefaultOptions)(),T=(R==null?void 0:R.locale)??q.locale??e.defaultLocale,b=(R==null?void 0:R.firstWeekContainsDate)??((ee=(Oe=R==null?void 0:R.locale)==null?void 0:Oe.options)==null?void 0:ee.firstWeekContainsDate)??q.firstWeekContainsDate??((ue=(de=q.locale)==null?void 0:de.options)==null?void 0:ue.firstWeekContainsDate)??1,I=(R==null?void 0:R.weekStartsOn)??((X=(De=R==null?void 0:R.locale)==null?void 0:De.options)==null?void 0:X.weekStartsOn)??q.weekStartsOn??((B=(G=q.locale)==null?void 0:G.options)==null?void 0:B.weekStartsOn)??0;if(!P)return S?Y():(0,o.toDate)(C,R==null?void 0:R.in);const j={firstWeekContainsDate:b,weekStartsOn:I,locale:T},M=[new c.DateTimezoneSetter(R==null?void 0:R.in,C)],V=P.match(g).map(F=>{const K=F[0];if(K in r.longFormatters){const ae=r.longFormatters[K];return ae(F,T.formatLong)}return F}).join("").match(h),O=[];for(let F of V){!(R!=null&&R.useAdditionalWeekYearTokens)&&(0,n.isProtectedWeekYearToken)(F)&&(0,n.warnOrThrowProtectedError)(F,P,S),!(R!=null&&R.useAdditionalDayOfYearTokens)&&(0,n.isProtectedDayOfYearToken)(F)&&(0,n.warnOrThrowProtectedError)(F,P,S);const K=F[0],ae=d.parsers[K];if(ae){const{incompatibleTokens:ge}=ae;if(Array.isArray(ge)){const ve=O.find(Te=>ge.includes(Te.token)||Te.token===K);if(ve)throw new RangeError(`The format string mustn't contain \`${ve.fullToken}\` and \`${F}\` at the same time`)}else if(ae.incompatibleTokens==="*"&&O.length>0)throw new RangeError(`The format string mustn't contain \`${F}\` and any other token at the same time`);O.push({token:K,fullToken:F});const pe=ae.run(S,F,T.match,j);if(!pe)return Y();M.push(pe.setter),S=pe.rest}else{if(K.match(N))throw new RangeError("Format string contains an unescaped latin alphabet character `"+K+"`");if(F==="''"?F="'":K==="'"&&(F=k(F)),S.indexOf(F)===0)S=S.slice(F.length);else return Y()}}if(S.length>0&&E.test(S))return Y();const et=M.map(F=>F.priority).sort((F,K)=>K-F).filter((F,K,ae)=>ae.indexOf(F)===K).map(F=>M.filter(K=>K.priority===F).sort((K,ae)=>ae.subPriority-K.subPriority)).map(F=>F[0]);let tt=(0,o.toDate)(C,R==null?void 0:R.in);if(isNaN(+tt))return Y();const le={};for(const F of et){if(!F.validate(tt,j))return Y();const K=F.set(tt,le,j);Array.isArray(K)?(tt=K[0],Object.assign(le,K[1])):tt=K}return tt}function k(S){return S.match(v)[1].replace(y,"'")}})(vy);oS.isMatch=hV;var dV=aa,fV=vy;function hV(t,e,r){return(0,dV.isValid)((0,fV.parse)(t,e,new Date,r))}var lS={};lS.isMonday=gV;var mV=Q;function gV(t,e){return(0,mV.toDate)(t,e==null?void 0:e.in).getDay()===1}var uS={};uS.isPast=vV;var pV=Q;function vV(t){return+(0,pV.toDate)(t)<Date.now()}var t_={},r_={};r_.startOfHour=_V;var yV=Q;function _V(t,e){const r=(0,yV.toDate)(t,e==null?void 0:e.in);return r.setMinutes(0,0,0),r}t_.isSameHour=wV;var xV=st,Nb=r_;function wV(t,e,r){const[n,s]=(0,xV.normalizeDates)(r==null?void 0:r.in,t,e);return+(0,Nb.startOfHour)(n)==+(0,Nb.startOfHour)(s)}var n_={},Vm={};Vm.isSameWeek=EV;var bV=st,jb=_s;function EV(t,e,r){const[n,s]=(0,bV.normalizeDates)(r==null?void 0:r.in,t,e);return+(0,jb.startOfWeek)(n,r)==+(0,jb.startOfWeek)(s,r)}n_.isSameISOWeek=TV;var DV=Vm;function TV(t,e,r){return(0,DV.isSameWeek)(t,e,{...r,weekStartsOn:1})}var cS={};cS.isSameISOWeekYear=PV;var Mb=Fu,SV=st;function PV(t,e,r){const[n,s]=(0,SV.normalizeDates)(r==null?void 0:r.in,t,e);return+(0,Mb.startOfISOWeekYear)(n)==+(0,Mb.startOfISOWeekYear)(s)}var s_={},i_={};i_.startOfMinute=CV;var IV=Q;function CV(t,e){const r=(0,IV.toDate)(t,e==null?void 0:e.in);return r.setSeconds(0,0),r}s_.isSameMinute=OV;var Rb=i_;function OV(t,e){return+(0,Rb.startOfMinute)(t)==+(0,Rb.startOfMinute)(e)}var a_={};a_.isSameMonth=jV;var NV=st;function jV(t,e,r){const[n,s]=(0,NV.normalizeDates)(r==null?void 0:r.in,t,e);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}var o_={};o_.isSameQuarter=RV;var MV=st,Ab=Om;function RV(t,e,r){const[n,s]=(0,MV.normalizeDates)(r==null?void 0:r.in,t,e);return+(0,Ab.startOfQuarter)(n)==+(0,Ab.startOfQuarter)(s)}var l_={},u_={};u_.startOfSecond=FV;var AV=Q;function FV(t,e){const r=(0,AV.toDate)(t,e==null?void 0:e.in);return r.setMilliseconds(0),r}l_.isSameSecond=kV;var Fb=u_;function kV(t,e){return+(0,Fb.startOfSecond)(t)==+(0,Fb.startOfSecond)(e)}var c_={};c_.isSameYear=VV;var LV=st;function VV(t,e,r){const[n,s]=(0,LV.normalizeDates)(r==null?void 0:r.in,t,e);return n.getFullYear()===s.getFullYear()}var dS={};dS.isThisHour=WV;var zV=Jt,UV=t_,BV=Q;function WV(t,e){return(0,UV.isSameHour)((0,BV.toDate)(t,e==null?void 0:e.in),(0,zV.constructNow)((e==null?void 0:e.in)||t))}var fS={};fS.isThisISOWeek=qV;var $V=we,HV=Jt,YV=n_;function qV(t,e){return(0,YV.isSameISOWeek)((0,$V.constructFrom)((e==null?void 0:e.in)||t,t),(0,HV.constructNow)((e==null?void 0:e.in)||t))}var hS={};hS.isThisMinute=QV;var GV=Jt,KV=s_;function QV(t){return(0,KV.isSameMinute)(t,(0,GV.constructNow)(t))}var mS={};mS.isThisMonth=ez;var XV=we,JV=Jt,ZV=a_;function ez(t,e){return(0,ZV.isSameMonth)((0,XV.constructFrom)((e==null?void 0:e.in)||t,t),(0,JV.constructNow)((e==null?void 0:e.in)||t))}var gS={};gS.isThisQuarter=sz;var tz=we,rz=Jt,nz=o_;function sz(t,e){return(0,nz.isSameQuarter)((0,tz.constructFrom)((e==null?void 0:e.in)||t,t),(0,rz.constructNow)((e==null?void 0:e.in)||t))}var pS={};pS.isThisSecond=oz;var iz=Jt,az=l_;function oz(t){return(0,az.isSameSecond)(t,(0,iz.constructNow)(t))}var vS={};vS.isThisWeek=dz;var lz=we,uz=Jt,cz=Vm;function dz(t,e){return(0,cz.isSameWeek)((0,lz.constructFrom)((e==null?void 0:e.in)||t,t),(0,uz.constructNow)((e==null?void 0:e.in)||t),e)}var yS={};yS.isThisYear=gz;var fz=we,hz=Jt,mz=c_;function gz(t,e){return(0,mz.isSameYear)((0,fz.constructFrom)((e==null?void 0:e.in)||t,t),(0,hz.constructNow)((e==null?void 0:e.in)||t))}var _S={};_S.isThursday=vz;var pz=Q;function vz(t,e){return(0,pz.toDate)(t,e==null?void 0:e.in).getDay()===4}var xS={};xS.isToday=wz;var yz=we,_z=Jt,xz=ku;function wz(t,e){return(0,xz.isSameDay)((0,yz.constructFrom)((e==null?void 0:e.in)||t,t),(0,_z.constructNow)((e==null?void 0:e.in)||t))}var wS={};wS.isTomorrow=Tz;var bz=si,Ez=Jt,Dz=ku;function Tz(t,e){return(0,Dz.isSameDay)(t,(0,bz.addDays)((0,Ez.constructNow)((e==null?void 0:e.in)||t),1),e)}var bS={};bS.isTuesday=Pz;var Sz=Q;function Pz(t,e){return(0,Sz.toDate)(t,e==null?void 0:e.in).getDay()===2}var ES={};ES.isWednesday=Cz;var Iz=Q;function Cz(t,e){return(0,Iz.toDate)(t,e==null?void 0:e.in).getDay()===3}var DS={};DS.isWithinInterval=Oz;var Qg=Q;function Oz(t,e,r){const n=+(0,Qg.toDate)(t,r==null?void 0:r.in),[s,i]=[+(0,Qg.toDate)(e.start,r==null?void 0:r.in),+(0,Qg.toDate)(e.end,r==null?void 0:r.in)].sort((o,c)=>o-c);return n>=s&&n<=i}var TS={},zd={};zd.subDays=jz;var Nz=si;function jz(t,e,r){return(0,Nz.addDays)(t,-e,r)}TS.isYesterday=kz;var Mz=we,Rz=Jt,Az=ku,Fz=zd;function kz(t,e){return(0,Az.isSameDay)((0,Mz.constructFrom)((e==null?void 0:e.in)||t,t),(0,Fz.subDays)((0,Rz.constructNow)((e==null?void 0:e.in)||t),1))}var SS={};SS.lastDayOfDecade=Lz;var kb=Q;function Lz(t,e){const r=(0,kb.toDate)(t,e==null?void 0:e.in),n=r.getFullYear(),s=9+Math.floor(n/10)*10;return r.setFullYear(s+1,0,0),r.setHours(0,0,0,0),(0,kb.toDate)(r,e==null?void 0:e.in)}var PS={},d_={};d_.lastDayOfWeek=Uz;var Vz=gr,zz=Q;function Uz(t,e){var c,d,h,g;const r=(0,Vz.getDefaultOptions)(),n=(e==null?void 0:e.weekStartsOn)??((d=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??r.weekStartsOn??((g=(h=r.locale)==null?void 0:h.options)==null?void 0:g.weekStartsOn)??0,s=(0,zz.toDate)(t,e==null?void 0:e.in),i=s.getDay(),o=(i<n?-7:0)+6-(i-n);return s.setHours(0,0,0,0),s.setDate(s.getDate()+o),s}PS.lastDayOfISOWeek=Wz;var Bz=d_;function Wz(t,e){return(0,Bz.lastDayOfWeek)(t,{...e,weekStartsOn:1})}var IS={};IS.lastDayOfISOWeekYear=qz;var $z=we,Hz=Do,Yz=ii;function qz(t,e){const r=(0,Hz.getISOWeekYear)(t,e),n=(0,$z.constructFrom)((e==null?void 0:e.in)||t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=(0,Yz.startOfISOWeek)(n,e);return s.setDate(s.getDate()-1),s}var CS={};CS.lastDayOfQuarter=Kz;var Gz=Q;function Kz(t,e){const r=(0,Gz.toDate)(t,e==null?void 0:e.in),n=r.getMonth(),s=n-n%3+3;return r.setMonth(s,0),r.setHours(0,0,0,0),r}var OS={};OS.lastDayOfYear=Xz;var Qz=Q;function Xz(t,e){const r=(0,Qz.toDate)(t,e==null?void 0:e.in),n=r.getFullYear();return r.setFullYear(n+1,0,0),r.setHours(0,0,0,0),r}var NS={};(function(t){t.lightFormat=d,Object.defineProperty(t,"lightFormatters",{enumerable:!0,get:function(){return e.lightFormatters}});var e=km,r=aa,n=Q;const s=/(\w)\1*|''|'(''|[^'])+('|$)|./g,i=/^'([^]*?)'?$/,o=/''/g,c=/[a-zA-Z]/;function d(g,v){const y=(0,n.toDate)(g);if(!(0,r.isValid)(y))throw new RangeError("Invalid time value");const E=v.match(s);return E?E.map(D=>{if(D==="''")return"'";const k=D[0];if(k==="'")return h(D);const S=e.lightFormatters[k];if(S)return S(y,D);if(k.match(c))throw new RangeError("Format string contains an unescaped latin alphabet character `"+k+"`");return D}).join(""):""}function h(g){const v=g.match(i);return v?v[1].replace(o,"'"):g}})(NS);var jS={};jS.milliseconds=Jz;var Lb=ie;function Jz({years:t,months:e,weeks:r,days:n,hours:s,minutes:i,seconds:o}){let c=0;t&&(c+=t*Lb.daysInYear),e&&(c+=e*(Lb.daysInYear/12)),r&&(c+=r*7),n&&(c+=n);let d=c*24*60*60;return s&&(d+=s*60*60),i&&(d+=i*60),o&&(d+=o),Math.trunc(d*1e3)}var MS={};MS.millisecondsToHours=e8;var Zz=ie;function e8(t){const e=t/Zz.millisecondsInHour;return Math.trunc(e)}var RS={};RS.millisecondsToMinutes=r8;var t8=ie;function r8(t){const e=t/t8.millisecondsInMinute;return Math.trunc(e)}var AS={};AS.millisecondsToSeconds=s8;var n8=ie;function s8(t){const e=t/n8.millisecondsInSecond;return Math.trunc(e)}var FS={};FS.minutesToHours=a8;var i8=ie;function a8(t){const e=t/i8.minutesInHour;return Math.trunc(e)}var kS={};kS.minutesToMilliseconds=l8;var o8=ie;function l8(t){return Math.trunc(t*o8.millisecondsInMinute)}var LS={};LS.minutesToSeconds=c8;var u8=ie;function c8(t){return Math.trunc(t*u8.secondsInMinute)}var VS={};VS.monthsToQuarters=f8;var d8=ie;function f8(t){const e=t/d8.monthsInQuarter;return Math.trunc(e)}var zS={};zS.monthsToYears=m8;var h8=ie;function m8(t){const e=t/h8.monthsInYear;return Math.trunc(e)}var la={};la.nextDay=v8;var g8=si,p8=Ld;function v8(t,e,r){let n=e-(0,p8.getDay)(t,r);return n<=0&&(n+=7),(0,g8.addDays)(t,n,r)}var US={};US.nextFriday=_8;var y8=la;function _8(t,e){return(0,y8.nextDay)(t,5,e)}var BS={};BS.nextMonday=w8;var x8=la;function w8(t,e){return(0,x8.nextDay)(t,1,e)}var WS={};WS.nextSaturday=E8;var b8=la;function E8(t,e){return(0,b8.nextDay)(t,6,e)}var $S={};$S.nextSunday=T8;var D8=la;function T8(t,e){return(0,D8.nextDay)(t,0,e)}var HS={};HS.nextThursday=P8;var S8=la;function P8(t,e){return(0,S8.nextDay)(t,4,e)}var YS={};YS.nextTuesday=C8;var I8=la;function C8(t,e){return(0,I8.nextDay)(t,2,e)}var qS={};qS.nextWednesday=N8;var O8=la;function N8(t,e){return(0,O8.nextDay)(t,3,e)}var GS={};GS.parseISO=M8;var Rh=ie,j8=we,Vb=Q;function M8(t,e){const r=()=>(0,j8.constructFrom)(e==null?void 0:e.in,NaN),n=(e==null?void 0:e.additionalDigits)??2,s=k8(t);let i;if(s.date){const h=L8(s.date,n);i=V8(h.restDateString,h.year)}if(!i||isNaN(+i))return r();const o=+i;let c=0,d;if(s.time&&(c=z8(s.time),isNaN(c)))return r();if(s.timezone){if(d=U8(s.timezone),isNaN(d))return r()}else{const h=new Date(o+c),g=(0,Vb.toDate)(0,e==null?void 0:e.in);return g.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),g.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),g}return(0,Vb.toDate)(o+c+d,e==null?void 0:e.in)}const Pf={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},R8=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,A8=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,F8=/^([+-])(\d{2})(?::?(\d{2}))?$/;function k8(t){const e={},r=t.split(Pf.dateTimeDelimiter);let n;if(r.length>2)return e;if(/:/.test(r[0])?n=r[0]:(e.date=r[0],n=r[1],Pf.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Pf.timeZoneDelimiter)[0],n=t.substr(e.date.length,t.length))),n){const s=Pf.timezone.exec(n);s?(e.time=n.replace(s[1],""),e.timezone=s[1]):e.time=n}return e}function L8(t,e){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(r);if(!n)return{year:NaN,restDateString:""};const s=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?s:i*100,restDateString:t.slice((n[1]||n[2]).length)}}function V8(t,e){if(e===null)return new Date(NaN);const r=t.match(R8);if(!r)return new Date(NaN);const n=!!r[4],s=xc(r[1]),i=xc(r[2])-1,o=xc(r[3]),c=xc(r[4]),d=xc(r[5])-1;if(n)return Y8(e,c,d)?B8(e,c,d):new Date(NaN);{const h=new Date(0);return!$8(e,i,o)||!H8(e,s)?new Date(NaN):(h.setUTCFullYear(e,i,Math.max(s,o)),h)}}function xc(t){return t?parseInt(t):1}function z8(t){const e=t.match(A8);if(!e)return NaN;const r=Xg(e[1]),n=Xg(e[2]),s=Xg(e[3]);return q8(r,n,s)?r*Rh.millisecondsInHour+n*Rh.millisecondsInMinute+s*1e3:NaN}function Xg(t){return t&&parseFloat(t.replace(",","."))||0}function U8(t){if(t==="Z")return 0;const e=t.match(F8);if(!e)return 0;const r=e[1]==="+"?-1:1,n=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return G8(n,s)?r*(n*Rh.millisecondsInHour+s*Rh.millisecondsInMinute):NaN}function B8(t,e,r){const n=new Date(0);n.setUTCFullYear(t,0,4);const s=n.getUTCDay()||7,i=(e-1)*7+r+1-s;return n.setUTCDate(n.getUTCDate()+i),n}const W8=[31,null,31,30,31,30,31,31,30,31,30,31];function KS(t){return t%400===0||t%4===0&&t%100!==0}function $8(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(W8[e]||(KS(t)?29:28))}function H8(t,e){return e>=1&&e<=(KS(t)?366:365)}function Y8(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function q8(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function G8(t,e){return e>=0&&e<=59}var QS={};QS.parseJSON=K8;var zb=Q;function K8(t,e){const r=t.match(/(\d{4})-(\d{2})-(\d{2})[T ](\d{2}):(\d{2}):(\d{2})(?:\.(\d{0,7}))?(?:Z|(.)(\d{2}):?(\d{2})?)?/);return r?(0,zb.toDate)(Date.UTC(+r[1],+r[2]-1,+r[3],+r[4]-(+r[9]||0)*(r[8]=="-"?-1:1),+r[5]-(+r[10]||0)*(r[8]=="-"?-1:1),+r[6],+((r[7]||"0")+"00").substring(0,3)),e==null?void 0:e.in):(0,zb.toDate)(NaN,e==null?void 0:e.in)}var ua={};ua.previousDay=J8;var Q8=Ld,X8=zd;function J8(t,e,r){let n=(0,Q8.getDay)(t,r)-e;return n<=0&&(n+=7),(0,X8.subDays)(t,n,r)}var XS={};XS.previousFriday=eU;var Z8=ua;function eU(t,e){return(0,Z8.previousDay)(t,5,e)}var JS={};JS.previousMonday=rU;var tU=ua;function rU(t,e){return(0,tU.previousDay)(t,1,e)}var ZS={};ZS.previousSaturday=sU;var nU=ua;function sU(t,e){return(0,nU.previousDay)(t,6,e)}var eP={};eP.previousSunday=aU;var iU=ua;function aU(t,e){return(0,iU.previousDay)(t,0,e)}var tP={};tP.previousThursday=lU;var oU=ua;function lU(t,e){return(0,oU.previousDay)(t,4,e)}var rP={};rP.previousTuesday=cU;var uU=ua;function cU(t,e){return(0,uU.previousDay)(t,2,e)}var nP={};nP.previousWednesday=fU;var dU=ua;function fU(t,e){return(0,dU.previousDay)(t,3,e)}var sP={};sP.quartersToMonths=mU;var hU=ie;function mU(t){return Math.trunc(t*hU.monthsInQuarter)}var iP={};iP.quartersToYears=pU;var gU=ie;function pU(t){const e=t/gU.quartersInYear;return Math.trunc(e)}var aP={};aP.roundToNearestHours=xU;var vU=oa,yU=we,_U=Q;function xU(t,e){const r=(e==null?void 0:e.nearestTo)??1;if(r<1||r>12)return(0,yU.constructFrom)((e==null?void 0:e.in)||t,NaN);const n=(0,_U.toDate)(t,e==null?void 0:e.in),s=n.getMinutes()/60,i=n.getSeconds()/60/60,o=n.getMilliseconds()/1e3/60/60,c=n.getHours()+s+i+o,d=(e==null?void 0:e.roundingMethod)??"round",g=(0,vU.getRoundingMethod)(d)(c/r)*r;return n.setHours(g,0,0,0),n}var oP={};oP.roundToNearestMinutes=DU;var wU=oa,bU=we,EU=Q;function DU(t,e){const r=(e==null?void 0:e.nearestTo)??1;if(r<1||r>30)return(0,bU.constructFrom)(t,NaN);const n=(0,EU.toDate)(t,e==null?void 0:e.in),s=n.getSeconds()/60,i=n.getMilliseconds()/1e3/60,o=n.getMinutes()+s+i,c=(e==null?void 0:e.roundingMethod)??"round",h=(0,wU.getRoundingMethod)(c)(o/r)*r;return n.setMinutes(h,0,0),n}var lP={};lP.secondsToHours=SU;var TU=ie;function SU(t){const e=t/TU.secondsInHour;return Math.trunc(e)}var uP={};uP.secondsToMilliseconds=IU;var PU=ie;function IU(t){return t*PU.millisecondsInSecond}var cP={};cP.secondsToMinutes=OU;var CU=ie;function OU(t){const e=t/CU.secondsInMinute;return Math.trunc(e)}var dP={},zm={};zm.setMonth=RU;var NU=we,jU=fy,MU=Q;function RU(t,e,r){const n=(0,MU.toDate)(t,r==null?void 0:r.in),s=n.getFullYear(),i=n.getDate(),o=(0,NU.constructFrom)((r==null?void 0:r.in)||t,0);o.setFullYear(s,e,15),o.setHours(0,0,0,0);const c=(0,jU.getDaysInMonth)(o);return n.setMonth(e,Math.min(i,c)),n}dP.set=LU;var AU=we,FU=zm,kU=Q;function LU(t,e,r){let n=(0,kU.toDate)(t,r==null?void 0:r.in);return isNaN(+n)?(0,AU.constructFrom)((r==null?void 0:r.in)||t,NaN):(e.year!=null&&n.setFullYear(e.year),e.month!=null&&(n=(0,FU.setMonth)(n,e.month)),e.date!=null&&n.setDate(e.date),e.hours!=null&&n.setHours(e.hours),e.minutes!=null&&n.setMinutes(e.minutes),e.seconds!=null&&n.setSeconds(e.seconds),e.milliseconds!=null&&n.setMilliseconds(e.milliseconds),n)}var fP={};fP.setDate=zU;var VU=Q;function zU(t,e,r){const n=(0,VU.toDate)(t,r==null?void 0:r.in);return n.setDate(e),n}var hP={};hP.setDayOfYear=BU;var UU=Q;function BU(t,e,r){const n=(0,UU.toDate)(t,r==null?void 0:r.in);return n.setMonth(0),n.setDate(e),n}var mP={};mP.setDefaultOptions=WU;var Ub=gr;function WU(t){const e={},r=(0,Ub.getDefaultOptions)();for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]===void 0?delete e[n]:e[n]=t[n]);(0,Ub.setDefaultOptions)(e)}var gP={};gP.setHours=HU;var $U=Q;function HU(t,e,r){const n=(0,$U.toDate)(t,r==null?void 0:r.in);return n.setHours(e),n}var pP={};pP.setMilliseconds=qU;var YU=Q;function qU(t,e,r){const n=(0,YU.toDate)(t,r==null?void 0:r.in);return n.setMilliseconds(e),n}var vP={};vP.setMinutes=KU;var GU=Q;function KU(t,e,r){const n=(0,GU.toDate)(t,r==null?void 0:r.in);return n.setMinutes(e),n}var yP={};yP.setQuarter=JU;var QU=zm,XU=Q;function JU(t,e,r){const n=(0,XU.toDate)(t,r==null?void 0:r.in),s=Math.trunc(n.getMonth()/3)+1,i=e-s;return(0,QU.setMonth)(n,n.getMonth()+i*3)}var _P={};_P.setSeconds=e7;var ZU=Q;function e7(t,e,r){const n=(0,ZU.toDate)(t,r==null?void 0:r.in);return n.setSeconds(e),n}var xP={};xP.setWeekYear=i7;var t7=gr,r7=we,n7=sa,Bb=Fm,s7=Q;function i7(t,e,r){var d,h,g,v;const n=(0,t7.getDefaultOptions)(),s=(r==null?void 0:r.firstWeekContainsDate)??((h=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((v=(g=n.locale)==null?void 0:g.options)==null?void 0:v.firstWeekContainsDate)??1,i=(0,n7.differenceInCalendarDays)((0,s7.toDate)(t,r==null?void 0:r.in),(0,Bb.startOfWeekYear)(t,r),r),o=(0,r7.constructFrom)((r==null?void 0:r.in)||t,0);o.setFullYear(e,0,s),o.setHours(0,0,0,0);const c=(0,Bb.startOfWeekYear)(o,r);return c.setDate(c.getDate()+i),c}var wP={};wP.setYear=l7;var a7=we,o7=Q;function l7(t,e,r){const n=(0,o7.toDate)(t,r==null?void 0:r.in);return isNaN(+n)?(0,a7.constructFrom)((r==null?void 0:r.in)||t,NaN):(n.setFullYear(e),n)}var bP={};bP.startOfDecade=c7;var u7=Q;function c7(t,e){const r=(0,u7.toDate)(t,e==null?void 0:e.in),n=r.getFullYear(),s=Math.floor(n/10)*10;return r.setFullYear(s,0,1),r.setHours(0,0,0,0),r}var EP={};EP.startOfToday=f7;var d7=Nd;function f7(t){return(0,d7.startOfDay)(Date.now(),t)}var DP={};DP.startOfTomorrow=g7;var h7=we,m7=Jt;function g7(t){const e=(0,m7.constructNow)(t==null?void 0:t.in),r=e.getFullYear(),n=e.getMonth(),s=e.getDate(),i=(0,h7.constructFrom)(t==null?void 0:t.in,0);return i.setFullYear(r,n,s+1),i.setHours(0,0,0,0),i}var TP={};TP.startOfYesterday=p7;var Wb=Jt;function p7(t){const e=(0,Wb.constructNow)(t==null?void 0:t.in),r=e.getFullYear(),n=e.getMonth(),s=e.getDate(),i=(0,Wb.constructNow)(t==null?void 0:t.in);return i.setFullYear(r,n,s-1),i.setHours(0,0,0,0),i}var SP={},f_={};f_.subMonths=y7;var v7=Au;function y7(t,e,r){return(0,v7.addMonths)(t,-e,r)}SP.sub=b7;var _7=we,x7=zd,w7=f_;function b7(t,e,r){const{years:n=0,months:s=0,weeks:i=0,days:o=0,hours:c=0,minutes:d=0,seconds:h=0}=e,g=(0,w7.subMonths)(t,s+n*12,r),v=(0,x7.subDays)(g,o+i*7,r),y=d+c*60,N=(h+y*60)*1e3;return(0,_7.constructFrom)((r==null?void 0:r.in)||t,+v-N)}var PP={};PP.subBusinessDays=D7;var E7=R0;function D7(t,e,r){return(0,E7.addBusinessDays)(t,-e,r)}var IP={};IP.subHours=S7;var T7=k0;function S7(t,e,r){return(0,T7.addHours)(t,-e,r)}var CP={};CP.subMilliseconds=I7;var P7=Od;function I7(t,e,r){return(0,P7.addMilliseconds)(t,-e,r)}var OP={};OP.subMinutes=O7;var C7=_m;function O7(t,e,r){return(0,C7.addMinutes)(t,-e,r)}var NP={};NP.subQuarters=j7;var N7=xm;function j7(t,e,r){return(0,N7.addQuarters)(t,-e,r)}var jP={};jP.subSeconds=R7;var M7=z0;function R7(t,e,r){return(0,M7.addSeconds)(t,-e,r)}var MP={};MP.subWeeks=F7;var A7=jd;function F7(t,e,r){return(0,A7.addWeeks)(t,-e,r)}var RP={};RP.subYears=L7;var k7=U0;function L7(t,e,r){return(0,k7.addYears)(t,-e,r)}var AP={};AP.weeksToDays=z7;var V7=ie;function z7(t){return Math.trunc(t*V7.daysInWeek)}var FP={};FP.yearsToDays=B7;var U7=ie;function B7(t){return Math.trunc(t*U7.daysInYear)}var kP={};kP.yearsToMonths=$7;var W7=ie;function $7(t){return Math.trunc(t*W7.monthsInYear)}var LP={};LP.yearsToQuarters=Y7;var H7=ie;function Y7(t){return Math.trunc(t*H7.quartersInYear)}(function(t){var e=M0;Object.keys(e).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===e[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return e[a]}})});var r=R0;Object.keys(r).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===r[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return r[a]}})});var n=si;Object.keys(n).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===n[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return n[a]}})});var s=k0;Object.keys(s).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===s[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return s[a]}})});var i=L0;Object.keys(i).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===i[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return i[a]}})});var o=Od;Object.keys(o).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===o[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return o[a]}})});var c=_m;Object.keys(c).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===c[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return c[a]}})});var d=Au;Object.keys(d).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===d[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return d[a]}})});var h=xm;Object.keys(h).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===h[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return h[a]}})});var g=z0;Object.keys(g).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===g[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return g[a]}})});var v=jd;Object.keys(v).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===v[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return v[a]}})});var y=U0;Object.keys(y).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===y[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return y[a]}})});var E=$D;Object.keys(E).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===E[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return E[a]}})});var N=HD;Object.keys(N).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===N[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return N[a]}})});var D=$0;Object.keys(D).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===D[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return D[a]}})});var k=YD;Object.keys(k).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===k[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return k[a]}})});var S=gl;Object.keys(S).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===S[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return S[a]}})});var P=qD;Object.keys(P).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===P[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return P[a]}})});var C=we;Object.keys(C).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===C[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return C[a]}})});var R=Jt;Object.keys(R).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===R[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return R[a]}})});var Y=GD;Object.keys(Y).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Y[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Y[a]}})});var q=KD;Object.keys(q).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===q[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return q[a]}})});var T=sa;Object.keys(T).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===T[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return T[a]}})});var b=Y0;Object.keys(b).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===b[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return b[a]}})});var I=QD;Object.keys(I).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===I[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return I[a]}})});var j=wm;Object.keys(j).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===j[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return j[a]}})});var M=q0;Object.keys(M).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===M[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return M[a]}})});var V=bm;Object.keys(V).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===V[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return V[a]}})});var O=Em;Object.keys(O).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===O[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return O[a]}})});var et=Dm;Object.keys(et).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===et[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return et[a]}})});var tt=Tm;Object.keys(tt).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===tt[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return tt[a]}})});var le=XD;Object.keys(le).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===le[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return le[a]}})});var Oe=Sm;Object.keys(Oe).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Oe[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Oe[a]}})});var ee=Pm;Object.keys(ee).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===ee[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return ee[a]}})});var de=Md;Object.keys(de).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===de[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return de[a]}})});var ue=JD;Object.keys(ue).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===ue[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return ue[a]}})});var De=Rd;Object.keys(De).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===De[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return De[a]}})});var X=ZD;Object.keys(X).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===X[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return X[a]}})});var G=X0;Object.keys(G).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===G[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return G[a]}})});var B=J0;Object.keys(B).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===B[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return B[a]}})});var F=eT;Object.keys(F).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===F[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return F[a]}})});var K=tT;Object.keys(K).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===K[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return K[a]}})});var ae=rT;Object.keys(ae).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===ae[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return ae[a]}})});var ge=nT;Object.keys(ge).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===ge[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return ge[a]}})});var pe=sT;Object.keys(pe).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===pe[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return pe[a]}})});var ve=Nm;Object.keys(ve).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===ve[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return ve[a]}})});var Te=iT;Object.keys(Te).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Te[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Te[a]}})});var je=aT;Object.keys(je).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===je[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return je[a]}})});var Ne=oT;Object.keys(Ne).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ne[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ne[a]}})});var Me=Im;Object.keys(Me).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Me[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Me[a]}})});var lt=lT;Object.keys(lt).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===lt[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return lt[a]}})});var xt=uT;Object.keys(xt).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===xt[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return xt[a]}})});var Ht=cT;Object.keys(Ht).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ht[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ht[a]}})});var Ur=dT;Object.keys(Ur).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ur[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ur[a]}})});var xs=fT;Object.keys(xs).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===xs[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return xs[a]}})});var Br=Cm;Object.keys(Br).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Br[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Br[a]}})});var Or=hT;Object.keys(Or).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Or[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Or[a]}})});var nn=mT;Object.keys(nn).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===nn[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return nn[a]}})});var En=gT;Object.keys(En).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===En[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return En[a]}})});var Wr=pT;Object.keys(Wr).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Wr[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Wr[a]}})});var ws=ey;Object.keys(ws).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===ws[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return ws[a]}})});var wt=Z0;Object.keys(wt).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===wt[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return wt[a]}})});var ft=vT;Object.keys(ft).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===ft[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return ft[a]}})});var sn=ty;Object.keys(sn).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===sn[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return sn[a]}})});var ha=uy;Object.keys(ha).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===ha[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return ha[a]}})});var $n=cy;Object.keys($n).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===$n[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return $n[a]}})});var bs=ET;Object.keys(bs).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===bs[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return bs[a]}})});var Nr=DT;Object.keys(Nr).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Nr[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Nr[a]}})});var an=TT;Object.keys(an).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===an[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return an[a]}})});var Es=ST;Object.keys(Es).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Es[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Es[a]}})});var Dn=PT;Object.keys(Dn).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Dn[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Dn[a]}})});var oi=IT;Object.keys(oi).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===oi[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return oi[a]}})});var Ds=CT;Object.keys(Ds).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ds[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ds[a]}})});var Hn=OT;Object.keys(Hn).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Hn[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Hn[a]}})});var ma=NT;Object.keys(ma).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===ma[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return ma[a]}})});var Yn=jT;Object.keys(Yn).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Yn[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Yn[a]}})});var qn=dy;Object.keys(qn).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===qn[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return qn[a]}})});var Tn=Ld;Object.keys(Tn).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Tn[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Tn[a]}})});var li=ly;Object.keys(li).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===li[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return li[a]}})});var $r=fy;Object.keys($r).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===$r[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return $r[a]}})});var ga=MT;Object.keys(ga).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===ga[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return ga[a]}})});var Sn=RT;Object.keys(Sn).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Sn[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Sn[a]}})});var pa=my;Object.keys(pa).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===pa[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return pa[a]}})});var on=AT;Object.keys(on).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===on[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return on[a]}})});var Gn=gy;Object.keys(Gn).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Gn[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Gn[a]}})});var Ot=Rm;Object.keys(Ot).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ot[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ot[a]}})});var va=Do;Object.keys(va).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===va[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return va[a]}})});var pr=FT;Object.keys(pr).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===pr[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return pr[a]}})});var Kn=kT;Object.keys(Kn).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Kn[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Kn[a]}})});var ya=LT;Object.keys(ya).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===ya[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return ya[a]}})});var ui=VT;Object.keys(ui).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===ui[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return ui[a]}})});var Hr=zT;Object.keys(Hr).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Hr[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Hr[a]}})});var ci=G0;Object.keys(ci).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===ci[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return ci[a]}})});var _a=UT;Object.keys(_a).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===_a[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return _a[a]}})});var Qn=BT;Object.keys(Qn).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Qn[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Qn[a]}})});var di=WT;Object.keys(di).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===di[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return di[a]}})});var Ts=Am;Object.keys(Ts).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ts[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ts[a]}})});var Yr=$T;Object.keys(Yr).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Yr[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Yr[a]}})});var vr=Fd;Object.keys(vr).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===vr[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return vr[a]}})});var Xn=HT;Object.keys(Xn).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Xn[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Xn[a]}})});var Ss=YT;Object.keys(Ss).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ss[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ss[a]}})});var Jn=qT;Object.keys(Jn).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Jn[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Jn[a]}})});var fi=GT;Object.keys(fi).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===fi[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return fi[a]}})});var Ps=KT;Object.keys(Ps).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ps[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ps[a]}})});var hi=QT;Object.keys(hi).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===hi[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return hi[a]}})});var xa=XT;Object.keys(xa).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===xa[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return xa[a]}})});var Ue=JT;Object.keys(Ue).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ue[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ue[a]}})});var qr=ZT;Object.keys(qr).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===qr[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return qr[a]}})});var Yt=eS;Object.keys(Yt).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Yt[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Yt[a]}})});var _e=tS;Object.keys(_e).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===_e[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return _e[a]}})});var Zt=H0;Object.keys(Zt).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Zt[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Zt[a]}})});var Is=rS;Object.keys(Is).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Is[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Is[a]}})});var mi=nS;Object.keys(mi).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===mi[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return mi[a]}})});var Cs=sS;Object.keys(Cs).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Cs[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Cs[a]}})});var Os=iS;Object.keys(Os).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Os[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Os[a]}})});var wa=aS;Object.keys(wa).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===wa[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return wa[a]}})});var he=Q0;Object.keys(he).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===he[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return he[a]}})});var ut=hy;Object.keys(ut).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===ut[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return ut[a]}})});var Je=oS;Object.keys(Je).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Je[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Je[a]}})});var Ut=lS;Object.keys(Ut).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ut[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ut[a]}})});var Pn=uS;Object.keys(Pn).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Pn[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Pn[a]}})});var ba=ku;Object.keys(ba).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===ba[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return ba[a]}})});var Ns=t_;Object.keys(Ns).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ns[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ns[a]}})});var gi=n_;Object.keys(gi).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===gi[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return gi[a]}})});var Ea=cS;Object.keys(Ea).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ea[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ea[a]}})});var jr=s_;Object.keys(jr).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===jr[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return jr[a]}})});var Mr=a_;Object.keys(Mr).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Mr[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Mr[a]}})});var In=o_;Object.keys(In).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===In[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return In[a]}})});var Zn=l_;Object.keys(Zn).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Zn[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Zn[a]}})});var js=Vm;Object.keys(js).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===js[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return js[a]}})});var $e=c_;Object.keys($e).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===$e[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return $e[a]}})});var es=A0;Object.keys(es).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===es[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return es[a]}})});var yr=F0;Object.keys(yr).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===yr[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return yr[a]}})});var Cn=dS;Object.keys(Cn).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Cn[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Cn[a]}})});var pi=fS;Object.keys(pi).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===pi[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return pi[a]}})});var Ms=hS;Object.keys(Ms).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ms[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ms[a]}})});var Da=mS;Object.keys(Da).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Da[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Da[a]}})});var Rs=gS;Object.keys(Rs).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Rs[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Rs[a]}})});var To=pS;Object.keys(To).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===To[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return To[a]}})});var vi=vS;Object.keys(vi).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===vi[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return vi[a]}})});var On=yS;Object.keys(On).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===On[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return On[a]}})});var sr=_S;Object.keys(sr).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===sr[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return sr[a]}})});var yi=xS;Object.keys(yi).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===yi[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return yi[a]}})});var As=wS;Object.keys(As).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===As[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return As[a]}})});var _i=bS;Object.keys(_i).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===_i[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return _i[a]}})});var Gr=aa;Object.keys(Gr).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Gr[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Gr[a]}})});var gt=ES;Object.keys(gt).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===gt[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return gt[a]}})});var _r=Cd;Object.keys(_r).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===_r[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return _r[a]}})});var Ta=DS;Object.keys(Ta).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ta[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ta[a]}})});var Kr=TS;Object.keys(Kr).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Kr[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Kr[a]}})});var Fs=SS;Object.keys(Fs).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Fs[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Fs[a]}})});var Sa=PS;Object.keys(Sa).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Sa[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Sa[a]}})});var ln=IS;Object.keys(ln).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===ln[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return ln[a]}})});var ts=py;Object.keys(ts).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===ts[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return ts[a]}})});var xi=CS;Object.keys(xi).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===xi[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return xi[a]}})});var rs=d_;Object.keys(rs).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===rs[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return rs[a]}})});var Nn=OS;Object.keys(Nn).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Nn[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Nn[a]}})});var Pa=NS;Object.keys(Pa).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Pa[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Pa[a]}})});var un=B0;Object.keys(un).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===un[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return un[a]}})});var it=jS;Object.keys(it).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===it[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return it[a]}})});var So=MS;Object.keys(So).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===So[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return So[a]}})});var Po=RS;Object.keys(Po).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Po[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Po[a]}})});var Ia=AS;Object.keys(Ia).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ia[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ia[a]}})});var wi=W0;Object.keys(wi).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===wi[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return wi[a]}})});var Ca=FS;Object.keys(Ca).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ca[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ca[a]}})});var ks=kS;Object.keys(ks).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===ks[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return ks[a]}})});var Oa=LS;Object.keys(Oa).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Oa[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Oa[a]}})});var Rr=VS;Object.keys(Rr).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Rr[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Rr[a]}})});var bi=zS;Object.keys(bi).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===bi[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return bi[a]}})});var Io=la;Object.keys(Io).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Io[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Io[a]}})});var ns=US;Object.keys(ns).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===ns[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return ns[a]}})});var Na=BS;Object.keys(Na).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Na[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Na[a]}})});var Ei=WS;Object.keys(Ei).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ei[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ei[a]}})});var ss=$S;Object.keys(ss).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===ss[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return ss[a]}})});var Di=HS;Object.keys(Di).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Di[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Di[a]}})});var Ls=YS;Object.keys(Ls).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ls[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ls[a]}})});var Co=qS;Object.keys(Co).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Co[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Co[a]}})});var ja=vy;Object.keys(ja).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===ja[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return ja[a]}})});var is=GS;Object.keys(is).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===is[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return is[a]}})});var Ti=QS;Object.keys(Ti).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ti[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ti[a]}})});var cn=ua;Object.keys(cn).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===cn[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return cn[a]}})});var ir=XS;Object.keys(ir).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===ir[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return ir[a]}})});var as=JS;Object.keys(as).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===as[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return as[a]}})});var Vs=ZS;Object.keys(Vs).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Vs[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Vs[a]}})});var ct=eP;Object.keys(ct).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===ct[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return ct[a]}})});var Ar=tP;Object.keys(Ar).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ar[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ar[a]}})});var jn=rP;Object.keys(jn).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===jn[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return jn[a]}})});var At=nP;Object.keys(At).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===At[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return At[a]}})});var Si=sP;Object.keys(Si).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Si[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Si[a]}})});var Pi=iP;Object.keys(Pi).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Pi[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Pi[a]}})});var Nt=aP;Object.keys(Nt).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Nt[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Nt[a]}})});var os=oP;Object.keys(os).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===os[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return os[a]}})});var ls=lP;Object.keys(ls).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===ls[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return ls[a]}})});var Ft=uP;Object.keys(Ft).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ft[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ft[a]}})});var Ma=cP;Object.keys(Ma).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ma[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ma[a]}})});var Ra=dP;Object.keys(Ra).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ra[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ra[a]}})});var pt=fP;Object.keys(pt).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===pt[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return pt[a]}})});var l=Vd;Object.keys(l).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===l[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return l[a]}})});var m=hP;Object.keys(m).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===m[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return m[a]}})});var p=mP;Object.keys(p).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===p[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return p[a]}})});var x=gP;Object.keys(x).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===x[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return x[a]}})});var U=zy;Object.keys(U).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===U[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return U[a]}})});var $=My;Object.keys($).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===$[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return $[a]}})});var se=V0;Object.keys(se).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===se[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return se[a]}})});var He=pP;Object.keys(He).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===He[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return He[a]}})});var Dt=vP;Object.keys(Dt).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Dt[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Dt[a]}})});var Fe=zm;Object.keys(Fe).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Fe[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Fe[a]}})});var Ze=yP;Object.keys(Ze).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ze[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ze[a]}})});var Le=_P;Object.keys(Le).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Le[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Le[a]}})});var dn=Ny;Object.keys(dn).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===dn[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return dn[a]}})});var ar=xP;Object.keys(ar).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===ar[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return ar[a]}})});var zs=wP;Object.keys(zs).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===zs[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return zs[a]}})});var Us=Nd;Object.keys(Us).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Us[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Us[a]}})});var Hu=bP;Object.keys(Hu).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Hu[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Hu[a]}})});var Tt=r_;Object.keys(Tt).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Tt[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Tt[a]}})});var wl=ii;Object.keys(wl).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===wl[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return wl[a]}})});var bl=Fu;Object.keys(bl).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===bl[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return bl[a]}})});var El=i_;Object.keys(El).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===El[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return El[a]}})});var Dl=Ad;Object.keys(Dl).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Dl[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Dl[a]}})});var Tl=Om;Object.keys(Tl).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Tl[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Tl[a]}})});var Yu=u_;Object.keys(Yu).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Yu[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Yu[a]}})});var Sl=EP;Object.keys(Sl).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Sl[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Sl[a]}})});var qu=DP;Object.keys(qu).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===qu[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return qu[a]}})});var Gu=_s;Object.keys(Gu).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Gu[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Gu[a]}})});var Ku=Fm;Object.keys(Ku).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ku[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ku[a]}})});var Qu=jm;Object.keys(Qu).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Qu[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Qu[a]}})});var Xu=TP;Object.keys(Xu).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Xu[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Xu[a]}})});var Ju=SP;Object.keys(Ju).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ju[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ju[a]}})});var Zu=PP;Object.keys(Zu).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Zu[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Zu[a]}})});var Pl=zd;Object.keys(Pl).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Pl[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Pl[a]}})});var Il=IP;Object.keys(Il).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Il[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Il[a]}})});var Cl=K0;Object.keys(Cl).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Cl[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Cl[a]}})});var Ol=CP;Object.keys(Ol).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ol[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ol[a]}})});var Nl=OP;Object.keys(Nl).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Nl[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Nl[a]}})});var jl=f_;Object.keys(jl).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===jl[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return jl[a]}})});var Ml=NP;Object.keys(Ml).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Ml[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Ml[a]}})});var f=jP;Object.keys(f).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===f[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return f[a]}})});var w=MP;Object.keys(w).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===w[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return w[a]}})});var _=RP;Object.keys(_).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===_[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return _[a]}})});var A=Q;Object.keys(A).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===A[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return A[a]}})});var L=yy;Object.keys(L).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===L[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return L[a]}})});var W=AP;Object.keys(W).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===W[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return W[a]}})});var Z=FP;Object.keys(Z).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===Z[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return Z[a]}})});var oe=kP;Object.keys(oe).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===oe[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return oe[a]}})});var J=LP;Object.keys(J).forEach(function(a){a==="default"||a==="__esModule"||a in t&&t[a]===J[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return J[a]}})})})(Eo);Object.defineProperty(Qi,"__esModule",{value:!0});Qi.rangeShape=Qi.default=void 0;var No=q7(z),Ge=VP(na),Jg=VP(ml),Fr=Eo;function VP(t){return t&&t.__esModule?t:{default:t}}function zP(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(zP=function(n){return n?r:e})(t)}function q7(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=zP(e);if(r&&r.has(t))return r.get(t);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=t[i]}return n.default=t,r&&r.set(t,n),n}function cv(){return cv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cv.apply(this,arguments)}function wc(t,e,r){return e=G7(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function G7(t){var e=K7(t,"string");return typeof e=="symbol"?e:String(e)}function K7(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class h_ extends No.Component{constructor(e,r){super(e,r),wc(this,"handleKeyEvent",n=>{const{day:s,onMouseDown:i,onMouseUp:o}=this.props;[13,32].includes(n.keyCode)&&(n.type==="keydown"?i(s):o(s))}),wc(this,"handleMouseEvent",n=>{const{day:s,disabled:i,onPreviewChange:o,onMouseEnter:c,onMouseDown:d,onMouseUp:h}=this.props,g={};if(i){o();return}switch(n.type){case"mouseenter":c(s),o(s),g.hover=!0;break;case"blur":case"mouseleave":g.hover=!1;break;case"mousedown":g.active=!0,d(s);break;case"mouseup":n.stopPropagation(),g.active=!1,h(s);break;case"focus":o(s);break}Object.keys(g).length&&this.setState(g)}),wc(this,"getClassNames",()=>{const{isPassive:n,isToday:s,isWeekend:i,isStartOfWeek:o,isEndOfWeek:c,isStartOfMonth:d,isEndOfMonth:h,disabled:g,styles:v}=this.props;return(0,Jg.default)(v.day,{[v.dayPassive]:n,[v.dayDisabled]:g,[v.dayToday]:s,[v.dayWeekend]:i,[v.dayStartOfWeek]:o,[v.dayEndOfWeek]:c,[v.dayStartOfMonth]:d,[v.dayEndOfMonth]:h,[v.dayHovered]:this.state.hover,[v.dayActive]:this.state.active})}),wc(this,"renderPreviewPlaceholder",()=>{const{preview:n,day:s,styles:i}=this.props;if(!n)return null;const o=n.startDate?(0,Fr.endOfDay)(n.startDate):null,c=n.endDate?(0,Fr.startOfDay)(n.endDate):null,d=(!o||(0,Fr.isAfter)(s,o))&&(!c||(0,Fr.isBefore)(s,c)),h=!d&&(0,Fr.isSameDay)(s,o),g=!d&&(0,Fr.isSameDay)(s,c);return No.default.createElement("span",{className:(0,Jg.default)({[i.dayStartPreview]:h,[i.dayInPreview]:d,[i.dayEndPreview]:g}),style:{color:n.color}})}),wc(this,"renderSelectionPlaceholders",()=>{const{styles:n,ranges:s,day:i}=this.props;return this.props.displayMode==="date"?(0,Fr.isSameDay)(this.props.day,this.props.date)?No.default.createElement("span",{className:n.selected,style:{color:this.props.color}}):null:s.reduce((c,d)=>{let h=d.startDate,g=d.endDate;h&&g&&(0,Fr.isBefore)(g,h)&&([h,g]=[g,h]),h=h?(0,Fr.endOfDay)(h):null,g=g?(0,Fr.startOfDay)(g):null;const v=(!h||(0,Fr.isAfter)(i,h))&&(!g||(0,Fr.isBefore)(i,g)),y=!v&&(0,Fr.isSameDay)(i,h),E=!v&&(0,Fr.isSameDay)(i,g);return v||y||E?[...c,{isStartEdge:y,isEndEdge:E,isInRange:v,...d}]:c},[]).map((c,d)=>No.default.createElement("span",{key:d,className:(0,Jg.default)({[n.startEdge]:c.isStartEdge,[n.endEdge]:c.isEndEdge,[n.inRange]:c.isInRange}),style:{color:c.color||this.props.color}}))}),this.state={hover:!1,active:!1}}render(){const{dayContentRenderer:e}=this.props;return No.default.createElement("button",cv({type:"button",onMouseEnter:this.handleMouseEvent,onMouseLeave:this.handleMouseEvent,onFocus:this.handleMouseEvent,onMouseDown:this.handleMouseEvent,onMouseUp:this.handleMouseEvent,onBlur:this.handleMouseEvent,onPauseCapture:this.handleMouseEvent,onKeyDown:this.handleKeyEvent,onKeyUp:this.handleKeyEvent,className:this.getClassNames(this.props.styles)},this.props.disabled||this.props.isPassive?{tabIndex:-1}:{},{style:{color:this.props.color}}),this.renderSelectionPlaceholders(),this.renderPreviewPlaceholder(),No.default.createElement("span",{className:this.props.styles.dayNumber},(e==null?void 0:e(this.props.day))||No.default.createElement("span",null,(0,Fr.format)(this.props.day,this.props.dayDisplayFormat))))}}h_.defaultProps={};const Q7=Qi.rangeShape=Ge.default.shape({startDate:Ge.default.object,endDate:Ge.default.object,color:Ge.default.string,key:Ge.default.string,autoFocus:Ge.default.bool,disabled:Ge.default.bool,showDateDisplay:Ge.default.bool});h_.propTypes={day:Ge.default.object.isRequired,dayDisplayFormat:Ge.default.string,date:Ge.default.object,ranges:Ge.default.arrayOf(Q7),preview:Ge.default.shape({startDate:Ge.default.object,endDate:Ge.default.object,color:Ge.default.string}),onPreviewChange:Ge.default.func,previewColor:Ge.default.string,disabled:Ge.default.bool,isPassive:Ge.default.bool,isToday:Ge.default.bool,isWeekend:Ge.default.bool,isStartOfWeek:Ge.default.bool,isEndOfWeek:Ge.default.bool,isStartOfMonth:Ge.default.bool,isEndOfMonth:Ge.default.bool,color:Ge.default.string,displayMode:Ge.default.oneOf(["dateRange","date"]),styles:Ge.default.object,onMouseDown:Ge.default.func,onMouseUp:Ge.default.func,onMouseEnter:Ge.default.func,dayContentRenderer:Ge.default.func};Qi.default=h_;var Um={},ca={};Object.defineProperty(ca,"__esModule",{value:!0});ca.calcFocusDate=Z7;ca.findNextRangeIndex=eB;ca.generateStyles=rB;ca.getMonthDisplayRange=tB;var X7=J7(ml),Mi=Eo;function J7(t){return t&&t.__esModule?t:{default:t}}function Z7(t,e){const{shownDate:r,date:n,months:s,ranges:i,focusedRange:o,displayMode:c}=e;let d;if(c==="dateRange"){const g=i[o[0]]||{};d={start:g.startDate,end:g.endDate}}else d={start:n,end:n};d.start=(0,Mi.startOfMonth)(d.start||new Date),d.end=(0,Mi.endOfMonth)(d.end||d.start);const h=d.start||d.end||r||new Date;return t?(0,Mi.differenceInCalendarMonths)(d.start,d.end)>s?t:h:r||h}function eB(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1;const r=t.findIndex((n,s)=>s>e&&n.autoFocus!==!1&&!n.disabled);return r!==-1?r:t.findIndex(n=>n.autoFocus!==!1&&!n.disabled)}function tB(t,e,r){const n=(0,Mi.startOfMonth)(t,e),s=(0,Mi.endOfMonth)(t,e),i=(0,Mi.startOfWeek)(n,e);let o=(0,Mi.endOfWeek)(s,e);return r&&(0,Mi.differenceInCalendarDays)(o,i)<=34&&(o=(0,Mi.addDays)(o,7)),{start:i,end:o,startDateOfMonth:n,endDateOfMonth:s}}function rB(t){return t.length?t.filter(r=>!!r).reduce((r,n)=>(Object.keys(n).forEach(s=>{r[s]=(0,X7.default)(r[s],n[s])}),r),{}):{}}Object.defineProperty(Um,"__esModule",{value:!0});Um.default=void 0;var $o=WP(z),dt=sB(na),UP=WP(Qi),Wt=Eo,nB=ca;function sB(t){return t&&t.__esModule?t:{default:t}}function BP(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(BP=function(n){return n?r:e})(t)}function WP(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=BP(e);if(r&&r.has(t))return r.get(t);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=t[i]}return n.default=t,r&&r.set(t,n),n}function dv(){return dv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dv.apply(this,arguments)}function iB(t,e,r){const n=new Date;return $o.default.createElement("div",{className:t.weekDays},(0,Wt.eachDayOfInterval)({start:(0,Wt.startOfWeek)(n,e),end:(0,Wt.endOfWeek)(n,e)}).map((s,i)=>$o.default.createElement("span",{className:t.weekDay,key:i},(0,Wt.format)(s,r,e))))}class m_ extends $o.PureComponent{render(){const e=new Date,{displayMode:r,focusedRange:n,drag:s,styles:i,disabledDates:o,disabledDay:c}=this.props,d=this.props.minDate&&(0,Wt.startOfDay)(this.props.minDate),h=this.props.maxDate&&(0,Wt.endOfDay)(this.props.maxDate),g=(0,nB.getMonthDisplayRange)(this.props.month,this.props.dateOptions,this.props.fixedHeight);let v=this.props.ranges;if(r==="dateRange"&&s.status){let{startDate:E,endDate:N}=s.range;v=v.map((D,k)=>k!==n[0]?D:{...D,startDate:E,endDate:N})}const y=this.props.showPreview&&!s.disablePreview;return $o.default.createElement("div",{className:i.month,style:this.props.style},this.props.showMonthName?$o.default.createElement("div",{className:i.monthName},(0,Wt.format)(this.props.month,this.props.monthDisplayFormat,this.props.dateOptions)):null,this.props.showWeekDays&&iB(i,this.props.dateOptions,this.props.weekdayDisplayFormat),$o.default.createElement("div",{className:i.days,onMouseLeave:this.props.onMouseLeave},(0,Wt.eachDayOfInterval)({start:g.start,end:g.end}).map((E,N)=>{const D=(0,Wt.isSameDay)(E,g.startDateOfMonth),k=(0,Wt.isSameDay)(E,g.endDateOfMonth),S=d&&(0,Wt.isBefore)(E,d)||h&&(0,Wt.isAfter)(E,h),P=o.some(R=>(0,Wt.isSameDay)(R,E)),C=c(E);return $o.default.createElement(UP.default,dv({},this.props,{ranges:v,day:E,preview:y?this.props.preview:null,isWeekend:(0,Wt.isWeekend)(E,this.props.dateOptions),isToday:(0,Wt.isSameDay)(E,e),isStartOfWeek:(0,Wt.isSameDay)(E,(0,Wt.startOfWeek)(E,this.props.dateOptions)),isEndOfWeek:(0,Wt.isSameDay)(E,(0,Wt.endOfWeek)(E,this.props.dateOptions)),isStartOfMonth:D,isEndOfMonth:k,key:N,disabled:S||P||C,isPassive:!(0,Wt.isWithinInterval)(E,{start:g.startDateOfMonth,end:g.endDateOfMonth}),styles:i,onMouseDown:this.props.onDragSelectionStart,onMouseUp:this.props.onDragSelectionEnd,onMouseEnter:this.props.onDragSelectionMove,dragRange:s.range,drag:s.status}))})))}}m_.defaultProps={};m_.propTypes={style:dt.default.object,styles:dt.default.object,month:dt.default.object,drag:dt.default.object,dateOptions:dt.default.object,disabledDates:dt.default.array,disabledDay:dt.default.func,preview:dt.default.shape({startDate:dt.default.object,endDate:dt.default.object}),showPreview:dt.default.bool,displayMode:dt.default.oneOf(["dateRange","date"]),minDate:dt.default.object,maxDate:dt.default.object,ranges:dt.default.arrayOf(UP.rangeShape),focusedRange:dt.default.arrayOf(dt.default.number),onDragSelectionStart:dt.default.func,onDragSelectionEnd:dt.default.func,onDragSelectionMove:dt.default.func,onMouseLeave:dt.default.func,monthDisplayFormat:dt.default.string,weekdayDisplayFormat:dt.default.string,dayDisplayFormat:dt.default.string,showWeekDays:dt.default.bool,showMonthName:dt.default.bool,fixedHeight:dt.default.bool};Um.default=m_;var Bm={};Object.defineProperty(Bm,"__esModule",{value:!0});Bm.default=void 0;var If=oB(z),$s=$P(na),aB=$P(ml),bc=Eo;function $P(t){return t&&t.__esModule?t:{default:t}}function HP(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(HP=function(n){return n?r:e})(t)}function oB(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=HP(e);if(r&&r.has(t))return r.get(t);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=t[i]}return n.default=t,r&&r.set(t,n),n}function Zg(t,e,r){return e=lB(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lB(t){var e=uB(t,"string");return typeof e=="symbol"?e:String(e)}function uB(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class g_ extends If.PureComponent{constructor(e,r){super(e,r),Zg(this,"onKeyDown",n=>{const{value:s}=this.state;n.key==="Enter"&&this.update(s)}),Zg(this,"onChange",n=>{this.setState({value:n.target.value,changed:!0,invalid:!1})}),Zg(this,"onBlur",()=>{const{value:n}=this.state;this.update(n)}),this.state={invalid:!1,changed:!1,value:this.formatDate(e)}}componentDidUpdate(e){const{value:r}=e;(0,bc.isEqual)(r,this.props.value)||this.setState({value:this.formatDate(this.props)})}formatDate(e){let{value:r,dateDisplayFormat:n,dateOptions:s}=e;return r&&(0,bc.isValid)(r)?(0,bc.format)(r,n,s):""}update(e){const{invalid:r,changed:n}=this.state;if(r||!n||!e)return;const{onChange:s,dateDisplayFormat:i,dateOptions:o}=this.props,c=(0,bc.parse)(e,i,new Date,o);(0,bc.isValid)(c)?this.setState({changed:!1},()=>s(c)):this.setState({invalid:!0})}render(){const{className:e,readOnly:r,placeholder:n,ariaLabel:s,disabled:i,onFocus:o}=this.props,{value:c,invalid:d}=this.state;return If.default.createElement("span",{className:(0,aB.default)("rdrDateInput",e)},If.default.createElement("input",{readOnly:r,disabled:i,value:c,placeholder:n,"aria-label":s,onKeyDown:this.onKeyDown,onChange:this.onChange,onBlur:this.onBlur,onFocus:o}),d&&If.default.createElement("span",{className:"rdrWarning"},""))}}g_.propTypes={value:$s.default.object,placeholder:$s.default.string,disabled:$s.default.bool,readOnly:$s.default.bool,dateOptions:$s.default.object,dateDisplayFormat:$s.default.string,ariaLabel:$s.default.string,className:$s.default.string,onFocus:$s.default.func.isRequired,onChange:$s.default.func.isRequired};g_.defaultProps={readOnly:!0,disabled:!1,dateDisplayFormat:"MMM D, YYYY"};Bm.default=g_;var YP={};(function(t){(function(e,r){r(t,z,u)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:PO,function(e,r,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;function s(X){"@babel/helpers - typeof";return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},s(X)}function i(X,G){if(!(X instanceof G))throw new TypeError("Cannot call a class as a function")}function o(X,G){for(var B=0;B<G.length;B++){var F=G[B];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(X,P(F.key),F)}}function c(X,G,B){return G&&o(X.prototype,G),B&&o(X,B),Object.defineProperty(X,"prototype",{writable:!1}),X}function d(X,G,B){return G=y(G),h(X,v()?Reflect.construct(G,B||[],y(X).constructor):G.apply(X,B))}function h(X,G){if(G&&(s(G)=="object"||typeof G=="function"))return G;if(G!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g(X)}function g(X){if(X===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X}function v(){try{var X=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v=function(){return!!X})()}function y(X){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(G){return G.__proto__||Object.getPrototypeOf(G)},y(X)}function E(X,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function");X.prototype=Object.create(G&&G.prototype,{constructor:{value:X,writable:!0,configurable:!0}}),Object.defineProperty(X,"prototype",{writable:!1}),G&&N(X,G)}function N(X,G){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(B,F){return B.__proto__=F,B},N(X,G)}function D(X,G){var B=Object.keys(X);if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(X);G&&(F=F.filter(function(K){return Object.getOwnPropertyDescriptor(X,K).enumerable})),B.push.apply(B,F)}return B}function k(X){for(var G=1;G<arguments.length;G++){var B=arguments[G]!=null?arguments[G]:{};G%2?D(Object(B),!0).forEach(function(F){S(X,F,B[F])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors(B)):D(Object(B)).forEach(function(F){Object.defineProperty(X,F,Object.getOwnPropertyDescriptor(B,F))})}return X}function S(X,G,B){return(G=P(G))in X?Object.defineProperty(X,G,{value:B,enumerable:!0,configurable:!0,writable:!0}):X[G]=B,X}function P(X){var G=C(X,"string");return s(G)=="symbol"?G:G+""}function C(X,G){if(s(X)!="object"||!X)return X;var B=X[Symbol.toPrimitive];if(B!==void 0){var F=B.call(X,G);if(s(F)!="object")return F;throw new TypeError("@@toPrimitive must return a primitive value.")}return(G==="string"?String:Number)(X)}var R={x:"clientWidth",y:"clientHeight"},Y={x:"clientTop",y:"clientLeft"},q={x:"innerWidth",y:"innerHeight"},T={x:"offsetWidth",y:"offsetHeight"},b={x:"offsetLeft",y:"offsetTop"},I={x:"overflowX",y:"overflowY"},j={x:"scrollWidth",y:"scrollHeight"},M={x:"scrollLeft",y:"scrollTop"},V={x:"width",y:"height"},O=function(){},et=function(){if(typeof window>"u")return!1;var X=!1;try{document.createElement("div").addEventListener("test",O,{get passive(){return X=!0,!1}})}catch{}return X}()?{passive:!0}:!1,tt="ReactList failed to reach a stable state.",le=40,Oe=function(G,B){for(var F in B)if(G[F]!==B[F])return!1;return!0},ee=function(G){for(var B=G.props.axis,F=G.getEl(),K=I[B];F=F.parentElement;)switch(window.getComputedStyle(F)[K]){case"auto":case"scroll":case"overlay":return F}return window},de=function(G){var B=G.props.axis,F=G.scrollParent;return F===window?window[q[B]]:F[R[B]]},ue=function(G,B){var F=G.length,K=G.minSize,ae=G.type,ge=B.from,pe=B.size,ve=B.itemsPerRow;pe=Math.max(pe,K);var Te=pe%ve;return Te&&(pe+=ve-Te),pe>F&&(pe=F),ge=ae==="simple"||!ge?0:Math.max(Math.min(ge,F-pe),0),(Te=ge%ve)&&(ge-=Te,pe+=Te),ge===B.from&&pe===B.size?B:k(k({},B),{},{from:ge,size:pe})},De=e.default=function(X){function G(B){var F;return i(this,G),F=d(this,G,[B]),F.state=ue(B,{itemsPerRow:1,from:B.initialIndex,size:0}),F.cache={},F.cachedScrollPosition=null,F.prevPrevState={},F.unstable=!1,F.updateCounter=0,F}return E(G,X),c(G,[{key:"componentDidMount",value:function(){this.updateFrameAndClearCache=this.updateFrameAndClearCache.bind(this),window.addEventListener("resize",this.updateFrameAndClearCache),this.updateFrame(this.scrollTo.bind(this,this.props.initialIndex))}},{key:"componentDidUpdate",value:function(F){var K=this;if(this.props.axis!==F.axis&&this.clearSizeCache(),!this.unstable){if(++this.updateCounter>le)return this.unstable=!0,console.error(tt);this.updateCounterTimeoutId||(this.updateCounterTimeoutId=setTimeout(function(){K.updateCounter=0,delete K.updateCounterTimeoutId},0)),this.updateFrame()}}},{key:"maybeSetState",value:function(F,K){if(Oe(this.state,F))return K();this.setState(F,K)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateFrameAndClearCache),this.scrollParent.removeEventListener("scroll",this.updateFrameAndClearCache,et),this.scrollParent.removeEventListener("mousewheel",O,et)}},{key:"getOffset",value:function(F){var K=this.props.axis,ae=F[Y[K]]||0,ge=b[K];do ae+=F[ge]||0;while(F=F.offsetParent);return ae}},{key:"getEl",value:function(){return this.el||this.items}},{key:"getScrollPosition",value:function(){if(typeof this.cachedScrollPosition=="number")return this.cachedScrollPosition;var F=this.scrollParent,K=this.props.axis,ae=M[K],ge=F===window?document.body[ae]||document.documentElement[ae]:F[ae],pe=this.getScrollSize()-this.props.scrollParentViewportSizeGetter(this),ve=Math.max(0,Math.min(ge,pe)),Te=this.getEl();return this.cachedScrollPosition=this.getOffset(F)+ve-this.getOffset(Te),this.cachedScrollPosition}},{key:"setScroll",value:function(F){var K=this.scrollParent,ae=this.props.axis;if(F+=this.getOffset(this.getEl()),K===window)return window.scrollTo(0,F);F-=this.getOffset(this.scrollParent),K[M[ae]]=F}},{key:"getScrollSize",value:function(){var F=this.scrollParent,K=document,ae=K.body,ge=K.documentElement,pe=j[this.props.axis];return F===window?Math.max(ae[pe],ge[pe]):F[pe]}},{key:"hasDeterminateSize",value:function(){var F=this.props,K=F.itemSizeGetter,ae=F.type;return ae==="uniform"||K}},{key:"getStartAndEnd",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.threshold,K=this.getScrollPosition(),ae=Math.max(0,K-F),ge=K+this.props.scrollParentViewportSizeGetter(this)+F;return this.hasDeterminateSize()&&(ge=Math.min(ge,this.getSpaceBefore(this.props.length))),{start:ae,end:ge}}},{key:"getItemSizeAndItemsPerRow",value:function(){var F=this.props,K=F.axis,ae=F.useStaticSize,ge=this.state,pe=ge.itemSize,ve=ge.itemsPerRow;if(ae&&pe&&ve)return{itemSize:pe,itemsPerRow:ve};var Te=this.items.children;if(!Te.length)return{};var je=Te[0],Ne=je[T[K]],Me=Math.abs(Ne-pe);if((isNaN(Me)||Me>=1)&&(pe=Ne),!pe)return{};var lt=b[K],xt=je[lt];ve=1;for(var Ht=Te[ve];Ht&&Ht[lt]===xt;Ht=Te[ve])++ve;return{itemSize:pe,itemsPerRow:ve}}},{key:"clearSizeCache",value:function(){this.cachedScrollPosition=null}},{key:"updateFrameAndClearCache",value:function(F){return this.clearSizeCache(),this.updateFrame(F)}},{key:"updateFrame",value:function(F){switch(this.updateScrollParent(),typeof F!="function"&&(F=O),this.props.type){case"simple":return this.updateSimpleFrame(F);case"variable":return this.updateVariableFrame(F);case"uniform":return this.updateUniformFrame(F)}}},{key:"updateScrollParent",value:function(){var F=this.scrollParent;this.scrollParent=this.props.scrollParentGetter(this),F!==this.scrollParent&&(F&&(F.removeEventListener("scroll",this.updateFrameAndClearCache),F.removeEventListener("mousewheel",O)),this.clearSizeCache(),this.scrollParent.addEventListener("scroll",this.updateFrameAndClearCache,et),this.scrollParent.addEventListener("mousewheel",O,et))}},{key:"updateSimpleFrame",value:function(F){var K=this.getStartAndEnd(),ae=K.end,ge=this.items.children,pe=0;if(ge.length){var ve=this.props.axis,Te=ge[0],je=ge[ge.length-1];pe=this.getOffset(je)+je[T[ve]]-this.getOffset(Te)}if(pe>ae)return F();var Ne=this.props,Me=Ne.pageSize,lt=Ne.length,xt=Math.min(this.state.size+Me,lt);this.maybeSetState({size:xt},F)}},{key:"updateVariableFrame",value:function(F){this.props.itemSizeGetter||this.cacheSizes();for(var K=this.getStartAndEnd(),ae=K.start,ge=K.end,pe=this.props,ve=pe.length,Te=pe.pageSize,je=0,Ne=0,Me=0,lt=ve-1;Ne<lt;){var xt=this.getSizeOfItem(Ne);if(xt==null||je+xt>ae)break;je+=xt,++Ne}for(var Ht=ve-Ne;Me<Ht&&je<ge;){var Ur=this.getSizeOfItem(Ne+Me);if(Ur==null){Me=Math.min(Me+Te,Ht);break}je+=Ur,++Me}this.maybeSetState(ue(this.props,{from:Ne,itemsPerRow:1,size:Me}),F)}},{key:"updateUniformFrame",value:function(F){var K=this.getItemSizeAndItemsPerRow(),ae=K.itemSize,ge=K.itemsPerRow;if(!ae||!ge)return F();var pe=this.getStartAndEnd(),ve=pe.start,Te=pe.end,je=ue(this.props,{from:Math.floor(ve/ae)*ge,size:(Math.ceil((Te-ve)/ae)+1)*ge,itemsPerRow:ge}),Ne=je.from,Me=je.size;return this.maybeSetState({itemsPerRow:ge,from:Ne,itemSize:ae,size:Me},F)}},{key:"getSpaceBefore",value:function(F){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(K[F]!=null)return K[F];var ae=this.state,ge=ae.itemSize,pe=ae.itemsPerRow;if(ge)return K[F]=Math.floor(F/pe)*ge;for(var ve=F;ve>0&&K[--ve]==null;);for(var Te=K[ve]||0,je=ve;je<F;++je){K[je]=Te;var Ne=this.getSizeOfItem(je);if(Ne==null)break;Te+=Ne}return K[F]=Te}},{key:"cacheSizes",value:function(){for(var F=this.cache,K=this.state.from,ae=this.items.children,ge=T[this.props.axis],pe=0,ve=ae.length;pe<ve;++pe)F[K+pe]=ae[pe][ge]}},{key:"getSizeOfItem",value:function(F){var K=this.cache,ae=this.items,ge=this.props,pe=ge.axis,ve=ge.itemSizeGetter,Te=ge.itemSizeEstimator,je=ge.type,Ne=this.state,Me=Ne.from,lt=Ne.itemSize,xt=Ne.size;if(lt)return lt;if(ve)return ve(F);if(F in K)return K[F];if(je==="simple"&&F>=Me&&F<Me+xt&&ae){var Ht=ae.children[F-Me];if(Ht)return Ht[T[pe]]}if(Te)return Te(F,K)}},{key:"scrollTo",value:function(F){F!=null&&this.setScroll(this.getSpaceBefore(F))}},{key:"scrollAround",value:function(F){var K=this.getScrollPosition(),ae=this.getSpaceBefore(F),ge=ae-this.props.scrollParentViewportSizeGetter(this)+this.getSizeOfItem(F),pe=Math.min(ge,ae),ve=Math.max(ge,ae);if(K<=pe)return this.setScroll(pe);if(K>ve)return this.setScroll(ve)}},{key:"getVisibleRange",value:function(){for(var F=this.state,K=F.from,ae=F.size,ge=this.getStartAndEnd(0),pe=ge.start,ve=ge.end,Te={},je,Ne,Me=K;Me<K+ae;++Me){var lt=this.getSpaceBefore(Me,Te),xt=lt+this.getSizeOfItem(Me);je==null&&xt>pe&&(je=Me),je!=null&&lt<ve&&(Ne=Me)}return[je,Ne]}},{key:"renderItems",value:function(){for(var F=this,K=this.props,ae=K.itemRenderer,ge=K.itemsRenderer,pe=this.state,ve=pe.from,Te=pe.size,je=[],Ne=0;Ne<Te;++Ne)je.push(ae(ve+Ne,Ne));return ge(je,function(Me){return F.items=Me})}},{key:"render",value:function(){var F=this,K=this.props,ae=K.axis,ge=K.length,pe=K.type,ve=K.useTranslate3d,Te=this.state,je=Te.from,Ne=Te.itemsPerRow,Me=this.renderItems();if(pe==="simple")return Me;var lt={position:"relative"},xt={},Ht=Math.ceil(ge/Ne)*Ne,Ur=this.getSpaceBefore(Ht,xt);Ur&&(lt[V[ae]]=Ur,ae==="x"&&(lt.overflowX="hidden"));var xs=this.getSpaceBefore(je,xt),Br=ae==="x"?xs:0,Or=ae==="y"?xs:0,nn=ve?"translate3d(".concat(Br,"px, ").concat(Or,"px, 0)"):"translate(".concat(Br,"px, ").concat(Or,"px)"),En={msTransform:nn,WebkitTransform:nn,transform:nn};return(0,n.jsx)("div",{style:lt,ref:function(ws){return F.el=ws},children:(0,n.jsx)("div",{style:En,children:Me})})}}],[{key:"getDerivedStateFromProps",value:function(F,K){var ae=ue(F,K);return ae===K?null:ae}}])}(r.Component);S(De,"displayName","ReactList"),S(De,"defaultProps",{axis:"y",itemRenderer:function(G,B){return(0,n.jsx)("div",{children:G},B)},itemsRenderer:function(G,B){return(0,n.jsx)("div",{ref:B,children:G})},length:0,minSize:1,pageSize:10,scrollParentGetter:ee,scrollParentViewportSizeGetter:de,threshold:100,type:"simple",useStaticSize:!1,useTranslate3d:!1})})})(YP);function cB(t,e){if(t===e)return!0;if(!t||!e)return!1;var r=Object.keys(t),n=Object.keys(e),s=r.length;if(n.length!==s)return!1;for(var i=0;i<s;i++){var o=r[i];if(t[o]!==e[o]||!Object.prototype.hasOwnProperty.call(e,o))return!1}return!0}function dB(t,e){if(t===e)return!0;if(!t||!e)return!1;var r=t.length;if(e.length!==r)return!1;for(var n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const fB=Object.freeze(Object.defineProperty({__proto__:null,shallowEqualArrays:dB,shallowEqualObjects:cB},Symbol.toStringTag,{value:"Module"})),hB=CO(fB);var yl={};Object.defineProperty(yl,"__esModule",{value:!0});yl.default=void 0;yl.default={dateRangeWrapper:"rdrDateRangeWrapper",calendarWrapper:"rdrCalendarWrapper",dateDisplay:"rdrDateDisplay",dateDisplayItem:"rdrDateDisplayItem",dateDisplayItemActive:"rdrDateDisplayItemActive",monthAndYearWrapper:"rdrMonthAndYearWrapper",monthAndYearPickers:"rdrMonthAndYearPickers",nextPrevButton:"rdrNextPrevButton",month:"rdrMonth",weekDays:"rdrWeekDays",weekDay:"rdrWeekDay",days:"rdrDays",day:"rdrDay",dayNumber:"rdrDayNumber",dayPassive:"rdrDayPassive",dayToday:"rdrDayToday",dayStartOfWeek:"rdrDayStartOfWeek",dayEndOfWeek:"rdrDayEndOfWeek",daySelected:"rdrDaySelected",dayDisabled:"rdrDayDisabled",dayStartOfMonth:"rdrDayStartOfMonth",dayEndOfMonth:"rdrDayEndOfMonth",dayWeekend:"rdrDayWeekend",dayStartPreview:"rdrDayStartPreview",dayInPreview:"rdrDayInPreview",dayEndPreview:"rdrDayEndPreview",dayHovered:"rdrDayHovered",dayActive:"rdrDayActive",inRange:"rdrInRange",endEdge:"rdrEndEdge",startEdge:"rdrStartEdge",prevButton:"rdrPprevButton",nextButton:"rdrNextButton",selected:"rdrSelected",months:"rdrMonths",monthPicker:"rdrMonthPicker",yearPicker:"rdrYearPicker",dateDisplayWrapper:"rdrDateDisplayWrapper",definedRangesWrapper:"rdrDefinedRangesWrapper",staticRanges:"rdrStaticRanges",staticRange:"rdrStaticRange",inputRanges:"rdrInputRanges",inputRange:"rdrInputRange",inputRangeInput:"rdrInputRangeInput",dateRangePickerWrapper:"rdrDateRangePickerWrapper",staticRangeLabel:"rdrStaticRangeLabel",staticRangeSelected:"rdrStaticRangeSelected",monthName:"rdrMonthName",infiniteMonths:"rdrInfiniteMonths",monthsVertical:"rdrMonthsVertical",monthsHorizontal:"rdrMonthsHorizontal"};var Wm={};Object.defineProperty(Wm,"__esModule",{value:!0});Wm.ariaLabelsShape=void 0;var Oi=mB(na);function mB(t){return t&&t.__esModule?t:{default:t}}Wm.ariaLabelsShape=Oi.default.shape({dateInput:Oi.default.objectOf(Oi.default.shape({startDate:Oi.default.string,endDate:Oi.default.string})),monthPicker:Oi.default.string,yearPicker:Oi.default.string,prevButton:Oi.default.string,nextButton:Oi.default.string});Object.defineProperty(Id,"__esModule",{value:!0});Id.default=void 0;var at=wB(z),be=Lu(na),gB=Qi,$b=Lu(Um),Hb=Lu(Bm),Cf=ca,jo=Lu(ml),pB=Lu(YP),vB=hB,yt=Eo,yB=Mm,_B=Lu(yl),xB=Wm;function Lu(t){return t&&t.__esModule?t:{default:t}}function qP(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(qP=function(n){return n?r:e})(t)}function wB(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=qP(e);if(r&&r.has(t))return r.get(t);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=t[i]}return n.default=t,r&&r.set(t,n),n}function Ah(){return Ah=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ah.apply(this,arguments)}function Rn(t,e,r){return e=bB(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bB(t){var e=EB(t,"string");return typeof e=="symbol"?e:String(e)}function EB(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}let p_=class fv extends at.PureComponent{constructor(e,r){var n;super(e,r),n=this,Rn(this,"focusToDate",function(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.props,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!i.scroll.enabled){if(o&&i.preventSnapRefocus){const h=(0,yt.differenceInCalendarMonths)(s,n.state.focusedDate),g=i.calendarFocus==="forwards"&&h>=0,v=i.calendarFocus==="backwards"&&h<=0;if((g||v)&&Math.abs(h)<i.months)return}n.setState({focusedDate:s});return}const c=(0,yt.differenceInCalendarMonths)(s,i.minDate,n.dateOptions),d=n.list.getVisibleRange();o&&d.includes(c)||(n.isFirstRender=!0,n.list.scrollTo(c),n.setState({focusedDate:s}))}),Rn(this,"updateShownDate",function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:n.props;const i=s.scroll.enabled?{...s,months:n.list.getVisibleRange().length}:s,o=(0,Cf.calcFocusDate)(n.state.focusedDate,i);n.focusToDate(o,i)}),Rn(this,"updatePreview",s=>{if(!s){this.setState({preview:null});return}const i={startDate:s,endDate:s,color:this.props.color};this.setState({preview:i})}),Rn(this,"changeShownDate",function(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"set";const{focusedDate:o}=n.state,{onShownDateChange:c,minDate:d,maxDate:h}=n.props,g={monthOffset:()=>(0,yt.addMonths)(o,s),setMonth:()=>(0,yt.setMonth)(o,s),setYear:()=>(0,yt.setYear)(o,s),set:()=>s},v=(0,yt.min)([(0,yt.max)([g[i](),d]),h]);n.focusToDate(v,n.props,!1),c&&c(v)}),Rn(this,"handleRangeFocusChange",(s,i)=>{this.props.onRangeFocusChange&&this.props.onRangeFocusChange([s,i])}),Rn(this,"handleScroll",()=>{const{onShownDateChange:s,minDate:i}=this.props,{focusedDate:o}=this.state,{isFirstRender:c}=this,d=this.list.getVisibleRange();if(d[0]===void 0)return;const h=(0,yt.addMonths)(i,d[0]||0);!(0,yt.isSameMonth)(h,o)&&!c&&(this.setState({focusedDate:h}),s&&s(h)),this.isFirstRender=!1}),Rn(this,"renderMonthAndYear",(s,i,o)=>{const{showMonthArrow:c,minDate:d,maxDate:h,showMonthAndYearPickers:g,ariaLabels:v}=o,y=(h||fv.defaultProps.maxDate).getFullYear(),E=(d||fv.defaultProps.minDate).getFullYear(),N=this.styles;return at.default.createElement("div",{onMouseUp:D=>D.stopPropagation(),className:N.monthAndYearWrapper},c?at.default.createElement("button",{type:"button",className:(0,jo.default)(N.nextPrevButton,N.prevButton),onClick:()=>i(-1,"monthOffset"),"aria-label":v.prevButton},at.default.createElement("i",null)):null,g?at.default.createElement("span",{className:N.monthAndYearPickers},at.default.createElement("span",{className:N.monthPicker},at.default.createElement("select",{value:s.getMonth(),onChange:D=>i(D.target.value,"setMonth"),"aria-label":v.monthPicker},this.state.monthNames.map((D,k)=>at.default.createElement("option",{key:k,value:k},D)))),at.default.createElement("span",{className:N.monthAndYearDivider}),at.default.createElement("span",{className:N.yearPicker},at.default.createElement("select",{value:s.getFullYear(),onChange:D=>i(D.target.value,"setYear"),"aria-label":v.yearPicker},new Array(y-E+1).fill(y).map((D,k)=>{const S=D-k;return at.default.createElement("option",{key:S,value:S},S)})))):at.default.createElement("span",{className:N.monthAndYearPickers},this.state.monthNames[s.getMonth()]," ",s.getFullYear()),c?at.default.createElement("button",{type:"button",className:(0,jo.default)(N.nextPrevButton,N.nextButton),onClick:()=>i(1,"monthOffset"),"aria-label":v.nextButton},at.default.createElement("i",null)):null)}),Rn(this,"renderDateDisplay",()=>{const{focusedRange:s,color:i,ranges:o,rangeColors:c,dateDisplayFormat:d,editableDateInputs:h,startDatePlaceholder:g,endDatePlaceholder:v,ariaLabels:y}=this.props,E=c[s[0]]||i,N=this.styles;return at.default.createElement("div",{className:N.dateDisplayWrapper},o.map((D,k)=>D.showDateDisplay===!1||D.disabled&&!D.showDateDisplay?null:at.default.createElement("div",{className:N.dateDisplay,key:k,style:{color:D.color||E}},at.default.createElement(Hb.default,{className:(0,jo.default)(N.dateDisplayItem,{[N.dateDisplayItemActive]:s[0]===k&&s[1]===0}),readOnly:!h,disabled:D.disabled,value:D.startDate,placeholder:g,dateOptions:this.dateOptions,dateDisplayFormat:d,ariaLabel:y.dateInput&&y.dateInput[D.key]&&y.dateInput[D.key].startDate,onChange:this.onDragSelectionEnd,onFocus:()=>this.handleRangeFocusChange(k,0)}),at.default.createElement(Hb.default,{className:(0,jo.default)(N.dateDisplayItem,{[N.dateDisplayItemActive]:s[0]===k&&s[1]===1}),readOnly:!h,disabled:D.disabled,value:D.endDate,placeholder:v,dateOptions:this.dateOptions,dateDisplayFormat:d,ariaLabel:y.dateInput&&y.dateInput[D.key]&&y.dateInput[D.key].endDate,onChange:this.onDragSelectionEnd,onFocus:()=>this.handleRangeFocusChange(k,1)}))))}),Rn(this,"onDragSelectionStart",s=>{const{onChange:i,dragSelectionEnabled:o}=this.props;o?this.setState({drag:{status:!0,range:{startDate:s,endDate:s},disablePreview:!0}}):i&&i(s)}),Rn(this,"onDragSelectionEnd",s=>{const{updateRange:i,displayMode:o,onChange:c,dragSelectionEnabled:d}=this.props;if(!d)return;if(o==="date"||!this.state.drag.status){c&&c(s);return}const h={startDate:this.state.drag.range.startDate,endDate:s};o!=="dateRange"||(0,yt.isSameDay)(h.startDate,s)?this.setState({drag:{status:!1,range:{}}},()=>c&&c(s)):this.setState({drag:{status:!1,range:{}}},()=>{i&&i(h)})}),Rn(this,"onDragSelectionMove",s=>{const{drag:i}=this.state;!i.status||!this.props.dragSelectionEnabled||this.setState({drag:{status:i.status,range:{startDate:i.range.startDate,endDate:s},disablePreview:!0}})}),Rn(this,"estimateMonthSize",(s,i)=>{const{direction:o,minDate:c}=this.props,{scrollArea:d}=this.state;if(i&&(this.listSizeCache=i,i[s]))return i[s];if(o==="horizontal")return d.monthWidth;const h=(0,yt.addMonths)(c,s),{start:g,end:v}=(0,Cf.getMonthDisplayRange)(h,this.dateOptions);return(0,yt.differenceInDays)(v,g,this.dateOptions)+1>7*5?d.longMonthHeight:d.monthHeight}),this.dateOptions={locale:e.locale},e.weekStartsOn!==void 0&&(this.dateOptions.weekStartsOn=e.weekStartsOn),this.styles=(0,Cf.generateStyles)([_B.default,e.classNames]),this.listSizeCache={},this.isFirstRender=!0,this.state={monthNames:this.getMonthNames(),focusedDate:(0,Cf.calcFocusDate)(null,e),drag:{status:!1,range:{startDate:null,endDate:null},disablePreview:!1},scrollArea:this.calcScrollArea(e)}}getMonthNames(){return[...Array(12).keys()].map(e=>this.props.locale.localize.month(e))}calcScrollArea(e){const{direction:r,months:n,scroll:s}=e;if(!s.enabled)return{enabled:!1};const i=s.longMonthHeight||s.monthHeight;return r==="vertical"?{enabled:!0,monthHeight:s.monthHeight||220,longMonthHeight:i||260,calendarWidth:"auto",calendarHeight:(s.calendarHeight||i||240)*n}:{enabled:!0,monthWidth:s.monthWidth||332,calendarWidth:(s.calendarWidth||s.monthWidth||332)*n,monthHeight:i||300,calendarHeight:i||300}}componentDidMount(){this.props.scroll.enabled&&setTimeout(()=>this.focusToDate(this.state.focusedDate))}componentDidUpdate(e){const n={dateRange:"ranges",date:"date"}[this.props.displayMode];this.props[n]!==e[n]&&this.updateShownDate(this.props),(e.locale!==this.props.locale||e.weekStartsOn!==this.props.weekStartsOn)&&(this.dateOptions={locale:this.props.locale},this.props.weekStartsOn!==void 0&&(this.dateOptions.weekStartsOn=this.props.weekStartsOn),this.setState({monthNames:this.getMonthNames()})),(0,vB.shallowEqualObjects)(e.scroll,this.props.scroll)||this.setState({scrollArea:this.calcScrollArea(this.props)})}renderWeekdays(){const e=new Date;return at.default.createElement("div",{className:this.styles.weekDays},(0,yt.eachDayOfInterval)({start:(0,yt.startOfWeek)(e,this.dateOptions),end:(0,yt.endOfWeek)(e,this.dateOptions)}).map((r,n)=>at.default.createElement("span",{className:this.styles.weekDay,key:n},(0,yt.format)(r,this.props.weekdayDisplayFormat,this.dateOptions))))}render(){const{showDateDisplay:e,onPreviewChange:r,scroll:n,direction:s,disabledDates:i,disabledDay:o,maxDate:c,minDate:d,rangeColors:h,color:g,navigatorRenderer:v,className:y,preview:E}=this.props,{scrollArea:N,focusedDate:D}=this.state,k=s==="vertical",S=v||this.renderMonthAndYear,P=this.props.ranges.map((C,R)=>({...C,color:C.color||h[R]||g}));return at.default.createElement("div",{className:(0,jo.default)(this.styles.calendarWrapper,y),onMouseUp:()=>this.setState({drag:{status:!1,range:{}}}),onMouseLeave:()=>{this.setState({drag:{status:!1,range:{}}})}},e&&this.renderDateDisplay(),S(D,this.changeShownDate,this.props),n.enabled?at.default.createElement("div",null,k&&this.renderWeekdays(this.dateOptions),at.default.createElement("div",{className:(0,jo.default)(this.styles.infiniteMonths,k?this.styles.monthsVertical:this.styles.monthsHorizontal),onMouseLeave:()=>r&&r(),style:{width:N.calendarWidth+11,height:N.calendarHeight+11},onScroll:this.handleScroll},at.default.createElement(pB.default,{length:(0,yt.differenceInCalendarMonths)((0,yt.endOfMonth)(c),(0,yt.addDays)((0,yt.startOfMonth)(d),-1),this.dateOptions),treshold:500,type:"variable",ref:C=>this.list=C,itemSizeEstimator:this.estimateMonthSize,axis:k?"y":"x",itemRenderer:(C,R)=>{const Y=(0,yt.addMonths)(d,C);return at.default.createElement($b.default,Ah({},this.props,{onPreviewChange:r||this.updatePreview,preview:E||this.state.preview,ranges:P,key:R,drag:this.state.drag,dateOptions:this.dateOptions,disabledDates:i,disabledDay:o,month:Y,onDragSelectionStart:this.onDragSelectionStart,onDragSelectionEnd:this.onDragSelectionEnd,onDragSelectionMove:this.onDragSelectionMove,onMouseLeave:()=>r&&r(),styles:this.styles,style:k?{height:this.estimateMonthSize(C)}:{height:N.monthHeight,width:this.estimateMonthSize(C)},showMonthName:!0,showWeekDays:!k}))}}))):at.default.createElement("div",{className:(0,jo.default)(this.styles.months,k?this.styles.monthsVertical:this.styles.monthsHorizontal)},new Array(this.props.months).fill(null).map((C,R)=>{let Y=(0,yt.addMonths)(this.state.focusedDate,R);return this.props.calendarFocus==="backwards"&&(Y=(0,yt.subMonths)(this.state.focusedDate,this.props.months-1-R)),at.default.createElement($b.default,Ah({},this.props,{onPreviewChange:r||this.updatePreview,preview:E||this.state.preview,ranges:P,key:R,drag:this.state.drag,dateOptions:this.dateOptions,disabledDates:i,disabledDay:o,month:Y,onDragSelectionStart:this.onDragSelectionStart,onDragSelectionEnd:this.onDragSelectionEnd,onDragSelectionMove:this.onDragSelectionMove,onMouseLeave:()=>r&&r(),styles:this.styles,showWeekDays:!k||R===0,showMonthName:!k||R>0}))})))}};p_.defaultProps={showMonthArrow:!0,showMonthAndYearPickers:!0,disabledDates:[],disabledDay:()=>{},classNames:{},locale:yB.enUS,ranges:[],focusedRange:[0,0],dateDisplayFormat:"MMM d, yyyy",monthDisplayFormat:"MMM yyyy",weekdayDisplayFormat:"E",dayDisplayFormat:"d",showDateDisplay:!0,showPreview:!0,displayMode:"date",months:1,color:"#3d91ff",scroll:{enabled:!1},direction:"vertical",maxDate:(0,yt.addYears)(new Date,20),minDate:(0,yt.addYears)(new Date,-100),rangeColors:["#3d91ff","#3ecf8e","#fed14c"],startDatePlaceholder:"Early",endDatePlaceholder:"Continuous",editableDateInputs:!1,dragSelectionEnabled:!0,fixedHeight:!1,calendarFocus:"forwards",preventSnapRefocus:!1,ariaLabels:{}};p_.propTypes={showMonthArrow:be.default.bool,showMonthAndYearPickers:be.default.bool,disabledDates:be.default.array,disabledDay:be.default.func,minDate:be.default.object,maxDate:be.default.object,date:be.default.object,onChange:be.default.func,onPreviewChange:be.default.func,onRangeFocusChange:be.default.func,classNames:be.default.object,locale:be.default.object,shownDate:be.default.object,onShownDateChange:be.default.func,ranges:be.default.arrayOf(gB.rangeShape),preview:be.default.shape({startDate:be.default.object,endDate:be.default.object,color:be.default.string}),dateDisplayFormat:be.default.string,monthDisplayFormat:be.default.string,weekdayDisplayFormat:be.default.string,weekStartsOn:be.default.number,dayDisplayFormat:be.default.string,focusedRange:be.default.arrayOf(be.default.number),initialFocusedRange:be.default.arrayOf(be.default.number),months:be.default.number,className:be.default.string,showDateDisplay:be.default.bool,showPreview:be.default.bool,displayMode:be.default.oneOf(["dateRange","date"]),color:be.default.string,updateRange:be.default.func,scroll:be.default.shape({enabled:be.default.bool,monthHeight:be.default.number,longMonthHeight:be.default.number,monthWidth:be.default.number,calendarWidth:be.default.number,calendarHeight:be.default.number}),direction:be.default.oneOf(["vertical","horizontal"]),startDatePlaceholder:be.default.string,endDatePlaceholder:be.default.string,navigatorRenderer:be.default.func,rangeColors:be.default.arrayOf(be.default.string),editableDateInputs:be.default.bool,dragSelectionEnabled:be.default.bool,fixedHeight:be.default.bool,calendarFocus:be.default.string,preventSnapRefocus:be.default.bool,ariaLabels:xB.ariaLabelsShape};Id.default=p_;Object.defineProperty(Pd,"__esModule",{value:!0});Pd.default=void 0;var Yb=PB(z),zl=$m(na),GP=$m(Id),DB=Qi,ep=ca,Hs=Eo,TB=$m(ml),SB=$m(yl);function $m(t){return t&&t.__esModule?t:{default:t}}function KP(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(KP=function(n){return n?r:e})(t)}function PB(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=KP(e);if(r&&r.has(t))return r.get(t);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=t[i]}return n.default=t,r&&r.set(t,n),n}function hv(){return hv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hv.apply(this,arguments)}function Of(t,e,r){return e=IB(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IB(t){var e=CB(t,"string");return typeof e=="symbol"?e:String(e)}function CB(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class v_ extends Yb.Component{constructor(e,r){var n;super(e,r),n=this,Of(this,"calcNewSelection",function(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const o=n.props.focusedRange||n.state.focusedRange,{ranges:c,onChange:d,maxDate:h,moveRangeOnFirstSelection:g,retainEndDateOnFirstSelection:v,disabledDates:y}=n.props,E=o[0],N=c[E];if(!N||!d)return{};let{startDate:D,endDate:k}=N;const S=new Date;let P;if(!i)D=s.startDate,k=s.endDate;else if(o[1]===0){const Y=(0,Hs.differenceInCalendarDays)(k||S,D),q=()=>g?(0,Hs.addDays)(s,Y):v?!k||(0,Hs.isBefore)(s,k)?k:s:s||S;D=s,k=q(),h&&(k=(0,Hs.min)([k,h])),P=[o[0],1]}else k=s;let C=o[1]===0;(0,Hs.isBefore)(k,D)&&(C=!C,[D,k]=[k,D]);const R=y.filter(Y=>(0,Hs.isWithinInterval)(Y,{start:D,end:k}));return R.length>0&&(C?D=(0,Hs.addDays)((0,Hs.max)(R),1):k=(0,Hs.addDays)((0,Hs.min)(R),-1)),P||(P=[(0,ep.findNextRangeIndex)(n.props.ranges,o[0]),0]),{wasValid:!(R.length>0),range:{startDate:D,endDate:k},nextFocusRange:P}}),Of(this,"setSelection",(s,i)=>{const{onChange:o,ranges:c,onRangeFocusChange:d}=this.props,g=(this.props.focusedRange||this.state.focusedRange)[0],v=c[g];if(!v)return;const y=this.calcNewSelection(s,i);o({[v.key||`range${g+1}`]:{...v,...y.range}}),this.setState({focusedRange:y.nextFocusRange,preview:null}),d&&d(y.nextFocusRange)}),Of(this,"handleRangeFocusChange",s=>{this.setState({focusedRange:s}),this.props.onRangeFocusChange&&this.props.onRangeFocusChange(s)}),Of(this,"updatePreview",s=>{var h;if(!s){this.setState({preview:null});return}const{rangeColors:i,ranges:o}=this.props,c=this.props.focusedRange||this.state.focusedRange,d=((h=o[c[0]])==null?void 0:h.color)||i[c[0]]||d;this.setState({preview:{...s.range,color:d}})}),this.state={focusedRange:e.initialFocusedRange||[(0,ep.findNextRangeIndex)(e.ranges),0],preview:null},this.styles=(0,ep.generateStyles)([SB.default,e.classNames])}render(){return Yb.default.createElement(GP.default,hv({focusedRange:this.state.focusedRange,onRangeFocusChange:this.handleRangeFocusChange,preview:this.state.preview,onPreviewChange:e=>{this.updatePreview(e?this.calcNewSelection(e):null)}},this.props,{displayMode:"dateRange",className:(0,TB.default)(this.styles.dateRangeWrapper,this.props.className),onChange:this.setSelection,updateRange:e=>this.setSelection(e,!1),ref:e=>{this.calendar=e}}))}}v_.defaultProps={classNames:{},ranges:[],moveRangeOnFirstSelection:!1,retainEndDateOnFirstSelection:!1,rangeColors:["#3d91ff","#3ecf8e","#fed14c"],disabledDates:[]};v_.propTypes={...GP.default.propTypes,onChange:zl.default.func,onRangeFocusChange:zl.default.func,className:zl.default.string,ranges:zl.default.arrayOf(DB.rangeShape),moveRangeOnFirstSelection:zl.default.bool,retainEndDateOnFirstSelection:zl.default.bool};Pd.default=v_;var Hm={},Ud={},go={};Object.defineProperty(go,"__esModule",{value:!0});go.createStaticRanges=QP;go.defaultStaticRanges=go.defaultInputRanges=void 0;var ht=Eo;const er={startOfWeek:(0,ht.startOfWeek)(new Date),endOfWeek:(0,ht.endOfWeek)(new Date),startOfLastWeek:(0,ht.startOfWeek)((0,ht.addDays)(new Date,-7)),endOfLastWeek:(0,ht.endOfWeek)((0,ht.addDays)(new Date,-7)),startOfToday:(0,ht.startOfDay)(new Date),endOfToday:(0,ht.endOfDay)(new Date),startOfYesterday:(0,ht.startOfDay)((0,ht.addDays)(new Date,-1)),endOfYesterday:(0,ht.endOfDay)((0,ht.addDays)(new Date,-1)),startOfMonth:(0,ht.startOfMonth)(new Date),endOfMonth:(0,ht.endOfMonth)(new Date),startOfLastMonth:(0,ht.startOfMonth)((0,ht.addMonths)(new Date,-1)),endOfLastMonth:(0,ht.endOfMonth)((0,ht.addMonths)(new Date,-1))},OB={range:{},isSelected(t){const e=this.range();return(0,ht.isSameDay)(t.startDate,e.startDate)&&(0,ht.isSameDay)(t.endDate,e.endDate)}};function QP(t){return t.map(e=>({...OB,...e}))}go.defaultStaticRanges=QP([{label:"Today",range:()=>({startDate:er.startOfToday,endDate:er.endOfToday})},{label:"Yesterday",range:()=>({startDate:er.startOfYesterday,endDate:er.endOfYesterday})},{label:"This Week",range:()=>({startDate:er.startOfWeek,endDate:er.endOfWeek})},{label:"Last Week",range:()=>({startDate:er.startOfLastWeek,endDate:er.endOfLastWeek})},{label:"This Month",range:()=>({startDate:er.startOfMonth,endDate:er.endOfMonth})},{label:"Last Month",range:()=>({startDate:er.startOfLastMonth,endDate:er.endOfLastMonth})}]);go.defaultInputRanges=[{label:"days up to today",range(t){return{startDate:(0,ht.addDays)(er.startOfToday,(Math.max(Number(t),1)-1)*-1),endDate:er.endOfToday}},getCurrentValue(t){return(0,ht.isSameDay)(t.endDate,er.endOfToday)?t.startDate?(0,ht.differenceInCalendarDays)(er.endOfToday,t.startDate)+1:"":"-"}},{label:"days starting today",range(t){const e=new Date;return{startDate:e,endDate:(0,ht.addDays)(e,Math.max(Number(t),1)-1)}},getCurrentValue(t){return(0,ht.isSameDay)(t.startDate,er.startOfToday)?t.endDate?(0,ht.differenceInCalendarDays)(t.endDate,er.startOfToday)+1:"":"-"}}];var Ym={};Object.defineProperty(Ym,"__esModule",{value:!0});Ym.default=void 0;var Nf=jB(z),Qr=NB(na);function NB(t){return t&&t.__esModule?t:{default:t}}function XP(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(XP=function(n){return n?r:e})(t)}function jB(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=XP(e);if(r&&r.has(t))return r.get(t);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=t[i]}return n.default=t,r&&r.set(t,n),n}function MB(t,e,r){return e=RB(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function RB(t){var e=AB(t,"string");return typeof e=="symbol"?e:String(e)}function AB(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const qb=0,Gb=99999;class y_ extends Nf.Component{constructor(e,r){super(e,r),MB(this,"onChange",n=>{const{onChange:s}=this.props;let i=parseInt(n.target.value,10);i=isNaN(i)?0:Math.max(Math.min(Gb,i),qb),s(i)})}shouldComponentUpdate(e){const{value:r,label:n,placeholder:s}=this.props;return r!==e.value||n!==e.label||s!==e.placeholder}render(){const{label:e,placeholder:r,value:n,styles:s,onBlur:i,onFocus:o}=this.props;return Nf.default.createElement("div",{className:s.inputRange},Nf.default.createElement("input",{className:s.inputRangeInput,placeholder:r,value:n,min:qb,max:Gb,onChange:this.onChange,onFocus:o,onBlur:i}),Nf.default.createElement("span",{className:s.inputRangeLabel},e))}}y_.propTypes={value:Qr.default.oneOfType([Qr.default.string,Qr.default.number]),label:Qr.default.oneOfType([Qr.default.element,Qr.default.node]).isRequired,placeholder:Qr.default.string,styles:Qr.default.shape({inputRange:Qr.default.string,inputRangeInput:Qr.default.string,inputRangeLabel:Qr.default.string}).isRequired,onBlur:Qr.default.func.isRequired,onFocus:Qr.default.func.isRequired,onChange:Qr.default.func.isRequired};y_.defaultProps={value:"",placeholder:"-"};Ym.default=y_;Object.defineProperty(Ud,"__esModule",{value:!0});Ud.default=void 0;var Mo=LB(z),hn=qm(na),Ro=qm(yl),Kb=go,FB=Qi,kB=qm(Ym),Qb=qm(ml);function qm(t){return t&&t.__esModule?t:{default:t}}function JP(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(JP=function(n){return n?r:e})(t)}function LB(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=JP(e);if(r&&r.has(t))return r.get(t);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=t[i]}return n.default=t,r&&r.set(t,n),n}function VB(t,e,r){return e=zB(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zB(t){var e=UB(t,"string");return typeof e=="symbol"?e:String(e)}function UB(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class __ extends Mo.Component{constructor(e){super(e),VB(this,"handleRangeChange",r=>{const{onChange:n,ranges:s,focusedRange:i}=this.props,o=s[i[0]];!n||!o||n({[o.key||`range${i[0]+1}`]:{...o,...r}})}),this.state={rangeOffset:0,focusedInput:-1}}getRangeOptionValue(e){const{ranges:r=[],focusedRange:n=[]}=this.props;if(typeof e.getCurrentValue!="function")return"";const s=r[n[0]]||{};return e.getCurrentValue(s)||""}getSelectedRange(e,r){const n=e.findIndex(i=>!i.startDate||!i.endDate||i.disabled?!1:r.isSelected(i));return{selectedRange:e[n],focusedRangeIndex:n}}render(){const{headerContent:e,footerContent:r,onPreviewChange:n,inputRanges:s,staticRanges:i,ranges:o,renderStaticRangeLabel:c,rangeColors:d,className:h}=this.props;return Mo.default.createElement("div",{className:(0,Qb.default)(Ro.default.definedRangesWrapper,h)},e,Mo.default.createElement("div",{className:Ro.default.staticRanges},i.map((g,v)=>{const{selectedRange:y,focusedRangeIndex:E}=this.getSelectedRange(o,g);let N;return g.hasCustomRendering?N=c(g):N=g.label,Mo.default.createElement("button",{type:"button",className:(0,Qb.default)(Ro.default.staticRange,{[Ro.default.staticRangeSelected]:!!y}),style:{color:y?y.color||d[E]:null},key:v,onClick:()=>this.handleRangeChange(g.range(this.props)),onFocus:()=>n&&n(g.range(this.props)),onMouseOver:()=>n&&n(g.range(this.props)),onMouseLeave:()=>{n&&n()}},Mo.default.createElement("span",{tabIndex:-1,className:Ro.default.staticRangeLabel},N))})),Mo.default.createElement("div",{className:Ro.default.inputRanges},s.map((g,v)=>Mo.default.createElement(kB.default,{key:v,styles:Ro.default,label:g.label,onFocus:()=>this.setState({focusedInput:v,rangeOffset:0}),onBlur:()=>this.setState({rangeOffset:0}),onChange:y=>this.handleRangeChange(g.range(y,this.props)),value:this.getRangeOptionValue(g)}))),r)}}__.propTypes={inputRanges:hn.default.array,staticRanges:hn.default.array,ranges:hn.default.arrayOf(FB.rangeShape),focusedRange:hn.default.arrayOf(hn.default.number),onPreviewChange:hn.default.func,onChange:hn.default.func,footerContent:hn.default.any,headerContent:hn.default.any,rangeColors:hn.default.arrayOf(hn.default.string),className:hn.default.string,renderStaticRangeLabel:hn.default.func};__.defaultProps={inputRanges:Kb.defaultInputRanges,staticRanges:Kb.defaultStaticRanges,ranges:[],rangeColors:["#3d91ff","#3ecf8e","#fed14c"],focusedRange:[0,0]};Ud.default=__;Object.defineProperty(Hm,"__esModule",{value:!0});Hm.default=void 0;var jf=HB(z),BB=Bd(na),ZP=Bd(Pd),eI=Bd(Ud),Xb=ca,WB=Bd(ml),$B=Bd(yl);function Bd(t){return t&&t.__esModule?t:{default:t}}function tI(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(tI=function(n){return n?r:e})(t)}function HB(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=tI(e);if(r&&r.has(t))return r.get(t);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=t[i]}return n.default=t,r&&r.set(t,n),n}function Fh(){return Fh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fh.apply(this,arguments)}class x_ extends jf.Component{constructor(e){super(e),this.state={focusedRange:[(0,Xb.findNextRangeIndex)(e.ranges),0]},this.styles=(0,Xb.generateStyles)([$B.default,e.classNames])}render(){const{focusedRange:e}=this.state;return jf.default.createElement("div",{className:(0,WB.default)(this.styles.dateRangePickerWrapper,this.props.className)},jf.default.createElement(eI.default,Fh({focusedRange:e,onPreviewChange:r=>this.dateRange.updatePreview(r?this.dateRange.calcNewSelection(r,typeof r=="string"):null)},this.props,{range:this.props.ranges[e[0]],className:void 0})),jf.default.createElement(ZP.default,Fh({onRangeFocusChange:r=>this.setState({focusedRange:r}),focusedRange:e},this.props,{ref:r=>this.dateRange=r,className:void 0})))}}x_.defaultProps={};x_.propTypes={...ZP.default.propTypes,...eI.default.propTypes,className:BB.default.string};Hm.default=x_;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Calendar",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"DateRange",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"DateRangePicker",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"DefinedRange",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"createStaticRanges",{enumerable:!0,get:function(){return i.createStaticRanges}}),Object.defineProperty(t,"defaultInputRanges",{enumerable:!0,get:function(){return i.defaultInputRanges}}),Object.defineProperty(t,"defaultStaticRanges",{enumerable:!0,get:function(){return i.defaultStaticRanges}});var e=o(Pd),r=o(Id),n=o(Hm),s=o(Ud),i=go;function o(c){return c&&c.__esModule?c:{default:c}}})(j0);var YB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const qB=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),GB=(t,e)=>{const r=z.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:c,...d},h)=>z.createElement("svg",{ref:h,...YB,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${qB(t)}`,...d},[...e.map(([g,v])=>z.createElement(g,v)),...(Array.isArray(c)?c:[c])||[]]));return r.displayName=`${t}`,r};var qe=GB;const rI=qe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),nI=qe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),tp=qe("BedDouble",[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]]),Vo=qe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),KB=qe("Bus",[["path",{d:"M19 17h2l.64-2.54c.24-.959.24-1.962 0-2.92l-1.07-4.27A3 3 0 0 0 17.66 5H4a2 2 0 0 0-2 2v10h2",key:"wfsdqh"}],["path",{d:"M14 17H9",key:"o2noo5"}],["circle",{cx:"6.5",cy:"17.5",r:"2.5",key:"gc8oob"}],["circle",{cx:"16.5",cy:"17.5",r:"2.5",key:"4btu0q"}]]),Bc=qe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),zo=qe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),QB=qe("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Wc=qe("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),sI=qe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),XB=qe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Gm=qe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Uo=qe("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),Gs=qe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Mf=qe("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Jb=qe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),Zb=qe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),e1=qe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),JB=qe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Xi=qe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Rf=qe("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]),iI=qe("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),rp=qe("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),Ri=qe("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]),Ic=qe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ZB=qe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),t1=qe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Ai=qe("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]),eW=qe("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]),nu=qe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Af=qe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),tW=qe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),rW=qe("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]),gn=qe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var aI={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},r1=zn.createContext&&zn.createContext(aI),nW=["attr","size","title"];function sW(t,e){if(t==null)return{};var r=iW(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function iW(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function kh(){return kh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kh.apply(this,arguments)}function n1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Lh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?n1(Object(r),!0).forEach(function(n){aW(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n1(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aW(t,e,r){return e=oW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oW(t){var e=lW(t,"string");return typeof e=="symbol"?e:e+""}function lW(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oI(t){return t&&t.map((e,r)=>zn.createElement(e.tag,Lh({key:r},e.attr),oI(e.child)))}function rn(t){return e=>zn.createElement(uW,kh({attr:Lh({},t.attr)},e),oI(t.child))}function uW(t){var e=r=>{var{attr:n,size:s,title:i}=t,o=sW(t,nW),c=s||r.size||"1em",d;return r.className&&(d=r.className),t.className&&(d=(d?d+" ":"")+t.className),zn.createElement("svg",kh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:d,style:Lh(Lh({color:t.color||r.color},r.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),i&&zn.createElement("title",null,i),t.children)};return r1!==void 0?zn.createElement(r1.Consumer,null,r=>e(r)):e(aI)}function Vh(t){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M499.99 176h-59.87l-16.64-41.6C406.38 91.63 365.57 64 319.5 64h-127c-46.06 0-86.88 27.63-103.99 70.4L71.87 176H12.01C4.2 176-1.53 183.34.37 190.91l6 24C7.7 220.25 12.5 224 18.01 224h20.07C24.65 235.73 16 252.78 16 272v48c0 16.12 6.16 30.67 16 41.93V416c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32v-32h256v32c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32v-54.07c9.84-11.25 16-25.8 16-41.93v-48c0-19.22-8.65-36.27-22.07-48H494c5.51 0 10.31-3.75 11.64-9.09l6-24c1.89-7.57-3.84-14.91-11.65-14.91zm-352.06-17.83c7.29-18.22 24.94-30.17 44.57-30.17h127c19.63 0 37.28 11.95 44.57 30.17L384 208H128l19.93-49.83zM96 319.8c-19.2 0-32-12.76-32-31.9S76.8 256 96 256s48 28.71 48 47.85-28.8 15.95-48 15.95zm320 0c-19.2 0-48 3.19-48-15.95S396.8 256 416 256s32 12.76 32 31.9-12.8 31.9-32 31.9z"},child:[]}]})(t)}function cW(t){return rn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 0c-69.59 0-126 56.41-126 126 0 56.26 82.35 158.8 113.9 196.02 6.39 7.54 17.82 7.54 24.2 0C331.65 284.8 414 182.26 414 126 414 56.41 357.59 0 288 0zm0 168c-23.2 0-42-18.8-42-42s18.8-42 42-42 42 18.8 42 42-18.8 42-42 42zM20.12 215.95A32.006 32.006 0 0 0 0 245.66v250.32c0 11.32 11.43 19.06 21.94 14.86L160 448V214.92c-8.84-15.98-16.07-31.54-21.25-46.42L20.12 215.95zM288 359.67c-14.07 0-27.38-6.18-36.51-16.96-19.66-23.2-40.57-49.62-59.49-76.72v182l192 64V266c-18.92 27.09-39.82 53.52-59.49 76.72-9.13 10.77-22.44 16.95-36.51 16.95zm266.06-198.51L416 224v288l139.88-55.95A31.996 31.996 0 0 0 576 426.34V176.02c0-11.32-11.43-19.06-21.94-14.86z"},child:[]}]})(t)}function dW(t){return rn({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(t)}function $c(t){return rn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 96v256c0 51.815-61.624 96-130.022 96l62.98 49.721C386.905 502.417 383.562 512 376 512H72c-7.578 0-10.892-9.594-4.957-14.279L130.022 448C61.82 448 0 403.954 0 352V96C0 42.981 64 0 128 0h192c65 0 128 42.981 128 96zM200 232V120c0-13.255-10.745-24-24-24H72c-13.255 0-24 10.745-24 24v112c0 13.255 10.745 24 24 24h104c13.255 0 24-10.745 24-24zm200 0V120c0-13.255-10.745-24-24-24H272c-13.255 0-24 10.745-24 24v112c0 13.255 10.745 24 24 24h104c13.255 0 24-10.745 24-24zm-48 56c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm-256 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"},child:[]}]})(t)}function Bo(t){return rn({attr:{viewBox:"0 0 416 512"},child:[{tag:"path",attr:{d:"M207.9 15.2c.8 4.7 16.1 94.5 16.1 128.8 0 52.3-27.8 89.6-68.9 104.6L168 486.7c.7 13.7-10.2 25.3-24 25.3H80c-13.7 0-24.7-11.5-24-25.3l12.9-238.1C27.7 233.6 0 196.2 0 144 0 109.6 15.3 19.9 16.1 15.2 19.3-5.1 61.4-5.4 64 16.3v141.2c1.3 3.4 15.1 3.2 16 0 1.4-25.3 7.9-139.2 8-141.8 3.3-20.8 44.7-20.8 47.9 0 .2 2.7 6.6 116.5 8 141.8.9 3.2 14.8 3.4 16 0V16.3c2.6-21.6 44.8-21.4 48-1.1zm119.2 285.7l-15 185.1c-1.2 14 9.9 26 23.9 26h56c13.3 0 24-10.7 24-24V24c0-13.2-10.7-24-24-24-82.5 0-221.4 178.5-64.9 300.9z"},child:[]}]})(t)}function Zo(t){return rn({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M208 96c26.5 0 48-21.5 48-48S234.5 0 208 0s-48 21.5-48 48 21.5 48 48 48zm94.5 149.1l-23.3-11.8-9.7-29.4c-14.7-44.6-55.7-75.8-102.2-75.9-36-.1-55.9 10.1-93.3 25.2-21.6 8.7-39.3 25.2-49.7 46.2L17.6 213c-7.8 15.8-1.5 35 14.2 42.9 15.6 7.9 34.6 1.5 42.5-14.3L81 228c3.5-7 9.3-12.5 16.5-15.4l26.8-10.8-15.2 60.7c-5.2 20.8.4 42.9 14.9 58.8l59.9 65.4c7.2 7.9 12.3 17.4 14.9 27.7l18.3 73.3c4.3 17.1 21.7 27.6 38.8 23.3 17.1-4.3 27.6-21.7 23.3-38.8l-22.2-89c-2.6-10.3-7.7-19.9-14.9-27.7l-45.5-49.7 17.2-68.7 5.5 16.5c5.3 16.1 16.7 29.4 31.7 37l23.3 11.8c15.6 7.9 34.6 1.5 42.5-14.3 7.7-15.7 1.4-35.1-14.3-43zM73.6 385.8c-3.2 8.1-8 15.4-14.2 21.5l-50 50.1c-12.5 12.5-12.5 32.8 0 45.3s32.7 12.5 45.2 0l59.4-59.4c6.1-6.1 10.9-13.4 14.2-21.5l13.5-33.8c-55.3-60.3-38.7-41.8-47.4-53.7l-20.7 51.5z"},child:[]}]})(t)}function fW(t){return rn({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M384 192c0 87.4-117 243-168.3 307.2c-12.3 15.3-35.1 15.3-47.4 0C117 435 0 279.4 0 192C0 86 86 0 192 0S384 86 384 192z"},child:[]}]})(t)}function hW(t){return rn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"},child:[]}]})(t)}function s1(t){return rn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(t)}function i1(t){return rn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"},child:[]}]})(t)}function a1(t){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm90.5 224H272v74.5c0 8.8-7.2 16-16 16-4.4 0-8.4-1.8-11.3-4.7-2.9-2.9-4.7-6.9-4.7-11.3V272h-74.5c-4.4 0-8.4-1.8-11.3-4.7-2.9-2.9-4.7-6.9-4.7-11.3 0-8.8 7.2-16 16-16H240v-74.5c0-8.8 7.2-16 16-16s16 7.2 16 16V240h74.5c8.8 0 16 7.2 16 16s-7.2 16-16 16z"},child:[]}]})(t)}function mW(t){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M217.9 256L345 129c9.4-9.4 9.4-24.6 0-33.9-9.4-9.4-24.6-9.3-34 0L167 239c-9.1 9.1-9.3 23.7-.7 33.1L310.9 417c4.7 4.7 10.9 7 17 7s12.3-2.3 17-7c9.4-9.4 9.4-24.6 0-33.9L217.9 256z"},child:[]}]})(t)}function gW(t){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M294.1 256L167 129c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.3 34 0L345 239c9.1 9.1 9.3 23.7.7 33.1L201.1 417c-4.7 4.7-10.9 7-17 7s-12.3-2.3-17-7c-9.4-9.4-9.4-24.6 0-33.9l127-127.1z"},child:[]}]})(t)}function pW(t){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"g",attr:{fillOpacity:".9"},child:[{tag:"path",attr:{d:"M255.8 48C141 48 48 141.2 48 256s93 208 207.8 208c115 0 208.2-93.2 208.2-208S370.8 48 255.8 48zm.2 374.4c-91.9 0-166.4-74.5-166.4-166.4S164.1 89.6 256 89.6 422.4 164.1 422.4 256 347.9 422.4 256 422.4z"},child:[]},{tag:"path",attr:{d:"M266.4 152h-31.2v124.8l109.2 65.5 15.6-25.6-93.6-55.5V152z"},child:[]}]}]})(t)}var o1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},vW=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],o=t[r++],c=t[r++],d=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const i=t[r++],o=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},uI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,d=s+2<t.length,h=d?t[s+2]:0,g=i>>2,v=(i&3)<<4|c>>4;let y=(c&15)<<2|h>>6,E=h&63;d||(E=64,o||(y=64)),n.push(r[g],r[v],r[y],r[E])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(lI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vW(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],c=s<t.length?r[t.charAt(s)]:0;++s;const h=s<t.length?r[t.charAt(s)]:64;++s;const v=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||c==null||h==null||v==null)throw new yW;const y=i<<2|c>>4;if(n.push(y),h!==64){const E=c<<4&240|h>>2;if(n.push(E),v!==64){const N=h<<6&192|v;n.push(N)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class yW extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _W=function(t){const e=lI(t);return uI.encodeByteArray(e,!0)},zh=function(t){return _W(t).replace(/\./g,"")},cI=function(t){try{return uI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xW(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wW=()=>xW().__FIREBASE_DEFAULTS__,bW=()=>{if(typeof process>"u"||typeof o1>"u")return;const t=o1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},EW=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&cI(t[1]);return e&&JSON.parse(e)},Km=()=>{try{return wW()||bW()||EW()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},dI=t=>{var e,r;return(r=(e=Km())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},DW=t=>{const e=dI(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},fI=()=>{var t;return(t=Km())===null||t===void 0?void 0:t.config},hI=t=>{var e;return(e=Km())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TW{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SW(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[zh(JSON.stringify(r)),zh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PW(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cr())}function IW(){var t;const e=(t=Km())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CW(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OW(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function NW(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jW(){const t=Cr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function MW(){return!IW()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function RW(){try{return typeof indexedDB=="object"}catch{return!1}}function AW(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FW="FirebaseError";class da extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=FW,Object.setPrototypeOf(this,da.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wd.prototype.create)}}class Wd{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?kW(i,n):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new da(s,c,n)}}function kW(t,e){return t.replace(LW,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const LW=/\{\$([^}]+)}/g;function VW(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Uh(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],o=e[s];if(l1(i)&&l1(o)){if(!Uh(i,o))return!1}else if(i!==o)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function l1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function zW(t,e){const r=new UW(t,e);return r.subscribe.bind(r)}class UW{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");BW(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=np),s.error===void 0&&(s.error=np),s.complete===void 0&&(s.complete=np);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BW(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function np(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t){return t&&t._delegate?t._delegate:t}class ol{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WW{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new TW;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HW(e))try{this.getOrInitializeService({instanceIdentifier:Wo})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=Wo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wo){return this.instances.has(e)}getOptions(e=Wo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);n===c&&o.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:$W(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Wo){return this.component?this.component.multipleInstances?e:Wo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $W(t){return t===Wo?void 0:t}function HW(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YW{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new WW(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(We||(We={}));const qW={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},GW=We.INFO,KW={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},QW=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=KW[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class w_{constructor(e){this.name=e,this._logLevel=GW,this._logHandler=QW,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qW[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const XW=(t,e)=>e.some(r=>t instanceof r);let u1,c1;function JW(){return u1||(u1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZW(){return c1||(c1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mI=new WeakMap,mv=new WeakMap,gI=new WeakMap,sp=new WeakMap,b_=new WeakMap;function e$(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{r(lo(t.result)),s()},o=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&mI.set(r,t)}).catch(()=>{}),b_.set(e,t),e}function t$(t){if(mv.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{r(),s()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});mv.set(t,e)}let gv={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return mv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||gI.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return lo(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function r$(t){gv=t(gv)}function n$(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(ip(this),e,...r);return gI.set(n,e.sort?e.sort():[e]),lo(n)}:ZW().includes(t)?function(...e){return t.apply(ip(this),e),lo(mI.get(this))}:function(...e){return lo(t.apply(ip(this),e))}}function s$(t){return typeof t=="function"?n$(t):(t instanceof IDBTransaction&&t$(t),XW(t,JW())?new Proxy(t,gv):t)}function lo(t){if(t instanceof IDBRequest)return e$(t);if(sp.has(t))return sp.get(t);const e=s$(t);return e!==t&&(sp.set(t,e),b_.set(e,t)),e}const ip=t=>b_.get(t);function i$(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=lo(o);return n&&o.addEventListener("upgradeneeded",d=>{n(lo(o.result),d.oldVersion,d.newVersion,lo(o.transaction),d)}),r&&o.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),c.then(d=>{i&&d.addEventListener("close",()=>i()),s&&d.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const a$=["get","getKey","getAll","getAllKeys","count"],o$=["put","add","delete","clear"],ap=new Map;function d1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ap.get(e))return ap.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=o$.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||a$.includes(r)))return;const i=async function(o,...c){const d=this.transaction(o,s?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(c.shift())),(await Promise.all([h[r](...c),s&&d.done]))[0]};return ap.set(e,i),i}r$(t=>({...t,get:(e,r,n)=>d1(e,r)||t.get(e,r,n),has:(e,r)=>!!d1(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l${constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(u$(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function u$(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pv="@firebase/app",f1="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=new w_("@firebase/app"),c$="@firebase/app-compat",d$="@firebase/analytics-compat",f$="@firebase/analytics",h$="@firebase/app-check-compat",m$="@firebase/app-check",g$="@firebase/auth",p$="@firebase/auth-compat",v$="@firebase/database",y$="@firebase/data-connect",_$="@firebase/database-compat",x$="@firebase/functions",w$="@firebase/functions-compat",b$="@firebase/installations",E$="@firebase/installations-compat",D$="@firebase/messaging",T$="@firebase/messaging-compat",S$="@firebase/performance",P$="@firebase/performance-compat",I$="@firebase/remote-config",C$="@firebase/remote-config-compat",O$="@firebase/storage",N$="@firebase/storage-compat",j$="@firebase/firestore",M$="@firebase/vertexai-preview",R$="@firebase/firestore-compat",A$="firebase",F$="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="[DEFAULT]",k$={[pv]:"fire-core",[c$]:"fire-core-compat",[f$]:"fire-analytics",[d$]:"fire-analytics-compat",[m$]:"fire-app-check",[h$]:"fire-app-check-compat",[g$]:"fire-auth",[p$]:"fire-auth-compat",[v$]:"fire-rtdb",[y$]:"fire-data-connect",[_$]:"fire-rtdb-compat",[x$]:"fire-fn",[w$]:"fire-fn-compat",[b$]:"fire-iid",[E$]:"fire-iid-compat",[D$]:"fire-fcm",[T$]:"fire-fcm-compat",[S$]:"fire-perf",[P$]:"fire-perf-compat",[I$]:"fire-rc",[C$]:"fire-rc-compat",[O$]:"fire-gcs",[N$]:"fire-gcs-compat",[j$]:"fire-fst",[R$]:"fire-fst-compat",[M$]:"fire-vertex","fire-js":"fire-js",[A$]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh=new Map,L$=new Map,yv=new Map;function h1(t,e){try{t.container.addComponent(e)}catch(r){Ji.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function wu(t){const e=t.name;if(yv.has(e))return Ji.debug(`There were multiple attempts to register component ${e}.`),!1;yv.set(e,t);for(const r of Bh.values())h1(r,t);for(const r of L$.values())h1(r,t);return!0}function E_(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function zi(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},uo=new Wd("app","Firebase",V$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z${constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ol("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw uo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu=F$;function pI(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:vv,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw uo.create("bad-app-name",{appName:String(s)});if(r||(r=fI()),!r)throw uo.create("no-options");const i=Bh.get(s);if(i){if(Uh(r,i.options)&&Uh(n,i.config))return i;throw uo.create("duplicate-app",{appName:s})}const o=new YW(s);for(const d of yv.values())o.addComponent(d);const c=new z$(r,n,o);return Bh.set(s,c),c}function vI(t=vv){const e=Bh.get(t);if(!e&&t===vv&&fI())return pI();if(!e)throw uo.create("no-app",{appName:t});return e}function co(t,e,r){var n;let s=(n=k$[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ji.warn(c.join(" "));return}wu(new ol(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U$="firebase-heartbeat-database",B$=1,hd="firebase-heartbeat-store";let op=null;function yI(){return op||(op=i$(U$,B$,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(hd)}catch(r){console.warn(r)}}}}).catch(t=>{throw uo.create("idb-open",{originalErrorMessage:t.message})})),op}async function W$(t){try{const r=(await yI()).transaction(hd),n=await r.objectStore(hd).get(_I(t));return await r.done,n}catch(e){if(e instanceof da)Ji.warn(e.message);else{const r=uo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ji.warn(r.message)}}}async function m1(t,e){try{const n=(await yI()).transaction(hd,"readwrite");await n.objectStore(hd).put(e,_I(t)),await n.done}catch(r){if(r instanceof da)Ji.warn(r.message);else{const n=uo.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Ji.warn(n.message)}}}function _I(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $$=1024,H$=30*24*60*60*1e3;class Y${constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new G$(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=g1();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=H$}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Ji.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=g1(),{heartbeatsToSend:n,unsentEntries:s}=q$(this._heartbeatsCache.heartbeats),i=zh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return Ji.warn(r),""}}}function g1(){return new Date().toISOString().substring(0,10)}function q$(t,e=$$){const r=[];let n=t.slice();for(const s of t){const i=r.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),p1(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),p1(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class G${constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RW()?AW().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await W$(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return m1(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return m1(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function p1(t){return zh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K$(t){wu(new ol("platform-logger",e=>new l$(e),"PRIVATE")),wu(new ol("heartbeat",e=>new Y$(e),"PRIVATE")),co(pv,f1,t),co(pv,f1,"esm2017"),co("fire-js","")}K$("");function D_(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function xI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Q$=xI,wI=new Wd("auth","Firebase",xI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh=new w_("@firebase/auth");function X$(t,...e){Wh.logLevel<=We.WARN&&Wh.warn(`Auth (${Vu}): ${t}`,...e)}function th(t,...e){Wh.logLevel<=We.ERROR&&Wh.error(`Auth (${Vu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t,...e){throw S_(t,...e)}function vs(t,...e){return S_(t,...e)}function T_(t,e,r){const n=Object.assign(Object.assign({},Q$()),{[e]:r});return new Wd("auth","Firebase",n).create(e,{appName:t.name})}function el(t){return T_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function J$(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&ti(t,"argument-error"),T_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function S_(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return wI.create(t,...e)}function Se(t,e,...r){if(!t)throw S_(e,...r)}function Ui(t){const e="INTERNAL ASSERTION FAILED: "+t;throw th(e),new Error(e)}function Zi(t,e){t||Ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Z$(){return v1()==="http:"||v1()==="https:"}function v1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Z$()||OW()||"connection"in navigator)?navigator.onLine:!0}function tH(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,r){this.shortDelay=e,this.longDelay=r,Zi(r>e,"Short delay should be less than long delay!"),this.isMobile=PW()||NW()}get(){return eH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(t,e){Zi(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nH=new Hd(3e4,6e4);function I_(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function zu(t,e,r,n,s={}){return EI(t,s,async()=>{let i={},o={};n&&(e==="GET"?o=n:i={body:JSON.stringify(n)});const c=$d(Object.assign({key:t.config.apiKey},o)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:d},i);return CW()||(h.referrerPolicy="no-referrer"),bI.fetch()(DI(t,t.config.apiHost,r,c),h)})}async function EI(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},rH),e);try{const s=new iH(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ff(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ff(t,"credential-already-in-use",o);if(d==="EMAIL_EXISTS")throw Ff(t,"email-already-in-use",o);if(d==="USER_DISABLED")throw Ff(t,"user-disabled",o);const g=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw T_(t,g,h);ti(t,g)}}catch(s){if(s instanceof da)throw s;ti(t,"network-request-failed",{message:String(s)})}}async function sH(t,e,r,n,s={}){const i=await zu(t,e,r,n,s);return"mfaPendingCredential"in i&&ti(t,"multi-factor-auth-required",{_serverResponse:i}),i}function DI(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?P_(t.config,s):`${t.config.apiScheme}://${s}`}class iH{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(vs(this.auth,"network-request-failed")),nH.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ff(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=vs(t,e,n);return s.customData._tokenResponse=r,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aH(t,e){return zu(t,"POST","/v1/accounts:delete",e)}async function TI(t,e){return zu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oH(t,e=!1){const r=xn(t),n=await r.getIdToken(e),s=C_(n);Se(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:Hc(lp(s.auth_time)),issuedAtTime:Hc(lp(s.iat)),expirationTime:Hc(lp(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function lp(t){return Number(t)*1e3}function C_(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return th("JWT malformed, contained fewer than 3 sections"),null;try{const s=cI(r);return s?JSON.parse(s):(th("Failed to decode base64 JWT payload"),null)}catch(s){return th("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function y1(t){const e=C_(t);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function md(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof da&&lH(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function lH({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uH{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hc(this.lastLoginAt),this.creationTime=Hc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $h(t){var e;const r=t.auth,n=await t.getIdToken(),s=await md(t,TI(r,{idToken:n}));Se(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?SI(i.providerUserInfo):[],c=dH(t.providerData,o),d=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),g=d?h:!1,v={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new xv(i.createdAt,i.lastLoginAt),isAnonymous:g};Object.assign(t,v)}async function cH(t){const e=xn(t);await $h(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dH(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function SI(t){return t.map(e=>{var{providerId:r}=e,n=D_(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fH(t,e){const r=await EI(t,{},async()=>{const n=$d({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=DI(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",bI.fetch()(o,{method:"POST",headers:c,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function hH(t,e){return zu(t,"POST","/v2/accounts:revokeToken",I_(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):y1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const r=y1(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await fH(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,o=new cu;return n&&(Se(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),s&&(Se(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Se(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cu,this.toJSON())}_performRefresh(){return Ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(t,e){Se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Bi{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=D_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uH(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new xv(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await md(this,this.stsTokenManager.getToken(this.auth,e));return Se(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return oH(this,e)}reload(){return cH(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Bi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await $h(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zi(this.auth.app))return Promise.reject(el(this.auth));const e=await this.getIdToken();return await md(this,aH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,o,c,d,h,g;const v=(n=r.displayName)!==null&&n!==void 0?n:void 0,y=(s=r.email)!==null&&s!==void 0?s:void 0,E=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,N=(o=r.photoURL)!==null&&o!==void 0?o:void 0,D=(c=r.tenantId)!==null&&c!==void 0?c:void 0,k=(d=r._redirectEventId)!==null&&d!==void 0?d:void 0,S=(h=r.createdAt)!==null&&h!==void 0?h:void 0,P=(g=r.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:C,emailVerified:R,isAnonymous:Y,providerData:q,stsTokenManager:T}=r;Se(C&&T,e,"internal-error");const b=cu.fromJSON(this.name,T);Se(typeof C=="string",e,"internal-error"),Ba(v,e.name),Ba(y,e.name),Se(typeof R=="boolean",e,"internal-error"),Se(typeof Y=="boolean",e,"internal-error"),Ba(E,e.name),Ba(N,e.name),Ba(D,e.name),Ba(k,e.name),Ba(S,e.name),Ba(P,e.name);const I=new Bi({uid:C,auth:e,email:y,emailVerified:R,displayName:v,isAnonymous:Y,photoURL:N,phoneNumber:E,tenantId:D,stsTokenManager:b,createdAt:S,lastLoginAt:P});return q&&Array.isArray(q)&&(I.providerData=q.map(j=>Object.assign({},j))),k&&(I._redirectEventId=k),I}static async _fromIdTokenResponse(e,r,n=!1){const s=new cu;s.updateFromServerResponse(r);const i=new Bi({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await $h(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Se(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?SI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new cu;c.updateFromIdToken(n);const d=new Bi({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new xv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=new Map;function Wi(t){Zi(t instanceof Function,"Expected a class definition");let e=_1.get(t);return e?(Zi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}PI.type="NONE";const x1=PI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(t,e,r){return`firebase:${t}:${e}:${r}`}class du{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=rh(this.userKey,s.apiKey,i),this.fullPersistenceKey=rh("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Bi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new du(Wi(x1),e,n);const s=(await Promise.all(r.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Wi(x1);const o=rh(n,e.config.apiKey,e.name);let c=null;for(const h of r)try{const g=await h._get(o);if(g){const v=Bi._fromJSON(e,g);h!==i&&(c=v),i=h;break}}catch{}const d=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!d.length?new du(i,e,n):(i=d[0],c&&await i._set(o,c.toJSON()),await Promise.all(r.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new du(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(II(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(MI(e))return"Blackberry";if(RI(e))return"Webos";if(CI(e))return"Safari";if((e.includes("chrome/")||OI(e))&&!e.includes("edge/"))return"Chrome";if(jI(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function II(t=Cr()){return/firefox\//i.test(t)}function CI(t=Cr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function OI(t=Cr()){return/crios\//i.test(t)}function NI(t=Cr()){return/iemobile/i.test(t)}function jI(t=Cr()){return/android/i.test(t)}function MI(t=Cr()){return/blackberry/i.test(t)}function RI(t=Cr()){return/webos/i.test(t)}function O_(t=Cr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function mH(t=Cr()){var e;return O_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gH(){return jW()&&document.documentMode===10}function AI(t=Cr()){return O_(t)||jI(t)||RI(t)||MI(t)||/windows phone/i.test(t)||NI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(t,e=[]){let r;switch(t){case"Browser":r=w1(Cr());break;case"Worker":r=`${w1(Cr())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Vu}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pH{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((o,c)=>{try{const d=e(i);o(d)}catch(d){c(d)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vH(t,e={}){return zu(t,"GET","/v2/passwordPolicy",I_(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yH=6;class _H{constructor(e){var r,n,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:yH,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,o,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(r=d.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(n=d.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(i=d.containsUppercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(o=d.containsNumericCharacter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xH{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new b1(this),this.idTokenSubscription=new b1(this),this.beforeStateQueue=new pH(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Wi(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await du.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await TI(this,{idToken:e}),n=await Bi._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(zi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,c=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===c)&&(d!=null&&d.user)&&(s=d.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await $h(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tH()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zi(this.app))return Promise.reject(el(this));const r=e?xn(e):null;return r&&Se(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zi(this.app)?Promise.reject(el(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zi(this.app)?Promise.reject(el(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vH(this),r=new _H(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Wd("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await hH(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Wi(e)||this._popupRedirectResolver;Se(r,this,"argument-error"),this.redirectPersistenceManager=await du.create(this,[Wi(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof r=="function"){const d=e.addObserver(r,n,s);return()=>{o=!0,d()}}else{const d=e.addObserver(r);return()=>{o=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&X$(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Qm(t){return xn(t)}class b1{constructor(e){this.auth=e,this.observer=null,this.addObserver=zW(r=>this.observer=r)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let N_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wH(t){N_=t}function bH(t){return N_.loadJS(t)}function EH(){return N_.gapiScript}function DH(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TH(t,e){const r=E_(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(Uh(i,e??{}))return s;ti(s,"already-initialized")}return r.initialize({options:e})}function SH(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Wi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function PH(t,e,r){const n=Qm(t);Se(n._canInitEmulator,n,"emulator-config-failed"),Se(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=kI(e),{host:o,port:c}=IH(e),d=c===null?"":`:${c}`;n.config.emulator={url:`${i}//${o}${d}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),CH()}function kI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function IH(t){const e=kI(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:E1(n.substr(i.length+1))}}else{const[i,o]=n.split(":");return{host:i,port:E1(o)}}}function E1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function CH(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Ui("not implemented")}_getIdTokenResponse(e){return Ui("not implemented")}_linkToIdToken(e,r){return Ui("not implemented")}_getReauthenticationResolver(e){return Ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fu(t,e){return sH(t,"POST","/v1/accounts:signInWithIdp",I_(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OH="http://localhost";class ll extends LI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new ll(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):ti("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=D_(r,["providerId","signInMethod"]);if(!n||!s)return null;const o=new ll(n,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return fu(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,fu(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,fu(e,r)}buildRequest(){const e={requestUri:OH,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=$d(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd extends j_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa extends Yd{constructor(){super("facebook.com")}static credential(e){return ll._fromParams({providerId:qa.PROVIDER_ID,signInMethod:qa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qa.credentialFromTaggedObject(e)}static credentialFromError(e){return qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qa.credential(e.oauthAccessToken)}catch{return null}}}qa.FACEBOOK_SIGN_IN_METHOD="facebook.com";qa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends Yd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return ll._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Fi.credential(r,n)}catch{return null}}}Fi.GOOGLE_SIGN_IN_METHOD="google.com";Fi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga extends Yd{constructor(){super("github.com")}static credential(e){return ll._fromParams({providerId:Ga.PROVIDER_ID,signInMethod:Ga.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ga.credentialFromTaggedObject(e)}static credentialFromError(e){return Ga.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ga.credential(e.oauthAccessToken)}catch{return null}}}Ga.GITHUB_SIGN_IN_METHOD="github.com";Ga.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka extends Yd{constructor(){super("twitter.com")}static credential(e,r){return ll._fromParams({providerId:Ka.PROVIDER_ID,signInMethod:Ka.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Ka.credentialFromTaggedObject(e)}static credentialFromError(e){return Ka.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Ka.credential(r,n)}catch{return null}}}Ka.TWITTER_SIGN_IN_METHOD="twitter.com";Ka.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await Bi._fromIdTokenResponse(e,n,s),o=D1(n);return new bu({user:i,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=D1(n);return new bu({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function D1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh extends da{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,Hh.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new Hh(e,r,n,s)}}function VI(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Hh._fromErrorAndOperation(t,i,e,n):i})}async function NH(t,e,r=!1){const n=await md(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return bu._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jH(t,e,r=!1){const{auth:n}=t;if(zi(n.app))return Promise.reject(el(n));const s="reauthenticate";try{const i=await md(t,VI(n,s,e,t),r);Se(i.idToken,n,"internal-error");const o=C_(i.idToken);Se(o,n,"internal-error");const{sub:c}=o;return Se(t.uid===c,n,"user-mismatch"),bu._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ti(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MH(t,e,r=!1){if(zi(t.app))return Promise.reject(el(t));const n="signIn",s=await VI(t,n,e),i=await bu._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}function RH(t,e,r,n){return xn(t).onIdTokenChanged(e,r,n)}function AH(t,e,r){return xn(t).beforeAuthStateChanged(e,r)}function FH(t,e,r,n){return xn(t).onAuthStateChanged(e,r,n)}function kH(t){return xn(t).signOut()}const Yh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Yh,"1"),this.storage.removeItem(Yh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LH=1e3,VH=10;class UI extends zI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,c,d)=>{this.notifyListeners(o,d)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},i=this.storage.getItem(n);gH()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,VH):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},LH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}UI.type="LOCAL";const zH=UI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI extends zI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}BI.type="SESSION";const WI=BI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UH(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Xm(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const c=Array.from(o).map(async h=>h(r.origin,i)),d=await UH(c);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:d})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BH{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,d)=>{const h=M_("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},n);o={messageChannel:s,onMessage(v){const y=v;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(g),i=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(y.data.response);break;default:clearTimeout(g),clearTimeout(i),d(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:r},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(){return window}function WH(t){Xs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(){return typeof Xs().WorkerGlobalScope<"u"&&typeof Xs().importScripts=="function"}async function $H(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HH(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function YH(){return $I()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI="firebaseLocalStorageDb",qH=1,qh="firebaseLocalStorage",YI="fbase_key";class qd{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Jm(t,e){return t.transaction([qh],e?"readwrite":"readonly").objectStore(qh)}function GH(){const t=indexedDB.deleteDatabase(HI);return new qd(t).toPromise()}function wv(){const t=indexedDB.open(HI,qH);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(qh,{keyPath:YI})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(qh)?e(n):(n.close(),await GH(),e(await wv()))})})}async function T1(t,e,r){const n=Jm(t,!0).put({[YI]:e,value:r});return new qd(n).toPromise()}async function KH(t,e){const r=Jm(t,!1).get(e),n=await new qd(r).toPromise();return n===void 0?null:n.value}function S1(t,e){const r=Jm(t,!0).delete(e);return new qd(r).toPromise()}const QH=800,XH=3;class qI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wv(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>XH)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $I()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xm._getInstance(YH()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await $H(),!this.activeServiceWorker)return;this.sender=new BH(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HH()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wv();return await T1(e,Yh,"1"),await S1(e,Yh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>T1(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>KH(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>S1(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Jm(s,!1).getAll();return new qd(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qI.type="LOCAL";const JH=qI;new Hd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(t,e){return e?Wi(e):(Se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_ extends LI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fu(e,this._buildIdpRequest())}_linkToIdToken(e,r){return fu(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return fu(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function ZH(t){return MH(t.auth,new R_(t),t.bypassAuthState)}function eY(t){const{auth:e,user:r}=t;return Se(r,e,"internal-error"),jH(r,new R_(t),t.bypassAuthState)}async function tY(t){const{auth:e,user:r}=t;return Se(r,e,"internal-error"),NH(r,new R_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const d={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ZH;case"linkViaPopup":case"linkViaRedirect":return tY;case"reauthViaPopup":case"reauthViaRedirect":return eY;default:ti(this.auth,"internal-error")}}resolve(e){Zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rY=new Hd(2e3,1e4);async function nY(t,e,r){if(zi(t.app))return Promise.reject(vs(t,"operation-not-supported-in-this-environment"));const n=Qm(t);J$(t,e,j_);const s=GI(n,r);return new Ko(n,"signInViaPopup",e,s).executeNotNull()}class Ko extends KI{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,Ko.currentPopupAction&&Ko.currentPopupAction.cancel(),Ko.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Zi(this.filter.length===1,"Popup operations only handle one event");const e=M_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(vs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(vs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ko.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rY.get())};e()}}Ko.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sY="pendingRedirect",nh=new Map;class iY extends KI{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=nh.get(this.auth._key());if(!e){try{const n=await aY(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}nh.set(this.auth._key(),e)}return this.bypassAuthState||nh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aY(t,e){const r=uY(e),n=lY(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function oY(t,e){nh.set(t._key(),e)}function lY(t){return Wi(t._redirectPersistence)}function uY(t){return rh(sY,t.config.apiKey,t.name)}async function cY(t,e,r=!1){if(zi(t.app))return Promise.reject(el(t));const n=Qm(t),s=GI(n,e),o=await new iY(n,s,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dY=10*60*1e3;class fY{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hY(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!QI(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(vs(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dY&&this.cachedEventUids.clear(),this.cachedEventUids.has(P1(e))}saveEventToCache(e){this.cachedEventUids.add(P1(e)),this.lastProcessedEventTime=Date.now()}}function P1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function QI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hY(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mY(t,e={}){return zu(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gY=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pY=/^https?/;async function vY(t){if(t.config.emulator)return;const{authorizedDomains:e}=await mY(t);for(const r of e)try{if(yY(r))return}catch{}ti(t,"unauthorized-domain")}function yY(t){const e=_v(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!pY.test(r))return!1;if(gY.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Y=new Hd(3e4,6e4);function I1(){const t=Xs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function xY(t){return new Promise((e,r)=>{var n,s,i;function o(){I1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{I1(),r(vs(t,"network-request-failed"))},timeout:_Y.get()})}if(!((s=(n=Xs().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Xs().gapi)===null||i===void 0)&&i.load)o();else{const c=DH("iframefcb");return Xs()[c]=()=>{gapi.load?o():r(vs(t,"network-request-failed"))},bH(`${EH()}?onload=${c}`).catch(d=>r(d))}}).catch(e=>{throw sh=null,e})}let sh=null;function wY(t){return sh=sh||xY(t),sh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bY=new Hd(5e3,15e3),EY="__/auth/iframe",DY="emulator/auth/iframe",TY={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SY=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PY(t){const e=t.config;Se(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?P_(e,DY):`https://${t.config.authDomain}/${EY}`,n={apiKey:e.apiKey,appName:t.name,v:Vu},s=SY.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${$d(n).slice(1)}`}async function IY(t){const e=await wY(t),r=Xs().gapi;return Se(r,t,"internal-error"),e.open({where:document.body,url:PY(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TY,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const o=vs(t,"network-request-failed"),c=Xs().setTimeout(()=>{i(o)},bY.get());function d(){Xs().clearTimeout(c),s(n)}n.ping(d).then(d,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CY={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OY=500,NY=600,jY="_blank",MY="http://localhost";class C1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function RY(t,e,r,n=OY,s=NY){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const d=Object.assign(Object.assign({},CY),{width:n.toString(),height:s.toString(),top:i,left:o}),h=Cr().toLowerCase();r&&(c=OI(h)?jY:r),II(h)&&(e=e||MY,d.scrollbars="yes");const g=Object.entries(d).reduce((y,[E,N])=>`${y}${E}=${N},`,"");if(mH(h)&&c!=="_self")return AY(e||"",c),new C1(null);const v=window.open(e||"",c,g);Se(v,t,"popup-blocked");try{v.focus()}catch{}return new C1(v)}function AY(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FY="__/auth/handler",kY="emulator/auth/handler",LY=encodeURIComponent("fac");async function O1(t,e,r,n,s,i){Se(t.config.authDomain,t,"auth-domain-config-required"),Se(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Vu,eventId:s};if(e instanceof j_){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",VW(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))o[g]=v}if(e instanceof Yd){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(o.scopes=g.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const g of Object.keys(c))c[g]===void 0&&delete c[g];const d=await t._getAppCheckToken(),h=d?`#${LY}=${encodeURIComponent(d)}`:"";return`${VY(t)}?${$d(c).slice(1)}${h}`}function VY({config:t}){return t.emulator?P_(t,kY):`https://${t.authDomain}/${FY}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up="webStorageSupport";class zY{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=WI,this._completeRedirectFn=cY,this._overrideRedirectResult=oY}async _openPopup(e,r,n,s){var i;Zi((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await O1(e,r,n,_v(),s);return RY(e,o,M_())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await O1(e,r,n,_v(),s);return WH(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(Zi(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await IY(e),n=new fY(e);return r.register("authEvent",s=>(Se(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(up,{type:up},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[up];o!==void 0&&r(!!o),ti(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=vY(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return AI()||CI()||O_()}}const UY=zY;var N1="@firebase/auth",j1="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BY{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WY(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $Y(t){wu(new ol("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=n.options;Se(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FI(t)},h=new xH(n,s,i,d);return SH(h,r),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),wu(new ol("auth-internal",e=>{const r=Qm(e.getProvider("auth").getImmediate());return(n=>new BY(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),co(N1,j1,WY(t)),co(N1,j1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HY=5*60,YY=hI("authIdTokenMaxAge")||HY;let M1=null;const qY=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>YY)return;const s=r==null?void 0:r.token;M1!==s&&(M1=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function GY(t=vI()){const e=E_(t,"auth");if(e.isInitialized())return e.getImmediate();const r=TH(t,{popupRedirectResolver:UY,persistence:[JH,zH,WI]}),n=hI("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const o=qY(i.toString());AH(r,o,()=>o(r.currentUser)),RH(r,c=>o(c))}}const s=dI("auth");return s&&PH(r,`http://${s}`),r}function KY(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}wH({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=vs("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",KY().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$Y("Browser");var R1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tl,XI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,b){function I(){}I.prototype=b.prototype,T.D=b.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(j,M,V){for(var O=Array(arguments.length-2),et=2;et<arguments.length;et++)O[et-2]=arguments[et];return b.prototype[M].apply(j,O)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,b,I){I||(I=0);var j=Array(16);if(typeof b=="string")for(var M=0;16>M;++M)j[M]=b.charCodeAt(I++)|b.charCodeAt(I++)<<8|b.charCodeAt(I++)<<16|b.charCodeAt(I++)<<24;else for(M=0;16>M;++M)j[M]=b[I++]|b[I++]<<8|b[I++]<<16|b[I++]<<24;b=T.g[0],I=T.g[1],M=T.g[2];var V=T.g[3],O=b+(V^I&(M^V))+j[0]+3614090360&4294967295;b=I+(O<<7&4294967295|O>>>25),O=V+(M^b&(I^M))+j[1]+3905402710&4294967295,V=b+(O<<12&4294967295|O>>>20),O=M+(I^V&(b^I))+j[2]+606105819&4294967295,M=V+(O<<17&4294967295|O>>>15),O=I+(b^M&(V^b))+j[3]+3250441966&4294967295,I=M+(O<<22&4294967295|O>>>10),O=b+(V^I&(M^V))+j[4]+4118548399&4294967295,b=I+(O<<7&4294967295|O>>>25),O=V+(M^b&(I^M))+j[5]+1200080426&4294967295,V=b+(O<<12&4294967295|O>>>20),O=M+(I^V&(b^I))+j[6]+2821735955&4294967295,M=V+(O<<17&4294967295|O>>>15),O=I+(b^M&(V^b))+j[7]+4249261313&4294967295,I=M+(O<<22&4294967295|O>>>10),O=b+(V^I&(M^V))+j[8]+1770035416&4294967295,b=I+(O<<7&4294967295|O>>>25),O=V+(M^b&(I^M))+j[9]+2336552879&4294967295,V=b+(O<<12&4294967295|O>>>20),O=M+(I^V&(b^I))+j[10]+4294925233&4294967295,M=V+(O<<17&4294967295|O>>>15),O=I+(b^M&(V^b))+j[11]+2304563134&4294967295,I=M+(O<<22&4294967295|O>>>10),O=b+(V^I&(M^V))+j[12]+1804603682&4294967295,b=I+(O<<7&4294967295|O>>>25),O=V+(M^b&(I^M))+j[13]+4254626195&4294967295,V=b+(O<<12&4294967295|O>>>20),O=M+(I^V&(b^I))+j[14]+2792965006&4294967295,M=V+(O<<17&4294967295|O>>>15),O=I+(b^M&(V^b))+j[15]+1236535329&4294967295,I=M+(O<<22&4294967295|O>>>10),O=b+(M^V&(I^M))+j[1]+4129170786&4294967295,b=I+(O<<5&4294967295|O>>>27),O=V+(I^M&(b^I))+j[6]+3225465664&4294967295,V=b+(O<<9&4294967295|O>>>23),O=M+(b^I&(V^b))+j[11]+643717713&4294967295,M=V+(O<<14&4294967295|O>>>18),O=I+(V^b&(M^V))+j[0]+3921069994&4294967295,I=M+(O<<20&4294967295|O>>>12),O=b+(M^V&(I^M))+j[5]+3593408605&4294967295,b=I+(O<<5&4294967295|O>>>27),O=V+(I^M&(b^I))+j[10]+38016083&4294967295,V=b+(O<<9&4294967295|O>>>23),O=M+(b^I&(V^b))+j[15]+3634488961&4294967295,M=V+(O<<14&4294967295|O>>>18),O=I+(V^b&(M^V))+j[4]+3889429448&4294967295,I=M+(O<<20&4294967295|O>>>12),O=b+(M^V&(I^M))+j[9]+568446438&4294967295,b=I+(O<<5&4294967295|O>>>27),O=V+(I^M&(b^I))+j[14]+3275163606&4294967295,V=b+(O<<9&4294967295|O>>>23),O=M+(b^I&(V^b))+j[3]+4107603335&4294967295,M=V+(O<<14&4294967295|O>>>18),O=I+(V^b&(M^V))+j[8]+1163531501&4294967295,I=M+(O<<20&4294967295|O>>>12),O=b+(M^V&(I^M))+j[13]+2850285829&4294967295,b=I+(O<<5&4294967295|O>>>27),O=V+(I^M&(b^I))+j[2]+4243563512&4294967295,V=b+(O<<9&4294967295|O>>>23),O=M+(b^I&(V^b))+j[7]+1735328473&4294967295,M=V+(O<<14&4294967295|O>>>18),O=I+(V^b&(M^V))+j[12]+2368359562&4294967295,I=M+(O<<20&4294967295|O>>>12),O=b+(I^M^V)+j[5]+4294588738&4294967295,b=I+(O<<4&4294967295|O>>>28),O=V+(b^I^M)+j[8]+2272392833&4294967295,V=b+(O<<11&4294967295|O>>>21),O=M+(V^b^I)+j[11]+1839030562&4294967295,M=V+(O<<16&4294967295|O>>>16),O=I+(M^V^b)+j[14]+4259657740&4294967295,I=M+(O<<23&4294967295|O>>>9),O=b+(I^M^V)+j[1]+2763975236&4294967295,b=I+(O<<4&4294967295|O>>>28),O=V+(b^I^M)+j[4]+1272893353&4294967295,V=b+(O<<11&4294967295|O>>>21),O=M+(V^b^I)+j[7]+4139469664&4294967295,M=V+(O<<16&4294967295|O>>>16),O=I+(M^V^b)+j[10]+3200236656&4294967295,I=M+(O<<23&4294967295|O>>>9),O=b+(I^M^V)+j[13]+681279174&4294967295,b=I+(O<<4&4294967295|O>>>28),O=V+(b^I^M)+j[0]+3936430074&4294967295,V=b+(O<<11&4294967295|O>>>21),O=M+(V^b^I)+j[3]+3572445317&4294967295,M=V+(O<<16&4294967295|O>>>16),O=I+(M^V^b)+j[6]+76029189&4294967295,I=M+(O<<23&4294967295|O>>>9),O=b+(I^M^V)+j[9]+3654602809&4294967295,b=I+(O<<4&4294967295|O>>>28),O=V+(b^I^M)+j[12]+3873151461&4294967295,V=b+(O<<11&4294967295|O>>>21),O=M+(V^b^I)+j[15]+530742520&4294967295,M=V+(O<<16&4294967295|O>>>16),O=I+(M^V^b)+j[2]+3299628645&4294967295,I=M+(O<<23&4294967295|O>>>9),O=b+(M^(I|~V))+j[0]+4096336452&4294967295,b=I+(O<<6&4294967295|O>>>26),O=V+(I^(b|~M))+j[7]+1126891415&4294967295,V=b+(O<<10&4294967295|O>>>22),O=M+(b^(V|~I))+j[14]+2878612391&4294967295,M=V+(O<<15&4294967295|O>>>17),O=I+(V^(M|~b))+j[5]+4237533241&4294967295,I=M+(O<<21&4294967295|O>>>11),O=b+(M^(I|~V))+j[12]+1700485571&4294967295,b=I+(O<<6&4294967295|O>>>26),O=V+(I^(b|~M))+j[3]+2399980690&4294967295,V=b+(O<<10&4294967295|O>>>22),O=M+(b^(V|~I))+j[10]+4293915773&4294967295,M=V+(O<<15&4294967295|O>>>17),O=I+(V^(M|~b))+j[1]+2240044497&4294967295,I=M+(O<<21&4294967295|O>>>11),O=b+(M^(I|~V))+j[8]+1873313359&4294967295,b=I+(O<<6&4294967295|O>>>26),O=V+(I^(b|~M))+j[15]+4264355552&4294967295,V=b+(O<<10&4294967295|O>>>22),O=M+(b^(V|~I))+j[6]+2734768916&4294967295,M=V+(O<<15&4294967295|O>>>17),O=I+(V^(M|~b))+j[13]+1309151649&4294967295,I=M+(O<<21&4294967295|O>>>11),O=b+(M^(I|~V))+j[4]+4149444226&4294967295,b=I+(O<<6&4294967295|O>>>26),O=V+(I^(b|~M))+j[11]+3174756917&4294967295,V=b+(O<<10&4294967295|O>>>22),O=M+(b^(V|~I))+j[2]+718787259&4294967295,M=V+(O<<15&4294967295|O>>>17),O=I+(V^(M|~b))+j[9]+3951481745&4294967295,T.g[0]=T.g[0]+b&4294967295,T.g[1]=T.g[1]+(M+(O<<21&4294967295|O>>>11))&4294967295,T.g[2]=T.g[2]+M&4294967295,T.g[3]=T.g[3]+V&4294967295}n.prototype.u=function(T,b){b===void 0&&(b=T.length);for(var I=b-this.blockSize,j=this.B,M=this.h,V=0;V<b;){if(M==0)for(;V<=I;)s(this,T,V),V+=this.blockSize;if(typeof T=="string"){for(;V<b;)if(j[M++]=T.charCodeAt(V++),M==this.blockSize){s(this,j),M=0;break}}else for(;V<b;)if(j[M++]=T[V++],M==this.blockSize){s(this,j),M=0;break}}this.h=M,this.o+=b},n.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var b=1;b<T.length-8;++b)T[b]=0;var I=8*this.o;for(b=T.length-8;b<T.length;++b)T[b]=I&255,I/=256;for(this.u(T),T=Array(16),b=I=0;4>b;++b)for(var j=0;32>j;j+=8)T[I++]=this.g[b]>>>j&255;return T};function i(T,b){var I=c;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=b(T)}function o(T,b){this.h=b;for(var I=[],j=!0,M=T.length-1;0<=M;M--){var V=T[M]|0;j&&V==b||(I[M]=V,j=!1)}this.g=I}var c={};function d(T){return-128<=T&&128>T?i(T,function(b){return new o([b|0],0>b?-1:0)}):new o([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return v;if(0>T)return k(h(-T));for(var b=[],I=1,j=0;T>=I;j++)b[j]=T/I|0,I*=4294967296;return new o(b,0)}function g(T,b){if(T.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(T.charAt(0)=="-")return k(g(T.substring(1),b));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=h(Math.pow(b,8)),j=v,M=0;M<T.length;M+=8){var V=Math.min(8,T.length-M),O=parseInt(T.substring(M,M+V),b);8>V?(V=h(Math.pow(b,V)),j=j.j(V).add(h(O))):(j=j.j(I),j=j.add(h(O)))}return j}var v=d(0),y=d(1),E=d(16777216);t=o.prototype,t.m=function(){if(D(this))return-k(this).m();for(var T=0,b=1,I=0;I<this.g.length;I++){var j=this.i(I);T+=(0<=j?j:4294967296+j)*b,b*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(N(this))return"0";if(D(this))return"-"+k(this).toString(T);for(var b=h(Math.pow(T,6)),I=this,j="";;){var M=R(I,b).g;I=S(I,M.j(b));var V=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=M,N(I))return V+j;for(;6>V.length;)V="0"+V;j=V+j}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function N(T){if(T.h!=0)return!1;for(var b=0;b<T.g.length;b++)if(T.g[b]!=0)return!1;return!0}function D(T){return T.h==-1}t.l=function(T){return T=S(this,T),D(T)?-1:N(T)?0:1};function k(T){for(var b=T.g.length,I=[],j=0;j<b;j++)I[j]=~T.g[j];return new o(I,~T.h).add(y)}t.abs=function(){return D(this)?k(this):this},t.add=function(T){for(var b=Math.max(this.g.length,T.g.length),I=[],j=0,M=0;M<=b;M++){var V=j+(this.i(M)&65535)+(T.i(M)&65535),O=(V>>>16)+(this.i(M)>>>16)+(T.i(M)>>>16);j=O>>>16,V&=65535,O&=65535,I[M]=O<<16|V}return new o(I,I[I.length-1]&-2147483648?-1:0)};function S(T,b){return T.add(k(b))}t.j=function(T){if(N(this)||N(T))return v;if(D(this))return D(T)?k(this).j(k(T)):k(k(this).j(T));if(D(T))return k(this.j(k(T)));if(0>this.l(E)&&0>T.l(E))return h(this.m()*T.m());for(var b=this.g.length+T.g.length,I=[],j=0;j<2*b;j++)I[j]=0;for(j=0;j<this.g.length;j++)for(var M=0;M<T.g.length;M++){var V=this.i(j)>>>16,O=this.i(j)&65535,et=T.i(M)>>>16,tt=T.i(M)&65535;I[2*j+2*M]+=O*tt,P(I,2*j+2*M),I[2*j+2*M+1]+=V*tt,P(I,2*j+2*M+1),I[2*j+2*M+1]+=O*et,P(I,2*j+2*M+1),I[2*j+2*M+2]+=V*et,P(I,2*j+2*M+2)}for(j=0;j<b;j++)I[j]=I[2*j+1]<<16|I[2*j];for(j=b;j<2*b;j++)I[j]=0;return new o(I,0)};function P(T,b){for(;(T[b]&65535)!=T[b];)T[b+1]+=T[b]>>>16,T[b]&=65535,b++}function C(T,b){this.g=T,this.h=b}function R(T,b){if(N(b))throw Error("division by zero");if(N(T))return new C(v,v);if(D(T))return b=R(k(T),b),new C(k(b.g),k(b.h));if(D(b))return b=R(T,k(b)),new C(k(b.g),b.h);if(30<T.g.length){if(D(T)||D(b))throw Error("slowDivide_ only works with positive integers.");for(var I=y,j=b;0>=j.l(T);)I=Y(I),j=Y(j);var M=q(I,1),V=q(j,1);for(j=q(j,2),I=q(I,2);!N(j);){var O=V.add(j);0>=O.l(T)&&(M=M.add(I),V=O),j=q(j,1),I=q(I,1)}return b=S(T,M.j(b)),new C(M,b)}for(M=v;0<=T.l(b);){for(I=Math.max(1,Math.floor(T.m()/b.m())),j=Math.ceil(Math.log(I)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),V=h(I),O=V.j(b);D(O)||0<O.l(T);)I-=j,V=h(I),O=V.j(b);N(V)&&(V=y),M=M.add(V),T=S(T,O)}return new C(M,T)}t.A=function(T){return R(this,T).h},t.and=function(T){for(var b=Math.max(this.g.length,T.g.length),I=[],j=0;j<b;j++)I[j]=this.i(j)&T.i(j);return new o(I,this.h&T.h)},t.or=function(T){for(var b=Math.max(this.g.length,T.g.length),I=[],j=0;j<b;j++)I[j]=this.i(j)|T.i(j);return new o(I,this.h|T.h)},t.xor=function(T){for(var b=Math.max(this.g.length,T.g.length),I=[],j=0;j<b;j++)I[j]=this.i(j)^T.i(j);return new o(I,this.h^T.h)};function Y(T){for(var b=T.g.length+1,I=[],j=0;j<b;j++)I[j]=T.i(j)<<1|T.i(j-1)>>>31;return new o(I,T.h)}function q(T,b){var I=b>>5;b%=32;for(var j=T.g.length-I,M=[],V=0;V<j;V++)M[V]=0<b?T.i(V+I)>>>b|T.i(V+I+1)<<32-b:T.i(V+I);return new o(M,T.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,XI=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=g,tl=o}).apply(typeof R1<"u"?R1:typeof self<"u"?self:typeof window<"u"?window:{});var kf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var JI,Cc,ZI,ih,bv,eC,tC,rC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,m,p){return l==Array.prototype||l==Object.prototype||(l[m]=p.value),l};function r(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof kf=="object"&&kf];for(var m=0;m<l.length;++m){var p=l[m];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var n=r(this);function s(l,m){if(m)e:{var p=n;l=l.split(".");for(var x=0;x<l.length-1;x++){var U=l[x];if(!(U in p))break e;p=p[U]}l=l[l.length-1],x=p[l],m=m(x),m!=x&&m!=null&&e(p,l,{configurable:!0,writable:!0,value:m})}}function i(l,m){l instanceof String&&(l+="");var p=0,x=!1,U={next:function(){if(!x&&p<l.length){var $=p++;return{value:m($,l[$]),done:!1}}return x=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}s("Array.prototype.values",function(l){return l||function(){return i(this,function(m,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function d(l){var m=typeof l;return m=m!="object"?m:l?Array.isArray(l)?"array":m:"null",m=="array"||m=="object"&&typeof l.length=="number"}function h(l){var m=typeof l;return m=="object"&&l!=null||m=="function"}function g(l,m,p){return l.call.apply(l.bind,arguments)}function v(l,m,p){if(!l)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,x),l.apply(m,U)}}return function(){return l.apply(m,arguments)}}function y(l,m,p){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:v,y.apply(null,arguments)}function E(l,m){var p=Array.prototype.slice.call(arguments,1);return function(){var x=p.slice();return x.push.apply(x,arguments),l.apply(this,x)}}function N(l,m){function p(){}p.prototype=m.prototype,l.aa=m.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(x,U,$){for(var se=Array(arguments.length-2),He=2;He<arguments.length;He++)se[He-2]=arguments[He];return m.prototype[U].apply(x,se)}}function D(l){const m=l.length;if(0<m){const p=Array(m);for(let x=0;x<m;x++)p[x]=l[x];return p}return[]}function k(l,m){for(let p=1;p<arguments.length;p++){const x=arguments[p];if(d(x)){const U=l.length||0,$=x.length||0;l.length=U+$;for(let se=0;se<$;se++)l[U+se]=x[se]}else l.push(x)}}class S{constructor(m,p){this.i=m,this.j=p,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function P(l){return/^[\s\xa0]*$/.test(l)}function C(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function R(l){return R[" "](l),l}R[" "]=function(){};var Y=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function q(l,m,p){for(const x in l)m.call(p,l[x],x,l)}function T(l,m){for(const p in l)m.call(void 0,l[p],p,l)}function b(l){const m={};for(const p in l)m[p]=l[p];return m}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(l,m){let p,x;for(let U=1;U<arguments.length;U++){x=arguments[U];for(p in x)l[p]=x[p];for(let $=0;$<I.length;$++)p=I[$],Object.prototype.hasOwnProperty.call(x,p)&&(l[p]=x[p])}}function M(l){var m=1;l=l.split(":");const p=[];for(;0<m&&l.length;)p.push(l.shift()),m--;return l.length&&p.push(l.join(":")),p}function V(l){c.setTimeout(()=>{throw l},0)}function O(){var l=de;let m=null;return l.g&&(m=l.g,l.g=l.g.next,l.g||(l.h=null),m.next=null),m}class et{constructor(){this.h=this.g=null}add(m,p){const x=tt.get();x.set(m,p),this.h?this.h.next=x:this.g=x,this.h=x}}var tt=new S(()=>new le,l=>l.reset());class le{constructor(){this.next=this.g=this.h=null}set(m,p){this.h=m,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Oe,ee=!1,de=new et,ue=()=>{const l=c.Promise.resolve(void 0);Oe=()=>{l.then(De)}};var De=()=>{for(var l;l=O();){try{l.h.call(l.g)}catch(p){V(p)}var m=tt;m.j(l),100>m.h&&(m.h++,l.next=m.g,m.g=l)}ee=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(l,m){this.type=l,this.g=this.target=m,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var B=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,m=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};c.addEventListener("test",p,m),c.removeEventListener("test",p,m)}catch{}return l}();function F(l,m){if(G.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,x=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=m,m=l.relatedTarget){if(Y){e:{try{R(m.nodeName);var U=!0;break e}catch{}U=!1}U||(m=null)}}else p=="mouseover"?m=l.fromElement:p=="mouseout"&&(m=l.toElement);this.relatedTarget=m,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:K[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&F.aa.h.call(this)}}N(F,G);var K={2:"touch",3:"pen",4:"mouse"};F.prototype.h=function(){F.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ae="closure_listenable_"+(1e6*Math.random()|0),ge=0;function pe(l,m,p,x,U){this.listener=l,this.proxy=null,this.src=m,this.type=p,this.capture=!!x,this.ha=U,this.key=++ge,this.da=this.fa=!1}function ve(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Te(l){this.src=l,this.g={},this.h=0}Te.prototype.add=function(l,m,p,x,U){var $=l.toString();l=this.g[$],l||(l=this.g[$]=[],this.h++);var se=Ne(l,m,x,U);return-1<se?(m=l[se],p||(m.fa=!1)):(m=new pe(m,this.src,$,!!x,U),m.fa=p,l.push(m)),m};function je(l,m){var p=m.type;if(p in l.g){var x=l.g[p],U=Array.prototype.indexOf.call(x,m,void 0),$;($=0<=U)&&Array.prototype.splice.call(x,U,1),$&&(ve(m),l.g[p].length==0&&(delete l.g[p],l.h--))}}function Ne(l,m,p,x){for(var U=0;U<l.length;++U){var $=l[U];if(!$.da&&$.listener==m&&$.capture==!!p&&$.ha==x)return U}return-1}var Me="closure_lm_"+(1e6*Math.random()|0),lt={};function xt(l,m,p,x,U){if(Array.isArray(m)){for(var $=0;$<m.length;$++)xt(l,m[$],p,x,U);return null}return p=ws(p),l&&l[ae]?l.K(m,p,h(x)?!!x.capture:!1,U):Ht(l,m,p,!1,x,U)}function Ht(l,m,p,x,U,$){if(!m)throw Error("Invalid event type");var se=h(U)?!!U.capture:!!U,He=En(l);if(He||(l[Me]=He=new Te(l)),p=He.add(m,p,x,se,$),p.proxy)return p;if(x=Ur(),p.proxy=x,x.src=l,x.listener=p,l.addEventListener)B||(U=se),U===void 0&&(U=!1),l.addEventListener(m.toString(),x,U);else if(l.attachEvent)l.attachEvent(Or(m.toString()),x);else if(l.addListener&&l.removeListener)l.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Ur(){function l(p){return m.call(l.src,l.listener,p)}const m=nn;return l}function xs(l,m,p,x,U){if(Array.isArray(m))for(var $=0;$<m.length;$++)xs(l,m[$],p,x,U);else x=h(x)?!!x.capture:!!x,p=ws(p),l&&l[ae]?(l=l.i,m=String(m).toString(),m in l.g&&($=l.g[m],p=Ne($,p,x,U),-1<p&&(ve($[p]),Array.prototype.splice.call($,p,1),$.length==0&&(delete l.g[m],l.h--)))):l&&(l=En(l))&&(m=l.g[m.toString()],l=-1,m&&(l=Ne(m,p,x,U)),(p=-1<l?m[l]:null)&&Br(p))}function Br(l){if(typeof l!="number"&&l&&!l.da){var m=l.src;if(m&&m[ae])je(m.i,l);else{var p=l.type,x=l.proxy;m.removeEventListener?m.removeEventListener(p,x,l.capture):m.detachEvent?m.detachEvent(Or(p),x):m.addListener&&m.removeListener&&m.removeListener(x),(p=En(m))?(je(p,l),p.h==0&&(p.src=null,m[Me]=null)):ve(l)}}}function Or(l){return l in lt?lt[l]:lt[l]="on"+l}function nn(l,m){if(l.da)l=!0;else{m=new F(m,this);var p=l.listener,x=l.ha||l.src;l.fa&&Br(l),l=p.call(x,m)}return l}function En(l){return l=l[Me],l instanceof Te?l:null}var Wr="__closure_events_fn_"+(1e9*Math.random()>>>0);function ws(l){return typeof l=="function"?l:(l[Wr]||(l[Wr]=function(m){return l.handleEvent(m)}),l[Wr])}function wt(){X.call(this),this.i=new Te(this),this.M=this,this.F=null}N(wt,X),wt.prototype[ae]=!0,wt.prototype.removeEventListener=function(l,m,p,x){xs(this,l,m,p,x)};function ft(l,m){var p,x=l.F;if(x)for(p=[];x;x=x.F)p.push(x);if(l=l.M,x=m.type||m,typeof m=="string")m=new G(m,l);else if(m instanceof G)m.target=m.target||l;else{var U=m;m=new G(x,l),j(m,U)}if(U=!0,p)for(var $=p.length-1;0<=$;$--){var se=m.g=p[$];U=sn(se,x,!0,m)&&U}if(se=m.g=l,U=sn(se,x,!0,m)&&U,U=sn(se,x,!1,m)&&U,p)for($=0;$<p.length;$++)se=m.g=p[$],U=sn(se,x,!1,m)&&U}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var l=this.i,m;for(m in l.g){for(var p=l.g[m],x=0;x<p.length;x++)ve(p[x]);delete l.g[m],l.h--}}this.F=null},wt.prototype.K=function(l,m,p,x){return this.i.add(String(l),m,!1,p,x)},wt.prototype.L=function(l,m,p,x){return this.i.add(String(l),m,!0,p,x)};function sn(l,m,p,x){if(m=l.i.g[String(m)],!m)return!0;m=m.concat();for(var U=!0,$=0;$<m.length;++$){var se=m[$];if(se&&!se.da&&se.capture==p){var He=se.listener,Dt=se.ha||se.src;se.fa&&je(l.i,se),U=He.call(Dt,x)!==!1&&U}}return U&&!x.defaultPrevented}function ha(l,m,p){if(typeof l=="function")p&&(l=y(l,p));else if(l&&typeof l.handleEvent=="function")l=y(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:c.setTimeout(l,m||0)}function $n(l){l.g=ha(()=>{l.g=null,l.i&&(l.i=!1,$n(l))},l.l);const m=l.h;l.h=null,l.m.apply(null,m)}class bs extends X{constructor(m,p){super(),this.m=m,this.l=p,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:$n(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nr(l){X.call(this),this.h=l,this.g={}}N(Nr,X);var an=[];function Es(l){q(l.g,function(m,p){this.g.hasOwnProperty(p)&&Br(m)},l),l.g={}}Nr.prototype.N=function(){Nr.aa.N.call(this),Es(this)},Nr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dn=c.JSON.stringify,oi=c.JSON.parse,Ds=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function Hn(){}Hn.prototype.h=null;function ma(l){return l.h||(l.h=l.i())}function Yn(){}var qn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tn(){G.call(this,"d")}N(Tn,G);function li(){G.call(this,"c")}N(li,G);var $r={},ga=null;function Sn(){return ga=ga||new wt}$r.La="serverreachability";function pa(l){G.call(this,$r.La,l)}N(pa,G);function on(l){const m=Sn();ft(m,new pa(m))}$r.STAT_EVENT="statevent";function Gn(l,m){G.call(this,$r.STAT_EVENT,l),this.stat=m}N(Gn,G);function Ot(l){const m=Sn();ft(m,new Gn(m,l))}$r.Ma="timingevent";function va(l,m){G.call(this,$r.Ma,l),this.size=m}N(va,G);function pr(l,m){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},m)}function Kn(){this.g=!0}Kn.prototype.xa=function(){this.g=!1};function ya(l,m,p,x,U,$){l.info(function(){if(l.g)if($)for(var se="",He=$.split("&"),Dt=0;Dt<He.length;Dt++){var Fe=He[Dt].split("=");if(1<Fe.length){var Ze=Fe[0];Fe=Fe[1];var Le=Ze.split("_");se=2<=Le.length&&Le[1]=="type"?se+(Ze+"="+Fe+"&"):se+(Ze+"=redacted&")}}else se=null;else se=$;return"XMLHTTP REQ ("+x+") [attempt "+U+"]: "+m+`
`+p+`
`+se})}function ui(l,m,p,x,U,$,se){l.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+U+"]: "+m+`
`+p+`
`+$+" "+se})}function Hr(l,m,p,x){l.info(function(){return"XMLHTTP TEXT ("+m+"): "+_a(l,p)+(x?" "+x:"")})}function ci(l,m){l.info(function(){return"TIMEOUT: "+m})}Kn.prototype.info=function(){};function _a(l,m){if(!l.g)return m;if(!m)return null;try{var p=JSON.parse(m);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var x=p[l];if(!(2>x.length)){var U=x[1];if(Array.isArray(U)&&!(1>U.length)){var $=U[0];if($!="noop"&&$!="stop"&&$!="close")for(var se=1;se<U.length;se++)U[se]=""}}}}return Dn(p)}catch{return m}}var Qn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},di={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ts;function Yr(){}N(Yr,Hn),Yr.prototype.g=function(){return new XMLHttpRequest},Yr.prototype.i=function(){return{}},Ts=new Yr;function vr(l,m,p,x){this.j=l,this.i=m,this.l=p,this.R=x||1,this.U=new Nr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xn}function Xn(){this.i=null,this.g="",this.h=!1}var Ss={},Jn={};function fi(l,m,p){l.L=1,l.v=es(Mr(m)),l.m=p,l.P=!0,Ps(l,null)}function Ps(l,m){l.F=Date.now(),Ue(l),l.A=Mr(l.v);var p=l.A,x=l.R;Array.isArray(x)||(x=[String(x)]),_i(p.i,"t",x),l.C=0,p=l.j.J,l.h=new Xn,l.g=Nt(l.j,p?m:null,!l.m),0<l.O&&(l.M=new bs(y(l.Y,l,l.g),l.O)),m=l.U,p=l.g,x=l.ca;var U="readystatechange";Array.isArray(U)||(U&&(an[0]=U.toString()),U=an);for(var $=0;$<U.length;$++){var se=xt(p,U[$],x||m.handleEvent,!1,m.h||m);if(!se)break;m.g[se.key]=se}m=l.H?b(l.H):{},l.m?(l.u||(l.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,m)):(l.u="GET",l.g.ea(l.A,l.u,null,m)),on(),ya(l.i,l.u,l.A,l.l,l.R,l.m)}vr.prototype.ca=function(l){l=l.target;const m=this.M;m&&Rr(l)==3?m.j():this.Y(l)},vr.prototype.Y=function(l){try{if(l==this.g)e:{const Le=Rr(this.g);var m=this.g.Ba();const dn=this.g.Z();if(!(3>Le)&&(Le!=3||this.g&&(this.h.h||this.g.oa()||bi(this.g)))){this.J||Le!=4||m==7||(m==8||0>=dn?on(3):on(2)),Yt(this);var p=this.g.Z();this.X=p;t:if(hi(this)){var x=bi(this.g);l="";var U=x.length,$=Rr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zt(this),_e(this);var se="";break t}this.h.i=new c.TextDecoder}for(m=0;m<U;m++)this.h.h=!0,l+=this.h.i.decode(x[m],{stream:!($&&m==U-1)});x.length=0,this.h.g+=l,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=p==200,ui(this.i,this.u,this.A,this.l,this.R,Le,p),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Dt=this.g;if((He=Dt.g?Dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(He)){var Fe=He;break t}}Fe=null}if(p=Fe)Hr(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Is(this,p);else{this.o=!1,this.s=3,Ot(12),Zt(this),_e(this);break e}}if(this.P){p=!0;let ar;for(;!this.J&&this.C<se.length;)if(ar=xa(this,se),ar==Jn){Le==4&&(this.s=4,Ot(14),p=!1),Hr(this.i,this.l,null,"[Incomplete Response]");break}else if(ar==Ss){this.s=4,Ot(15),Hr(this.i,this.l,se,"[Invalid Chunk]"),p=!1;break}else Hr(this.i,this.l,ar,null),Is(this,ar);if(hi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Le!=4||se.length!=0||this.h.h||(this.s=1,Ot(16),p=!1),this.o=this.o&&p,!p)Hr(this.i,this.l,se,"[Invalid Chunked Response]"),Zt(this),_e(this);else if(0<se.length&&!this.W){this.W=!0;var Ze=this.j;Ze.g==this&&Ze.ba&&!Ze.M&&(Ze.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),as(Ze),Ze.M=!0,Ot(11))}}else Hr(this.i,this.l,se,null),Is(this,se);Le==4&&Zt(this),this.o&&!this.J&&(Le==4?Ar(this.j,this):(this.o=!1,Ue(this)))}else Io(this.g),p==400&&0<se.indexOf("Unknown SID")?(this.s=3,Ot(12)):(this.s=0,Ot(13)),Zt(this),_e(this)}}}catch{}finally{}};function hi(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function xa(l,m){var p=l.C,x=m.indexOf(`
`,p);return x==-1?Jn:(p=Number(m.substring(p,x)),isNaN(p)?Ss:(x+=1,x+p>m.length?Jn:(m=m.slice(x,x+p),l.C=x+p,m)))}vr.prototype.cancel=function(){this.J=!0,Zt(this)};function Ue(l){l.S=Date.now()+l.I,qr(l,l.I)}function qr(l,m){if(l.B!=null)throw Error("WatchDog timer not null");l.B=pr(y(l.ba,l),m)}function Yt(l){l.B&&(c.clearTimeout(l.B),l.B=null)}vr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(ci(this.i,this.A),this.L!=2&&(on(),Ot(17)),Zt(this),this.s=2,_e(this)):qr(this,this.S-l)};function _e(l){l.j.G==0||l.J||Ar(l.j,l)}function Zt(l){Yt(l);var m=l.M;m&&typeof m.ma=="function"&&m.ma(),l.M=null,Es(l.U),l.g&&(m=l.g,l.g=null,m.abort(),m.ma())}function Is(l,m){try{var p=l.j;if(p.G!=0&&(p.g==l||he(p.h,l))){if(!l.K&&he(p.h,l)&&p.G==3){try{var x=p.Da.g.parse(m)}catch{x=null}if(Array.isArray(x)&&x.length==3){var U=x;if(U[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)ct(p),ss(p);else break e;ir(p),Ot(18)}}else p.za=U[1],0<p.za-p.T&&37500>U[2]&&p.F&&p.v==0&&!p.C&&(p.C=pr(y(p.Za,p),6e3));if(1>=wa(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else At(p,11)}else if((l.K||p.g==l)&&ct(p),!P(m))for(U=p.Da.g.parse(m),m=0;m<U.length;m++){let Fe=U[m];if(p.T=Fe[0],Fe=Fe[1],p.G==2)if(Fe[0]=="c"){p.K=Fe[1],p.ia=Fe[2];const Ze=Fe[3];Ze!=null&&(p.la=Ze,p.j.info("VER="+p.la));const Le=Fe[4];Le!=null&&(p.Aa=Le,p.j.info("SVER="+p.Aa));const dn=Fe[5];dn!=null&&typeof dn=="number"&&0<dn&&(x=1.5*dn,p.L=x,p.j.info("backChannelRequestTimeoutMs_="+x)),x=p;const ar=l.g;if(ar){const zs=ar.g?ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zs){var $=x.h;$.g||zs.indexOf("spdy")==-1&&zs.indexOf("quic")==-1&&zs.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(ut($,$.h),$.h=null))}if(x.D){const Us=ar.g?ar.g.getResponseHeader("X-HTTP-Session-Id"):null;Us&&(x.ya=Us,$e(x.I,x.D,Us))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),x=p;var se=l;if(x.qa=Pi(x,x.J?x.ia:null,x.W),se.K){Je(x.h,se);var He=se,Dt=x.L;Dt&&(He.I=Dt),He.B&&(Yt(He),Ue(He)),x.g=se}else cn(x);0<p.i.length&&Ls(p)}else Fe[0]!="stop"&&Fe[0]!="close"||At(p,7);else p.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?At(p,7):Ei(p):Fe[0]!="noop"&&p.l&&p.l.ta(Fe),p.v=0)}}on(4)}catch{}}var mi=class{constructor(l,m){this.g=l,this.map=m}};function Cs(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Os(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function wa(l){return l.h?1:l.g?l.g.size:0}function he(l,m){return l.h?l.h==m:l.g?l.g.has(m):!1}function ut(l,m){l.g?l.g.add(m):l.h=m}function Je(l,m){l.h&&l.h==m?l.h=null:l.g&&l.g.has(m)&&l.g.delete(m)}Cs.prototype.cancel=function(){if(this.i=Ut(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Ut(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let m=l.i;for(const p of l.g.values())m=m.concat(p.D);return m}return D(l.i)}function Pn(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(d(l)){for(var m=[],p=l.length,x=0;x<p;x++)m.push(l[x]);return m}m=[],p=0;for(x in l)m[p++]=l[x];return m}function ba(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(d(l)||typeof l=="string"){var m=[];l=l.length;for(var p=0;p<l;p++)m.push(p);return m}m=[],p=0;for(const x in l)m[p++]=x;return m}}}function Ns(l,m){if(l.forEach&&typeof l.forEach=="function")l.forEach(m,void 0);else if(d(l)||typeof l=="string")Array.prototype.forEach.call(l,m,void 0);else for(var p=ba(l),x=Pn(l),U=x.length,$=0;$<U;$++)m.call(void 0,x[$],p&&p[$],l)}var gi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ea(l,m){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var x=l[p].indexOf("="),U=null;if(0<=x){var $=l[p].substring(0,x);U=l[p].substring(x+1)}else $=l[p];m($,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function jr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof jr){this.h=l.h,In(this,l.j),this.o=l.o,this.g=l.g,Zn(this,l.s),this.l=l.l;var m=l.i,p=new On;p.i=m.i,m.g&&(p.g=new Map(m.g),p.h=m.h),js(this,p),this.m=l.m}else l&&(m=String(l).match(gi))?(this.h=!1,In(this,m[1]||"",!0),this.o=yr(m[2]||""),this.g=yr(m[3]||"",!0),Zn(this,m[4]),this.l=yr(m[5]||"",!0),js(this,m[6]||"",!0),this.m=yr(m[7]||"")):(this.h=!1,this.i=new On(null,this.h))}jr.prototype.toString=function(){var l=[],m=this.j;m&&l.push(Cn(m,Ms,!0),":");var p=this.g;return(p||m=="file")&&(l.push("//"),(m=this.o)&&l.push(Cn(m,Ms,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Cn(p,p.charAt(0)=="/"?Rs:Da,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Cn(p,vi)),l.join("")};function Mr(l){return new jr(l)}function In(l,m,p){l.j=p?yr(m,!0):m,l.j&&(l.j=l.j.replace(/:$/,""))}function Zn(l,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);l.s=m}else l.s=null}function js(l,m,p){m instanceof On?(l.i=m,gt(l.i,l.h)):(p||(m=Cn(m,To)),l.i=new On(m,l.h))}function $e(l,m,p){l.i.set(m,p)}function es(l){return $e(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function yr(l,m){return l?m?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Cn(l,m,p){return typeof l=="string"?(l=encodeURI(l).replace(m,pi),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function pi(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Ms=/[#\/\?@]/g,Da=/[#\?:]/g,Rs=/[#\?]/g,To=/[#\?@]/g,vi=/#/g;function On(l,m){this.h=this.g=null,this.i=l||null,this.j=!!m}function sr(l){l.g||(l.g=new Map,l.h=0,l.i&&Ea(l.i,function(m,p){l.add(decodeURIComponent(m.replace(/\+/g," ")),p)}))}t=On.prototype,t.add=function(l,m){sr(this),this.i=null,l=Gr(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(m),this.h+=1,this};function yi(l,m){sr(l),m=Gr(l,m),l.g.has(m)&&(l.i=null,l.h-=l.g.get(m).length,l.g.delete(m))}function As(l,m){return sr(l),m=Gr(l,m),l.g.has(m)}t.forEach=function(l,m){sr(this),this.g.forEach(function(p,x){p.forEach(function(U){l.call(m,U,x,this)},this)},this)},t.na=function(){sr(this);const l=Array.from(this.g.values()),m=Array.from(this.g.keys()),p=[];for(let x=0;x<m.length;x++){const U=l[x];for(let $=0;$<U.length;$++)p.push(m[x])}return p},t.V=function(l){sr(this);let m=[];if(typeof l=="string")As(this,l)&&(m=m.concat(this.g.get(Gr(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)m=m.concat(l[p])}return m},t.set=function(l,m){return sr(this),this.i=null,l=Gr(this,l),As(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[m]),this.h+=1,this},t.get=function(l,m){return l?(l=this.V(l),0<l.length?String(l[0]):m):m};function _i(l,m,p){yi(l,m),0<p.length&&(l.i=null,l.g.set(Gr(l,m),D(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],m=Array.from(this.g.keys());for(var p=0;p<m.length;p++){var x=m[p];const $=encodeURIComponent(String(x)),se=this.V(x);for(x=0;x<se.length;x++){var U=$;se[x]!==""&&(U+="="+encodeURIComponent(String(se[x]))),l.push(U)}}return this.i=l.join("&")};function Gr(l,m){return m=String(m),l.j&&(m=m.toLowerCase()),m}function gt(l,m){m&&!l.j&&(sr(l),l.i=null,l.g.forEach(function(p,x){var U=x.toLowerCase();x!=U&&(yi(this,x),_i(this,U,p))},l)),l.j=m}function _r(l,m){const p=new Kn;if(c.Image){const x=new Image;x.onload=E(Kr,p,"TestLoadImage: loaded",!0,m,x),x.onerror=E(Kr,p,"TestLoadImage: error",!1,m,x),x.onabort=E(Kr,p,"TestLoadImage: abort",!1,m,x),x.ontimeout=E(Kr,p,"TestLoadImage: timeout",!1,m,x),c.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=l}else m(!1)}function Ta(l,m){const p=new Kn,x=new AbortController,U=setTimeout(()=>{x.abort(),Kr(p,"TestPingServer: timeout",!1,m)},1e4);fetch(l,{signal:x.signal}).then($=>{clearTimeout(U),$.ok?Kr(p,"TestPingServer: ok",!0,m):Kr(p,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),Kr(p,"TestPingServer: error",!1,m)})}function Kr(l,m,p,x,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),x(p)}catch{}}function Fs(){this.g=new Ds}function Sa(l,m,p){const x=p||"";try{Ns(l,function(U,$){let se=U;h(U)&&(se=Dn(U)),m.push(x+$+"="+encodeURIComponent(se))})}catch(U){throw m.push(x+"type="+encodeURIComponent("_badmap")),U}}function ln(l){this.l=l.Ub||null,this.j=l.eb||!1}N(ln,Hn),ln.prototype.g=function(){return new ts(this.l,this.j)},ln.prototype.i=function(l){return function(){return l}}({});function ts(l,m){wt.call(this),this.D=l,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(ts,wt),t=ts.prototype,t.open=function(l,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=m,this.readyState=1,Nn(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(m.body=l),(this.D||c).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,rs(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Nn(this)),this.g&&(this.readyState=3,Nn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xi(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function xi(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var m=l.value?l.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!l.done}))&&(this.response=this.responseText+=m)}l.done?rs(this):Nn(this),this.readyState==3&&xi(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,rs(this))},t.Qa=function(l){this.g&&(this.response=l,rs(this))},t.ga=function(){this.g&&rs(this)};function rs(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Nn(l)}t.setRequestHeader=function(l,m){this.u.append(l,m)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],m=this.h.entries();for(var p=m.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=m.next();return l.join(`\r
`)};function Nn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ts.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Pa(l){let m="";return q(l,function(p,x){m+=x,m+=":",m+=p,m+=`\r
`}),m}function un(l,m,p){e:{for(x in p){var x=!1;break e}x=!0}x||(p=Pa(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):$e(l,m,p))}function it(l){wt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(it,wt);var So=/^https?$/i,Po=["POST","PUT"];t=it.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,m,p,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);m=m?m.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ts.g(),this.v=this.o?ma(this.o):ma(Ts),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(m,String(l),!0),this.B=!1}catch($){Ia(this,$);return}if(l=p||"",p=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var U in x)p.set(U,x[U]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const $ of x.keys())p.set($,x.get($));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(p.keys()).find($=>$.toLowerCase()=="content-type"),U=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Po,m,void 0))||x||U||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,se]of p)this.g.setRequestHeader($,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Oa(this),this.u=!0,this.g.send(l),this.u=!1}catch($){Ia(this,$)}};function Ia(l,m){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=m,l.m=5,wi(l),ks(l)}function wi(l){l.A||(l.A=!0,ft(l,"complete"),ft(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,ft(this,"complete"),ft(this,"abort"),ks(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ks(this,!0)),it.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ca(this):this.bb())},t.bb=function(){Ca(this)};function Ca(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Rr(l)!=4||l.Z()!=2)){if(l.u&&Rr(l)==4)ha(l.Ea,0,l);else if(ft(l,"readystatechange"),Rr(l)==4){l.h=!1;try{const se=l.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var p;if(!(p=m)){var x;if(x=se===0){var U=String(l.D).match(gi)[1]||null;!U&&c.self&&c.self.location&&(U=c.self.location.protocol.slice(0,-1)),x=!So.test(U?U.toLowerCase():"")}p=x}if(p)ft(l,"complete"),ft(l,"success");else{l.m=6;try{var $=2<Rr(l)?l.g.statusText:""}catch{$=""}l.l=$+" ["+l.Z()+"]",wi(l)}}finally{ks(l)}}}}function ks(l,m){if(l.g){Oa(l);const p=l.g,x=l.v[0]?()=>{}:null;l.g=null,l.v=null,m||ft(l,"ready");try{p.onreadystatechange=x}catch{}}}function Oa(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Rr(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Rr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var m=this.g.responseText;return l&&m.indexOf(l)==0&&(m=m.substring(l.length)),oi(m)}};function bi(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Io(l){const m={};l=(l.g&&2<=Rr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<l.length;x++){if(P(l[x]))continue;var p=M(l[x]);const U=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const $=m[U]||[];m[U]=$,$.push(p)}T(m,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ns(l,m,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||m}function Na(l){this.Aa=0,this.i=[],this.j=new Kn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ns("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ns("baseRetryDelayMs",5e3,l),this.cb=ns("retryDelaySeedMs",1e4,l),this.Wa=ns("forwardChannelMaxRetries",2,l),this.wa=ns("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Cs(l&&l.concurrentRequestLimit),this.Da=new Fs,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Na.prototype,t.la=8,t.G=1,t.connect=function(l,m,p,x){Ot(0),this.W=l,this.H=m||{},p&&x!==void 0&&(this.H.OSID=p,this.H.OAID=x),this.F=this.X,this.I=Pi(this,null,this.W),Ls(this)};function Ei(l){if(Di(l),l.G==3){var m=l.U++,p=Mr(l.I);if($e(p,"SID",l.K),$e(p,"RID",m),$e(p,"TYPE","terminate"),is(l,p),m=new vr(l,l.j,m),m.L=2,m.v=es(Mr(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(m.v.toString(),"")}catch{}!p&&c.Image&&(new Image().src=m.v,p=!0),p||(m.g=Nt(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Ue(m)}Si(l)}function ss(l){l.g&&(as(l),l.g.cancel(),l.g=null)}function Di(l){ss(l),l.u&&(c.clearTimeout(l.u),l.u=null),ct(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function Ls(l){if(!Os(l.h)&&!l.s){l.s=!0;var m=l.Ga;Oe||ue(),ee||(Oe(),ee=!0),de.add(m,l),l.B=0}}function Co(l,m){return wa(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=m.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=pr(y(l.Ga,l,m),jn(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const U=new vr(this,this.j,l);let $=this.o;if(this.S&&($?($=b($),j($,this.S)):$=this.S),this.m!==null||this.O||(U.H=$,$=null),this.P)e:{for(var m=0,p=0;p<this.i.length;p++){t:{var x=this.i[p];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(m+=x,4096<m){m=p;break e}if(m===4096||p===this.i.length-1){m=p+1;break e}}m=1e3}else m=1e3;m=Ti(this,U,m),p=Mr(this.I),$e(p,"RID",l),$e(p,"CVER",22),this.D&&$e(p,"X-HTTP-Session-Id",this.D),is(this,p),$&&(this.O?m="headers="+encodeURIComponent(String(Pa($)))+"&"+m:this.m&&un(p,this.m,$)),ut(this.h,U),this.Ua&&$e(p,"TYPE","init"),this.P?($e(p,"$req",m),$e(p,"SID","null"),U.T=!0,fi(U,p,null)):fi(U,p,m),this.G=2}}else this.G==3&&(l?ja(this,l):this.i.length==0||Os(this.h)||ja(this))};function ja(l,m){var p;m?p=m.l:p=l.U++;const x=Mr(l.I);$e(x,"SID",l.K),$e(x,"RID",p),$e(x,"AID",l.T),is(l,x),l.m&&l.o&&un(x,l.m,l.o),p=new vr(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),m&&(l.i=m.D.concat(l.i)),m=Ti(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),ut(l.h,p),fi(p,x,m)}function is(l,m){l.H&&q(l.H,function(p,x){$e(m,x,p)}),l.l&&Ns({},function(p,x){$e(m,x,p)})}function Ti(l,m,p){p=Math.min(l.i.length,p);var x=l.l?y(l.l.Na,l.l,l):null;e:{var U=l.i;let $=-1;for(;;){const se=["count="+p];$==-1?0<p?($=U[0].g,se.push("ofs="+$)):$=0:se.push("ofs="+$);let He=!0;for(let Dt=0;Dt<p;Dt++){let Fe=U[Dt].g;const Ze=U[Dt].map;if(Fe-=$,0>Fe)$=Math.max(0,U[Dt].g-100),He=!1;else try{Sa(Ze,se,"req"+Fe+"_")}catch{x&&x(Ze)}}if(He){x=se.join("&");break e}}}return l=l.i.splice(0,p),m.D=l,x}function cn(l){if(!l.g&&!l.u){l.Y=1;var m=l.Fa;Oe||ue(),ee||(Oe(),ee=!0),de.add(m,l),l.v=0}}function ir(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=pr(y(l.Fa,l),jn(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Vs(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=pr(y(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ot(10),ss(this),Vs(this))};function as(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function Vs(l){l.g=new vr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var m=Mr(l.qa);$e(m,"RID","rpc"),$e(m,"SID",l.K),$e(m,"AID",l.T),$e(m,"CI",l.F?"0":"1"),!l.F&&l.ja&&$e(m,"TO",l.ja),$e(m,"TYPE","xmlhttp"),is(l,m),l.m&&l.o&&un(m,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=es(Mr(m)),p.m=null,p.P=!0,Ps(p,l)}t.Za=function(){this.C!=null&&(this.C=null,ss(this),ir(this),Ot(19))};function ct(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function Ar(l,m){var p=null;if(l.g==m){ct(l),as(l),l.g=null;var x=2}else if(he(l.h,m))p=m.D,Je(l.h,m),x=1;else return;if(l.G!=0){if(m.o)if(x==1){p=m.m?m.m.length:0,m=Date.now()-m.F;var U=l.B;x=Sn(),ft(x,new va(x,p)),Ls(l)}else cn(l);else if(U=m.s,U==3||U==0&&0<m.X||!(x==1&&Co(l,m)||x==2&&ir(l)))switch(p&&0<p.length&&(m=l.h,m.i=m.i.concat(p)),U){case 1:At(l,5);break;case 4:At(l,10);break;case 3:At(l,6);break;default:At(l,2)}}}function jn(l,m){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*m}function At(l,m){if(l.j.info("Error code "+m),m==2){var p=y(l.fb,l),x=l.Xa;const U=!x;x=new jr(x||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||In(x,"https"),es(x),U?_r(x.toString(),p):Ta(x.toString(),p)}else Ot(2);l.G=0,l.l&&l.l.sa(m),Si(l),Di(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function Si(l){if(l.G=0,l.ka=[],l.l){const m=Ut(l.h);(m.length!=0||l.i.length!=0)&&(k(l.ka,m),k(l.ka,l.i),l.h.i.length=0,D(l.i),l.i.length=0),l.l.ra()}}function Pi(l,m,p){var x=p instanceof jr?Mr(p):new jr(p);if(x.g!="")m&&(x.g=m+"."+x.g),Zn(x,x.s);else{var U=c.location;x=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;var $=new jr(null);x&&In($,x),m&&($.g=m),U&&Zn($,U),p&&($.l=p),x=$}return p=l.D,m=l.ya,p&&m&&$e(x,p,m),$e(x,"VER",l.la),is(l,x),x}function Nt(l,m,p){if(m&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=l.Ca&&!l.pa?new it(new ln({eb:p})):new it(l.pa),m.Ha(l.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function os(){}t=os.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ls(){}ls.prototype.g=function(l,m){return new Ft(l,m)};function Ft(l,m){wt.call(this),this.g=new Na(m),this.l=l,this.h=m&&m.messageUrlParams||null,l=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(l?l["X-WebChannel-Content-Type"]=m.messageContentType:l={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(l?l["X-WebChannel-Client-Profile"]=m.va:l={"X-WebChannel-Client-Profile":m.va}),this.g.S=l,(l=m&&m.Sb)&&!P(l)&&(this.g.m=l),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!P(m)&&(this.g.D=m,l=this.h,l!==null&&m in l&&(l=this.h,m in l&&delete l[m])),this.j=new pt(this)}N(Ft,wt),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){Ei(this.g)},Ft.prototype.o=function(l){var m=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=Dn(l),l=p);m.i.push(new mi(m.Ya++,l)),m.G==3&&Ls(m)},Ft.prototype.N=function(){this.g.l=null,delete this.j,Ei(this.g),delete this.g,Ft.aa.N.call(this)};function Ma(l){Tn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var m=l.__sm__;if(m){e:{for(const p in m){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,m=m!==null&&l in m?m[l]:void 0),this.data=m}else this.data=l}N(Ma,Tn);function Ra(){li.call(this),this.status=1}N(Ra,li);function pt(l){this.g=l}N(pt,os),pt.prototype.ua=function(){ft(this.g,"a")},pt.prototype.ta=function(l){ft(this.g,new Ma(l))},pt.prototype.sa=function(l){ft(this.g,new Ra)},pt.prototype.ra=function(){ft(this.g,"b")},ls.prototype.createWebChannel=ls.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,rC=function(){return new ls},tC=function(){return Sn()},eC=$r,bv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qn.NO_ERROR=0,Qn.TIMEOUT=8,Qn.HTTP_ERROR=6,ih=Qn,di.COMPLETE="complete",ZI=di,Yn.EventType=qn,qn.OPEN="a",qn.CLOSE="b",qn.ERROR="c",qn.MESSAGE="d",wt.prototype.listen=wt.prototype.K,Cc=Yn,it.prototype.listenOnce=it.prototype.L,it.prototype.getLastError=it.prototype.Ka,it.prototype.getLastErrorCode=it.prototype.Ba,it.prototype.getStatus=it.prototype.Z,it.prototype.getResponseJson=it.prototype.Oa,it.prototype.getResponseText=it.prototype.oa,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Ha,JI=it}).apply(typeof kf<"u"?kf:typeof self<"u"?self:typeof window<"u"?window:{});const A1="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Er.UNAUTHENTICATED=new Er(null),Er.GOOGLE_CREDENTIALS=new Er("google-credentials-uid"),Er.FIRST_PARTY=new Er("first-party-uid"),Er.MOCK_USER=new Er("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=new w_("@firebase/firestore");function Ec(){return ul.logLevel}function ye(t,...e){if(ul.logLevel<=We.DEBUG){const r=e.map(A_);ul.debug(`Firestore (${Uu}): ${t}`,...r)}}function ea(t,...e){if(ul.logLevel<=We.ERROR){const r=e.map(A_);ul.error(`Firestore (${Uu}): ${t}`,...r)}}function Eu(t,...e){if(ul.logLevel<=We.WARN){const r=e.map(A_);ul.warn(`Firestore (${Uu}): ${t}`,...r)}}function A_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t="Unexpected state"){const e=`FIRESTORE (${Uu}) INTERNAL ASSERTION FAILED: `+t;throw ea(e),new Error(e)}function nt(t,e){t||Pe()}function Ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends da{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QY{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Er.UNAUTHENTICATED))}shutdown(){}}class XY{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class JY{constructor(e){this.t=e,this.currentUser=Er.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){nt(this.o===void 0);let n=this.i;const s=d=>this.i!==n?(n=this.i,r(d)):Promise.resolve();let i=new Hi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Hi,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const d=i;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},c=d=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Hi)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(nt(typeof n.accessToken=="string"),new nC(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string"),new Er(e)}}class ZY{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Er.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class eq{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new ZY(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Er.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tq{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rq{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){nt(this.o===void 0);const n=i=>{i.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,ye("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(nt(typeof r.token=="string"),this.R=r.token,new tq(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nq(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=nq(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%e.length))}return n}}function Xe(t,e){return t<e?-1:t>e?1:0}function Du(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new xe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new xe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new xe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qt.fromMillis(Date.now())}static fromDate(e){return Qt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Qt(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new Qt(0,0))}static max(){return new Ie(new Qt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,r,n){r===void 0?r=0:r>e.length&&Pe(),n===void 0?n=e.length-r:n>e.length-r&&Pe(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return gd.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof gd?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=e.get(s),o=r.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Et extends gd{construct(e,r,n){return new Et(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new xe(te.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new Et(r)}static emptyPath(){return new Et([])}}const sq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cr extends gd{construct(e,r,n){return new cr(e,r,n)}static isValidIdentifier(e){return sq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new cr(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new xe(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new xe(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new xe(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(n+=c,s++):(i(),s++)}if(i(),o)throw new xe(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cr(r)}static emptyPath(){return new cr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(Et.fromString(e))}static fromName(e){return new Ee(Et.fromString(e).popFirst(5))}static empty(){return new Ee(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Et.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new Et(e.slice()))}}function iq(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Ie.fromTimestamp(n===1e9?new Qt(r+1,0):new Qt(r,n));return new po(s,Ee.empty(),e)}function aq(t){return new po(t.readTime,t.key,-1)}class po{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new po(Ie.min(),Ee.empty(),-1)}static max(){return new po(Ie.max(),Ee.empty(),-1)}}function oq(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Ee.comparator(t.documentKey,e.documentKey),r!==0?r:Xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uq{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gd(t){if(t.code!==te.FAILED_PRECONDITION||t.message!==lq)throw t;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new re((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof re?r:re.resolve(r)}catch(r){return re.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):re.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):re.reject(r)}static resolve(e){return new re((r,n)=>{r(e)})}static reject(e){return new re((r,n)=>{n(e)})}static waitFor(e){return new re((r,n)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&r()},d=>n(d))}),o=!0,i===s&&r()})}static or(e){let r=re.resolve(!1);for(const n of e)r=r.next(s=>s?re.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new re((n,s)=>{const i=e.length,o=new Array(i);let c=0;for(let d=0;d<i;d++){const h=d;r(e[h]).next(g=>{o[h]=g,++c,c===i&&n(o)},g=>s(g))}})}static doWhile(e,r){return new re((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}function cq(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Kd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}F_.oe=-1;function Zm(t){return t==null}function Gh(t){return t===0&&1/t==-1/0}function dq(t){return typeof t=="number"&&Number.isInteger(t)&&!Gh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Bu(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function iC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,r){this.comparator=e,this.root=r||ur.EMPTY}insert(e,r){return new Ct(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ur.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ur.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lf(this.root,e,this.comparator,!0)}}class Lf{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ur{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??ur.RED,this.left=s??ur.EMPTY,this.right=i??ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new ur(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return ur.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pe();const e=this.left.check();if(e!==this.right.check())throw Pe();return e+(this.isRed()?0:1)}}ur.EMPTY=null,ur.RED=!0,ur.BLACK=!1;ur.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe()}get value(){throw Pe()}get color(){throw Pe()}get left(){throw Pe()}get right(){throw Pe()}copy(e,r,n,s,i){return this}insert(e,r,n){return new ur(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new k1(this.data.getIterator())}getIteratorFrom(e){return new k1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof fr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new fr(this.comparator);return r.data=e,r}}class k1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.fields=e,e.sort(cr.comparator)}static empty(){return new ms([])}unionWith(e){let r=new fr(cr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new ms(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Du(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new aC("Invalid base64 string: "+i):i}}(e);return new mr(r)}static fromUint8Array(e){const r=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new mr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mr.EMPTY_BYTE_STRING=new mr("");const fq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vo(t){if(nt(!!t),typeof t=="string"){let e=0;const r=fq.exec(t);if(nt(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Vt(t.seconds),nanos:Vt(t.nanos)}}function Vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function cl(t){return typeof t=="string"?mr.fromBase64String(t):mr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function L_(t){const e=t.mapValue.fields.__previous_value__;return k_(e)?L_(e):e}function pd(t){const e=vo(t.mapValue.fields.__local_write_time__.timestampValue);return new Qt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hq{constructor(e,r,n,s,i,o,c,d,h){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h}}class vd{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new vd("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof vd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf={mapValue:{}};function dl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?k_(t)?4:gq(t)?9007199254740991:mq(t)?10:11:Pe()}function ri(t,e){if(t===e)return!0;const r=dl(t);if(r!==dl(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return pd(t).isEqual(pd(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=vo(s.timestampValue),c=vo(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return cl(s.bytesValue).isEqual(cl(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Vt(s.geoPointValue.latitude)===Vt(i.geoPointValue.latitude)&&Vt(s.geoPointValue.longitude)===Vt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Vt(s.integerValue)===Vt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Vt(s.doubleValue),c=Vt(i.doubleValue);return o===c?Gh(o)===Gh(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return Du(t.arrayValue.values||[],e.arrayValue.values||[],ri);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(F1(o)!==F1(c))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(c[d]===void 0||!ri(o[d],c[d])))return!1;return!0}(t,e);default:return Pe()}}function yd(t,e){return(t.values||[]).find(r=>ri(r,e))!==void 0}function Tu(t,e){if(t===e)return 0;const r=dl(t),n=dl(e);if(r!==n)return Xe(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Xe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=Vt(i.integerValue||i.doubleValue),d=Vt(o.integerValue||o.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(t,e);case 3:return L1(t.timestampValue,e.timestampValue);case 4:return L1(pd(t),pd(e));case 5:return Xe(t.stringValue,e.stringValue);case 6:return function(i,o){const c=cl(i),d=cl(o);return c.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),d=o.split("/");for(let h=0;h<c.length&&h<d.length;h++){const g=Xe(c[h],d[h]);if(g!==0)return g}return Xe(c.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=Xe(Vt(i.latitude),Vt(o.latitude));return c!==0?c:Xe(Vt(i.longitude),Vt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return V1(t.arrayValue,e.arrayValue);case 10:return function(i,o){var c,d,h,g;const v=i.fields||{},y=o.fields||{},E=(c=v.value)===null||c===void 0?void 0:c.arrayValue,N=(d=y.value)===null||d===void 0?void 0:d.arrayValue,D=Xe(((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0,((g=N==null?void 0:N.values)===null||g===void 0?void 0:g.length)||0);return D!==0?D:V1(E,N)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Vf.mapValue&&o===Vf.mapValue)return 0;if(i===Vf.mapValue)return 1;if(o===Vf.mapValue)return-1;const c=i.fields||{},d=Object.keys(c),h=o.fields||{},g=Object.keys(h);d.sort(),g.sort();for(let v=0;v<d.length&&v<g.length;++v){const y=Xe(d[v],g[v]);if(y!==0)return y;const E=Tu(c[d[v]],h[g[v]]);if(E!==0)return E}return Xe(d.length,g.length)}(t.mapValue,e.mapValue);default:throw Pe()}}function L1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Xe(t,e);const r=vo(t),n=vo(e),s=Xe(r.seconds,n.seconds);return s!==0?s:Xe(r.nanos,n.nanos)}function V1(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=Tu(r[s],n[s]);if(i)return i}return Xe(r.length,n.length)}function Su(t){return Ev(t)}function Ev(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=vo(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return cl(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Ee.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=Ev(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const o of n)i?i=!1:s+=",",s+=`${o}:${Ev(r.fields[o])}`;return s+"}"}(t.mapValue):Pe()}function Dv(t){return!!t&&"integerValue"in t}function V_(t){return!!t&&"arrayValue"in t}function z1(t){return!!t&&"nullValue"in t}function U1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ah(t){return!!t&&"mapValue"in t}function mq(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Yc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Bu(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Yc(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Yc(t.arrayValue.values[r]);return e}return Object.assign({},t)}function gq(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.value=e}static empty(){return new Ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!ah(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yc(r)}setAll(e){let r=cr.emptyPath(),n={},s=[];e.forEach((o,c)=>{if(!r.isImmediateParentOf(c)){const d=this.getFieldsMap(r);this.applyChanges(d,n,s),n={},s=[],r=c.popLast()}o?n[c.lastSegment()]=Yc(o):s.push(c.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());ah(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return ri(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];ah(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){Bu(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new Ln(Yc(this.value))}}function oC(t){const e=[];return Bu(t.fields,(r,n)=>{const s=new cr([r]);if(ah(n)){const i=oC(n.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new ms(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,r,n,s,i,o,c){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Pr(e,0,Ie.min(),Ie.min(),Ie.min(),Ln.empty(),0)}static newFoundDocument(e,r,n,s){return new Pr(e,1,r,Ie.min(),n,s,0)}static newNoDocument(e,r){return new Pr(e,2,r,Ie.min(),Ie.min(),Ln.empty(),0)}static newUnknownDocument(e,r){return new Pr(e,3,r,Ie.min(),Ie.min(),Ln.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,r){this.position=e,this.inclusive=r}}function B1(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?n=Ee.comparator(Ee.fromName(o.referenceValue),r.key):n=Tu(o,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function W1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!ri(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,r="asc"){this.field=e,this.dir=r}}function pq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{}class Gt extends lC{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new yq(e,r,n):r==="array-contains"?new wq(e,n):r==="in"?new bq(e,n):r==="not-in"?new Eq(e,n):r==="array-contains-any"?new Dq(e,n):new Gt(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new _q(e,n):new xq(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Tu(r,this.value)):r!==null&&dl(this.value)===dl(r)&&this.matchesComparison(Tu(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ni extends lC{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new ni(e,r)}matches(e){return uC(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function uC(t){return t.op==="and"}function cC(t){return vq(t)&&uC(t)}function vq(t){for(const e of t.filters)if(e instanceof ni)return!1;return!0}function Tv(t){if(t instanceof Gt)return t.field.canonicalString()+t.op.toString()+Su(t.value);if(cC(t))return t.filters.map(e=>Tv(e)).join(",");{const e=t.filters.map(r=>Tv(r)).join(",");return`${t.op}(${e})`}}function dC(t,e){return t instanceof Gt?function(n,s){return s instanceof Gt&&n.op===s.op&&n.field.isEqual(s.field)&&ri(n.value,s.value)}(t,e):t instanceof ni?function(n,s){return s instanceof ni&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,o,c)=>i&&dC(o,s.filters[c]),!0):!1}(t,e):void Pe()}function fC(t){return t instanceof Gt?function(r){return`${r.field.canonicalString()} ${r.op} ${Su(r.value)}`}(t):t instanceof ni?function(r){return r.op.toString()+" {"+r.getFilters().map(fC).join(" ,")+"}"}(t):"Filter"}class yq extends Gt{constructor(e,r,n){super(e,r,n),this.key=Ee.fromName(n.referenceValue)}matches(e){const r=Ee.comparator(e.key,this.key);return this.matchesComparison(r)}}class _q extends Gt{constructor(e,r){super(e,"in",r),this.keys=hC("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class xq extends Gt{constructor(e,r){super(e,"not-in",r),this.keys=hC("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function hC(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Ee.fromName(n.referenceValue))}class wq extends Gt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return V_(r)&&yd(r.arrayValue,this.value)}}class bq extends Gt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&yd(this.value.arrayValue,r)}}class Eq extends Gt{constructor(e,r){super(e,"not-in",r)}matches(e){if(yd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!yd(this.value.arrayValue,r)}}class Dq extends Gt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!V_(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>yd(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tq{constructor(e,r=null,n=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.ue=null}}function $1(t,e=null,r=[],n=[],s=null,i=null,o=null){return new Tq(t,e,r,n,s,i,o)}function z_(t){const e=Ce(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Tv(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Zm(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Su(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Su(n)).join(",")),e.ue=r}return e.ue}function U_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!pq(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!dC(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!W1(t.startAt,e.startAt)&&W1(t.endAt,e.endAt)}function Sv(t){return Ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,r=null,n=[],s=[],i=null,o="F",c=null,d=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Sq(t,e,r,n,s,i,o,c){return new eg(t,e,r,n,s,i,o,c)}function B_(t){return new eg(t)}function H1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Pq(t){return t.collectionGroup!==null}function qc(t){const e=Ce(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new fr(cr.comparator);return o.filters.forEach(d=>{d.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Qh(i,n))}),r.has(cr.keyField().canonicalString())||e.ce.push(new Qh(cr.keyField(),n))}return e.ce}function Js(t){const e=Ce(t);return e.le||(e.le=Iq(e,qc(t))),e.le}function Iq(t,e){if(t.limitType==="F")return $1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Qh(s.field,i)});const r=t.endAt?new Kh(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Kh(t.startAt.position,t.startAt.inclusive):null;return $1(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Pv(t,e,r){return new eg(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function tg(t,e){return U_(Js(t),Js(e))&&t.limitType===e.limitType}function mC(t){return`${z_(Js(t))}|lt:${t.limitType}`}function Ul(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>fC(s)).join(", ")}]`),Zm(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>Su(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>Su(s)).join(",")),`Target(${n})`}(Js(t))}; limitType=${t.limitType})`}function rg(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Ee.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of qc(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(o,c,d){const h=B1(o,c,d);return o.inclusive?h<=0:h<0}(n.startAt,qc(n),s)||n.endAt&&!function(o,c,d){const h=B1(o,c,d);return o.inclusive?h>=0:h>0}(n.endAt,qc(n),s))}(t,e)}function Cq(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function gC(t){return(e,r)=>{let n=!1;for(const s of qc(t)){const i=Oq(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function Oq(t,e,r){const n=t.field.isKeyField()?Ee.comparator(e.key,r.key):function(i,o,c){const d=o.data.field(i),h=c.data.field(i);return d!==null&&h!==null?Tu(d,h):Pe()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Bu(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return iC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nq=new Ct(Ee.comparator);function ta(){return Nq}const pC=new Ct(Ee.comparator);function Oc(...t){let e=pC;for(const r of t)e=e.insert(r.key,r);return e}function vC(t){let e=pC;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Qo(){return Gc()}function yC(){return Gc()}function Gc(){return new Wu(t=>t.toString(),(t,e)=>t.isEqual(e))}const jq=new Ct(Ee.comparator),Mq=new fr(Ee.comparator);function Be(...t){let e=Mq;for(const r of t)e=e.add(r);return e}const Rq=new fr(Xe);function Aq(){return Rq}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gh(e)?"-0":e}}function _C(t){return{integerValue:""+t}}function Fq(t,e){return dq(e)?_C(e):W_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(){this._=void 0}}function kq(t,e,r){return t instanceof _d?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&k_(i)&&(i=L_(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(r,e):t instanceof xd?wC(t,e):t instanceof wd?bC(t,e):function(s,i){const o=xC(s,i),c=Y1(o)+Y1(s.Pe);return Dv(o)&&Dv(s.Pe)?_C(c):W_(s.serializer,c)}(t,e)}function Lq(t,e,r){return t instanceof xd?wC(t,e):t instanceof wd?bC(t,e):r}function xC(t,e){return t instanceof Xh?function(n){return Dv(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class _d extends ng{}class xd extends ng{constructor(e){super(),this.elements=e}}function wC(t,e){const r=EC(e);for(const n of t.elements)r.some(s=>ri(s,n))||r.push(n);return{arrayValue:{values:r}}}class wd extends ng{constructor(e){super(),this.elements=e}}function bC(t,e){let r=EC(e);for(const n of t.elements)r=r.filter(s=>!ri(s,n));return{arrayValue:{values:r}}}class Xh extends ng{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function Y1(t){return Vt(t.integerValue||t.doubleValue)}function EC(t){return V_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vq{constructor(e,r){this.field=e,this.transform=r}}function zq(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof xd&&s instanceof xd||n instanceof wd&&s instanceof wd?Du(n.elements,s.elements,ri):n instanceof Xh&&s instanceof Xh?ri(n.Pe,s.Pe):n instanceof _d&&s instanceof _d}(t.transform,e.transform)}class Uq{constructor(e,r){this.version=e,this.transformResults=r}}class Zs{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Zs}static exists(e){return new Zs(void 0,e)}static updateTime(e){return new Zs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class sg{}function DC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $_(t.key,Zs.none()):new Qd(t.key,t.data,Zs.none());{const r=t.data,n=Ln.empty();let s=new fr(cr.comparator);for(let i of e.fields)if(!s.has(i)){let o=r.field(i);o===null&&i.length>1&&(i=i.popLast(),o=r.field(i)),o===null?n.delete(i):n.set(i,o),s=s.add(i)}return new _l(t.key,n,new ms(s.toArray()),Zs.none())}}function Bq(t,e,r){t instanceof Qd?function(s,i,o){const c=s.value.clone(),d=G1(s.fieldTransforms,i,o.transformResults);c.setAll(d),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,r):t instanceof _l?function(s,i,o){if(!oh(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=G1(s.fieldTransforms,i,o.transformResults),d=i.data;d.setAll(TC(s)),d.setAll(c),i.convertToFoundDocument(o.version,d).setHasCommittedMutations()}(t,e,r):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function Kc(t,e,r,n){return t instanceof Qd?function(i,o,c,d){if(!oh(i.precondition,o))return c;const h=i.value.clone(),g=K1(i.fieldTransforms,d,o);return h.setAll(g),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,r,n):t instanceof _l?function(i,o,c,d){if(!oh(i.precondition,o))return c;const h=K1(i.fieldTransforms,d,o),g=o.data;return g.setAll(TC(i)),g.setAll(h),o.convertToFoundDocument(o.version,g).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(v=>v.field))}(t,e,r,n):function(i,o,c){return oh(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,r)}function Wq(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=xC(n.transform,s||null);i!=null&&(r===null&&(r=Ln.empty()),r.set(n.field,i))}return r||null}function q1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Du(n,s,(i,o)=>zq(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qd extends sg{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class _l extends sg{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function TC(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function G1(t,e,r){const n=new Map;nt(t.length===r.length);for(let s=0;s<r.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);n.set(i.field,Lq(o,c,r[s]))}return n}function K1(t,e,r){const n=new Map;for(const s of t){const i=s.transform,o=r.data.field(s.field);n.set(s.field,kq(i,o,e))}return n}class $_ extends sg{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $q extends sg{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hq{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Bq(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Kc(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Kc(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=yC();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=r.has(s.key)?null:c;const d=DC(o,c);d!==null&&n.set(s.key,d),o.isValidDocument()||o.convertToNoDocument(Ie.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Be())}isEqual(e){return this.batchId===e.batchId&&Du(this.mutations,e.mutations,(r,n)=>q1(r,n))&&Du(this.baseMutations,e.baseMutations,(r,n)=>q1(r,n))}}class H_{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){nt(e.mutations.length===n.length);let s=function(){return jq}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,n[o].version);return new H_(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yq{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qq{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,Ye;function Gq(t){switch(t){default:return Pe();case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0}}function SC(t){if(t===void 0)return ea("GRPC error has no .code"),te.UNKNOWN;switch(t){case Bt.OK:return te.OK;case Bt.CANCELLED:return te.CANCELLED;case Bt.UNKNOWN:return te.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return te.INTERNAL;case Bt.UNAVAILABLE:return te.UNAVAILABLE;case Bt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Bt.NOT_FOUND:return te.NOT_FOUND;case Bt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Bt.ABORTED:return te.ABORTED;case Bt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Bt.DATA_LOSS:return te.DATA_LOSS;default:return Pe()}}(Ye=Bt||(Bt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kq(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qq=new tl([4294967295,4294967295],0);function Q1(t){const e=Kq().encode(t),r=new XI;return r.update(e),new Uint8Array(r.digest())}function X1(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new tl([r,n],0),new tl([s,i],0)]}class Y_{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Nc(`Invalid padding: ${r}`);if(n<0)throw new Nc(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Nc(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Nc(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=tl.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(tl.fromNumber(n)));return s.compare(Qq)===1&&(s=new tl([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=Q1(e),[n,s]=X1(r);for(let i=0;i<this.hashCount;i++){const o=this.Ee(n,s,i);if(!this.de(o))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Y_(i,s,r);return n.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;const r=Q1(e),[n,s]=X1(r);for(let i=0;i<this.hashCount;i++){const o=this.Ee(n,s,i);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Nc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,Xd.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new ig(Ie.min(),s,new Ct(Xe),ta(),Be())}}class Xd{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Xd(n,r,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class PC{constructor(e,r){this.targetId=e,this.me=r}}class IC{constructor(e,r,n=mr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class J1{constructor(){this.fe=0,this.ge=eE(),this.pe=mr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Be(),r=Be(),n=Be();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Pe()}}),new Xd(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=eE()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,nt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Xq{constructor(e){this.Le=e,this.Be=new Map,this.ke=ta(),this.qe=Z1(),this.Qe=new Ct(Xe)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Pe()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const i=s.target;if(Sv(i))if(n===0){const o=new Ee(i.path);this.Ue(r,o,Pr.newNoDocument(o,Ie.min()))}else nt(n===1);else{const o=this.Ye(r);if(o!==n){const c=this.Ze(e),d=c?this.Xe(c,e,o):1;if(d!==0){this.je(r);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,h)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let o,c;try{o=cl(n).toUint8Array()}catch(d){if(d instanceof aC)return Eu("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new Y_(o,s,i)}catch(d){return Eu(d instanceof Nc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ie===0?null:c}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(r,i,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((i,o)=>{const c=this.Je(o);if(c){if(i.current&&Sv(c.target)){const d=new Ee(c.target.path);this.ke.get(d)!==null||this.it(o,d)||this.Ue(o,d,Pr.newNoDocument(d,e))}i.be&&(r.set(o,i.ve()),i.Ce())}});let n=Be();this.qe.forEach((i,o)=>{let c=!0;o.forEachWhile(d=>{const h=this.Je(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(n=n.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new ig(e,r,this.Qe,this.ke,n);return this.ke=ta(),this.qe=Z1(),this.Qe=new Ct(Xe),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new J1,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new fr(Xe),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||ye("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new J1),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function Z1(){return new Ct(Ee.comparator)}function eE(){return new Ct(Ee.comparator)}const Jq={asc:"ASCENDING",desc:"DESCENDING"},Zq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eG={and:"AND",or:"OR"};class tG{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Iv(t,e){return t.useProto3Json||Zm(e)?e:{value:e}}function Jh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function rG(t,e){return Jh(t,e.toTimestamp())}function ei(t){return nt(!!t),Ie.fromTimestamp(function(r){const n=vo(r);return new Qt(n.seconds,n.nanos)}(t))}function q_(t,e){return Cv(t,e).canonicalString()}function Cv(t,e){const r=function(s){return new Et(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function OC(t){const e=Et.fromString(t);return nt(AC(e)),e}function Ov(t,e){return q_(t.databaseId,e.path)}function cp(t,e){const r=OC(e);if(r.get(1)!==t.databaseId.projectId)throw new xe(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new xe(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Ee(jC(r))}function NC(t,e){return q_(t.databaseId,e)}function nG(t){const e=OC(t);return e.length===4?Et.emptyPath():jC(e)}function Nv(t){return new Et(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function jC(t){return nt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function tE(t,e,r){return{name:Ov(t,e),fields:r.value.mapValue.fields}}function sG(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,g){return h.useProto3Json?(nt(g===void 0||typeof g=="string"),mr.fromBase64String(g||"")):(nt(g===void 0||g instanceof Buffer||g instanceof Uint8Array),mr.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(h){const g=h.code===void 0?te.UNKNOWN:SC(h.code);return new xe(g,h.message||"")}(o);r=new IC(n,s,i,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=cp(t,n.document.name),i=ei(n.document.updateTime),o=n.document.createTime?ei(n.document.createTime):Ie.min(),c=new Ln({mapValue:{fields:n.document.fields}}),d=Pr.newFoundDocument(s,i,o,c),h=n.targetIds||[],g=n.removedTargetIds||[];r=new lh(h,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=cp(t,n.document),i=n.readTime?ei(n.readTime):Ie.min(),o=Pr.newNoDocument(s,i),c=n.removedTargetIds||[];r=new lh([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=cp(t,n.document),i=n.removedTargetIds||[];r=new lh([],i,s,null)}else{if(!("filter"in e))return Pe();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,o=new qq(s,i),c=n.targetId;r=new PC(c,o)}}return r}function iG(t,e){let r;if(e instanceof Qd)r={update:tE(t,e.key,e.value)};else if(e instanceof $_)r={delete:Ov(t,e.key)};else if(e instanceof _l)r={update:tE(t,e.key,e.data),updateMask:mG(e.fieldMask)};else{if(!(e instanceof $q))return Pe();r={verify:Ov(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,o){const c=o.transform;if(c instanceof _d)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof xd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof wd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Xh)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw Pe()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:rG(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Pe()}(t,e.precondition)),r}function aG(t,e){return t&&t.length>0?(nt(e!==void 0),t.map(r=>function(s,i){let o=s.updateTime?ei(s.updateTime):ei(i);return o.isEqual(Ie.min())&&(o=ei(i)),new Uq(o,s.transformResults||[])}(r,e))):[]}function oG(t,e){return{documents:[NC(t,e.path)]}}function lG(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=NC(t,s);const i=function(h){if(h.length!==0)return RC(ni.create(h,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(g=>function(y){return{field:Bl(y.field),direction:dG(y.dir)}}(g))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const c=Iv(t,e.limit);return c!==null&&(r.structuredQuery.limit=c),e.startAt&&(r.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:r,parent:s}}function uG(t){let e=nG(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){nt(n===1);const g=r.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let i=[];r.where&&(i=function(v){const y=MC(v);return y instanceof ni&&cC(y)?y.getFilters():[y]}(r.where));let o=[];r.orderBy&&(o=function(v){return v.map(y=>function(N){return new Qh(Wl(N.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(y))}(r.orderBy));let c=null;r.limit&&(c=function(v){let y;return y=typeof v=="object"?v.value:v,Zm(y)?null:y}(r.limit));let d=null;r.startAt&&(d=function(v){const y=!!v.before,E=v.values||[];return new Kh(E,y)}(r.startAt));let h=null;return r.endAt&&(h=function(v){const y=!v.before,E=v.values||[];return new Kh(E,y)}(r.endAt)),Sq(e,s,o,i,c,"F",d,h)}function cG(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function MC(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Wl(r.unaryFilter.field);return Gt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Wl(r.unaryFilter.field);return Gt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Wl(r.unaryFilter.field);return Gt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Wl(r.unaryFilter.field);return Gt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Pe()}}(t):t.fieldFilter!==void 0?function(r){return Gt.create(Wl(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pe()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return ni.create(r.compositeFilter.filters.map(n=>MC(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Pe()}}(r.compositeFilter.op))}(t):Pe()}function dG(t){return Jq[t]}function fG(t){return Zq[t]}function hG(t){return eG[t]}function Bl(t){return{fieldPath:t.canonicalString()}}function Wl(t){return cr.fromServerFormat(t.fieldPath)}function RC(t){return t instanceof Gt?function(r){if(r.op==="=="){if(U1(r.value))return{unaryFilter:{field:Bl(r.field),op:"IS_NAN"}};if(z1(r.value))return{unaryFilter:{field:Bl(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(U1(r.value))return{unaryFilter:{field:Bl(r.field),op:"IS_NOT_NAN"}};if(z1(r.value))return{unaryFilter:{field:Bl(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bl(r.field),op:fG(r.op),value:r.value}}}(t):t instanceof ni?function(r){const n=r.getFilters().map(s=>RC(s));return n.length===1?n[0]:{compositeFilter:{op:hG(r.op),filters:n}}}(t):Pe()}function mG(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function AC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,r,n,s,i=Ie.min(),o=Ie.min(),c=mr.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new Ja(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Ja(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ja(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ja(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gG{constructor(e){this.ct=e}}function pG(t){const e=uG({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Pv(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vG{constructor(){this.un=new yG}addToCollectionParentIndex(e,r){return this.un.add(r),re.resolve()}getCollectionParents(e,r){return re.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return re.resolve()}deleteFieldIndex(e,r){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,r){return re.resolve()}getDocumentsMatchingTarget(e,r){return re.resolve(null)}getIndexType(e,r){return re.resolve(0)}getFieldIndexes(e,r){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,r){return re.resolve(po.min())}getMinOffsetFromCollectionGroup(e,r){return re.resolve(po.min())}updateCollectionGroup(e,r,n){return re.resolve()}updateIndexEntries(e,r){return re.resolve()}}class yG{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new fr(Et.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new fr(Et.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Pu(0)}static kn(){return new Pu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _G{constructor(){this.changes=new Wu(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Pr.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?re.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xG{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wG{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&Kc(n.mutation,s,ms.empty(),Qt.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Be()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Be()){const s=Qo();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let o=Oc();return i.forEach((c,d)=>{o=o.insert(c,d.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=Qo();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Be()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{r.set(o,c)})})}computeViews(e,r,n,s){let i=ta();const o=Gc(),c=function(){return Gc()}();return r.forEach((d,h)=>{const g=n.get(h.key);s.has(h.key)&&(g===void 0||g.mutation instanceof _l)?i=i.insert(h.key,h):g!==void 0?(o.set(h.key,g.mutation.getFieldMask()),Kc(g.mutation,h,g.mutation.getFieldMask(),Qt.now())):o.set(h.key,ms.empty())}),this.recalculateAndSaveOverlays(e,i).next(d=>(d.forEach((h,g)=>o.set(h,g)),r.forEach((h,g)=>{var v;return c.set(h,new xG(g,(v=o.get(h))!==null&&v!==void 0?v:null))}),c))}recalculateAndSaveOverlays(e,r){const n=Gc();let s=new Ct((o,c)=>o-c),i=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const c of o)c.keys().forEach(d=>{const h=r.get(d);if(h===null)return;let g=n.get(d)||ms.empty();g=c.applyToLocalView(h,g),n.set(d,g);const v=(s.get(c.batchId)||Be()).add(d);s=s.insert(c.batchId,v)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,g=d.value,v=yC();g.forEach(y=>{if(!i.has(y)){const E=DC(r.get(y),n.get(y));E!==null&&v.set(y,E),i=i.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,v))}return re.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(o){return Ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):Pq(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):re.resolve(Qo());let c=-1,d=i;return o.next(h=>re.forEach(h,(g,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),i.get(g)?re.resolve():this.remoteDocumentCache.getEntry(e,g).next(y=>{d=d.insert(g,y)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,d,h,Be())).next(g=>({batchId:c,changes:vC(g)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Ee(r)).next(n=>{let s=Oc();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let o=Oc();return this.indexManager.getCollectionParents(e,i).next(c=>re.forEach(c,d=>{const h=function(v,y){return new eg(y,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(r,d.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,n,s).next(g=>{g.forEach((v,y)=>{o=o.insert(v,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(o=>{i.forEach((d,h)=>{const g=h.getKey();o.get(g)===null&&(o=o.insert(g,Pr.newInvalidDocument(g)))});let c=Oc();return o.forEach((d,h)=>{const g=i.get(d);g!==void 0&&Kc(g.mutation,h,ms.empty(),Qt.now()),rg(r,h)&&(c=c.insert(d,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bG{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return re.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:ei(s.createTime)}}(r)),re.resolve()}getNamedQuery(e,r){return re.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:pG(s.bundledQuery),readTime:ei(s.readTime)}}(r)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EG{constructor(){this.overlays=new Ct(Ee.comparator),this.Ir=new Map}getOverlay(e,r){return re.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Qo();return re.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.ht(e,r,i)}),re.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(n)),re.resolve()}getOverlaysForCollection(e,r,n){const s=Qo(),i=r.length+1,o=new Ee(r.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!r.isPrefixOf(h.path))break;h.path.length===i&&d.largestBatchId>n&&s.set(d.getKey(),d)}return re.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new Ct((h,g)=>h-g);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===r&&h.largestBatchId>n){let g=i.get(h.largestBatchId);g===null&&(g=Qo(),i=i.insert(h.largestBatchId,g)),g.set(h.getKey(),h)}}const c=Qo(),d=i.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((h,g)=>c.set(h,g)),!(c.size()>=s)););return re.resolve(c)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new Yq(r,n));let i=this.Ir.get(r);i===void 0&&(i=Be(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DG{constructor(){this.sessionToken=mr.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(){this.Tr=new fr(tr.Er),this.dr=new fr(tr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new tr(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new tr(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new Ee(new Et([])),n=new tr(r,e),s=new tr(r,e+1),i=[];return this.dr.forEachInRange([n,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Ee(new Et([])),n=new tr(r,e),s=new tr(r,e+1);let i=Be();return this.dr.forEachInRange([n,s],o=>{i=i.add(o.key)}),i}containsKey(e){const r=new tr(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class tr{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Ee.comparator(e.key,r.key)||Xe(e.wr,r.wr)}static Ar(e,r){return Xe(e.wr,r.wr)||Ee.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TG{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new fr(tr.Er)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Hq(i,r,n,s);this.mutationQueue.push(o);for(const c of s)this.br=this.br.add(new tr(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return re.resolve(o)}lookupMutationBatch(e,r){return re.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),i=s<0?0:s;return re.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new tr(r,0),s=new tr(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],o=>{const c=this.Dr(o.wr);i.push(c)}),re.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new fr(Xe);return r.forEach(s=>{const i=new tr(s,0),o=new tr(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],c=>{n=n.add(c.wr)})}),re.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;Ee.isDocumentKey(i)||(i=i.child(""));const o=new tr(new Ee(i),0);let c=new fr(Xe);return this.br.forEachWhile(d=>{const h=d.key.path;return!!n.isPrefixOf(h)&&(h.length===s&&(c=c.add(d.wr)),!0)},o),re.resolve(this.Cr(c))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){nt(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return re.forEach(r.mutations,s=>{const i=new tr(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new tr(r,0),s=this.br.firstAfterOrEqual(n);return re.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SG{constructor(e){this.Mr=e,this.docs=function(){return new Ct(Ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return re.resolve(n?n.document.mutableCopy():Pr.newInvalidDocument(r))}getEntries(e,r){let n=ta();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():Pr.newInvalidDocument(s))}),re.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=ta();const o=r.path,c=new Ee(o.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:g}}=d.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||oq(aq(g),n)<=0||(s.has(g.key)||rg(r,g))&&(i=i.insert(g.key,g.mutableCopy()))}return re.resolve(i)}getAllFromCollectionGroup(e,r,n,s){Pe()}Or(e,r){return re.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new PG(this)}getSize(e){return re.resolve(this.size)}}class PG extends _G{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),re.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IG{constructor(e){this.persistence=e,this.Nr=new Wu(r=>z_(r),U_),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new G_,this.targetCount=0,this.kr=Pu.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),re.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Pu(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,re.resolve()}updateTargetData(e,r){return this.Kn(r),re.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=r&&n.get(c.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),re.waitFor(i).next(()=>s)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return re.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),re.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),re.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),re.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return re.resolve(n)}containsKey(e,r){return re.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CG{constructor(e,r){this.qr={},this.overlays={},this.Qr=new F_(0),this.Kr=!1,this.Kr=!0,this.$r=new DG,this.referenceDelegate=e(this),this.Ur=new IG(this),this.indexManager=new vG,this.remoteDocumentCache=function(s){return new SG(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new gG(r),this.Gr=new bG(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new EG,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new TG(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){ye("MemoryPersistence","Starting transaction:",e);const s=new OG(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,r){return re.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class OG extends uq{constructor(e){super(),this.currentSequenceNumber=e}}class K_{constructor(e){this.persistence=e,this.Jr=new G_,this.Yr=null}static Zr(e){return new K_(e)}get Xr(){if(this.Yr)return this.Yr;throw Pe()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),re.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),re.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),re.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Xr,n=>{const s=Ee.fromPath(n);return this.ei(e,s).next(i=>{i||r.removeEntry(s,Ie.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return re.or([()=>re.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=Be(),s=Be();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Q_(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NG{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jG{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return MW()?8:cq(Cr())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.Yi(e,r).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,r,s,n).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new NG;return this.Xi(e,r,o).next(c=>{if(i.result=c,this.zi)return this.es(e,r,o,c.size)})}).next(()=>i.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(Ec()<=We.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Ul(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),re.resolve()):(Ec()<=We.DEBUG&&ye("QueryEngine","Query:",Ul(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(Ec()<=We.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Ul(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Js(r))):re.resolve())}Yi(e,r){if(H1(r))return re.resolve(null);let n=Js(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=Pv(r,null,"F"),n=Js(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const o=Be(...i);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,n).next(d=>{const h=this.ts(r,c);return this.ns(r,h,o,d.readTime)?this.Yi(e,Pv(r,null,"F")):this.rs(e,h,r,d)}))})))}Zi(e,r,n,s){return H1(r)||s.isEqual(Ie.min())?re.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const o=this.ts(r,i);return this.ns(r,o,n,s)?re.resolve(null):(Ec()<=We.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ul(r)),this.rs(e,o,r,iq(s,-1)).next(c=>c))})}ts(e,r){let n=new fr(gC(e));return r.forEach((s,i)=>{rg(e,i)&&(n=n.add(i))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,r,n){return Ec()<=We.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Ul(r)),this.Ji.getDocumentsMatchingQuery(e,r,po.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MG{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new Ct(Xe),this._s=new Wu(i=>z_(i),U_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wG(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function RG(t,e,r,n){return new MG(t,e,r,n)}async function FC(t,e){const r=Ce(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const o=[],c=[];let d=Be();for(const h of s){o.push(h.batchId);for(const g of h.mutations)d=d.add(g.key)}for(const h of i){c.push(h.batchId);for(const g of h.mutations)d=d.add(g.key)}return r.localDocuments.getDocuments(n,d).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:c}))})})}function AG(t,e){const r=Ce(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return function(c,d,h,g){const v=h.batch,y=v.keys();let E=re.resolve();return y.forEach(N=>{E=E.next(()=>g.getEntry(d,N)).next(D=>{const k=h.docVersions.get(N);nt(k!==null),D.version.compareTo(k)<0&&(v.applyToRemoteDocument(D,h),D.isValidDocument()&&(D.setReadTime(h.commitVersion),g.addEntry(D)))})}),E.next(()=>c.mutationQueue.removeMutationBatch(d,v))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(c){let d=Be();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function kC(t){const e=Ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function FG(t,e){const r=Ce(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const c=[];e.targetChanges.forEach((g,v)=>{const y=s.get(v);if(!y)return;c.push(r.Ur.removeMatchingKeys(i,g.removedDocuments,v).next(()=>r.Ur.addMatchingKeys(i,g.addedDocuments,v)));let E=y.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(v)!==null?E=E.withResumeToken(mr.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):g.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(g.resumeToken,n)),s=s.insert(v,E),function(D,k,S){return D.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(y,E,g)&&c.push(r.Ur.updateTargetData(i,E))});let d=ta(),h=Be();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(i,g))}),c.push(kG(i,o,e.documentUpdates).next(g=>{d=g.Ps,h=g.Is})),!n.isEqual(Ie.min())){const g=r.Ur.getLastRemoteSnapshotVersion(i).next(v=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n));c.push(g)}return re.waitFor(c).next(()=>o.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,d,h)).next(()=>d)}).then(i=>(r.os=s,i))}function kG(t,e,r){let n=Be(),s=Be();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let o=ta();return r.forEach((c,d)=>{const h=i.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),d.isNoDocument()&&d.version.isEqual(Ie.min())?(e.removeEntry(c,d.readTime),o=o.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),o=o.insert(c,d)):ye("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)}),{Ps:o,Is:s}})}function LG(t,e){const r=Ce(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function VG(t,e){const r=Ce(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(i=>i?(s=i,re.resolve(s)):r.Ur.allocateTargetId(n).next(o=>(s=new Ja(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function jv(t,e,r){const n=Ce(t),s=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,o=>n.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Kd(o))throw o;ye("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function rE(t,e,r){const n=Ce(t);let s=Ie.min(),i=Be();return n.persistence.runTransaction("Execute query","readwrite",o=>function(d,h,g){const v=Ce(d),y=v._s.get(g);return y!==void 0?re.resolve(v.os.get(y)):v.Ur.getTargetData(h,g)}(n,o,Js(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,c.targetId).next(d=>{i=d})}).next(()=>n.ss.getDocumentsMatchingQuery(o,e,r?s:Ie.min(),r?i:Be())).next(c=>(zG(n,Cq(e),c),{documents:c,Ts:i})))}function zG(t,e,r){let n=t.us.get(e)||Ie.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.us.set(e,n)}class nE{constructor(){this.activeTargetIds=Aq()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UG{constructor(){this.so=new nE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new nE,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BG{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ye("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ye("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zf=null;function dp(){return zf===null?zf=function(){return 268435456+Math.round(2147483648*Math.random())}():zf++,"0x"+zf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $G{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="WebChannelConnection";class HG extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(r,n,s,i,o){const c=dp(),d=this.xo(r,n.toUriEncodedString());ye("RestConnection",`Sending RPC '${r}' ${c}:`,d,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(r,d,h,s).then(g=>(ye("RestConnection",`Received RPC '${r}' ${c}: `,g),g),g=>{throw Eu("RestConnection",`RPC '${r}' ${c} failed with error: `,g,"url: ",d,"request:",s),g})}Lo(r,n,s,i,o,c){return this.Mo(r,n,s,i,o)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Uu}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>r[o]=i),s&&s.headers.forEach((i,o)=>r[o]=i)}xo(r,n){const s=WG[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const i=dp();return new Promise((o,c)=>{const d=new JI;d.setWithCredentials(!0),d.listenOnce(ZI.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ih.NO_ERROR:const g=d.getResponseJson();ye(br,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(g)),o(g);break;case ih.TIMEOUT:ye(br,`RPC '${e}' ${i} timed out`),c(new xe(te.DEADLINE_EXCEEDED,"Request time out"));break;case ih.HTTP_ERROR:const v=d.getStatus();if(ye(br,`RPC '${e}' ${i} failed with status:`,v,"response text:",d.getResponseText()),v>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const E=y==null?void 0:y.error;if(E&&E.status&&E.message){const N=function(k){const S=k.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(S)>=0?S:te.UNKNOWN}(E.status);c(new xe(N,E.message))}else c(new xe(te.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new xe(te.UNAVAILABLE,"Connection failed."));break;default:Pe()}}finally{ye(br,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);ye(br,`RPC '${e}' ${i} sending request:`,s),d.send(r,"POST",h,n,15)})}Bo(e,r,n){const s=dp(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=rC(),c=tC(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,r,n),d.encodeInitMessageHeaders=!0;const g=i.join("");ye(br,`Creating RPC '${e}' stream ${s}: ${g}`,d);const v=o.createWebChannel(g,d);let y=!1,E=!1;const N=new $G({Io:k=>{E?ye(br,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(y||(ye(br,`Opening RPC '${e}' stream ${s} transport.`),v.open(),y=!0),ye(br,`RPC '${e}' stream ${s} sending:`,k),v.send(k))},To:()=>v.close()}),D=(k,S,P)=>{k.listen(S,C=>{try{P(C)}catch(R){setTimeout(()=>{throw R},0)}})};return D(v,Cc.EventType.OPEN,()=>{E||(ye(br,`RPC '${e}' stream ${s} transport opened.`),N.yo())}),D(v,Cc.EventType.CLOSE,()=>{E||(E=!0,ye(br,`RPC '${e}' stream ${s} transport closed`),N.So())}),D(v,Cc.EventType.ERROR,k=>{E||(E=!0,Eu(br,`RPC '${e}' stream ${s} transport errored:`,k),N.So(new xe(te.UNAVAILABLE,"The operation could not be completed")))}),D(v,Cc.EventType.MESSAGE,k=>{var S;if(!E){const P=k.data[0];nt(!!P);const C=P,R=C.error||((S=C[0])===null||S===void 0?void 0:S.error);if(R){ye(br,`RPC '${e}' stream ${s} received error:`,R);const Y=R.status;let q=function(I){const j=Bt[I];if(j!==void 0)return SC(j)}(Y),T=R.message;q===void 0&&(q=te.INTERNAL,T="Unknown error status: "+Y+" with message "+R.message),E=!0,N.So(new xe(q,T)),v.close()}else ye(br,`RPC '${e}' stream ${s} received:`,P),N.bo(P)}}),D(c,eC.STAT_EVENT,k=>{k.stat===bv.PROXY?ye(br,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===bv.NOPROXY&&ye(br,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.wo()},0),N}}function fp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(t){return new tG(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,r,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&ye("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,r,n,s,i,o,c,d){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new LC(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===te.RESOURCE_EXHAUSTED?(ea(r.toString()),ea("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new xe(te.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ye("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(ye("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class YG extends VC{constructor(e,r,n,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,o),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=sG(this.serializer,e),n=function(i){if(!("targetChange"in i))return Ie.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ie.min():o.readTime?ei(o.readTime):Ie.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=Nv(this.serializer),r.addTarget=function(i,o){let c;const d=o.target;if(c=Sv(d)?{documents:oG(i,d)}:{query:lG(i,d)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=CC(i,o.resumeToken);const h=Iv(i,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(Ie.min())>0){c.readTime=Jh(i,o.snapshotVersion.toTimestamp());const h=Iv(i,o.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);const n=cG(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=Nv(this.serializer),r.removeTarget=e,this.a_(r)}}class qG extends VC{constructor(e,r,n,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return nt(!!e.streamToken),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){nt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=aG(e.writeResults,e.commitTime),n=ei(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=Nv(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>iG(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GG extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new xe(te.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Cv(r,n),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new xe(te.UNKNOWN,i.toString())})}Lo(e,r,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Cv(r,n),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(te.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class KG{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ea(r),this.D_=!1):ye("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QG{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{n.enqueueAndForget(async()=>{xl(this)&&(ye("RemoteStore","Restarting streams for network reachability change."),await async function(d){const h=Ce(d);h.L_.add(4),await Jd(h),h.q_.set("Unknown"),h.L_.delete(4),await og(h)}(this))})}),this.q_=new KG(n,s)}}async function og(t){if(xl(t))for(const e of t.B_)await e(!0)}async function Jd(t){for(const e of t.B_)await e(!1)}function zC(t,e){const r=Ce(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),ex(r)?Z_(r):$u(r).r_()&&J_(r,e))}function X_(t,e){const r=Ce(t),n=$u(r);r.N_.delete(e),n.r_()&&UC(r,e),r.N_.size===0&&(n.r_()?n.o_():xl(r)&&r.q_.set("Unknown"))}function J_(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}$u(t).A_(e)}function UC(t,e){t.Q_.xe(e),$u(t).R_(e)}function Z_(t){t.Q_=new Xq({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),$u(t).start(),t.q_.v_()}function ex(t){return xl(t)&&!$u(t).n_()&&t.N_.size>0}function xl(t){return Ce(t).L_.size===0}function BC(t){t.Q_=void 0}async function XG(t){t.q_.set("Online")}async function JG(t){t.N_.forEach((e,r)=>{J_(t,e)})}async function ZG(t,e){BC(t),ex(t)?(t.q_.M_(e),Z_(t)):t.q_.set("Unknown")}async function eK(t,e,r){if(t.q_.set("Online"),e instanceof IC&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.N_.delete(c),s.Q_.removeTarget(c))}(t,e)}catch(n){ye("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Zh(t,n)}else if(e instanceof lh?t.Q_.Ke(e):e instanceof PC?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Ie.min()))try{const n=await kC(t.localStore);r.compareTo(n)>=0&&await function(i,o){const c=i.Q_.rt(o);return c.targetChanges.forEach((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const g=i.N_.get(h);g&&i.N_.set(h,g.withResumeToken(d.resumeToken,o))}}),c.targetMismatches.forEach((d,h)=>{const g=i.N_.get(d);if(!g)return;i.N_.set(d,g.withResumeToken(mr.EMPTY_BYTE_STRING,g.snapshotVersion)),UC(i,d);const v=new Ja(g.target,d,h,g.sequenceNumber);J_(i,v)}),i.remoteSyncer.applyRemoteEvent(c)}(t,r)}catch(n){ye("RemoteStore","Failed to raise snapshot:",n),await Zh(t,n)}}async function Zh(t,e,r){if(!Kd(e))throw e;t.L_.add(1),await Jd(t),t.q_.set("Offline"),r||(r=()=>kC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ye("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await og(t)})}function WC(t,e){return e().catch(r=>Zh(t,r,e))}async function lg(t){const e=Ce(t),r=yo(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;tK(e);)try{const s=await LG(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,rK(e,s)}catch(s){await Zh(e,s)}$C(e)&&HC(e)}function tK(t){return xl(t)&&t.O_.length<10}function rK(t,e){t.O_.push(e);const r=yo(t);r.r_()&&r.V_&&r.m_(e.mutations)}function $C(t){return xl(t)&&!yo(t).n_()&&t.O_.length>0}function HC(t){yo(t).start()}async function nK(t){yo(t).p_()}async function sK(t){const e=yo(t);for(const r of t.O_)e.m_(r.mutations)}async function iK(t,e,r){const n=t.O_.shift(),s=H_.from(n,e,r);await WC(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await lg(t)}async function aK(t,e){e&&yo(t).V_&&await async function(n,s){if(function(o){return Gq(o)&&o!==te.ABORTED}(s.code)){const i=n.O_.shift();yo(n).s_(),await WC(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await lg(n)}}(t,e),$C(t)&&HC(t)}async function iE(t,e){const r=Ce(t);r.asyncQueue.verifyOperationInProgress(),ye("RemoteStore","RemoteStore received new credentials");const n=xl(r);r.L_.add(3),await Jd(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await og(r)}async function oK(t,e){const r=Ce(t);e?(r.L_.delete(2),await og(r)):e||(r.L_.add(2),await Jd(r),r.q_.set("Unknown"))}function $u(t){return t.K_||(t.K_=function(r,n,s){const i=Ce(r);return i.w_(),new YG(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:XG.bind(null,t),Ro:JG.bind(null,t),mo:ZG.bind(null,t),d_:eK.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),ex(t)?Z_(t):t.q_.set("Unknown")):(await t.K_.stop(),BC(t))})),t.K_}function yo(t){return t.U_||(t.U_=function(r,n,s){const i=Ce(r);return i.w_(),new qG(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:nK.bind(null,t),mo:aK.bind(null,t),f_:sK.bind(null,t),g_:iK.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await lg(t)):(await t.U_.stop(),t.O_.length>0&&(ye("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new Hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const o=Date.now()+n,c=new tx(e,r,o,s,i);return c.start(n),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rx(t,e){if(ea("AsyncQueue",`${e}: ${t}`),Kd(t))return new xe(te.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Ee.comparator(r.key,n.key):(r,n)=>Ee.comparator(r.key,n.key),this.keyedMap=Oc(),this.sortedSet=new Ct(this.comparator)}static emptySet(e){return new hu(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof hu)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new hu;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(){this.W_=new Ct(Ee.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Pe():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Iu{constructor(e,r,n,s,i,o,c,d,h){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,r,n,s,i){const o=[];return r.forEach(c=>{o.push({type:0,doc:c})}),new Iu(e,r,hu.emptySet(r),o,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lK{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class uK{constructor(){this.queries=oE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=Ce(r),i=s.queries;s.queries=oE(),i.forEach((o,c)=>{for(const d of c.j_)d.onError(n)})})(this,new xe(te.ABORTED,"Firestore shutting down"))}}function oE(){return new Wu(t=>mC(t),tg)}async function YC(t,e){const r=Ce(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.H_()&&e.J_()&&(n=2):(i=new lK,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(s,!0);break;case 1:i.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(o){const c=rx(o,`Initialization of query '${Ul(e.query)}' failed`);return void e.onError(c)}r.queries.set(s,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&nx(r)}async function qC(t,e){const r=Ce(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function cK(t,e){const r=Ce(t);let n=!1;for(const s of e){const i=s.query,o=r.queries.get(i);if(o){for(const c of o.j_)c.X_(s)&&(n=!0);o.z_=s}}n&&nx(r)}function dK(t,e,r){const n=Ce(t),s=n.queries.get(e);if(s)for(const i of s.j_)i.onError(r);n.queries.delete(e)}function nx(t){t.Y_.forEach(e=>{e.next()})}var Mv,lE;(lE=Mv||(Mv={})).ea="default",lE.Cache="cache";class GC{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Iu(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Iu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Mv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.key=e}}class QC{constructor(e){this.key=e}}class fK{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Be(),this.mutatedKeys=Be(),this.Aa=gC(e),this.Ra=new hu(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new aE,s=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,o=s,c=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((g,v)=>{const y=s.get(g),E=rg(this.query,v)?v:null,N=!!y&&this.mutatedKeys.has(y.key),D=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let k=!1;y&&E?y.data.isEqual(E.data)?N!==D&&(n.track({type:3,doc:E}),k=!0):this.ga(y,E)||(n.track({type:2,doc:E}),k=!0,(d&&this.Aa(E,d)>0||h&&this.Aa(E,h)<0)&&(c=!0)):!y&&E?(n.track({type:0,doc:E}),k=!0):y&&!E&&(n.track({type:1,doc:y}),k=!0,(d||h)&&(c=!0)),k&&(E?(o=o.add(E),i=D?i.add(g):i.delete(g)):(o=o.delete(g),i=i.delete(g)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const g=this.query.limitType==="F"?o.last():o.first();o=o.delete(g.key),i=i.delete(g.key),n.track({type:1,doc:g})}return{Ra:o,fa:n,ns:c,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((g,v)=>function(E,N){const D=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe()}};return D(E)-D(N)}(g.type,v.type)||this.Aa(g.doc,v.doc)),this.pa(n),s=s!=null&&s;const c=r&&!s?this.ya():[],d=this.da.size===0&&this.current&&!s?1:0,h=d!==this.Ea;return this.Ea=d,o.length!==0||h?{snapshot:new Iu(this.query,e.Ra,i,o,e.mutatedKeys,d===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new aE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Be(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new QC(n))}),this.da.forEach(n=>{e.has(n)||r.push(new KC(n))}),r}ba(e){this.Ta=e.Ts,this.da=Be();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Iu.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class hK{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class mK{constructor(e){this.key=e,this.va=!1}}class gK{constructor(e,r,n,s,i,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Wu(c=>mC(c),tg),this.Ma=new Map,this.xa=new Set,this.Oa=new Ct(Ee.comparator),this.Na=new Map,this.La=new G_,this.Ba={},this.ka=new Map,this.qa=Pu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function pK(t,e,r=!0){const n=rO(t);let s;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await XC(n,e,r,!0),s}async function vK(t,e){const r=rO(t);await XC(r,e,!0,!1)}async function XC(t,e,r,n){const s=await VG(t.localStore,Js(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,r);let c;return n&&(c=await yK(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&r&&zC(t.remoteStore,s),c}async function yK(t,e,r,n,s){t.Ka=(v,y,E)=>async function(D,k,S,P){let C=k.view.ma(S);C.ns&&(C=await rE(D.localStore,k.query,!1).then(({documents:T})=>k.view.ma(T,C)));const R=P&&P.targetChanges.get(k.targetId),Y=P&&P.targetMismatches.get(k.targetId)!=null,q=k.view.applyChanges(C,D.isPrimaryClient,R,Y);return cE(D,k.targetId,q.wa),q.snapshot}(t,v,y,E);const i=await rE(t.localStore,e,!0),o=new fK(e,i.Ts),c=o.ma(i.documents),d=Xd.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),h=o.applyChanges(c,t.isPrimaryClient,d);cE(t,r,h.wa);const g=new hK(e,r,o);return t.Fa.set(e,g),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),h.snapshot}async function _K(t,e,r){const n=Ce(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);if(i.length>1)return n.Ma.set(s.targetId,i.filter(o=>!tg(o,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await jv(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&X_(n.remoteStore,s.targetId),Rv(n,s.targetId)}).catch(Gd)):(Rv(n,s.targetId),await jv(n.localStore,s.targetId,!0))}async function xK(t,e){const r=Ce(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),X_(r.remoteStore,n.targetId))}async function wK(t,e,r){const n=IK(t);try{const s=await function(o,c){const d=Ce(o),h=Qt.now(),g=c.reduce((E,N)=>E.add(N.key),Be());let v,y;return d.persistence.runTransaction("Locally write mutations","readwrite",E=>{let N=ta(),D=Be();return d.cs.getEntries(E,g).next(k=>{N=k,N.forEach((S,P)=>{P.isValidDocument()||(D=D.add(S))})}).next(()=>d.localDocuments.getOverlayedDocuments(E,N)).next(k=>{v=k;const S=[];for(const P of c){const C=Wq(P,v.get(P.key).overlayedDocument);C!=null&&S.push(new _l(P.key,C,oC(C.value.mapValue),Zs.exists(!0)))}return d.mutationQueue.addMutationBatch(E,h,S,c)}).next(k=>{y=k;const S=k.applyToLocalDocumentSet(v,D);return d.documentOverlayCache.saveOverlays(E,k.batchId,S)})}).then(()=>({batchId:y.batchId,changes:vC(v)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(o,c,d){let h=o.Ba[o.currentUser.toKey()];h||(h=new Ct(Xe)),h=h.insert(c,d),o.Ba[o.currentUser.toKey()]=h}(n,s.batchId,r),await Zd(n,s.changes),await lg(n.remoteStore)}catch(s){const i=rx(s,"Failed to persist write");r.reject(i)}}async function JC(t,e){const r=Ce(t);try{const n=await FG(r.localStore,e);e.targetChanges.forEach((s,i)=>{const o=r.Na.get(i);o&&(nt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?nt(o.va):s.removedDocuments.size>0&&(nt(o.va),o.va=!1))}),await Zd(r,n,e)}catch(n){await Gd(n)}}function uE(t,e,r){const n=Ce(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((i,o)=>{const c=o.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const d=Ce(o);d.onlineState=c;let h=!1;d.queries.forEach((g,v)=>{for(const y of v.j_)y.Z_(c)&&(h=!0)}),h&&nx(d)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function bK(t,e,r){const n=Ce(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),i=s&&s.key;if(i){let o=new Ct(Ee.comparator);o=o.insert(i,Pr.newNoDocument(i,Ie.min()));const c=Be().add(i),d=new ig(Ie.min(),new Map,new Ct(Xe),o,c);await JC(n,d),n.Oa=n.Oa.remove(i),n.Na.delete(e),sx(n)}else await jv(n.localStore,e,!1).then(()=>Rv(n,e,r)).catch(Gd)}async function EK(t,e){const r=Ce(t),n=e.batch.batchId;try{const s=await AG(r.localStore,e);eO(r,n,null),ZC(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Zd(r,s)}catch(s){await Gd(s)}}async function DK(t,e,r){const n=Ce(t);try{const s=await function(o,c){const d=Ce(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let g;return d.mutationQueue.lookupMutationBatch(h,c).next(v=>(nt(v!==null),g=v.keys(),d.mutationQueue.removeMutationBatch(h,v))).next(()=>d.mutationQueue.performConsistencyCheck(h)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(h,g,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,g)).next(()=>d.localDocuments.getDocuments(h,g))})}(n.localStore,e);eO(n,e,r),ZC(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Zd(n,s)}catch(s){await Gd(s)}}function ZC(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function eO(t,e,r){const n=Ce(t);let s=n.Ba[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function Rv(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||tO(t,n)})}function tO(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(X_(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),sx(t))}function cE(t,e,r){for(const n of r)n instanceof KC?(t.La.addReference(n.key,e),TK(t,n)):n instanceof QC?(ye("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||tO(t,n.key)):Pe()}function TK(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(ye("SyncEngine","New document in limbo: "+r),t.xa.add(n),sx(t))}function sx(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new Ee(Et.fromString(e)),n=t.qa.next();t.Na.set(n,new mK(r)),t.Oa=t.Oa.insert(r,n),zC(t.remoteStore,new Ja(Js(B_(r.path)),n,"TargetPurposeLimboResolution",F_.oe))}}async function Zd(t,e,r){const n=Ce(t),s=[],i=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach((c,d)=>{o.push(n.Ka(d,e,r).then(h=>{var g;if((h||r)&&n.isPrimaryClient){const v=h?!h.fromCache:(g=r==null?void 0:r.targetChanges.get(d.targetId))===null||g===void 0?void 0:g.current;n.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(h){s.push(h);const v=Q_.Wi(d.targetId,h);i.push(v)}}))}),await Promise.all(o),n.Ca.d_(s),await async function(d,h){const g=Ce(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>re.forEach(h,y=>re.forEach(y.$i,E=>g.persistence.referenceDelegate.addReference(v,y.targetId,E)).next(()=>re.forEach(y.Ui,E=>g.persistence.referenceDelegate.removeReference(v,y.targetId,E)))))}catch(v){if(!Kd(v))throw v;ye("LocalStore","Failed to update sequence numbers: "+v)}for(const v of h){const y=v.targetId;if(!v.fromCache){const E=g.os.get(y),N=E.snapshotVersion,D=E.withLastLimboFreeSnapshotVersion(N);g.os=g.os.insert(y,D)}}}(n.localStore,i))}async function SK(t,e){const r=Ce(t);if(!r.currentUser.isEqual(e)){ye("SyncEngine","User change. New user:",e.toKey());const n=await FC(r.localStore,e);r.currentUser=e,function(i,o){i.ka.forEach(c=>{c.forEach(d=>{d.reject(new xe(te.CANCELLED,o))})}),i.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Zd(r,n.hs)}}function PK(t,e){const r=Ce(t),n=r.Na.get(e);if(n&&n.va)return Be().add(n.key);{let s=Be();const i=r.Ma.get(e);if(!i)return s;for(const o of i){const c=r.Fa.get(o);s=s.unionWith(c.view.Va)}return s}}function rO(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=JC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bK.bind(null,e),e.Ca.d_=cK.bind(null,e.eventManager),e.Ca.$a=dK.bind(null,e.eventManager),e}function IK(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=EK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DK.bind(null,e),e}class em{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ag(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return RG(this.persistence,new jG,e.initialUser,this.serializer)}Ga(e){return new CG(K_.Zr,this.serializer)}Wa(e){return new UG}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}em.provider={build:()=>new em};class Av{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>uE(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=SK.bind(null,this.syncEngine),await oK(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new uK}()}createDatastore(e){const r=ag(e.databaseInfo.databaseId),n=function(i){return new HG(i)}(e.databaseInfo);return function(i,o,c,d){return new GG(i,o,c,d)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,o,c){return new QG(n,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,r=>uE(this.syncEngine,r,0),function(){return sE.D()?new sE:new BG}())}createSyncEngine(e,r){return function(s,i,o,c,d,h,g){const v=new gK(s,i,o,c,d,h);return g&&(v.Qa=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=Ce(s);ye("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Jd(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Av.provider={build:()=>new Av};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ea("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CK{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=Er.UNAUTHENTICATED,this.clientId=sC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async o=>{ye("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(ye("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=rx(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function hp(t,e){t.asyncQueue.verifyOperationInProgress(),ye("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await FC(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function dE(t,e){t.asyncQueue.verifyOperationInProgress();const r=await OK(t);ye("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>iE(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>iE(e.remoteStore,s)),t._onlineComponents=e}async function OK(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ye("FirestoreClient","Using user provided OfflineComponentProvider");try{await hp(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===te.FAILED_PRECONDITION||s.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Eu("Error using user provided cache. Falling back to memory cache: "+r),await hp(t,new em)}}else ye("FirestoreClient","Using default OfflineComponentProvider"),await hp(t,new em);return t._offlineComponents}async function sO(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ye("FirestoreClient","Using user provided OnlineComponentProvider"),await dE(t,t._uninitializedComponentsProvider._online)):(ye("FirestoreClient","Using default OnlineComponentProvider"),await dE(t,new Av))),t._onlineComponents}function NK(t){return sO(t).then(e=>e.syncEngine)}async function iO(t){const e=await sO(t),r=e.eventManager;return r.onListen=pK.bind(null,e.syncEngine),r.onUnlisten=_K.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=vK.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=xK.bind(null,e.syncEngine),r}function jK(t,e,r={}){const n=new Hi;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,d,h){const g=new nO({next:y=>{g.Za(),o.enqueueAndForget(()=>qC(i,v));const E=y.docs.has(c);!E&&y.fromCache?h.reject(new xe(te.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&y.fromCache&&d&&d.source==="server"?h.reject(new xe(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),v=new GC(B_(c.path),g,{includeMetadataChanges:!0,_a:!0});return YC(i,v)}(await iO(t),t.asyncQueue,e,r,n)),n.promise}function MK(t,e,r={}){const n=new Hi;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,d,h){const g=new nO({next:y=>{g.Za(),o.enqueueAndForget(()=>qC(i,v)),y.fromCache&&d.source==="server"?h.reject(new xe(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),v=new GC(c,g,{includeMetadataChanges:!0,_a:!0});return YC(i,v)}(await iO(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(t,e,r){if(!r)throw new xe(te.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function RK(t,e,r,n){if(e===!0&&n===!0)throw new xe(te.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function hE(t){if(!Ee.isDocumentKey(t))throw new xe(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function mE(t){if(Ee.isDocumentKey(t))throw new xe(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ix(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Pe()}function _o(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xe(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=ix(t);throw new xe(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new xe(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new xe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RK("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aO((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new xe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new xe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new xe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ug{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gE(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new QY;switch(n.type){case"firstParty":return new eq(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new xe(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=fE.get(r);n&&(ye("ComponentProvider","Removing Datastore"),fE.delete(r),n.terminate())}(this),Promise.resolve()}}function AK(t,e,r,n={}){var s;const i=(t=_o(t,ug))._getSettings(),o=`${e}:${r}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Eu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),n.mockUserToken){let c,d;if(typeof n.mockUserToken=="string")c=n.mockUserToken,d=Er.MOCK_USER;else{c=SW(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=n.mockUserToken.sub||n.mockUserToken.user_id;if(!h)throw new xe(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Er(h)}t._authCredentials=new XY(new nC(c,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new cg(this.firestore,e,this._query)}}class yn{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yn(this.firestore,e,this._key)}}class fo extends cg{constructor(e,r,n){super(e,r,B_(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yn(this.firestore,null,new Ee(e))}withConverter(e){return new fo(this.firestore,e,this._path)}}function Cu(t,e,...r){if(t=xn(t),oO("collection","path",e),t instanceof ug){const n=Et.fromString(e,...r);return mE(n),new fo(t,null,n)}{if(!(t instanceof yn||t instanceof fo))throw new xe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Et.fromString(e,...r));return mE(n),new fo(t.firestore,null,n)}}function Rt(t,e,...r){if(t=xn(t),arguments.length===1&&(e=sC.newId()),oO("doc","path",e),t instanceof ug){const n=Et.fromString(e,...r);return hE(n),new yn(t,null,new Ee(n))}{if(!(t instanceof yn||t instanceof fo))throw new xe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Et.fromString(e,...r));return hE(n),new yn(t.firestore,t instanceof fo?t.converter:null,new Ee(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new LC(this,"async_queue_retry"),this.Vu=()=>{const n=fp();n&&ye("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=fp();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=fp();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Hi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Kd(e))throw e;ye("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(n);throw ea("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=tx.createAndSchedule(this,e,r,n,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}class ef extends ug{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new pE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new pE(e),this._firestoreClient=void 0,await e}}}function FK(t,e){const r=typeof t=="object"?t:vI(),n=typeof t=="string"?t:"(default)",s=E_(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=DW("firestore");i&&AK(s,...i)}return s}function ax(t){if(t._terminated)throw new xe(te.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||kK(t),t._firestoreClient}function kK(t){var e,r,n;const s=t._freezeSettings(),i=function(c,d,h,g){return new hq(c,d,h,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,aO(g.experimentalLongPollingOptions),g.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new CK(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ou(mr.fromBase64String(e))}catch(r){throw new xe(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Ou(mr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new xe(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new xe(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new xe(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LK=/^__.*__$/;class VK{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new _l(e,this.data,this.fieldMask,r,this.fieldTransforms):new Qd(e,this.data,r,this.fieldTransforms)}}function lO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe()}}class dx{constructor(e,r,n,s,i,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new dx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return tm(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(lO(this.Cu)&&LK.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class zK{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||ag(e)}Qu(e,r,n,s=!1){return new dx({Cu:e,methodName:r,qu:n,path:cr.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function UK(t){const e=t._freezeSettings(),r=ag(t._databaseId);return new zK(t._databaseId,!!e.ignoreUndefinedProperties,r)}function BK(t,e,r,n,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,r,s);fO("Data must be an object, but it was:",o,n);const c=cO(n,o);let d,h;if(i.merge)d=new ms(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const g=[];for(const v of i.mergeFields){const y=WK(e,v,r);if(!o.contains(y))throw new xe(te.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);HK(g,y)||g.push(y)}d=new ms(g),h=o.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,h=o.fieldTransforms;return new VK(new Ln(c),d,h)}class fx extends lx{_toFieldTransform(e){return new Vq(e.path,new _d)}isEqual(e){return e instanceof fx}}function uO(t,e){if(dO(t=xn(t)))return fO("Unsupported field value:",e,t),cO(t,e);if(t instanceof lx)return function(n,s){if(!lO(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const i=[];let o=0;for(const c of n){let d=uO(c,s.Lu(o));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),o++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=xn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Fq(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Qt.fromDate(n);return{timestampValue:Jh(s.serializer,i)}}if(n instanceof Qt){const i=new Qt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Jh(s.serializer,i)}}if(n instanceof ux)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ou)return{bytesValue:CC(s.serializer,n._byteString)};if(n instanceof yn){const i=s.databaseId,o=n.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:q_(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof cx)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw c.Bu("VectorValues must only contain numeric values.");return W_(c.serializer,d)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${ix(n)}`)}(t,e)}function cO(t,e){const r={};return iC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bu(t,(n,s)=>{const i=uO(s,e.Mu(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function dO(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qt||t instanceof ux||t instanceof Ou||t instanceof yn||t instanceof lx||t instanceof cx)}function fO(t,e,r){if(!dO(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=ix(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function WK(t,e,r){if((e=xn(e))instanceof ox)return e._internalPath;if(typeof e=="string")return hO(t,e);throw tm("Field path arguments must be of type string or ",t,!1,void 0,r)}const $K=new RegExp("[~\\*/\\[\\]]");function hO(t,e,r){if(e.search($K)>=0)throw tm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new ox(...e.split("."))._internalPath}catch{throw tm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function tm(t,e,r,n,s){const i=n&&!n.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(i||o)&&(d+=" (found",i&&(d+=` in field ${n}`),o&&(d+=` in document ${s}`),d+=")"),new xe(te.INVALID_ARGUMENT,c+t+d)}function HK(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new YK(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(gO("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class YK extends mO{data(){return super.data()}}function gO(t,e){return typeof e=="string"?hO(t,e):e instanceof ox?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qK(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new xe(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class GK{convertValue(e,r="none"){switch(dl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(cl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Bu(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(o=>Vt(o.doubleValue));return new cx(i)}convertGeoPoint(e){return new ux(Vt(e.latitude),Vt(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=L_(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(pd(e));default:return null}}convertTimestamp(e){const r=vo(e);return new Qt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Et.fromString(e);nt(AC(n));const s=new vd(n.get(1),n.get(3)),i=new Ee(n.popFirst(5));return s.isEqual(r)||ea(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KK(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pO extends mO{constructor(e,r,n,s,i,o){super(e,r,n,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new uh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(gO("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class uh extends pO{data(e={}){return super.data(e)}}class QK{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new jc(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new uh(this._firestore,this._userDataWriter,n.key,n,new jc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new xe(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const d=new uh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new jc(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const d=new uh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new jc(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,g=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),g=o.indexOf(c.doc.key)),{type:XK(c.type),doc:d,oldIndex:h,newIndex:g}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function XK(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(t){t=_o(t,yn);const e=_o(t.firestore,ef);return jK(ax(e),t._key).then(r=>JK(e,t,r))}class vO extends GK{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ou(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new yn(this.firestore,null,r)}}function Nu(t){t=_o(t,cg);const e=_o(t.firestore,ef),r=ax(e),n=new vO(e);return qK(t._query),MK(r,t._query).then(s=>new QK(e,n,t,s))}function Dr(t,e,r){t=_o(t,yn);const n=_o(t.firestore,ef),s=KK(t.converter,e,r);return yO(n,[BK(UK(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Zs.none())])}function tf(t){return yO(_o(t.firestore,ef),[new $_(t._key,Zs.none())])}function yO(t,e){return function(n,s){const i=new Hi;return n.asyncQueue.enqueueAndForget(async()=>wK(await NK(n),s,i)),i.promise}(ax(t),e)}function JK(t,e,r){const n=r.docs.get(e._key),s=new vO(t);return new pO(t,s,e._key,n,new jc(r.hasPendingWrites,r.fromCache),e.converter)}function Tr(){return new fx("serverTimestamp")}(function(e,r=!0){(function(s){Uu=s})(Vu),wu(new ol("firestore",(n,{instanceIdentifier:s,options:i})=>{const o=n.getProvider("app").getImmediate(),c=new ef(new JY(n.getProvider("auth-internal")),new rq(n.getProvider("app-check-internal")),function(h,g){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new xe(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vd(h.options.projectId,g)}(o,s),o);return i=Object.assign({useFetchStreams:r},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),co(A1,"4.7.3",e),co(A1,"4.7.3","esm2017")})();var ZK="firebase",eQ="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */co(ZK,eQ,"app");const tQ={apiKey:"AIzaSyCHmU0EO6DOV8Vr30TdWwRhDuiVm2_JtZg",authDomain:"travel-planner-f39cd.firebaseapp.com",projectId:"travel-planner-f39cd",storageBucket:"travel-planner-f39cd.firebasestorage.app",messagingSenderId:"468788845614",appId:"1:468788845614:web:8e628a48c20ce6c9da53bf"},_O=pI(tQ),mp=GY(_O),rQ=new Fi,ot=FK(_O),xO=z.createContext({}),fa=()=>{const t=z.useContext(xO);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},nQ=({children:t})=>{const[e,r]=z.useState(null),[n,s]=z.useState(!0),[i,o]=z.useState(null),c=async v=>{try{const y=await rm(Rt(ot,"users",v,"profile","migration"));if(y.exists()&&y.data().completed){console.log("Data already migrated for this user");return}console.log("Starting localStorage migration...");const E=localStorage.getItem("travelPlanner_trips"),N=localStorage.getItem("travelPlanner_currentTrip"),D=localStorage.getItem("travelPlanner_dailyPlans"),k=localStorage.getItem("travelPlanner_flights"),S=localStorage.getItem("travelPlanner_expenses");if(E||D||k||S){const P=E?JSON.parse(E):[],C=D?JSON.parse(D):[],R=k?JSON.parse(k):[],Y=S?JSON.parse(S):[],q=N?JSON.parse(N):null;for(const T of P)await Dr(Rt(ot,"users",v,"trips",T.id.toString()),{...T,createdAt:Tr()});q&&await Dr(Rt(ot,"users",v,"profile","currentTrip"),{tripId:q.id,updatedAt:Tr()});for(const T of C)await Dr(Rt(ot,"users",v,"dailyPlans",T.id.toString()),{...T,createdAt:Tr()});for(const T of R)await Dr(Rt(ot,"users",v,"flights",T.id.toString()),{...T,createdAt:Tr()});for(const T of Y)await Dr(Rt(ot,"users",v,"expenses",T.id.toString()),{...T,createdAt:Tr()});console.log("Migration completed successfully!")}await Dr(Rt(ot,"users",v,"profile","migration"),{completed:!0,migratedAt:Tr()})}catch(y){throw console.error("Error migrating localStorage data:",y),y}},d=async()=>{try{o(null),s(!0);const v=await nY(mp,rQ),y=v.user,E=Rt(ot,"users",y.uid,"profile","info");(await rm(E)).exists()?await Dr(E,{lastLoginAt:Tr()},{merge:!0}):(await Dr(E,{email:y.email,displayName:y.displayName,photoURL:y.photoURL,createdAt:Tr()}),await c(y.uid));try{typeof window<"u"&&localStorage.setItem("showSetupOnLogin","1")}catch(D){console.warn("Could not set showSetupOnLogin flag in localStorage",D)}return v}catch(v){throw console.error("Error signing in with Google:",v),o(v.message),v}finally{s(!1)}},h=async()=>{try{o(null),await kH(mp)}catch(v){throw console.error("Error signing out:",v),o(v.message),v}};z.useEffect(()=>FH(mp,y=>{r(y),s(!1)}),[]);const g={currentUser:e,loading:n,error:i,signInWithGoogle:d,signOut:h};return u.jsx(xO.Provider,{value:g,children:t})},hx=()=>{const{currentUser:t}=fa(),[e,r]=z.useState([]),[n,s]=z.useState(!0),[i,o]=z.useState(null);z.useEffect(()=>{if(!t){r([]),s(!1);return}c()},[t]);const c=async()=>{try{s(!0);const g=Cu(ot,"users",t.uid,"trips"),y=(await Nu(g)).docs.map(E=>({...E.data(),id:parseInt(E.id)}));r(y),o(null)}catch(g){console.error("Error loading trips:",g),o(g.message)}finally{s(!1)}};return{trips:e,loading:n,error:i,saveTrip:async g=>{try{await Dr(Rt(ot,"users",t.uid,"trips",g.id.toString()),{...g,updatedAt:Tr()}),await c()}catch(v){throw console.error("Error saving trip:",v),v}},deleteTrip:async g=>{try{await tf(Rt(ot,"users",t.uid,"trips",g.toString())),await c()}catch(v){throw console.error("Error deleting trip:",v),v}},reloadTrips:c}},mx=()=>{const{currentUser:t}=fa(),[e,r]=z.useState(null),[n,s]=z.useState(!0);z.useEffect(()=>{if(!t){r(null),s(!1);return}i()},[t]);const i=async()=>{try{s(!0);const c=Rt(ot,"users",t.uid,"profile","currentTrip"),d=await rm(c);if(d.exists()){const h=d.data().tripId;if(!h){r(null);return}const g=Rt(ot,"users",t.uid,"trips",h.toString()),v=await rm(g);v.exists()?r({...v.data(),id:parseInt(v.id)}):r(null)}else r(null)}catch(c){console.error("Error loading current trip:",c),r(null)}finally{s(!1)}};return{currentTrip:e,loading:n,saveCurrentTrip:async c=>{try{await Dr(Rt(ot,"users",t.uid,"profile","currentTrip"),{tripId:c.id,updatedAt:Tr()}),r(c)}catch(d){throw console.error("Error saving current trip:",d),d}},reloadCurrentTrip:i}},sQ=()=>{const{currentUser:t}=fa(),[e,r]=z.useState([]),[n,s]=z.useState(!0);z.useEffect(()=>{if(!t){r([]),s(!1);return}i()},[t]);const i=async()=>{try{s(!0);const d=Cu(ot,"users",t.uid,"flights"),g=(await Nu(d)).docs.map(v=>({...v.data(),id:parseInt(v.id)}));r(g)}catch(d){console.error("Error loading flights:",d)}finally{s(!1)}};return{flights:e,loading:n,saveFlight:async d=>{try{await Dr(Rt(ot,"users",t.uid,"flights",d.id.toString()),{...d,updatedAt:Tr()}),await i()}catch(h){throw console.error("Error saving flight:",h),h}},deleteFlight:async d=>{try{await tf(Rt(ot,"users",t.uid,"flights",d.toString())),await i()}catch(h){throw console.error("Error deleting flight:",h),h}},setFlights:r,reloadFlights:i}},iQ=()=>{const{currentUser:t}=fa(),[e,r]=z.useState([]),[n,s]=z.useState(!0);z.useEffect(()=>{if(!t){r([]),s(!1);return}i()},[t]);const i=async()=>{try{s(!0);const d=Cu(ot,"users",t.uid,"hotels"),g=(await Nu(d)).docs.map(v=>({...v.data(),id:parseInt(v.id)}));r(g)}catch(d){console.error("Error loading hotels:",d)}finally{s(!1)}};return{hotels:e,loading:n,saveHotel:async d=>{try{await Dr(Rt(ot,"users",t.uid,"hotels",d.id.toString()),{...d,updatedAt:Tr()}),await i()}catch(h){throw console.error("Error saving hotel:",h),h}},deleteHotel:async d=>{try{await tf(Rt(ot,"users",t.uid,"hotels",d.toString())),await i()}catch(h){throw console.error("Error deleting hotel:",h),h}},setHotels:r,reloadHotels:i}},wO=()=>{const{currentUser:t}=fa(),[e,r]=z.useState([]),[n,s]=z.useState(!0);z.useEffect(()=>{if(!t){r([]),s(!1);return}i()},[t]);const i=async()=>{try{s(!0);const h=Cu(ot,"users",t.uid,"dailyPlans"),v=(await Nu(h)).docs.map(y=>({...y.data(),id:parseInt(y.id)}));v.sort((y,E)=>new Date(y.date)-new Date(E.date)),r(v)}catch(h){console.error("Error loading daily plans:",h)}finally{s(!1)}};return{dailyPlans:e,loading:n,saveDailyPlan:async h=>{try{await Dr(Rt(ot,"users",t.uid,"dailyPlans",h.id.toString()),{...h,updatedAt:Tr()})}catch(g){throw console.error("Error saving daily plan:",g),g}},saveDailyPlans:async h=>{try{const g=h.map(v=>Dr(Rt(ot,"users",t.uid,"dailyPlans",v.id.toString()),{...v,updatedAt:Tr()}));await Promise.all(g)}catch(g){throw console.error("Error saving daily plans:",g),g}},replaceDailyPlans:async h=>{try{const g=Cu(ot,"users",t.uid,"dailyPlans"),v=await Nu(g),y=new Set(h.map(D=>D.id.toString())),E=v.docs.filter(D=>!y.has(D.id)).map(D=>tf(D.ref)),N=h.map(D=>Dr(Rt(ot,"users",t.uid,"dailyPlans",D.id.toString()),{...D,updatedAt:Tr()}));await Promise.all([...E,...N]),await i()}catch(g){throw console.error("Error replacing daily plans:",g),g}},setDailyPlans:r,reloadDailyPlans:i}},bO=()=>{const{currentUser:t}=fa(),[e,r]=z.useState([]),[n,s]=z.useState(!0);z.useEffect(()=>{if(!t){r([]),s(!1);return}i()},[t]);const i=async()=>{try{s(!0);const d=Cu(ot,"users",t.uid,"expenses"),g=(await Nu(d)).docs.map(v=>({...v.data(),id:parseInt(v.id)}));r(g)}catch(d){console.error("Error loading expenses:",d)}finally{s(!1)}};return{expenses:e,loading:n,saveExpense:async d=>{try{await Dr(Rt(ot,"users",t.uid,"expenses",d.id.toString()),{...d,updatedAt:Tr()}),await i()}catch(h){throw console.error("Error saving expense:",h),h}},deleteExpense:async d=>{try{await tf(Rt(ot,"users",t.uid,"expenses",d.toString())),await i()}catch(h){throw console.error("Error deleting expense:",h),h}},setExpenses:r,reloadExpenses:i}},Fv={Switzerland:["Zurich","Geneva","Basel","Lausanne","Bern","Winterthur","Lucerne","St. Gallen","Lugano","Biel/Bienne","Thun","Kniz","La Chaux-de-Fonds","Schaffhausen","Fribourg","Vernier","Chur","Neuchtel","Uster","Sion","Emmen","Zug","Yverdon-les-Bains","Kriens","Rapperswil-Jona","Dbendorf","Montreux","Frauenfeld","Dietikon","Wetzikon","Interlaken","Zermatt","Grindelwald","Lauterbrunnen","Wengen","Murren","Locarno","Ascona","Bellinzona","Davos","St. Moritz","Arosa","Engelberg","Andermatt"],Italy:["Rome","Milan","Naples","Turin","Palermo","Genoa","Bologna","Florence","Bari","Catania","Venice","Verona","Messina","Padua","Trieste","Brescia","Taranto","Prato","Parma","Modena","Reggio Calabria","Reggio Emilia","Perugia","Livorno","Ravenna","Cagliari","Foggia","Rimini","Salerno","Ferrara","Sassari","Latina","Giugliano in Campania","Monza","Syracuse","Pescara","Bergamo","Forl","Trento","Vicenza","Terni","Bolzano","Novara","Piacenza","Ancona","Andria","Arezzo","Udine","Cesena","Lecce","Pisa","Siena","Lucca","Como","La Spezia","Varese","Sorrento","Amalfi","Positano","Capri","Portofino","Cinque Terre","Matera","Assisi","Siracusa","Taormina","Pompeii","Pienza","San Gimignano","Orvieto"],France:["Paris","Marseille","Lyon","Toulouse","Nice","Nantes","Strasbourg","Montpellier","Bordeaux","Lille","Rennes","Reims","Le Havre","Saint-tienne","Toulon","Grenoble","Dijon","Angers","Nmes","Villeurbanne","Saint-Denis","Le Mans","Aix-en-Provence","Clermont-Ferrand","Brest","Tours","Amiens","Limoges","Annecy","Perpignan","Boulogne-Billancourt","Metz","Besanon","Orlans","Saint-Denis","Argenteuil","Rouen","Mulhouse","Montreuil","Caen","Nancy","Avignon","Cannes","Antibes","Saint-Tropez","Monaco","Versailles","Colmar","Chamonix","Annecy","Carcassonne","Arles","Aix-les-Bains","Menton","Grasse","Saint-Malo","La Rochelle","Biarritz","Lourdes","Mont-Saint-Michel","Giverny","Fontainebleau","Chartres","Beaune","pernay","Reims","Troyes"]},aQ=(t=null)=>!t||t.length===0?Object.entries(Fv).flatMap(([e,r])=>r.map(n=>({city:n,country:e}))):Object.entries(Fv).filter(([e])=>t.includes(e)).flatMap(([e,r])=>r.map(n=>({city:n,country:e}))),vE=(t,e=400)=>{if(!t||t.length===0)return null;const r=t[0];return r.createMediaUrl?r.createMediaUrl({maxHeight:e,maxWidth:e}):r.getURI?r.getURI({maxHeight:e,maxWidth:e}):r.getUrl?r.getUrl({maxWidth:e,maxHeight:e}):null},EO=(t,e="")=>{const r={EUR:"",USD:"$",GBP:"",CHF:"CHF",BRL:"R$",CAD:"$",AUD:"$",JPY:""};return t?r[t]||t:e},$l=t=>{if(!t)return"";const e=String(t).toUpperCase(),r=e.match(/\b(USD|EUR|GBP|CHF|BRL|CAD|AUD|JPY|CNY|MXN|ARS|CLP|INR)\b/);return r?r[1]:e.includes("R$")?"BRL":e.includes("CHF")?"CHF":e.includes("")?"EUR":e.includes("")?"GBP":e.includes("$")?"USD":""},or=t=>{if(typeof t=="number")return Number.isFinite(t)?t:0;if(!t)return 0;const e=String(t).replace(/[^0-9.,-]/g,"").trim();if(!e)return 0;const r=e.includes(","),n=e.includes(".");let s=e;if(r&&!n)s=e.replace(/\./g,"").replace(",",".");else if(r&&n){const o=e.lastIndexOf(","),c=e.lastIndexOf(".");o>c?s=e.replace(/\./g,"").replace(",","."):s=e.replace(/,/g,"")}else s=e;const i=parseFloat(s);return Number.isFinite(i)?i:0},oQ=(t="")=>{const e=String(t).split(",").map(n=>n.trim()).filter(Boolean),r=e.length;return{city:r>=3?e[r-3]:"",state:r>=2?e[r-2]:"",country:r>=1?e[r-1]:""}},Uf=(t={})=>{const e=oQ(t.address||"");return{city:t.city||e.city||"",state:t.state||e.state||"",country:t.country||e.country||""}},yE=(t=[])=>{const e=i=>{const o=t.find(c=>i.every(d=>{var h;return(h=c.types)==null?void 0:h.includes(d)}));return(o==null?void 0:o.longText)||(o==null?void 0:o.long_name)||""},r=e(["locality"])||e(["postal_town"])||e(["administrative_area_level_2"]),n=e(["administrative_area_level_1"]),s=e(["country"]);return{city:r,state:n,country:s}},Ao=t=>{if(!t)return"";const e=String(t);if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const r=new Date(e);return Number.isNaN(r.getTime())?e:formatDateLocal(r)},_E={EUR:1,USD:.92,GBP:1.17,CHF:1.03,BRL:.18,CAD:.67,AUD:.61,JPY:.0061},gp=(t,e)=>{const r=e||$l(t)||"",n=or(t);if(n>0){const s=EO(r,""),i=`${n.toFixed(2)}`;return`${s}${i}${r?` ${r}`:""}`.trim()}return t||""},lQ=(t,e=16,r="")=>{switch(t){case"restaurant":return u.jsx(Bo,{size:e,className:r});case"cafe":return u.jsx(Uo,{size:e,className:r});case"activity":return u.jsx(zo,{size:e,className:r});case"note":return u.jsx(Ai,{size:e,className:r});default:return u.jsx(Vo,{size:e,className:r})}},Bf=t=>t&&t!=="place",Ho=t=>{if(!t||typeof t!="string")return"";const[e,r]=t.split(":"),n=parseInt(e,10);return Number.isNaN(n)||!r?t:`${n}:${r.padStart(2,"0")}`},xE=(t,e)=>{const r=Ho(t),n=Ho(e);return r&&n?`${r} - ${n}`:""},wE=t=>{if(!t||typeof t!="string"||!t.includes(":"))return{hour:0,minute:0};const[e,r]=t.split(":").map(Number);return{hour:Number.isNaN(e)?0:e,minute:Number.isNaN(r)?0:r}},bE=(t,e)=>{const r=String(Math.max(0,Math.min(23,t))).padStart(2,"0"),n=String(Math.max(0,Math.min(59,e))).padStart(2,"0");return`${r}:${n}`},pp=(t=[])=>{const e={walking:0,car:0,transit:0,plane:0};return t.forEach(r=>{const n=parseFloat(r.distance||0);if(!Number.isFinite(n)||n<=0)return;const s=r.transportMode;if(s==="car"){e.car+=n;return}if(s==="transit"||s==="bus"||s==="metro"||s==="train"){e.transit+=n;return}if(s==="plane"){e.plane+=n;return}s==="walking"&&(e.walking+=n)}),e.all=Object.values(e).reduce((r,n)=>typeof n=="number"?r+n:r,0),e},EE=({initialTrip:t=null,onExitTrip:e=()=>{},onEnterDayMode:r=()=>{}})=>{var Pl,Il,Cl,Ol,Nl,jl,Ml;const{currentUser:n,signOut:s}=fa(),{saveTrip:i}=hx(),{currentTrip:o,saveCurrentTrip:c}=mx(),{flights:d,loading:h,saveFlight:g,deleteFlight:v}=sQ(),{hotels:y,saveHotel:E,deleteHotel:N}=iQ(),{dailyPlans:D,loading:k,saveDailyPlans:S,replaceDailyPlans:P,setDailyPlans:C}=wO(),{expenses:R,loading:Y,saveExpense:q,deleteExpense:T}=bO(),[b,I]=z.useState("itinerary"),[j,M]=z.useState(!1),[V,O]=z.useState(!1),[et,tt]=z.useState(!1),[le,Oe]=z.useState(null),[ee,de]=z.useState(!1),[ue,De]=z.useState(null),[X,G]=z.useState(null),[B,F]=z.useState({top:0,left:0}),[K,ae]=z.useState(null),[ge,pe]=z.useState(null),[ve,Te]=z.useState(null),[je,Ne]=z.useState({top:0,left:0}),[Me,lt]=z.useState("AIzaSyBFY-pyT3UnUN5bWc_G82xltZ7bqxInCo0"),xt="8ceaca4f71482b3a74e1f404".trim(),[Ht,Ur]=z.useState(!1),[xs,Br]=z.useState(!1),[Or,nn]=z.useState(""),[En,Wr]=z.useState([]),[ws,wt]=z.useState(!1),[ft,sn]=z.useState(null),[ha,$n]=z.useState(!1),[bs,Nr]=z.useState(null),[an,Es]=z.useState({}),[Dn,oi]=z.useState(""),[Ds,Hn]=z.useState(""),[ma,Yn]=z.useState(!1),[qn,Tn]=z.useState(!1),[li,$r]=z.useState(!1),[ga,Sn]=z.useState(!1),[pa,on]=z.useState(!1),[Gn,Ot]=z.useState([{startDate:new Date,endDate:new Date,key:"selection"}]),[va,pr]=z.useState(!1),[Kn,ya]=z.useState(!1),ui=z.useRef(null),Hr=z.useRef(null),ci=z.useRef(null),_a=z.useRef(null),Qn=z.useRef(null),di=z.useRef(null),Ts=z.useRef(new Map),Yr=z.useRef(new Map),[vr,Xn]=z.useState(null),[Ss,Jn]=z.useState(null),[fi,Ps]=z.useState(!1),[hi,xa]=z.useState(""),[Ue,qr]=z.useState({name:"",startDate:"",endDate:""}),Yt=(Me||"AIzaSyBFY-pyT3UnUN5bWc_G82xltZ7bqxInCo0").trim(),_e=z.useMemo(()=>D.find(f=>f.id===le),[D,le]),Zt=z.useMemo(()=>{if(!_e)return[];const f=Ao(_e.date);return d.filter(w=>{const _=Ao(w.departureDate||w.date),A=Ao(w.arrivalDate);return _===f||A===f})},[d,_e]),Is=f=>{const w=_a.current;if(!w)return;const _=w.clientWidth*.8;w.scrollBy({left:f==="left"?-_:_,behavior:"smooth"})},mi=z.useMemo(()=>{const f=((_e==null?void 0:_e.places)||[]).map(_=>({id:_.id,address:_.address,location:_.location?{lat:_.location.lat,lng:_.location.lng}:null,transportMode:_.transportMode})),w=Zt.map(_=>({id:_.id,from:_.from,to:_.to}));return JSON.stringify({day:_e==null?void 0:_e.id,placesKey:f,flightsKey:w})},[_e,Zt]),Cs=f=>{var A,L,W;if(!f)return;const w=_e==null?void 0:_e.places.findIndex(Z=>Z.id===f);if(w===-1||w===void 0)return;Nt||os(!0);const _=Ar.current[w];if(_&&((L=(A=window.google)==null?void 0:A.maps)!=null&&L.event)){window.google.maps.event.trigger(_,"click");const Z=_.position||(typeof _.getPosition=="function"?_.getPosition():null);Z&&((W=ct.current)!=null&&W.panTo)&&ct.current.panTo(Z),Xn(null)}else Xn({placeId:f,markerIndex:w})},Os=(f,w)=>`${f}-${w.toLowerCase()}`,wa=f=>{var W,Z,oe;if(!f)return;Nt||os(!0);const w=f.to?"Arrival":f.from?"Departure":null,_=f.from?"Departure":null,A=Os(f.id,w)||(_?Os(f.id,_):null);if(!A)return;const L=Yr.current.get(A);if(L&&((Z=(W=window.google)==null?void 0:W.maps)!=null&&Z.event)){window.google.maps.event.trigger(L,"click");const J=L.position||(typeof L.getPosition=="function"?L.getPosition():null);J&&((oe=ct.current)!=null&&oe.panTo)&&ct.current.panTo(J),Jn(null)}else Jn(A)};z.useEffect(()=>{!o&&t&&c(t).catch(f=>{console.error("Failed to save initial trip from TravelPlanner:",f)})},[t,o,c]),z.useEffect(()=>{const f="AIzaSyBFY-pyT3UnUN5bWc_G82xltZ7bqxInCo0".trim();f&&f!==Me&&lt(f)},[Me]),z.useEffect(()=>{const f=w=>{Hr.current&&!Hr.current.contains(w.target)&&de(!1)};return ee&&document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[ee]),z.useEffect(()=>{const f=w=>{ci.current&&!ci.current.contains(w.target)&&Nr(null)};return bs!==null&&document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[bs]),z.useEffect(()=>{if(!ve)return;const f=w=>{const _=typeof w.composedPath=="function"?w.composedPath():[],A=Qn.current,L=di.current,W=A&&(A.contains(w.target)||_.includes(A)),Z=L&&(L.contains(w.target)||_.includes(L));W||Z||Te(null)};return document.addEventListener("pointerdown",f),()=>document.removeEventListener("pointerdown",f)},[ve]),z.useEffect(()=>{var f,w,_;if(le&&_e&&!an[le]){const A=((f=_e.places)==null?void 0:f.length)||0,L=pp(_e.places),W=L.all||0,Z=((w=_e.places)==null?void 0:w.reduce((H,ce)=>H+parseFloat(ce.transportTime||0),0))||0,oe=((_=_e.places)==null?void 0:_.reduce((H,ce)=>H+(parseFloat(ce.cost||0)||0),0))||0,J=R.filter(H=>H.dayId===le).reduce((H,ce)=>H+(parseFloat(ce.amount||0)||0),0)||0,a=oe+J;Es(H=>({...H,[le]:{totalStops:A,totalDistance:W,totalTime:Z,totalCost:a,distanceByMode:L}}))}},[le,_e,an,R]),z.useEffect(()=>{var W;if(!le||!_e)return;const f=((W=_e.places)==null?void 0:W.reduce((Z,oe)=>Z+(parseFloat(oe.cost||0)||0),0))||0,w=pp(_e.places),_=w.all||0,A=R.filter(Z=>Z.dayId===le).reduce((Z,oe)=>Z+(parseFloat(oe.amount||0)||0),0)||0,L=f+A;Es(Z=>{const oe=Z[le];return!oe||oe.totalCost===L&&oe.totalDistance===_?Z:{...Z,[le]:{...oe,totalCost:L,totalDistance:_,distanceByMode:w}}})},[R,le,_e]),z.useEffect(()=>{const f=setTimeout(()=>{var w,_;if(le&&_e){const A=((w=_e.places)==null?void 0:w.length)||0,L=pp(_e.places),W=L.all||0,Z=((_=_e.places)==null?void 0:_.reduce((oe,J)=>oe+parseFloat(J.transportTime||0),0))||0;Es(oe=>({...oe,[le]:{...oe[le],totalStops:A,totalDistance:W,totalTime:Z,distanceByMode:L}}))}},3e3);return()=>clearTimeout(f)},[le,_e,_e==null?void 0:_e.places]),z.useEffect(()=>{o&&D.length===0&&!k&&(async()=>{const w=[],_=Le(o.startDate),A=Le(o.endDate);let L=new Date(_),W=1;for(;L<=A;){const Z=Ze(L);w.push({id:W++,date:Z,title:"",city:"",country:"",places:[]}),L.setDate(L.getDate()+1)}try{await P(w),w.length>0&&Oe(w[0].id)}catch(Z){console.error("Failed to generate daily plans:",Z)}})()},[o,D.length,k]),z.useEffect(()=>{D&&D.length>0&&!le&&Oe(D[0].id)},[D,le]),z.useEffect(()=>{var oe,J;if(!o||k||D.length===0)return;const f=Le(o.startDate),w=Le(o.endDate),_=Ze(f),A=Ze(w),L=Math.floor((w-f)/(1e3*60*60*24))+1,W=(oe=D[0])==null?void 0:oe.date,Z=(J=D[D.length-1])==null?void 0:J.date;if(W!==_||Z!==A||D.length!==L){const a=new Map(D.map(Ae=>[Ae.date,Ae])),H=[];let ce=new Date(f),Re=1;for(;ce<=w;){const Ae=Ze(ce),Ve=a.get(Ae);H.push({id:Re++,date:Ae,title:(Ve==null?void 0:Ve.title)||"",city:(Ve==null?void 0:Ve.city)||"",country:(Ve==null?void 0:Ve.country)||"",places:(Ve==null?void 0:Ve.places)||[]}),ce.setDate(ce.getDate()+1)}P(H).then(()=>{H.length>0&&Oe(H[0].id)}).catch(Ae=>{console.error("Failed to realign daily plans with trip dates:",Ae)})}},[o,k,D]);const[he,ut]=z.useState({airline:"",flightNumber:"",from:"",to:"",departureDate:"",arrivalDate:"",date:"",departureTime:"",arrivalTime:"",bookingRef:"",price:"",priceCurrency:"USD",isRoundTrip:!1,returnDate:"",returnDepartureTime:"",returnArrivalTime:""}),[Je,Ut]=z.useState({name:"",address:"",city:"",state:"",country:"",checkIn:"",checkOut:"",price:"",priceCurrency:"USD"}),[Pn,ba]=z.useState("manual"),[Ns,gi]=z.useState(null),[Ea,jr]=z.useState(""),[Mr,In]=z.useState(!1),[Zn,js]=z.useState(""),[$e,es]=z.useState(null),[yr,Cn]=z.useState("manual"),[pi,Ms]=z.useState(null),[Da,Rs]=z.useState(""),[To,vi]=z.useState(!1),[On,sr]=z.useState(""),[yi,As]=z.useState([]),[_i,Gr]=z.useState({name:"",address:"",placeId:"",location:null,city:"",state:"",country:"",photoUrl:"",notes:"",transportMode:"walking",transportTime:"",distance:"",startTime:"",endTime:"",priority:0,metroStation:"",metroLine:"",visited:!1}),[gt,_r]=z.useState({description:"",amount:"",category:"food",date:"",city:"",country:"",currency:"USD"}),[Ta,Kr]=z.useState("category"),[Fs,Sa]=z.useState("EUR"),ln=(f={})=>({airline:f.airline||"",flightNumber:f.flightNumber||"",from:f.from||"",to:f.to||"",departureDate:f.departureDate||f.date||"",arrivalDate:f.arrivalDate||"",date:f.date||f.departureDate||"",departureTime:f.departureTime||"",arrivalTime:f.arrivalTime||"",bookingRef:f.bookingRef||"",price:f.price||f.value||"",priceCurrency:f.priceCurrency||f.currency||$l(f.price||f.value)||"USD",segments:f.segments||[]}),ts=f=>new Promise((w,_)=>{const A=new FileReader;A.onload=()=>{const L=A.result;if(typeof L=="string"){const[,W]=L.split(",");w(W||"")}else _(new Error("Unsupported file encoding"))},A.onerror=()=>_(new Error("Unable to read file. Please try again.")),A.readAsDataURL(f)}),xi=(f="")=>{try{return JSON.parse(f)}catch{const _=f.match(/{[\s\S]*}/);if(_)try{return JSON.parse(_[0])}catch(A){console.error("Gemini JSON parse failed:",A)}}return null},rs=async({base64Data:f,mimeType:w})=>{var H,ce,Re,Ae;const _="AIzaSyAOPK1oEj4SrtvBfYRw904Pwv85UX_2tWI".trim();if(!_)throw new Error("Add VITE_GEMINI_API_KEY in your env to enable file/image extraction with Gemini.");const A="gemini-2.5-flash-lite".trim(),L="v1".trim(),Z=await fetch(`https://generativelanguage.googleapis.com/${L}/models/${A}:generateContent?key=${_}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:'Extract flight details from this ticket. Support round trips. Return ONLY a JSON object. Keys: airline, flightNumber, bookingRef, price, priceCurrency. Include "segments" as an array; each segment object must have from, to, departureDate (YYYY-MM-DD), arrivalDate (YYYY-MM-DD), departureTime (24h HH:MM), arrivalTime (24h HH:MM). If it is round trip, include two segments (outbound first, return second). Use empty strings when data is missing.'},{inline_data:{mime_type:w||"application/octet-stream",data:f}}]}]})});if(!Z.ok){const Ve=await Z.text();throw new Error(`Gemini request failed (${Z.status}): ${Ve||"Unknown error"}`)}const J=((Ae=(Re=(ce=(H=(await Z.json()).candidates)==null?void 0:H[0])==null?void 0:ce.content)==null?void 0:Re.parts)==null?void 0:Ae.map(Ve=>Ve.text||"").join(`
`))||"",a=xi(J);if(!a)throw new Error("Gemini responded but no flight details were parsed.");return ln(a)},Nn=async f=>{var w;if(f){gi({name:f.name,type:f.type||"unknown",size:f.size}),js(""),In(!0),(w=f.type)!=null&&w.startsWith("image/")?jr(URL.createObjectURL(f)):jr("");try{const _=await ts(f),A=await rs({base64Data:_,mimeType:f.type}),L=Array.isArray(A.segments)?A.segments:[];if(L.length>=2){const W=ln({...A,...L[0]}),Z=ln({...A,...L[1]});ut(oe=>({...oe,...W,isRoundTrip:!0,returnDate:Z.departureDate||Z.date||"",returnDepartureTime:Z.departureTime||"",returnArrivalTime:Z.arrivalTime||"",to:W.to||Z.from||oe.to,from:W.from||oe.from}))}else{const W=ln(A);ut(Z=>({...Z,...W,isRoundTrip:!1,returnDate:"",returnDepartureTime:"",returnArrivalTime:""}))}}catch(_){console.error("Flight extraction failed:",_),js(_.message||"Unable to extract details. Please fill the form manually.")}finally{In(!1)}}},Pa=async f=>{var A;if(Pn!=="image")return;const w=(A=f.clipboardData)==null?void 0:A.items;if(!w)return;const _=Array.from(w).find(L=>L.type.startsWith("image/"));if(_){f.preventDefault();const L=_.getAsFile();L&&await Nn(L)}},un=()=>{ut({airline:"",flightNumber:"",from:"",to:"",departureDate:"",arrivalDate:"",date:"",departureTime:"",arrivalTime:"",bookingRef:"",price:"",priceCurrency:"USD",isRoundTrip:!1,returnDate:"",returnDepartureTime:"",returnArrivalTime:""}),gi(null),jr(""),js(""),In(!1),ba("manual"),es(null)},it=async()=>{try{if($e){const A={id:$e,...he,date:he.departureDate||he.date||""};await g(A),un(),M(!1);return}const f=Date.now(),w={id:f,...he,date:he.departureDate||he.date||"",groupId:he.isRoundTrip?f:null,leg:"outbound"},_=he.isRoundTrip&&he.returnDate?{...he,id:f+1,airline:he.airline,flightNumber:`${he.flightNumber||""}`.trim()?`${he.flightNumber}-R`:"",from:he.to,to:he.from,departureDate:he.returnDate,arrivalDate:he.returnDate,date:he.returnDate,departureTime:he.returnDepartureTime,arrivalTime:he.returnArrivalTime,bookingRef:he.bookingRef,price:"",priceCurrency:he.priceCurrency,groupId:f,leg:"return"}:null;await g(w),_&&await g(_),un(),M(!1)}catch(f){console.error("Failed to add flight:",f),alert("Failed to add flight. Please try again.")}},So=async f=>{try{await N(f)}catch(w){console.error("Failed to delete hotel:",w)}},Po=(f={})=>{const w=[],_=(W,Z)=>{if(!Z)return;const oe=String(Z).trim();oe&&w.push({label:W,value:oe})},A=f.total||f.totalPrice||f.total_price||f.totalAmount||f.total_amount||f.totalWithTaxes||f.total_with_taxes||f.grandTotal||f.subtotal||f.price||f.value||"";_("Total",f.total||f.totalPrice||f.total_price||f.totalWithTaxes||f.total_with_taxes||f.grandTotal),_("Subtotal",f.subtotal),_("Nightly",f.nightlyRate||f.nightly_rate),_("Fees",f.fees||f.fee),_("Taxes",f.taxes||f.tax),_("Deposit",f.deposit),_("Other",f.price||f.value),Array.isArray(f.amounts)&&f.amounts.forEach(W=>{W&&W.value&&_(W.label||"Amount",W.value)});const L=f.priceCurrency||f.currency||$l(A||f.price||f.value)||"USD";return{name:f.name||f.hotelName||"",address:f.address||"",city:f.city||"",state:f.state||"",country:f.country||"",checkIn:f.checkIn||f.checkInDate||"",checkOut:f.checkOut||f.checkOutDate||"",price:A,priceCurrency:L,amounts:w}},Ia=async({base64Data:f,mimeType:w})=>{var H,ce,Re,Ae;const _="AIzaSyAOPK1oEj4SrtvBfYRw904Pwv85UX_2tWI".trim();if(!_)throw new Error("Add VITE_GEMINI_API_KEY in your env to enable file/image extraction with Gemini.");const A="gemini-2.5-flash-lite".trim(),L="v1".trim(),Z=await fetch(`https://generativelanguage.googleapis.com/${L}/models/${A}:generateContent?key=${_}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:"Extract hotel booking details. Return ONLY a JSON object with keys: name (hotel name), address, city, state, country, checkIn (YYYY-MM-DD), checkOut (YYYY-MM-DD), total (overall total amount including taxes/fees), priceCurrency (3-letter ISO), and amounts (array of {label,value} for any monetary values you see such as total, grand total, subtotal, nightly, fees, taxes, deposits). Prefer the overall total even if individual fees/taxes are listed. Use empty strings when missing."},{inline_data:{mime_type:w||"application/octet-stream",data:f}}]}]})});if(!Z.ok){const Ve=await Z.text();throw new Error(`Gemini request failed (${Z.status}): ${Ve||"Unknown error"}`)}const J=((Ae=(Re=(ce=(H=(await Z.json()).candidates)==null?void 0:H[0])==null?void 0:ce.content)==null?void 0:Re.parts)==null?void 0:Ae.map(Ve=>Ve.text||"").join(`
`))||"",a=xi(J);if(!a)throw new Error("Gemini responded but no hotel details were parsed.");return Po(a)},wi=async f=>{var w;if(f){Ms({name:f.name,type:f.type||"unknown",size:f.size}),sr(""),vi(!0),As([]),(w=f.type)!=null&&w.startsWith("image/")?Rs(URL.createObjectURL(f)):Rs("");try{const _=await ts(f),A=await Ia({base64Data:_,mimeType:f.type});As(A.amounts||[]),Ut(L=>({...L,...A}))}catch(_){console.error("Hotel extraction failed:",_),sr(_.message||"Unable to extract hotel details. Please fill manually.")}finally{vi(!1)}}},Ca=()=>{Ms(null),Rs(""),sr(""),As([]),Ut({name:"",address:"",city:"",state:"",country:"",checkIn:"",checkOut:"",price:"",priceCurrency:"USD"})},ks=async f=>{var A;if(yr!=="image")return;const w=(A=f.clipboardData)==null?void 0:A.items;if(!w)return;const _=Array.from(w).find(L=>L.type.startsWith("image/"));if(_){f.preventDefault();const L=_.getAsFile();L&&await wi(L)}},Oa=async()=>{const f={id:Date.now(),...Je};try{await E(f),Ut({name:"",address:"",city:"",state:"",country:"",checkIn:"",checkOut:"",price:"",priceCurrency:"USD"}),Ms(null),Rs(""),sr(""),vi(!1),Cn("manual"),O(!1)}catch(w){console.error("Failed to add hotel:",w),alert("Failed to add hotel. Please try again.")}},Rr=async()=>{const f={id:Date.now(),...gt};try{await q(f),_r({description:"",amount:"",category:"food",date:"",city:"",country:"",currency:"USD"}),oi(""),Hn(""),tt(!1)}catch(w){console.error("Failed to add expense:",w),alert("Failed to add expense. Please try again.")}},bi=(f,w)=>{const _=D.map(A=>A.id===f?{...A,places:A.places.filter(L=>L.id!==w)}:A);C(_)},Io=(f,w,_)=>{sn({dayId:w,placeId:_}),$n(!0),f.dataTransfer.effectAllowed="move",f.stopPropagation()},ns=f=>{f.preventDefault(),f.dataTransfer.dropEffect="move"},Na=()=>{sn(null),setTimeout(()=>$n(!1),100)},Ei=async(f,w,_)=>{if(f.preventDefault(),f.stopPropagation(),!ft||ft.placeId===_){sn(null),setTimeout(()=>$n(!1),100);return}const A=D.map(W=>{if(W.id===w){const Z=[...W.places],oe=Z.findIndex(a=>a.id===ft.placeId),J=Z.findIndex(a=>a.id===_);if(oe!==-1&&J!==-1){const[a]=Z.splice(oe,1);Z.splice(J,0,a)}return{...W,places:Z}}return W});C(A),sn(null),setTimeout(()=>$n(!1),100);const L=A.find(W=>W.id===w);if(L&&L.places.length>1){const W=await Promise.all(A.map(async Z=>{if(Z.id===w){const oe=await Promise.all(Z.places.map(async(J,a)=>{if(a===0)return J;const H=Z.places[a-1];if(H.coordinates&&J.coordinates)try{const ce=await cn(H.coordinates,J.coordinates,J.transportMode||"walking");return{...J,distance:ce.distance,transportTime:ce.time}}catch(ce){return console.error("Error recalculating distance:",ce),J}return J}));return{...Z,places:oe}}return Z}));C(W)}},ss=(f,w,_,A,L=!0)=>{const W=_==="start"?"startTime":_==="end"?"endTime":_,Z=D.map(oe=>({...oe,places:oe.places.map(J=>J.id===w&&oe.id===f?{...J,[W]:A}:J)}));C(Z),L&&Te(null)},Di=(f,w,_)=>{if(_){di.current=_;const A=_.getBoundingClientRect(),L=220,W=170,Z=A.top,oe=window.innerHeight-A.bottom;let J=A.bottom+6;oe<L&&Z>L&&(J=A.top-L-6);const a=Math.max(8,Math.min(window.innerWidth-W-8,A.left));Ne({top:J,left:a})}Te({placeId:f,field:w})},Ls=(f,w,_)=>{const A=D.map(L=>{if(L.id===f){const W=L.places.map(Z=>Z.id===w?{...Z,priority:_}:Z);return{...L,places:W}}return L});C(A)},Co=async(f,w,_)=>{const A=D.find(a=>a.id===f);if(!A)return;const L=A.places.findIndex(a=>a.id===w);if(L<=0)return;const W=A.places[L],Z=A.places[L-1];l(null);let oe=D.map(a=>a.id===f?{...a,places:a.places.map(H=>H.id===w?{...H,transportMode:_,distance:"",transportTime:"",isAutoCalculated:!1}:H)}:a),J={distance:"",time:"",error:null};Yt&&Z.address&&W.address&&(_==="plane"?J={distance:"",time:"",error:null,isAutoCalculated:!1}:_==="transit"||_==="bus"?(J=await cn(Z.address,W.address,"transit"),(J.error||!J.distance&&!J.time)&&(J=await cn(Z.address,W.address,"car"))):J=await cn(Z.address,W.address,_)),(J.distance||J.time)&&(oe=oe.map(a=>a.id===f?{...a,places:a.places.map(H=>H.id===w?{...H,distance:J.distance,transportTime:J.time,isAutoCalculated:J.isAutoCalculated||!1}:H)}:a)),C(oe)},ja=async f=>{try{await v(f)}catch(w){console.error("Failed to delete flight:",w),alert("Failed to delete flight. Please try again.")}},is=async f=>{try{await T(f)}catch(w){console.error("Failed to delete expense:",w),alert("Failed to delete expense. Please try again.")}},Ti=f=>f&&typeof f=="object"&&typeof f.lat=="number"&&typeof f.lng=="number"?new window.google.maps.LatLng(f.lat,f.lng):f,cn=async(f,w,_)=>{if(!Yt)return{distance:"",time:"",error:"API key not set"};Br(!0);try{await x();const L={walking:"WALKING",transit:"TRANSIT",car:"DRIVING",plane:"DRIVING",metro:"TRANSIT",bus:"TRANSIT",train:"TRANSIT",other:"DRIVING"}[_]||"WALKING";console.log("Travel mode mapping:",_,"->",L);const W=await new Promise((Z,oe)=>{var ce;if(!((ce=window.google)!=null&&ce.maps))return oe(new Error("Google Maps not loaded"));const J=new window.google.maps.DistanceMatrixService,a=Ti(f),H=Ti(w);J.getDistanceMatrix({origins:[a],destinations:[H],travelMode:L},(Re,Ae)=>{if(Ae==="OK"&&Re.rows[0].elements[0].status==="OK"){const Ve=Re.rows[0].elements[0],jt=(Ve.distance.value/1e3).toFixed(1),kt=Math.round(Ve.duration.value/60);Z({distance:jt,time:kt,error:null,isAutoCalculated:!0})}else oe(new Error("Could not calculate route"))})});return Br(!1),W}catch(A){return Br(!1),{distance:"",time:"",error:A.message}}},[ir,as]=z.useState(typeof window<"u"&&!!((Pl=window.google)!=null&&Pl.maps)),Vs=z.useRef(null),ct=z.useRef(null),Ar=z.useRef([]),jn=z.useRef([]),At=z.useRef(null),Si=z.useRef(null),Pi=z.useRef(!1),[Nt,os]=z.useState(!0),[ls,Ft]=z.useState(!1),[Ma,Ra]=z.useState(!1),[pt,l]=z.useState(null),[m,p]=z.useState(null),x=()=>{var f;return ir&&((f=window.google)!=null&&f.maps)?Promise.resolve():new Promise((w,_)=>{let A=0;const L=setInterval(()=>{var W;(W=window.google)!=null&&W.maps?(clearInterval(L),as(!0),w()):A++>30&&(clearInterval(L),_(new Error("Google Maps failed to load")))},200)})},U=async f=>{var w,_;if(!Yt||!f||f.length<3){Wr([]);return}wt(!0);try{await x();const A=!!((_=(w=window.google.maps.places)==null?void 0:w.AutocompleteSuggestion)!=null&&_.fetchAutocompleteSuggestions);let L=[];if(A){const{suggestions:W}=await window.google.maps.places.AutocompleteSuggestion.fetchAutocompleteSuggestions({input:f,includedPrimaryTypes:["tourist_attraction","museum","restaurant","park","point_of_interest"]});L=await Promise.all(W.map(async Z=>{var a,H,ce,Re,Ae,Ve;const oe=Z.placePrediction,J={place_id:oe.placeId,description:((a=oe.text)==null?void 0:a.toString())||"",structured_formatting:{main_text:((ce=(H=oe.structuredFormat)==null?void 0:H.mainText)==null?void 0:ce.toString())||((Re=oe.text)==null?void 0:Re.toString())||"",secondary_text:((Ve=(Ae=oe.structuredFormat)==null?void 0:Ae.secondaryText)==null?void 0:Ve.toString())||""}};try{const jt=new window.google.maps.places.Place({id:oe.placeId});await jt.fetchFields({fields:["photos"]});const kt=vE(jt.photos,160);return{...J,photoUrl:kt}}catch(jt){return console.warn("Failed to fetch photo for suggestion",oe.placeId,jt),J}}))}else{const W=new window.google.maps.places.AutocompleteService;L=(await new Promise((oe,J)=>{W.getPlacePredictions({input:f,types:["tourist_attraction","restaurant","park","point_of_interest"]},(a,H)=>{H===window.google.maps.places.PlacesServiceStatus.OK&&a?oe(a):H===window.google.maps.places.PlacesServiceStatus.ZERO_RESULTS?oe([]):J(new Error(H))})})).map(oe=>{var J,a;return{place_id:oe.place_id,description:oe.description||"",structured_formatting:{main_text:((J=oe.structured_formatting)==null?void 0:J.main_text)||oe.description||"",secondary_text:((a=oe.structured_formatting)==null?void 0:a.secondary_text)||""}}})}Wr(L),wt(!1)}catch(A){console.error("Place autocomplete failed:",A),Wr([]),wt(!1)}},$=async f=>{var w,_;try{await x();const A=!!((w=window.google.maps.places)!=null&&w.Place);let L=null;if(A){const J=new window.google.maps.places.Place({id:f.place_id});await J.fetchFields({fields:["displayName","formattedAddress","location","addressComponents","photos"]});const a=vE(J.photos,600),H=yE(J.addressComponents||[]);L={name:J.displayName||Or,address:J.formattedAddress||Or,placeId:f.place_id,location:J.location?{lat:J.location.lat(),lng:J.location.lng()}:null,city:H.city||"",state:H.state||"",country:H.country||"",photoUrl:a||"",notes:"",transportMode:"walking",transportTime:"",distance:"",startTime:"",endTime:"",type:ue||"place"}}else{const J=new window.google.maps.places.PlacesService(document.createElement("div")),a=await new Promise((Ae,Ve)=>{J.getDetails({placeId:f.place_id,fields:["name","formatted_address","geometry","photos","address_component"]},(jt,kt)=>{kt===window.google.maps.places.PlacesServiceStatus.OK&&jt?Ae(jt):Ve(new Error(kt))})}),H=a.photos&&a.photos.length>0?a.photos[0].getUrl({maxWidth:600,maxHeight:600}):"",ce=(a.address_components||[]).map(Ae=>({longText:Ae.long_name,types:Ae.types||[]})),Re=yE(ce);L={name:a.name||Or,address:a.formatted_address||Or,placeId:f.place_id,location:(_=a.geometry)!=null&&_.location?{lat:a.geometry.location.lat(),lng:a.geometry.location.lng()}:null,city:Re.city||"",state:Re.state||"",country:Re.country||"",photoUrl:H,notes:"",transportMode:"walking",transportTime:"",distance:"",startTime:"",endTime:"",type:ue||"place"}}const W=D.find(J=>J.id===le);let Z={...L};if(W&&W.places.length>0&&Yt){const J=W.places[W.places.length-1],a=await cn(J.location||J.address,L.location||L.address,"walking");let H="walking";!a.error&&a.distance&&parseFloat(a.distance)>=1&&(H="transit");const ce=await cn(J.location||J.address,L.location||L.address,H);ce.error||(Z={...L,transportMode:H,distance:ce.distance,transportTime:ce.time,isAutoCalculated:ce.isAutoCalculated||!1})}const oe=D.map(J=>J.id===le?{...J,places:[...J.places,{id:Date.now(),...Z}]}:J);C(oe),Gr({name:"",address:"",placeId:"",location:null,city:"",state:"",country:"",photoUrl:"",notes:"",transportMode:"walking",transportTime:"",distance:"",startTime:"",endTime:""}),nn(""),Wr([]),De(null)}catch(A){console.error("Failed to get place details:",A)}};z.useEffect(()=>{if(!Yt)return;if(window.google&&window.google.maps){as(!0);return}const f="google-maps-js";if(document.getElementById(f))return;const w=document.createElement("script");w.id=f,w.src=`https://maps.googleapis.com/maps/api/js?key=${Yt}&libraries=places,marker`,w.async=!0,w.defer=!0,w.onload=()=>as(!0),w.onerror=()=>console.error("Failed to load Google Maps script"),document.head.appendChild(w)},[Yt]),z.useEffect(()=>{if(!ir)return;const f="hide-gm-close-button";if(document.getElementById(f))return;const w=document.createElement("style");w.id=f,w.innerHTML=".gm-ui-hover-effect { display: none !important; }",document.head.appendChild(w)},[ir]),z.useEffect(()=>{if(!(!Nt||!ir||!Vs.current))try{ct.current=new window.google.maps.Map(Vs.current,{center:{lat:46.8182,lng:8.2275},zoom:7,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1,mapId:xt||void 0}),ct.current.addListener("click",()=>{At.current&&(At.current.close(),At.current=null)})}catch(f){console.error("Error creating map instance:",f)}},[Nt,ir]),z.useEffect(()=>{Nt||(Ar.current.forEach(f=>{f&&typeof f.setMap=="function"?f.setMap(null):f&&(f.map=null)}),Ar.current=[],jn.current.forEach(f=>f.setMap(null)),jn.current=[])},[Nt]),z.useEffect(()=>{var a;if(!Nt||!ir||!ct.current||(Ar.current.forEach(H=>{typeof H.setMap=="function"?H.setMap(null):H.map=null}),Ar.current=[],jn.current.forEach(H=>H.setMap(null)),jn.current=[],Yr.current.forEach(H=>{typeof H.setMap=="function"?H.setMap(null):H&&(H.map=null)}),Yr.current=new Map,!_e||!((a=_e.places)!=null&&a.length)&&Zt.length===0))return;const f=new window.google.maps.LatLngBounds;let w=!1;Ft(!0);const _=new window.google.maps.Geocoder,A=H=>{if(!H)return Promise.resolve(null);const ce=String(H).trim(),Re=ce.toUpperCase(),Ae=new Set;Ae.add(ce),Ae.add(`${ce} airport`),Ae.add(`${ce} international airport`),Ae.add(Re),Re.length===3&&(Ae.add(`${Re} airport`),Ae.add(`${Re} international airport`));const Ve=jt=>{if(!jt.length)return Promise.resolve(null);const[kt,...Mn]=jt,Ii=kt.toLowerCase(),us=Ts.current.get(Ii);return us?Promise.resolve(new window.google.maps.LatLng(us.lat,us.lng)):new Promise(Ci=>{_.geocode({address:kt},(rf,nf)=>{if(w)return Ci(null);if(nf==="OK"&&rf[0]){const ec=rf[0].geometry.location,tc={lat:ec.lat(),lng:ec.lng()};Ts.current.set(Ii,tc),Ci(new window.google.maps.LatLng(tc.lat,tc.lng))}else Ci(null)})}).then(Ci=>Ci||Ve(Mn))};return Ve([...Ae])},L=(H,ce)=>new Promise(Re=>{const Ae=H.location&&typeof H.location.lat=="number"&&typeof H.location.lng=="number"?new window.google.maps.LatLng(H.location.lat,H.location.lng):null,Ve=kt=>{var px,vx,yx;const Mn="M384 192c0 87.4-117 243-168.3 307.2c-12.3 15.3-35.1 15.3-47.4 0C117 435 0 279.4 0 192C0 86 86 0 192 0S384 86 384 192z",Ii=!!xt&&((yx=(vx=(px=window.google)==null?void 0:px.maps)==null?void 0:vx.marker)==null?void 0:yx.AdvancedMarkerElement);let us;if(Ii){const fn=document.createElement("div");fn.style.position="relative",fn.style.width="40px",fn.style.height="52px",fn.style.display="flex",fn.style.alignItems="center",fn.style.justifyContent="center";const Aa=document.createElementNS("http://www.w3.org/2000/svg","svg");Aa.setAttribute("viewBox","0 0 384 512"),Aa.setAttribute("width","40"),Aa.setAttribute("height","52");const dg=document.createElementNS("http://www.w3.org/2000/svg","path");dg.setAttribute("d",Mn),dg.setAttribute("fill","#FF6B6B"),Aa.appendChild(dg),fn.appendChild(Aa);const Bs=document.createElement("div");Bs.textContent=`${ce+1}`,Bs.style.position="absolute",Bs.style.top="16px",Bs.style.left="50%",Bs.style.transform="translateX(-50%)",Bs.style.color="white",Bs.style.fontWeight="700",Bs.style.fontSize="13px",Bs.style.textShadow="0 1px 4px rgba(0,0,0,0.35)",fn.appendChild(Bs),us=new window.google.maps.marker.AdvancedMarkerElement({map:ct.current,position:kt,title:H.name||H.address||"Place",content:fn})}else{const fn=`<svg xmlns="http://www.w3.org/2000/svg" width="40" height="52" viewBox="0 0 384 512"><path fill="%23FF6B6B" d="${Mn}"/></svg>`,Aa=`data:image/svg+xml;charset=UTF-8,${encodeURIComponent(fn)}`;us=new window.google.maps.Marker({map:ct.current,position:kt,title:H.name||H.address||"Place",icon:{url:Aa,scaledSize:new window.google.maps.Size(32,44),anchor:new window.google.maps.Point(16,44),labelOrigin:new window.google.maps.Point(16,18)},label:{text:`${ce+1}`,color:"white",fontSize:"12px",fontWeight:"bold"}})}const Ci=fn=>({place:"",restaurant:"",cafe:"",activity:"",note:""})[fn]||"",rf={walking:"",transit:"",car:"",plane:""},nf=H.priority?"".repeat(Math.min(5,H.priority)):"",ec=H.address||H.name?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(H.address||H.name)}`:"",tc=`
          <div style="max-width:300px;font-family:system-ui,-apple-system,sans-serif;color:#1f2937;">
            ${H.photoUrl?`
              <div style="overflow:hidden;border-radius:12px;margin-bottom:10px;box-shadow:0 8px 20px rgba(0,0,0,0.08);position:relative;">
                <img src="${H.photoUrl}" alt="${H.name||"Place photo"}" style="width:100%;height:170px;object-fit:cover;display:block;" />
                ${H.type?`<span style="position:absolute;left:10px;top:10px;padding:4px 10px;border-radius:999px;background:rgba(0,0,0,0.55);color:#fff;font-size:11px;display:inline-flex;align-items:center;gap:6px;">${Ci(H.type)} ${H.type.charAt(0).toUpperCase()+H.type.slice(1)}</span>`:""}
              </div>
            `:""}
            <div style="display:flex;align-items:flex-start;gap:8px;margin-bottom:8px;">
              <span style="font-size:18px;">${Ci(H.type)}</span>
              <div style="flex:1;">
                <strong style="font-size:15px;color:#111827;display:block;">${H.name||"Place"}</strong>
            ${H.address?`<div style="color:#6b7280;font-size:12px;margin-top:2px;line-height:1.4;">${H.address}</div>`:""}
          </div>
          ${nf?`<div style="background:#fff4e5;border:1px solid #fde68a;padding:4px 8px;border-radius:8px;font-size:11px;white-space:nowrap;">${nf}</div>`:""}
        </div>
        <div style="display:flex;flex-wrap:wrap;gap:6px;margin-top:6px;font-size:11px;">
          ${H.visitTime?`<div style="background:#f3f4f6;padding:4px 8px;border-radius:6px;"> ${H.visitTime}</div>`:""}
          ${H.startTime&&H.endTime?`<div style="background:#eef2ff;padding:4px 8px;border-radius:6px;"> ${xE(H.startTime,H.endTime)}</div>`:""}
          ${H.cost?`<div style="background:#f3f4f6;padding:4px 8px;border-radius:6px;"> ${H.cost} ${EO(H.currency)}</div>`:""}
          ${H.transportMode||H.distance||H.transportTime?`
            <div style="background:#e0f2fe;padding:4px 8px;border-radius:6px;display:flex;align-items:center;gap:6px;">
              <span>${rf[H.transportMode]||""}</span>
              <span style="color:#0f172a;">
                    ${H.transportMode?H.transportMode.charAt(0).toUpperCase()+H.transportMode.slice(1):"Route"}
                    ${H.distance?`  ${H.distance} km`:""}${H.transportTime?`  ${H.transportTime} min`:""}
                  </span>
                </div>
              `:""}
            </div>
            ${H.notes?`<div style="margin-top:10px;padding:10px;background:#f9fafb;border-radius:10px;font-size:12px;color:#4b5563;line-height:1.4;">${H.notes}</div>`:""}
            ${ec?`<a href="${ec}" target="_blank" rel="noopener noreferrer" style="display:inline-block;margin-top:10px;font-size:12px;color:#2563eb;text-decoration:none;">Open in Google Maps </a>`:""}
          </div>
        `,gx=new window.google.maps.InfoWindow({content:tc});us.addListener("click",()=>{At.current&&At.current.close(),gx.open({anchor:us,map:ct.current}),At.current=gx}),Ar.current.push(us),f.extend(kt),Re(kt)};if(Ae){Ve(Ae);return}const jt=H.address||H.name;if(!jt)return Re(null);A(jt).then(kt=>{if(w||!kt)return Re(null);Ve(kt)})}),W=Zt.flatMap(H=>{const ce=[];return H.from&&ce.push({airport:H.from,label:"Departure",flightId:H.id}),H.to&&ce.push({airport:H.to,label:"Arrival",flightId:H.id}),ce}),Z=({airport:H,label:ce,flightId:Re})=>new Promise(Ae=>{const Ve=H.toLowerCase().includes("airport")?H:`${H} airport`;A(Ve).then(jt=>{if(w||!jt)return Ae(null);const kt='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="%230b6559" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2.5 19h19"/><path d="M17 14.5V19"/><path d="M5 10L2 7.5"/><path d="M22 7.5L19 10"/><path d="M7.5 11l.5 8"/><path d="M16 19.5V11"/><path d="M12 19.5V3l3 2v4l7 2-1 3-6-1.5V19"/></svg>',Mn=new window.google.maps.Marker({map:ct.current,position:jt,title:`${ce} Airport: ${H}`,icon:{url:`data:image/svg+xml;utf-8,${encodeURIComponent(kt)}`,scaledSize:new window.google.maps.Size(28,28),anchor:new window.google.maps.Point(14,20)},label:{text:ce==="Departure"?"DEP":"ARR",color:"#0b6559",fontSize:"11px",fontWeight:"700"}}),Ii=new window.google.maps.InfoWindow({content:`<div style="font-family:system-ui,-apple-system,sans-serif;font-size:12px;color:#1f2937;"><strong>${ce} Airport</strong><div style="color:#4b5563;">${H}</div></div>`});Mn.addListener("click",()=>{At.current&&At.current.close(),Ii.open({anchor:Mn,map:ct.current}),At.current=Ii}),Yr.current.set(Os(Re,ce),Mn),Ar.current.push(Mn),f.extend(jt),Ae(jt)})}),oe=Promise.all((_e.places||[]).map((H,ce)=>L(H,ce))),J=Promise.all(W.map(H=>Z(H)));return Promise.all([oe,J]).then(([H])=>{if(w)return;const ce=H.filter(Re=>Re!==null);if(ce.length>1)for(let Re=0;Re<ce.length-1;Re++){const Ae=_e.places[Re+1],jt={walking:"WALKING",transit:"TRANSIT",car:"DRIVING",plane:"DRIVING",metro:"TRANSIT",bus:"TRANSIT",train:"TRANSIT",other:"DRIVING"}[Ae.transportMode]||"WALKING",kt=new window.google.maps.DirectionsService,Mn=new window.google.maps.DirectionsRenderer({map:ct.current,suppressMarkers:!0,polylineOptions:{strokeColor:"#4ECDC4",strokeWeight:3,strokeOpacity:.7}});kt.route({origin:ce[Re],destination:ce[Re+1],travelMode:jt},(Ii,us)=>{us==="OK"&&!w&&(Mn.setDirections(Ii),jn.current.push(Mn))})}Ft(!1),f.isEmpty()||ct.current.fitBounds(f)}).catch(()=>Ft(!1)),()=>{w=!0}},[Nt,ir,mi]),z.useEffect(()=>{var _,A,L;if(!vr||!Nt)return;const f=_e==null?void 0:_e.places.findIndex(W=>W.id===vr.placeId);if(f===-1||f===void 0){Xn(null);return}const w=Ar.current[f];if(w&&((A=(_=window.google)==null?void 0:_.maps)!=null&&A.event)){window.google.maps.event.trigger(w,"click");const W=w.position||(typeof w.getPosition=="function"?w.getPosition():null);W&&((L=ct.current)!=null&&L.panTo)&&ct.current.panTo(W),Xn(null)}},[vr,Nt,_e,mi]),z.useEffect(()=>{var w,_,A;if(!Ss||!Nt)return;const f=Yr.current.get(Ss);if(f&&((_=(w=window.google)==null?void 0:w.maps)!=null&&_.event)){window.google.maps.event.trigger(f,"click");const L=f.position||(typeof f.getPosition=="function"?f.getPosition():null);L&&((A=ct.current)!=null&&A.panTo)&&ct.current.panTo(L),Jn(null)}},[Ss,Nt,mi]),z.useEffect(()=>{if(!pt)return;const f=()=>{l(null)};return document.addEventListener("click",f),()=>document.removeEventListener("click",f)},[pt]),z.useEffect(()=>{if(D.length>0&&n&&!k){const f=JSON.stringify(D);if(Si.current===f)return;const w=setTimeout(async()=>{Pi.current=!0,Si.current=f;try{await S(D)}catch(_){console.error("Failed to save daily plans:",_)}finally{setTimeout(()=>{Pi.current=!1},100)}},3e3);return()=>clearTimeout(w)}},[D,n,k]),z.useEffect(()=>{d.length>=0},[d]),z.useEffect(()=>{R.length>=0},[R]);const se=f=>{if(!f||f.length<1)return[];const w=f.toLowerCase();return aQ(o==null?void 0:o.countries).filter(({city:A})=>A.toLowerCase().includes(w)).slice(0,10)},He=f=>{if(!f||f.length<1)return[];const w=f.toLowerCase();return(o!=null&&o.countries&&o.countries.length>0?o.countries:Object.keys(Fv)).filter(A=>A.toLowerCase().includes(w))},Dt=()=>{qr({...Ue,name:o.name}),Sn(!0)},Fe=()=>{qr({...Ue,startDate:o.startDate,endDate:o.endDate});const f=o!=null&&o.startDate?Le(o.startDate):new Date,w=o!=null&&o.endDate?Le(o.endDate):new Date;Ot([{startDate:f,endDate:w,key:"selection"}]),on(!0)},Ze=f=>{const w=f.getFullYear(),_=String(f.getMonth()+1).padStart(2,"0"),A=String(f.getDate()).padStart(2,"0");return`${w}-${_}-${A}`},Le=f=>{if(!f)return new Date;if(f instanceof Date)return new Date(f.getFullYear(),f.getMonth(),f.getDate());if(typeof f=="string"){const[w,_,A]=f.split("-").map(Number);if(!Number.isNaN(w)&&!Number.isNaN(_)&&!Number.isNaN(A))return new Date(w,_-1,A)}return new Date(f)},dn=async()=>{if(Ue.name.trim()&&o)try{const f={...o,name:Ue.name};await i(f),await c(f)}catch(f){console.error("Failed to save trip name:",f),alert("Failed to save trip name. Please try again.")}Sn(!1)},ar=async()=>{var A;on(!1);const f=Gn&&Gn[0]?Gn[0]:null,w=f&&f.startDate?Ze(new Date(f.startDate)):Ue.startDate,_=f&&f.endDate?Ze(new Date(f.endDate)):Ue.endDate;if(w&&_&&o)try{const L={...o,startDate:w,endDate:_};if(await i(L),await c(L),w!==o.startDate||_!==o.endDate){const W=[],Z=Le(w),oe=Le(_);let J=new Date(Z),a=1;for(;J<=oe;){const H=Ze(J),ce=D.find(Re=>Re.date===H);W.push({id:a++,date:H,title:(ce==null?void 0:ce.title)||"",city:(ce==null?void 0:ce.city)||"",country:(ce==null?void 0:ce.country)||"",places:(ce==null?void 0:ce.places)||[]}),J.setDate(J.getDate()+1)}await P(W),Oe((A=W[0])==null?void 0:A.id)}}catch(L){console.error("Failed to save trip dates:",L),alert("Failed to save trip dates. Please try again.")}},zs=f=>{xa(f),Ps(!0)},Us=()=>{const f=D.map(w=>w.id===le?{...w,title:hi}:w);C(f),Ps(!1)},Hu=async()=>{var f;if(o)try{const w={...o,name:Ue.name,startDate:Ue.startDate,endDate:Ue.endDate};if(await i(w),await c(w),Ue.startDate!==o.startDate||Ue.endDate!==o.endDate){const _=[],A=Le(Ue.startDate),L=Le(Ue.endDate);let W=new Date(A),Z=1;for(;W<=L;){const oe=Ze(W),J=D.find(a=>a.date===oe);_.push({id:Z++,date:oe,title:(J==null?void 0:J.title)||"",city:(J==null?void 0:J.city)||"",country:(J==null?void 0:J.country)||"",places:(J==null?void 0:J.places)||[]}),W.setDate(W.getDate()+1)}await P(_),Oe((f=_[0])==null?void 0:f.id)}$r(!1)}catch(w){console.error("Failed to save trip:",w),alert("Failed to save trip. Please try again.")}},Tt=(f,w)=>{const _=(w||Fs||"EUR").toUpperCase(),A=(Fs||"EUR").toUpperCase(),L=_E[_]||1,W=_E[A]||1;return f*L/W},wl=f=>`${f.toFixed(2)}`,bl=(f,w=14)=>{switch(f){case"food":return u.jsx(rW,{size:w,className:"text-[#F7B731]"});case"accommodation":return u.jsx(tp,{size:w,className:"text-[#4ECDC4]"});case"transportation":return u.jsx(KB,{size:w,className:"text-[#FF6B6B]"});case"activities":return u.jsx(eW,{size:w,className:"text-[#45AAF2]"});case"shopping":return u.jsx(ZB,{size:w,className:"text-[#9B59B6]"});case"places":return u.jsx(Xi,{size:w,className:"text-[#1B7F79]"});default:return u.jsx(Gs,{size:w,className:"text-gray-500"})}};z.useEffect(()=>{const f=w=>{ui.current&&!ui.current.contains(w.target)&&pr(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const El=()=>{const f=new Map;let w=0;return d.forEach(_=>{const A=or(_.price);A&&(_.groupId?f.has(_.groupId)||(f.set(_.groupId,!0),w+=Tt(A,_.priceCurrency||"EUR")):w+=Tt(A,_.priceCurrency||"EUR"))}),w},Dl=()=>y.reduce((f,w)=>f+Tt(or(w.price),w.priceCurrency||"EUR"),0),Tl=()=>D.reduce((f,w)=>f+w.places.reduce((_,A)=>_+Tt(or(A.cost),A.currency||"EUR"),0),0),Yu=()=>R.reduce((f,w)=>f+Tt(parseFloat(w.amount||0),w.currency||"EUR"),0)+El()+Tl()+Dl(),Sl=()=>{const f=Yu();return wl(f)},qu=()=>{const f={};R.forEach(L=>{f[L.category]=(f[L.category]||0)+Tt(parseFloat(L.amount||0),L.currency||"EUR")});const w=El();w>0&&(f.flights=w);const _=Tl();_>0&&(f.places=_);const A=Dl();return A>0&&(f.hotels=A),f},Gu=()=>{const f={};return R.forEach(w=>{w.city&&(f[w.city]=(f[w.city]||0)+Tt(parseFloat(w.amount||0),w.currency||"EUR"))}),D.forEach(w=>{w.places.forEach(_=>{const A=Uf(_);A.city&&(f[A.city]=(f[A.city]||0)+Tt(or(_.cost),_.currency||"EUR"))})}),y.forEach(w=>{w.city&&(f[w.city]=(f[w.city]||0)+Tt(or(w.price),w.priceCurrency||"EUR"))}),f},Ku=()=>{const f={};return R.forEach(w=>{w.country&&(f[w.country]=(f[w.country]||0)+Tt(parseFloat(w.amount||0),w.currency||"EUR"))}),D.forEach(w=>{w.places.forEach(_=>{const A=Uf(_);A.country&&(f[A.country]=(f[A.country]||0)+Tt(or(_.cost),_.currency||"EUR"))})}),y.forEach(w=>{w.country&&(f[w.country]=(f[w.country]||0)+Tt(or(w.price),w.priceCurrency||"EUR"))}),f},Qu=()=>{const f={};return R.forEach(w=>{const _=Ao(w.date);_&&(f[_]=(f[_]||0)+Tt(parseFloat(w.amount||0),w.currency||"EUR"))}),D.forEach(w=>{const _=w.places.reduce((L,W)=>L+Tt(or(W.cost),W.currency||"EUR"),0),A=Ao(w.date);A&&(f[A]=(f[A]||0)+_)}),d.forEach(w=>{const _=Ao(w.departureDate||w.date);_&&(f[_]=(f[_]||0)+Tt(or(w.price),w.priceCurrency||"EUR"))}),y.forEach(w=>{const _=Ao(w.checkIn);_&&(f[_]=(f[_]||0)+Tt(or(w.price),w.priceCurrency||"EUR"))}),f},Xu=()=>{const f={};return R.forEach(w=>{w.state&&(f[w.state]=(f[w.state]||0)+Tt(parseFloat(w.amount||0),w.currency||"EUR"))}),D.forEach(w=>{w.places.forEach(_=>{const A=Uf(_);A.state&&(f[A.state]=(f[A.state]||0)+Tt(or(_.cost),_.currency||"EUR"))})}),y.forEach(w=>{w.state&&(f[w.state]=(f[w.state]||0)+Tt(or(w.price),w.priceCurrency||"EUR"))}),f},Ju=f=>{switch(f){case"day":return Object.entries(Qu()).map(([w,_])=>({label:w,value:_}));case"city":return Object.entries(Gu()).map(([w,_])=>({label:w,value:_}));case"state":return Object.entries(Xu()).map(([w,_])=>({label:w,value:_}));case"country":return Object.entries(Ku()).map(([w,_])=>({label:w,value:_}));case"category":default:return Object.entries(qu()).map(([w,_])=>({label:w,value:_}))}},Zu=f=>{const w=Ju(f);if(!w.length)return null;const _=[...w].sort((L,W)=>{if(f==="day"){const Z=new Date(L.label),oe=new Date(W.label);return!Number.isNaN(Z.getTime())&&!Number.isNaN(oe.getTime())?Z-oe:String(L.label).localeCompare(String(W.label))}return W.value-L.value}),A=Math.max(..._.map(L=>L.value));return u.jsx("div",{className:"space-y-2",children:_.map(({label:L,value:W})=>{const Z=A===0?0:W/A*100,oe=(()=>{if(f!=="day")return L||"Unspecified";if(!L)return"Unspecified";const J=new Date(L);return Number.isNaN(J.getTime())?L:J.toLocaleDateString()})();return u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-32 text-sm text-gray-700 truncate",children:oe}),u.jsx("div",{className:"flex-1 bg-gray-100 rounded-full h-2.5 overflow-hidden",children:u.jsx("div",{className:"h-full bg-gradient-to-r from-[#4ECDC4] to-[#44A08D]",style:{width:`${Z}%`}})}),u.jsx("div",{className:"text-sm font-semibold text-gray-800 whitespace-nowrap",children:wl(W)})]},`${f}-${L}`)})})};return u.jsx("div",{className:"min-h-screen bg-[#F8F9FA] p-2 sm:p-4",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[u.jsx("div",{className:"rounded-2xl border border-gray-100 bg-white shadow-md p-4 sm:p-6 mb-4 sm:mb-6",children:u.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"h-10 w-10 rounded-full bg-[#FF6B6B] flex items-center justify-center text-white shadow-sm",children:u.jsx(Xi,{className:"text-white",size:20})}),u.jsx("span",{children:"Travel Planner"})]}),o&&u.jsxs("div",{className:"space-y-2",children:[ga?u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("input",{type:"text",value:Ue.name,onChange:f=>qr({...Ue,name:f.target.value}),onBlur:dn,onKeyDown:f=>{f.key==="Enter"&&dn(),f.key==="Escape"&&Sn(!1)},autoFocus:!0,className:"px-3 py-1 rounded border border-gray-200 bg-white text-lg font-medium flex-1 outline-none focus:border-[#FF6B6B]"})}):u.jsx("div",{onClick:Dt,className:"cursor-pointer hover:bg-gray-50 px-3 py-1 rounded transition-colors inline-block",children:u.jsx("span",{className:"text-lg font-medium text-gray-900",children:o.name})}),u.jsx("div",{className:"hidden sm:block",children:pa?u.jsx("div",{className:"mt-2 flex justify-start",children:u.jsxs("div",{className:"inline-block bg-white border-2 border-gray-200 rounded-xl shadow-lg p-4",children:[u.jsx(j0.DateRange,{ranges:Gn,onChange:f=>{const w=f.selection;Ot([w]),qr({...Ue,startDate:Ze(new Date(w.startDate)),endDate:Ze(new Date(w.endDate))})},months:2,direction:"horizontal",showDateDisplay:!1,rangeColors:["#FF6B6B"],className:"rounded-xl"}),u.jsxs("div",{className:"flex gap-2 mt-3",children:[u.jsx("button",{onClick:ar,className:"px-3 py-2 bg-[#FF6B6B] text-white rounded-lg text-sm hover:bg-[#E85555] transition-colors",children:"Save"}),u.jsx("button",{onClick:()=>on(!1),className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm hover:bg-gray-200 transition-colors",children:"Cancel"})]})]})}):u.jsx("div",{onClick:Fe,className:"cursor-pointer hover:bg-white/20 px-3 py-1 rounded transition-colors inline-block",children:u.jsxs("span",{className:"text-sm text-gray-600",children:[Le(o.startDate).toLocaleDateString()," - ",Le(o.endDate).toLocaleDateString()]})})})]})]}),u.jsxs("div",{className:"flex flex-col items-end gap-3 w-full sm:w-auto",children:[u.jsxs("div",{className:"flex gap-2 items-center self-end",children:[u.jsx("button",{onClick:async()=>{try{await c({id:null,name:null,startDate:null,endDate:null,countries:[]}),e()}catch(f){console.error("Failed to go back to trip setup:",f)}},className:"w-10 h-10 rounded-full border border-gray-200 bg-white text-gray-600 hover:text-[#FF6B6B] hover:border-[#FF6B6B]/40 flex items-center justify-center transition-colors shadow-sm",title:"Back to trip setup",children:u.jsx(nI,{size:20})}),u.jsxs("button",{onClick:r,className:"px-4 py-2 bg-white rounded-full flex items-center gap-2 transition-all hover:shadow-md border border-gray-200 text-gray-700 hover:text-[#FF6B6B] hover:border-[#FF6B6B]/40",title:"Switch to Day Mode",children:[u.jsx(Bc,{size:18}),u.jsx("span",{className:"text-gray-800 font-medium text-sm hidden sm:inline",children:"Day Mode"})]}),n&&u.jsxs("div",{className:"relative",ref:ui,children:[u.jsx("button",{onClick:()=>pr(f=>!f),className:"w-10 h-10 rounded-full bg-white shadow-sm flex items-center justify-center focus:outline-none border border-gray-100",title:n.displayName||n.email,children:n.photoURL?u.jsx("img",{src:n.photoURL,alt:n.displayName,className:"w-10 h-10 rounded-full object-cover border-2 border-white/50"}):u.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-gray-700 font-medium border-2 border-white",children:(n.displayName||n.email||"U")[0].toUpperCase()})}),va&&u.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white border rounded-lg shadow-lg z-50",children:[u.jsxs("div",{className:"px-3 py-2 border-b",children:[u.jsx("div",{className:"text-sm font-medium text-gray-800",children:n.displayName||"Account"}),u.jsx("div",{className:"text-xs text-gray-500 truncate",children:n.email})]}),u.jsxs("button",{onClick:()=>{Ur(!0),pr(!1)},className:"w-full text-left px-3 py-2 hover:bg-gray-50 flex items-center gap-2",children:[u.jsx(Rf,{size:16,className:"text-gray-600"}),u.jsx("span",{className:"text-sm text-gray-700",children:"Setup API"})]}),u.jsxs("button",{onClick:()=>{ya(!0),pr(!1)},className:"w-full text-left px-3 py-2 hover:bg-gray-50 flex items-center gap-2",children:[u.jsx(tW,{size:16,className:"text-gray-600"}),u.jsx("span",{className:"text-sm text-gray-700",children:"Account Settings"})]}),u.jsxs("button",{onClick:async()=>{pr(!1);try{await c({id:null,name:null,startDate:null,endDate:null,countries:[]}),e()}catch(f){console.error("Failed to start new trip:",f),alert("Failed to start new trip. Please try again.")}},className:"w-full text-left px-3 py-2 hover:bg-gray-50 flex items-center gap-2 border-t",children:[u.jsx(Ic,{size:16,className:"text-gray-600"}),u.jsx("span",{className:"text-sm text-gray-700",children:"Start New Trip"})]}),u.jsxs("button",{onClick:async()=>{pr(!1),window.confirm("Are you sure you want to sign out?")&&await s()},className:"w-full text-left px-3 py-2 hover:bg-gray-50 flex items-center gap-2 text-red-600 border-t",children:[u.jsx(JB,{size:16}),u.jsx("span",{className:"text-sm",children:"Sign Out"})]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 bg-[#4ECDC4]/10 text-[#1B7F79] border border-[#4ECDC4]/30 rounded-full px-3 py-1 text-sm font-semibold self-end",children:[u.jsx(Gs,{size:14}),u.jsx("span",{children:"Total Expenses"}),u.jsx("span",{children:Sl()}),u.jsxs("select",{value:Fs,onChange:f=>Sa(f.target.value),className:"bg-transparent border border-transparent text-[#0b6559] text-xs font-semibold focus:outline-none cursor-pointer rounded",children:[u.jsx("option",{value:"EUR",children:"EUR"}),u.jsx("option",{value:"USD",children:"USD"}),u.jsx("option",{value:"GBP",children:"GBP"}),u.jsx("option",{value:"CHF",children:"CHF"}),u.jsx("option",{value:"BRL",children:"BRL"}),u.jsx("option",{value:"CAD",children:"CAD"}),u.jsx("option",{value:"AUD",children:"AUD"}),u.jsx("option",{value:"JPY",children:"JPY"})]})]})]})]})}),u.jsx("div",{className:"bg-white rounded-2xl shadow-lg mb-4 sm:mb-6",children:u.jsxs("div",{className:"flex border-b overflow-x-auto",children:[u.jsxs("button",{onClick:()=>I("itinerary"),className:`flex-1 px-3 sm:px-6 py-3 sm:py-4 font-medium flex items-center justify-center gap-2 whitespace-nowrap transition-all ${b==="itinerary"?"border-b-3 border-[#FF6B6B] text-[#FF6B6B]":"text-gray-600 hover:text-[#FF6B6B]"}`,children:[u.jsx(Bc,{size:20}),u.jsx("span",{className:"hidden sm:inline",children:"Daily Plans"}),u.jsx("span",{className:"sm:hidden",children:"Plans"})]}),u.jsxs("button",{onClick:()=>I("flights"),className:`flex-1 px-3 sm:px-6 py-3 sm:py-4 font-medium flex items-center justify-center gap-2 whitespace-nowrap transition-all ${b==="flights"?"border-b-3 border-[#4ECDC4] text-[#4ECDC4]":"text-gray-600 hover:text-[#4ECDC4]"}`,children:[u.jsx(Ri,{size:20}),u.jsx("span",{children:"Flights"})]}),u.jsxs("button",{onClick:()=>I("hotels"),className:`flex-1 px-3 sm:px-6 py-3 sm:py-4 font-medium flex items-center justify-center gap-2 whitespace-nowrap transition-all ${b==="hotels"?"border-b-3 border-[#26DE81] text-[#26DE81]":"text-gray-600 hover:text-[#26DE81]"}`,children:[u.jsx(tp,{size:20}),u.jsx("span",{children:"Hotels"})]}),u.jsxs("button",{onClick:()=>I("expenses"),className:`flex-1 px-3 sm:px-6 py-3 sm:py-4 font-medium flex items-center justify-center gap-2 whitespace-nowrap transition-all ${b==="expenses"?"border-b-3 border-[#FFE66D] text-[#F7B731]":"text-gray-600 hover:text-[#F7B731]"}`,children:[u.jsx(Gs,{size:20}),u.jsx("span",{children:"Expenses"})]})]})}),u.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-3 sm:p-6",children:[b==="itinerary"&&u.jsxs("div",{className:`grid gap-4 items-start ${Nt?"grid-cols-1 lg:grid-cols-[60%_40%]":"grid-cols-1"}`,children:[u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-white shadow-sm overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3 px-4 py-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"h-10 w-10 rounded-full bg-[#FF6B6B] flex items-center justify-center text-white shadow-sm",children:u.jsx(Bc,{size:18,className:"text-white"})}),u.jsxs("div",{className:"flex flex-col leading-tight",children:[u.jsx("span",{className:"text-base font-semibold text-gray-800",children:"Itinerary"}),u.jsx("span",{className:"text-xs text-gray-500",children:"Your daily plan"})]})]}),u.jsx("button",{onClick:()=>os(f=>!f),className:"h-10 w-10 flex items-center justify-center rounded-full border border-gray-200 text-gray-600 hover:text-[#4ECDC4] hover:border-[#4ECDC4]/40 bg-white shadow-sm transition-all hover:-translate-y-0.5",title:Nt?"Hide Map":"Show Map",children:u.jsx(cW,{size:18})})]}),u.jsx("div",{className:"border-t border-gray-100 px-3 py-3 bg-white/60",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>Is("left"),className:"h-10 w-10 flex items-center justify-center rounded-full border border-gray-200 text-gray-600 hover:text-[#FF6B6B] hover:border-[#FF6B6B]/40 bg-white shadow-sm transition-all hover:-translate-y-0.5",title:"Previous days",children:u.jsx(mW,{size:18})}),u.jsx("div",{className:"relative flex-1 overflow-hidden",children:u.jsx("div",{ref:_a,className:"flex items-center gap-2 px-2 scroll-smooth overflow-x-auto",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},children:D.map((f,w)=>u.jsxs("button",{onClick:()=>Oe(f.id),className:`flex-shrink-0 px-3.5 py-2 rounded-xl text-sm font-semibold transition-all shadow-sm ${le===f.id?"bg-[#FF6B6B] text-white shadow-md scale-[1.03]":"bg-white border border-gray-200 text-gray-700 hover:border-[#FF6B6B]/40 hover:text-[#FF6B6B] hover:-translate-y-0.5"}`,children:[u.jsx("div",{className:"text-[11px] uppercase tracking-wide",children:Le(f.date).toLocaleDateString("en-US",{weekday:"short"})}),u.jsx("div",{className:"text-xs text-gray-600",children:Le(f.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]},f.id))})}),u.jsx("button",{onClick:()=>Is("right"),className:"h-10 w-10 flex items-center justify-center rounded-full border border-gray-200 text-gray-600 hover:text-[#FF6B6B] hover:border-[#FF6B6B]/40 bg-white shadow-sm transition-all hover:-translate-y-0.5",title:"Next days",children:u.jsx(gW,{size:18})})]})})]}),_e&&u.jsxs("div",{className:"rounded-2xl border border-gray-100 shadow-md overflow-visible bg-white",children:[u.jsx("div",{className:"p-4 sm:p-5 border-b border-gray-100 bg-white",children:u.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"hidden sm:block w-1 self-stretch bg-[#FF6B6B] rounded-full opacity-80"}),u.jsxs("div",{className:"flex flex-col gap-1",children:[fi?u.jsx("input",{type:"text",value:hi,onChange:f=>xa(f.target.value),onBlur:Us,onKeyDown:f=>{f.key==="Enter"&&Us(),f.key==="Escape"&&Ps(!1)},autoFocus:!0,placeholder:`Day ${D.findIndex(f=>f.id===le)+1}`,className:"w-full px-3 py-2 rounded-lg bg-white/90 border border-[#FF6B6B]/30 text-lg font-semibold text-[#FF6B6B] outline-none shadow-sm"}):u.jsx("div",{onClick:()=>zs(_e.title),className:"w-full px-0 py-1 rounded cursor-pointer text-lg font-semibold text-[#FF6B6B] hover:text-[#E85A5A] transition-colors",children:_e.title||`Day ${D.findIndex(f=>f.id===le)+1}`}),u.jsx("div",{className:"text-xs uppercase tracking-[0.08em] text-gray-500",children:Le(_e.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-700 flex-wrap",children:[u.jsxs("div",{className:"flex items-center gap-1 bg-white/70 px-3 py-1.5 rounded-full border border-gray-100 shadow-sm",title:"Total stops",children:[u.jsx(dW,{className:"text-[#FF6B6B]",size:14}),u.jsx("span",{className:"font-semibold",children:((Il=an[le])==null?void 0:Il.totalStops)??0})]}),u.jsxs("div",{className:"flex items-center gap-1 bg-white/70 px-3 py-1.5 rounded-full border border-gray-100 shadow-sm",title:"Walking distance",children:[u.jsx(Zo,{className:"text-[#4ECDC4]",size:14}),u.jsxs("span",{className:"font-semibold",children:[(((Ol=(Cl=an[le])==null?void 0:Cl.distanceByMode)==null?void 0:Ol.walking)??0).toFixed(1)," km"]})]}),u.jsxs("div",{className:"flex items-center gap-1 bg-white/70 px-3 py-1.5 rounded-full border border-gray-100 shadow-sm",title:"Estimated total time",children:[u.jsx("span",{children:""}),u.jsxs("span",{className:"font-semibold",children:[((Nl=an[le])==null?void 0:Nl.totalTime)??0," min"]})]}),u.jsxs("div",{className:"flex items-center gap-1 bg-white/70 px-3 py-1.5 rounded-full border border-gray-100 shadow-sm",title:"Expected daily cost",children:[u.jsx("span",{children:""}),u.jsxs("span",{className:"font-semibold",children:["",(((jl=an[le])==null?void 0:jl.totalCost)??0).toFixed(2)]})]})]})]})}),u.jsxs("div",{className:"space-y-3 p-3 sm:p-5 bg-white",children:[Zt.length>0&&u.jsx("div",{className:"space-y-2",children:Zt.map(f=>{const w=xE(f.departureTime,f.arrivalTime)||Ho(f.departureTime)||Ho(f.arrivalTime)||"Time TBA",_=f.from&&f.to?`${f.from}  ${f.to}`:f.from||f.to||"Flight";return u.jsxs("div",{onClick:()=>wa(f),className:"rounded-xl bg-white border border-gray-200 shadow-sm px-3 py-2 flex items-center justify-between cursor-pointer hover:shadow-md hover:-translate-y-0.5 transition-all",children:[u.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[u.jsx("div",{className:"w-9 h-9 rounded-lg bg-[#4ECDC4]/10 flex items-center justify-center text-[#0b6559]",children:u.jsx(Ri,{size:16})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:_}),f.flightNumber&&u.jsx("p",{className:"text-[11px] text-gray-600 truncate",children:f.flightNumber})]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-sm font-bold text-[#0b6559] leading-tight",children:w}),f.airline&&u.jsx("div",{className:"text-[11px] text-gray-500",children:f.airline})]})]},`flight-${f.id}`)})}),_e.places.map((f,w)=>u.jsxs(zn.Fragment,{children:[!f.visited&&w>0&&u.jsxs("div",{className:"relative py-1",children:[u.jsx("div",{className:"ml-[2.9rem] flex justify-start",children:u.jsxs("div",{className:"relative",children:[u.jsxs("button",{onClick:_=>{_.stopPropagation(),l((pt==null?void 0:pt.dayId)===le&&(pt==null?void 0:pt.placeId)===f.id?null:{dayId:le,placeId:f.id})},className:"flex items-center gap-1 px-2.5 py-1 rounded-full bg-[#4ECDC4]/8 hover:bg-[#4ECDC4]/12 border border-[#4ECDC4]/25 hover:border-[#4ECDC4]/35 shadow-sm transition-all cursor-pointer text-[11px]",children:[f.transportMode==="walking"&&u.jsx(Zo,{size:14,className:"text-[#4ECDC4]"}),f.transportMode==="car"&&u.jsx(Vh,{size:14,className:"text-[#4ECDC4]"}),f.transportMode==="transit"&&u.jsx($c,{size:14,className:"text-[#4ECDC4]"}),f.transportMode==="plane"&&u.jsx(Ri,{size:14,className:"text-[#4ECDC4]"}),(f.transportMode==="bus"||f.transportMode==="metro"||f.transportMode==="train")&&u.jsx($c,{size:14,className:"text-[#4ECDC4]"}),!f.isAutoCalculated&&(m==null?void 0:m.dayId)===le&&(m==null?void 0:m.placeId)===f.id&&(m==null?void 0:m.field)==="time"?u.jsx("input",{type:"number",value:m.value,onChange:_=>p({...m,value:_.target.value}),onBlur:()=>{const _=D.map(A=>({...A,places:A.places.map(L=>L.id===f.id&&A.id===le?{...L,transportTime:m.value,isAutoCalculated:!1}:L)}));C(_),p(null)},onKeyDown:_=>{_.key==="Enter"&&_.target.blur(),_.key==="Escape"&&p(null),_.stopPropagation()},onClick:_=>_.stopPropagation(),autoFocus:!0,className:"w-10 px-1 font-semibold text-gray-700 bg-white rounded border border-[#4ECDC4] outline-none"}):u.jsxs("span",{onClick:_=>{f.isAutoCalculated||(_.stopPropagation(),p({dayId:le,placeId:f.id,field:"time",value:f.transportTime||""}))},className:`font-semibold ${f.isAutoCalculated?"text-gray-700":"text-gray-600"}`,children:[f.transportTime||"--"," min"]}),u.jsx("span",{className:"text-gray-400",children:"|"}),!f.isAutoCalculated&&(m==null?void 0:m.dayId)===le&&(m==null?void 0:m.placeId)===f.id&&(m==null?void 0:m.field)==="distance"?u.jsx("input",{type:"number",step:"0.1",value:m.value,onChange:_=>p({...m,value:_.target.value}),onBlur:()=>{const _=D.map(A=>({...A,places:A.places.map(L=>L.id===f.id&&A.id===le?{...L,distance:m.value,isAutoCalculated:!1}:L)}));C(_),p(null)},onKeyDown:_=>{_.key==="Enter"&&_.target.blur(),_.key==="Escape"&&p(null),_.stopPropagation()},onClick:_=>_.stopPropagation(),autoFocus:!0,className:"w-10 px-1 font-semibold text-gray-700 bg-white rounded border border-[#4ECDC4] outline-none"}):u.jsx("span",{onClick:_=>{f.isAutoCalculated||(_.stopPropagation(),p({dayId:le,placeId:f.id,field:"distance",value:f.distance||""}))},className:`font-semibold ${f.isAutoCalculated?"text-gray-700":"text-gray-600"}`,children:f.distance?`${f.distance} km`:f.transportTime?"-- km":"--"}),u.jsx(sI,{size:12,className:"text-gray-400"})]}),(pt==null?void 0:pt.dayId)===le&&(pt==null?void 0:pt.placeId)===f.id&&u.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white rounded-lg shadow-xl border border-gray-200 z-50 min-w-[140px]",children:["walking","car","transit","plane"].map((_,A,L)=>u.jsxs("button",{type:"button",onClick:W=>{W.preventDefault(),W.stopPropagation(),Co(le,f.id,_)},className:`w-full flex items-center gap-2 px-3 py-2 hover:bg-gray-50 transition-colors ${f.transportMode===_?"bg-[#4ECDC4]/10":""} ${A===0?"rounded-t-lg":""} ${A===L.length-1?"rounded-b-lg":""}`,children:[_==="walking"&&u.jsx(Zo,{size:16,className:"text-[#4ECDC4]"}),_==="car"&&u.jsx(Vh,{size:16,className:"text-[#4ECDC4]"}),_==="transit"&&u.jsx($c,{size:16,className:"text-[#4ECDC4]"}),_==="plane"&&u.jsx(Ri,{size:16,className:"text-[#4ECDC4]"}),u.jsx("span",{className:"text-sm font-medium text-gray-700",children:_==="transit"?"Transport":_.charAt(0).toUpperCase()+_.slice(1)})]},_))})]})}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:u.jsx("button",{onClick:_=>{_.stopPropagation(),Nr(bs===w?null:w)},className:"text-teal-500 hover:text-teal-600 transition-colors cursor-pointer pointer-events-auto",title:"Add place here",children:u.jsx(a1,{size:28})})})]}),w>0&&bs===w&&u.jsxs("div",{className:"my-2",ref:ci,children:[!ue&&u.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 z-20 w-56 bg-white rounded-xl shadow-2xl border border-gray-200 p-2",children:[u.jsxs("button",{onClick:_=>{_.stopPropagation(),De("place")},className:"w-full px-2.5 py-1.5 hover:bg-gray-50 transition-colors flex items-center gap-2 rounded-lg",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center text-blue-600",children:u.jsx(Vo,{size:14})}),u.jsx("div",{className:"text-left",children:u.jsx("div",{className:"font-semibold text-sm text-gray-900 leading-tight",children:"Place / Attraction"})})]}),u.jsxs("button",{onClick:_=>{_.stopPropagation(),De("restaurant")},className:"w-full px-2.5 py-1.5 hover:bg-gray-50 transition-colors flex items-center gap-2 rounded-lg",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-100 flex items-center justify-center text-orange-600",children:u.jsx(Bo,{size:13})}),u.jsx("div",{className:"text-left",children:u.jsx("div",{className:"font-semibold text-sm text-gray-900 leading-tight",children:"Restaurant"})})]}),u.jsxs("button",{onClick:_=>{_.stopPropagation(),De("cafe")},className:"w-full px-2.5 py-1.5 hover:bg-gray-50 transition-colors flex items-center gap-2 rounded-lg",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg bg-amber-100 flex items-center justify-center text-amber-700",children:u.jsx(Uo,{size:14})}),u.jsx("div",{className:"text-left",children:u.jsx("div",{className:"font-semibold text-sm text-gray-900 leading-tight",children:"Caf / Bar"})})]}),u.jsxs("button",{onClick:_=>{_.stopPropagation(),De("activity")},className:"w-full px-2.5 py-1.5 hover:bg-gray-50 transition-colors flex items-center gap-2 rounded-lg",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-100 flex items-center justify-center text-green-600",children:u.jsx(zo,{size:14})}),u.jsx("div",{className:"text-left",children:u.jsx("div",{className:"font-semibold text-sm text-gray-900 leading-tight",children:"Activity"})})]}),u.jsxs("button",{onClick:_=>{_.stopPropagation(),De("note")},className:"w-full px-2.5 py-1.5 hover:bg-gray-50 transition-colors flex items-center gap-2 rounded-lg",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-100 flex items-center justify-center text-purple-600",children:u.jsx(Ai,{size:14})}),u.jsx("div",{className:"text-left",children:u.jsx("div",{className:"font-semibold text-sm text-gray-900 leading-tight",children:"Note"})})]})]}),ue&&u.jsx("div",{className:"p-3 border-2 border-dashed border-blue-300 rounded-lg bg-blue-50",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"flex-shrink-0",children:[ue==="place"&&u.jsx("div",{className:"w-6 h-6 rounded-lg bg-blue-500 flex items-center justify-center",children:u.jsx(Vo,{size:12,className:"text-white"})}),ue==="restaurant"&&u.jsx("div",{className:"w-6 h-6 rounded-lg bg-orange-500 flex items-center justify-center",children:u.jsx(Bo,{size:10,className:"text-white"})}),ue==="cafe"&&u.jsx("div",{className:"w-6 h-6 rounded-lg bg-amber-600 flex items-center justify-center",children:u.jsx(Uo,{size:12,className:"text-white"})}),ue==="activity"&&u.jsx("div",{className:"w-6 h-6 rounded-lg bg-green-500 flex items-center justify-center",children:u.jsx(zo,{size:12,className:"text-white"})}),ue==="note"&&u.jsx("div",{className:"w-6 h-6 rounded-lg bg-purple-500 flex items-center justify-center",children:u.jsx(Ai,{size:12,className:"text-white"})})]}),u.jsx("input",{type:"text",placeholder:"Type name and press Enter...",className:"flex-1 px-2 py-1 border border-gray-300 rounded text-sm focus:border-blue-500 focus:outline-none",onKeyDown:_=>{if(_.key==="Enter"&&_.target.value.trim()){const A={id:Date.now(),name:_.target.value.trim(),type:ue,address:"",notes:"",visited:!1,transportMode:"walking",transportTime:"",distance:"",startTime:"",endTime:"",priority:0},L=D.map(W=>{if(W.id===le){const Z=[...W.places];return Z.splice(w,0,A),{...W,places:Z}}return W});C(L),Nr(null),De(null),_.target.value=""}else _.key==="Escape"&&(Nr(null),De(null))},onClick:_=>_.stopPropagation(),autoFocus:!0}),u.jsx("button",{onClick:_=>{_.stopPropagation(),Nr(null),De(null)},className:"p-1 text-gray-400 hover:text-gray-600 flex-shrink-0",children:u.jsx(gn,{size:14})})]})})]}),u.jsxs("div",{className:"flex items-stretch gap-3 group relative",children:[!Bf(f.type)&&u.jsxs("div",{className:"flex-shrink-0 w-10 flex flex-col items-center relative",children:[u.jsx("div",{className:"w-9 h-9 flex items-center justify-center mb-2",children:u.jsxs("div",{className:"relative w-9 h-9 flex items-center justify-center text-[#FF6B6B] drop-shadow-sm",children:[u.jsx(fW,{size:30}),u.jsx("span",{className:"absolute text-[13px] font-bold text-white top-1.5",children:w+1})]})}),!f.visited&&u.jsx("button",{onMouseDown:_=>_.preventDefault(),className:"absolute left-1/2 -translate-x-1/2 -translate-y-1/2 top-1/2 opacity-0 group-hover:opacity-100 transition-opacity",title:"Drag to reorder",children:u.jsx(s1,{size:18,className:"text-gray-400 cursor-grab active:cursor-grabbing"})})]}),Bf(f.type)&&u.jsx("div",{className:"flex-shrink-0 w-10 flex items-center justify-center",children:!f.visited&&u.jsx("button",{onMouseDown:_=>_.preventDefault(),className:"opacity-60 hover:opacity-100 transition-opacity text-gray-400 hover:text-gray-600",title:"Drag to reorder",children:u.jsx(s1,{size:16})})}),u.jsx("div",{draggable:!f.visited&&(ve==null?void 0:ve.placeId)!==f.id,onDragStart:_=>Io(_,le,f.id),onDragOver:ns,onDrop:_=>Ei(_,le,f.id),onDragEnd:Na,onClick:()=>{ha||Cs(f.id)},className:`flex-1 transition-all ring-1 ring-transparent ${Bf(f.type)?`rounded-xl bg-white border border-gray-200 shadow-sm hover:shadow-md hover:-translate-y-0.5 px-3 py-2 ${f.visited?"opacity-80":""}`:`relative rounded-2xl overflow-visible ${f.visited?"bg-gray-50 border border-gray-200":"bg-white/90 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-0.5 hover:ring-[#FF6B6B]/15 cursor-move"}`} ${(ft==null?void 0:ft.placeId)===f.id?"opacity-50":""}`,children:Bf(f.type)?u.jsxs("div",{className:"relative flex items-center gap-2 pr-14",children:[u.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[u.jsx("div",{className:"w-9 h-9 rounded-lg bg-gray-100 flex items-center justify-center text-gray-700",children:lQ(f.type,16,"text-gray-700")}),u.jsx("div",{className:"min-w-0",children:u.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:f.name||"Item"})})]}),u.jsxs("div",{className:"absolute top-1.5 right-1 flex items-center gap-1",children:[u.jsx("button",{onClick:_=>{_.stopPropagation(),Cs(f.id)},className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Show on map",children:u.jsx(Rf,{size:16})}),u.jsx("button",{onClick:_=>{_.stopPropagation(),bi(le,f.id)},className:"p-1.5 text-red-600 hover:bg-red-50 rounded-lg",children:u.jsx(nu,{size:16})})]}),u.jsx("div",{className:"mt-1 flex items-center gap-1.5 text-xs text-gray-700",children:u.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-white border border-gray-200 rounded-md shadow-sm",children:[u.jsx(i1,{size:14,className:"text-gray-500"}),u.jsx("input",{type:"text",inputMode:"decimal",value:f.cost||"",onChange:_=>{const A=D.map(L=>({...L,places:L.places.map(W=>W.id===f.id&&L.id===le?{...W,cost:_.target.value}:W)}));C(A)},onClick:_=>_.stopPropagation(),className:"w-14 px-2 py-1 border border-gray-100 rounded bg-slate-50 text-[11px] font-semibold text-gray-800 focus:border-[#4ECDC4] focus:ring-1 focus:ring-[#4ECDC4] focus:outline-none",placeholder:"25.00"}),u.jsxs("button",{onClick:_=>{_.stopPropagation();const A=_.currentTarget.getBoundingClientRect();F({top:A.bottom+8,left:A.right-180}),G(X===f.id?null:f.id)},className:"px-2 py-1 text-gray-700 hover:text-[#0b6559] hover:border-[#4ECDC4] transition-colors cursor-pointer text-[11px] font-semibold border border-gray-100 rounded bg-white",children:[(f.currency||"EUR")==="EUR"&&"",(f.currency||"EUR")==="USD"&&"$",(f.currency||"EUR")==="GBP"&&"",(f.currency||"EUR")==="CHF"&&"CHF",(f.currency||"EUR")==="BRL"&&"R$"]})]})})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"p-4 sm:p-5 bg-gradient-to-br from-white via-white to-[#FFE66D]/10",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"flex-shrink-0",children:f.photoUrl?u.jsxs("div",{className:"relative w-24 h-24 rounded-2xl overflow-hidden shadow-md border border-gray-100",children:[u.jsx("img",{src:f.photoUrl,alt:f.name,className:"w-full h-full object-cover",loading:"lazy"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 via-transparent to-transparent"}),f.type&&f.type!=="place"&&u.jsx("div",{className:"absolute bottom-1 left-1",children:u.jsxs("div",{className:"w-8 h-8 rounded-lg bg-white/90 backdrop-blur flex items-center justify-center shadow",children:[f.type==="restaurant"&&u.jsx(Bo,{size:14,className:"text-orange-500"}),f.type==="cafe"&&u.jsx(Uo,{size:16,className:"text-amber-600"}),f.type==="activity"&&u.jsx(zo,{size:16,className:"text-green-500"}),f.type==="note"&&u.jsx(Ai,{size:16,className:"text-purple-500"})]})})]}):u.jsxs("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-[#FF6B6B] to-[#FFE66D] flex items-center justify-center shadow-sm text-white",children:[f.type==="place"&&u.jsx(Vo,{size:18,className:"text-white"}),f.type==="restaurant"&&u.jsx(Bo,{size:15,className:"text-white"}),f.type==="cafe"&&u.jsx(Uo,{size:17,className:"text-white"}),f.type==="activity"&&u.jsx(zo,{size:17,className:"text-white"}),f.type==="note"&&u.jsx(Ai,{size:17,className:"text-white"}),!f.type&&u.jsx(Vo,{size:18,className:"text-white"})]})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[u.jsx("h4",{className:"font-bold text-base sm:text-lg text-gray-900",children:f.name}),u.jsx("div",{className:"flex items-center gap-0.5",children:[1,2,3,4,5].map(_=>{const A=f.priority||0,L=_<=A;return u.jsx("button",{onClick:W=>{W.stopPropagation(),Ls(le,f.id,_)},className:"transition-all hover:scale-110",title:`Priority: ${_}/5`,children:u.jsx(hW,{className:L?"text-yellow-500":"text-gray-300",size:16})},_)})})]}),u.jsx("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:f.visited&&u.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 text-[11px] rounded-full bg-[#ecfdf3] text-[#166534] border border-[#bbf7d0] shadow-sm font-semibold",children:[" ",u.jsx("span",{className:"tracking-tight",children:"Completed"})]})}),u.jsxs("div",{className:"relative -mt-1",children:[K===f.id&&u.jsxs("div",{className:"flex items-center gap-1 mb-1 p-1 bg-gray-50 border border-gray-200 rounded flex-wrap",onMouseDown:_=>_.preventDefault(),onClick:_=>_.stopPropagation(),children:[u.jsx("button",{onMouseDown:_=>{_.preventDefault(),document.execCommand("bold",!1,null)},className:"px-2 py-1 hover:bg-gray-200 rounded text-xs font-bold",title:"Bold",children:"B"}),u.jsx("button",{onMouseDown:_=>{_.preventDefault(),document.execCommand("italic",!1,null)},className:"px-2 py-1 hover:bg-gray-200 rounded text-xs italic",title:"Italic",children:"I"}),u.jsx("span",{className:"text-gray-300",children:"|"}),u.jsxs("select",{onMouseDown:_=>_.preventDefault(),onChange:_=>{document.execCommand("fontName",!1,_.target.value),_.target.value=""},className:"px-1 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Font",children:[u.jsx("option",{value:"",children:"Font"}),u.jsx("option",{value:"Arial",children:"Arial"}),u.jsx("option",{value:"Courier New",children:"Courier"}),u.jsx("option",{value:"Georgia",children:"Georgia"}),u.jsx("option",{value:"Times New Roman",children:"Times"}),u.jsx("option",{value:"Verdana",children:"Verdana"}),u.jsx("option",{value:"Comic Sans MS",children:"Comic Sans"})]}),u.jsx("input",{type:"color",onMouseDown:_=>_.preventDefault(),onChange:_=>{document.execCommand("foreColor",!1,_.target.value)},className:"w-6 h-6 border border-gray-300 rounded cursor-pointer",title:"Text Color"}),u.jsx("input",{type:"color",onMouseDown:_=>_.preventDefault(),onChange:_=>{document.execCommand("backColor",!1,_.target.value)},className:"w-6 h-6 border border-gray-300 rounded cursor-pointer",title:"Background Color"}),u.jsx("span",{className:"text-gray-300",children:"|"}),u.jsx("button",{onMouseDown:_=>_.preventDefault(),onClick:_=>{_.stopPropagation(),pe(ge===f.id?null:f.id)},className:"px-2 py-1 hover:bg-gray-200 rounded text-xs",title:"Add Emoji",children:""}),ge===f.id&&u.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-300 rounded shadow-lg p-2 z-10 flex flex-wrap gap-1 max-w-[200px]",onMouseDown:_=>_.preventDefault(),children:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""].map(_=>u.jsx("button",{onMouseDown:A=>{A.preventDefault(),document.execCommand("insertText",!1,_),pe(null)},className:"text-lg hover:bg-gray-100 rounded p-1",children:_},_))})]}),u.jsx("div",{contentEditable:!0,suppressContentEditableWarning:!0,onFocus:_=>{_.stopPropagation(),ae(f.id)},onBlur:_=>{setTimeout(()=>{ae(null),pe(null)},200);const A=D.map(L=>({...L,places:L.places.map(W=>W.id===f.id&&L.id===le?{...W,notes:_.currentTarget.innerHTML}:W)}));C(A)},onClick:_=>_.stopPropagation(),onKeyDown:_=>_.stopPropagation(),dangerouslySetInnerHTML:{__html:f.notes||""},"data-placeholder":"Add notes, links and so on...",className:"text-gray-600 text-sm mb-2 px-2 py-1 border border-transparent hover:border-gray-300 focus:border-[#4ECDC4] rounded outline-none min-h-[24px] max-h-[200px] overflow-y-auto transition-all empty:before:content-[attr(data-placeholder)] empty:before:text-gray-400",style:{wordWrap:"break-word",whiteSpace:"pre-wrap"}})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs flex-wrap",children:[u.jsxs("div",{className:"relative flex items-center gap-1",onClick:_=>_.stopPropagation(),onPointerDown:_=>_.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-white border border-gray-200 rounded-md shadow-sm",children:[u.jsx(pW,{size:14,className:"text-gray-600"}),u.jsx("button",{type:"button",onPointerDown:_=>_.stopPropagation(),onDragStart:_=>_.preventDefault(),onClick:_=>{_.stopPropagation(),Di(f.id,"start",_.currentTarget)},className:"w-14 px-1.5 py-1 border border-gray-100 rounded bg-slate-50 text-[11px] font-semibold text-gray-800 hover:border-[#4ECDC4] focus:outline-none",children:f.startTime?Ho(f.startTime):"Start"}),u.jsx("span",{className:"text-gray-300 text-xs",children:""}),u.jsx("button",{type:"button",onPointerDown:_=>_.stopPropagation(),onDragStart:_=>_.preventDefault(),onClick:_=>{_.stopPropagation(),Di(f.id,"end",_.currentTarget)},className:"w-14 px-1.5 py-1 border border-gray-100 rounded bg-slate-50 text-[11px] font-semibold text-gray-800 hover:border-[#4ECDC4] focus:outline-none",children:f.endTime?Ho(f.endTime):"End"})]}),(ve==null?void 0:ve.placeId)===f.id&&u.jsxs("div",{ref:Qn,className:"fixed z-30 bg-white border border-gray-200 rounded-lg shadow-lg p-2 flex gap-2",onPointerDown:_=>_.stopPropagation(),style:{top:je.top,left:je.left},children:[u.jsx("div",{className:"flex-1 max-h-48 overflow-y-auto border-r border-gray-100 pr-2",children:Array.from({length:24}).map((_,A)=>{const L=wE(ve.field==="start"?f.startTime:f.endTime),W=L.hour===A;return u.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),ss(le,f.id,ve.field,bE(A,L.minute),!1)},className:`w-full text-left px-3 py-1 text-[11px] rounded hover:bg-gray-50 ${W?"bg-[#4ECDC4]/10 text-[#0b6559] font-semibold":"text-gray-700"}`,children:Ho(`${String(A).padStart(2,"0")}:00`)},A)})}),u.jsx("div",{className:"flex-1 max-h-48 overflow-y-auto",children:[0,15,30,45].map(_=>{const A=wE(ve.field==="start"?f.startTime:f.endTime),L=A.minute===_;return u.jsxs("button",{type:"button",onClick:W=>{W.stopPropagation(),ss(le,f.id,ve.field,bE(A.hour,_),!0)},className:`w-full text-left px-3 py-1 text-[11px] rounded hover:bg-gray-50 ${L?"bg-[#4ECDC4]/10 text-[#0b6559] font-semibold":"text-gray-700"}`,children:[String(_).padStart(2,"0"),"m"]},_)})})]})]}),u.jsx("span",{className:"text-gray-300",children:"|"}),u.jsxs("div",{className:"flex items-center gap-1 relative",children:[u.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-white border border-gray-200 rounded-md shadow-sm",children:[u.jsx(i1,{size:14,className:"text-gray-500"}),u.jsx("input",{type:"text",inputMode:"decimal",value:f.cost||"",onChange:_=>{const A=D.map(L=>({...L,places:L.places.map(W=>W.id===f.id&&L.id===le?{...W,cost:_.target.value}:W)}));C(A)},onClick:_=>_.stopPropagation(),className:"w-14 px-2 py-1 border border-gray-100 rounded bg-slate-50 text-[11px] font-semibold text-gray-800 focus:border-[#4ECDC4] focus:ring-1 focus:ring-[#4ECDC4] focus:outline-none",placeholder:"25.00"}),u.jsxs("button",{onClick:_=>{_.stopPropagation();const A=_.currentTarget.getBoundingClientRect();F({top:A.bottom+8,left:A.right-180}),G(X===f.id?null:f.id)},className:"px-2 py-1 text-gray-700 hover:text-[#0b6559] hover:border-[#4ECDC4] transition-colors cursor-pointer text-[11px] font-semibold border border-gray-100 rounded bg-white",children:[(f.currency||"EUR")==="EUR"&&"",(f.currency||"EUR")==="USD"&&"$",(f.currency||"EUR")==="GBP"&&"",(f.currency||"EUR")==="CHF"&&"CHF",(f.currency||"EUR")==="BRL"&&"R$"]})]}),X===f.id&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-[998]",onClick:()=>G(null)}),u.jsxs("div",{className:"fixed bg-white rounded-lg shadow-2xl border border-gray-200 py-1 z-[999] min-w-[180px]",style:{top:`${B.top}px`,left:`${B.left}px`},onClick:_=>_.stopPropagation(),children:[u.jsxs("button",{onClick:_=>{_.stopPropagation();const A=D.map(L=>({...L,places:L.places.map(W=>W.id===f.id&&L.id===le?{...W,currency:"EUR"}:W)}));C(A),G(null)},className:`w-full text-left px-3 py-1.5 hover:bg-gray-100 transition-colors flex items-center justify-between ${(f.currency||"EUR")==="EUR"?"bg-[#4ECDC4] bg-opacity-10":""}`,children:[u.jsxs("span",{className:"text-sm text-gray-700 flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:""}),"Euro (EUR)"]}),(f.currency||"EUR")==="EUR"&&u.jsx("span",{className:"text-[#4ECDC4] text-xs",children:""})]}),u.jsxs("button",{onClick:_=>{_.stopPropagation();const A=D.map(L=>({...L,places:L.places.map(W=>W.id===f.id&&L.id===le?{...W,currency:"USD"}:W)}));C(A),G(null)},className:`w-full text-left px-3 py-1.5 hover:bg-gray-100 transition-colors flex items-center justify-between ${(f.currency||"EUR")==="USD"?"bg-[#4ECDC4] bg-opacity-10":""}`,children:[u.jsxs("span",{className:"text-sm text-gray-700 flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:""}),"US Dollar (USD)"]}),(f.currency||"EUR")==="USD"&&u.jsx("span",{className:"text-[#4ECDC4] text-xs",children:""})]}),u.jsxs("button",{onClick:_=>{_.stopPropagation();const A=D.map(L=>({...L,places:L.places.map(W=>W.id===f.id&&L.id===le?{...W,currency:"GBP"}:W)}));C(A),G(null)},className:`w-full text-left px-3 py-1.5 hover:bg-gray-100 transition-colors flex items-center justify-between ${(f.currency||"EUR")==="GBP"?"bg-[#4ECDC4] bg-opacity-10":""}`,children:[u.jsxs("span",{className:"text-sm text-gray-700 flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:""}),"British Pound (GBP)"]}),(f.currency||"EUR")==="GBP"&&u.jsx("span",{className:"text-[#4ECDC4] text-xs",children:""})]}),u.jsxs("button",{onClick:_=>{_.stopPropagation();const A=D.map(L=>({...L,places:L.places.map(W=>W.id===f.id&&L.id===le?{...W,currency:"CHF"}:W)}));C(A),G(null)},className:`w-full text-left px-3 py-1.5 hover:bg-gray-100 transition-colors flex items-center justify-between ${(f.currency||"EUR")==="CHF"?"bg-[#4ECDC4] bg-opacity-10":""}`,children:[u.jsxs("span",{className:"text-sm text-gray-700 flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:""}),"Swiss Franc (CHF)"]}),(f.currency||"EUR")==="CHF"&&u.jsx("span",{className:"text-[#4ECDC4] text-xs",children:""})]}),u.jsxs("button",{onClick:_=>{_.stopPropagation();const A=D.map(L=>({...L,places:L.places.map(W=>W.id===f.id&&L.id===le?{...W,currency:"BRL"}:W)}));C(A),G(null)},className:`w-full text-left px-3 py-1.5 hover:bg-gray-100 transition-colors flex items-center justify-between ${(f.currency||"EUR")==="BRL"?"bg-[#4ECDC4] bg-opacity-10":""}`,children:[u.jsxs("span",{className:"text-sm text-gray-700 flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:""}),"Brazilian Real (BRL)"]}),(f.currency||"EUR")==="BRL"&&u.jsx("span",{className:"text-[#4ECDC4] text-xs",children:""})]})]})]})]})]})]})]})}),u.jsxs("div",{className:"absolute top-3 right-3 flex gap-1 sm:gap-2 flex-shrink-0",children:[u.jsx("button",{onClick:_=>{_.stopPropagation(),Cs(f.id)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Show on map",children:u.jsx(Rf,{size:18})}),u.jsx("button",{onClick:_=>{_.stopPropagation(),bi(le,f.id)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:u.jsx(nu,{size:18})})]})]})})]})]},f.id))]}),u.jsx("div",{className:"mt-4",children:ue?u.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-4 bg-gray-50",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"flex-shrink-0",children:[ue==="place"&&u.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500 flex items-center justify-center",children:u.jsx(Vo,{size:16,className:"text-white"})}),ue==="restaurant"&&u.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-500 flex items-center justify-center",children:u.jsx(Bo,{size:14,className:"text-white"})}),ue==="cafe"&&u.jsx("div",{className:"w-8 h-8 rounded-lg bg-amber-600 flex items-center justify-center",children:u.jsx(Uo,{size:16,className:"text-white"})}),ue==="activity"&&u.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-500 flex items-center justify-center",children:u.jsx(zo,{size:16,className:"text-white"})}),ue==="note"&&u.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-500 flex items-center justify-center",children:u.jsx(Ai,{size:16,className:"text-white"})})]}),u.jsxs("div",{className:"relative flex-1",children:[u.jsx("input",{type:"text",placeholder:"Search for a place...",value:Or||_i.name,onChange:f=>{nn(f.target.value),Gr({..._i,name:f.target.value}),U(f.target.value)},className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-[#4ECDC4] focus:outline-none bg-white"}),Yt&&En.length>0&&u.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border-2 border-gray-200 rounded-lg shadow-lg divide-y max-h-60 overflow-y-auto",children:En.map(f=>{var w,_,A;return u.jsx("button",{onClick:()=>$(f),className:"w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors",children:u.jsxs("div",{className:"flex items-center gap-3",children:[f.photoUrl&&u.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden bg-gray-100 flex-shrink-0",children:u.jsx("img",{src:f.photoUrl,alt:((w=f.structured_formatting)==null?void 0:w.main_text)||f.description,className:"w-full h-full object-cover"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"font-medium text-sm",children:((_=f.structured_formatting)==null?void 0:_.main_text)||f.description}),u.jsx("div",{className:"text-xs text-gray-500",children:((A=f.structured_formatting)==null?void 0:A.secondary_text)||"Google Places"})]})]})},f.place_id)})}),ws&&u.jsx("div",{className:"absolute right-3 top-3 text-sm text-gray-400",children:"Searching..."})]}),u.jsx("button",{onClick:()=>{De(null),Gr({name:"",address:"",placeId:"",location:null,notes:"",transportMode:"walking",transportTime:"",distance:"",startTime:"",endTime:""}),nn(""),Wr([])},className:"text-gray-400 hover:text-gray-600 flex-shrink-0",children:u.jsx(gn,{size:20})})]})}):u.jsxs("div",{className:"relative",ref:Hr,children:[u.jsx("button",{onClick:()=>de(!ee),className:"w-full flex items-center justify-center text-teal-500 hover:text-teal-600 transition-colors cursor-pointer",title:"Add to This Day",children:u.jsx(a1,{size:28})}),ee&&u.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 z-10 w-64 mt-2 bg-white rounded-xl shadow-2xl border border-gray-200 p-2",children:[u.jsxs("button",{onClick:()=>{De("place"),de(!1)},className:"w-full px-2.5 py-1.5 hover:bg-gray-50 transition-colors flex items-center gap-2 rounded-lg",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center text-blue-600",children:u.jsx(Vo,{size:16})}),u.jsx("div",{className:"text-left",children:u.jsx("div",{className:"font-semibold text-sm text-gray-900 leading-tight",children:"Place / Attraction"})})]}),u.jsxs("button",{onClick:()=>{De("restaurant"),de(!1)},className:"w-full px-2.5 py-1.5 hover:bg-gray-50 transition-colors flex items-center gap-2 rounded-lg",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-100 flex items-center justify-center text-orange-600",children:u.jsx(Bo,{size:14})}),u.jsx("div",{className:"text-left",children:u.jsx("div",{className:"font-semibold text-sm text-gray-900 leading-tight",children:"Restaurant"})})]}),u.jsxs("button",{onClick:()=>{De("cafe"),de(!1)},className:"w-full px-2.5 py-1.5 hover:bg-gray-50 transition-colors flex items-center gap-2 rounded-lg",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg bg-amber-100 flex items-center justify-center text-amber-700",children:u.jsx(Uo,{size:16})}),u.jsx("div",{className:"text-left",children:u.jsx("div",{className:"font-semibold text-sm text-gray-900 leading-tight",children:"Caf / Bar"})})]}),u.jsxs("button",{onClick:()=>{De("activity"),de(!1)},className:"w-full px-2.5 py-1.5 hover:bg-gray-50 transition-colors flex items-center gap-2 rounded-lg",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-100 flex items-center justify-center text-green-600",children:u.jsx(zo,{size:16})}),u.jsx("div",{className:"text-left",children:u.jsx("div",{className:"font-semibold text-sm text-gray-900 leading-tight",children:"Activity"})})]}),u.jsxs("button",{onClick:()=>{De("note"),de(!1)},className:"w-full px-2.5 py-1.5 hover:bg-gray-50 transition-colors flex items-center gap-2 rounded-lg",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-100 flex items-center justify-center text-purple-600",children:u.jsx(Ai,{size:16})}),u.jsx("div",{className:"text-left",children:u.jsx("div",{className:"font-semibold text-sm text-gray-900 leading-tight",children:"Note"})})]})]})]})})]})]}),Nt&&u.jsxs("div",{className:"bg-white border rounded-2xl shadow-md p-3 sm:p-4 space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Rf,{size:18,className:"text-[#4ECDC4]"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Day Map"}),u.jsx("p",{className:"text-xs text-gray-500",children:_e?Le(_e.date).toLocaleDateString():"Select a day to view pins"})]})]}),u.jsx("button",{onClick:()=>os(!1),className:"p-2 rounded-full hover:bg-gray-100 transition-colors",title:"Hide map",children:u.jsx(gn,{size:16})})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{ref:Vs,className:"w-full h-96 sm:h-[500px] lg:h-[600px] xl:h-[700px] rounded-xl overflow-hidden bg-gray-100"}),!Yt&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50",children:u.jsx("div",{className:"p-4 text-sm text-gray-500 bg-white rounded-lg border border-dashed",children:"Google Maps integration active"})}),Yt&&!ir&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50",children:u.jsx("div",{className:"p-4 text-center text-sm text-gray-500",children:"Loading map..."})}),ls&&u.jsx("div",{className:"absolute inset-0 bg-white/60 flex items-center justify-center text-sm text-gray-600",children:"Mapping your stops..."}),ir&&!((Ml=_e==null?void 0:_e.places)!=null&&Ml.length)&&!ls&&!Ma&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsxs("div",{className:"relative p-4 text-sm text-gray-500 bg-white/90 rounded-lg border border-dashed backdrop-blur-sm pointer-events-auto",children:["Add places to this day to see pins here.",u.jsx("button",{onClick:()=>Ra(!0),className:"absolute -top-2 -right-2 p-1 bg-white rounded-full shadow-md hover:bg-gray-100 transition-colors",title:"Dismiss",children:u.jsx(gn,{size:14,className:"text-gray-600"})})]})})]})]})]}),b==="hotels"&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h2",{className:"text-2xl font-bold",children:"Hotels"}),u.jsxs("button",{onClick:()=>O(!0),className:"px-4 py-2 bg-gradient-to-r from-[#26DE81] to-[#1ABC9C] text-white rounded-xl hover:shadow-lg transition-all hover:scale-[1.02] flex items-center gap-2 font-medium",children:[u.jsx(Ic,{size:20}),"Add Hotel"]})]}),y.length===0?u.jsxs("div",{className:"text-center py-12 text-gray-500",children:[u.jsx(tp,{size:48,className:"mx-auto mb-4 opacity-50 text-[#26DE81]"}),u.jsx("p",{children:'No hotels added yet. Click "Add Hotel" to get started.'})]}):u.jsx("div",{className:"space-y-3",children:y.map(f=>u.jsx("div",{className:"border-2 border-gray-100 rounded-xl p-4 hover:shadow-lg hover:border-[#26DE81]/30 transition-all",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"font-bold text-lg",children:f.name||"Hotel"}),f.price&&u.jsx("span",{className:"text-sm font-semibold text-[#1B7F79]",children:gp(f.price,f.priceCurrency||"USD")})]}),u.jsxs("div",{className:"text-sm text-gray-700 flex gap-3 flex-wrap",children:[f.address&&u.jsxs("span",{children:[" ",f.address]}),f.city&&u.jsxs("span",{children:[" ",f.city]}),f.state&&u.jsxs("span",{children:[" ",f.state]}),f.country&&u.jsxs("span",{children:[" ",f.country]})]}),u.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:[f.checkIn?`Check-in: ${f.checkIn}`:"Check-in not set","  ",f.checkOut?` Check-out: ${f.checkOut}`:""]})]}),u.jsx("button",{onClick:()=>So(f.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:u.jsx(nu,{size:18})})]})},f.id))}),V&&u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-4 sm:p-5 max-w-3xl w-full max-h-[92vh] overflow-y-auto border border-gray-100",children:[u.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs uppercase tracking-[0.12em] text-[#1B7F79] font-semibold",children:"Hotels"}),u.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Add Hotel"})]}),u.jsx("button",{onClick:()=>{O(!1)},className:"p-2 rounded-full hover:bg-gray-100 text-gray-500",children:u.jsx(gn,{size:18})})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"grid sm:grid-cols-3 gap-2 bg-gray-50 border border-gray-200 rounded-xl p-2",children:[{key:"manual",label:"Manual",icon:u.jsx(rp,{size:16})},{key:"pdf",label:"PDF",icon:u.jsx(Mf,{size:16}),ai:!0},{key:"image",label:"Image",icon:u.jsx(Zb,{size:16}),ai:!0}].map(f=>u.jsxs("button",{onClick:()=>Cn(f.key),className:`flex items-center justify-center gap-2 px-3 py-2 rounded-lg border text-sm transition-all ${yr===f.key?"border-[#4ECDC4] bg-white shadow-sm text-[#1B7F79]":"border-transparent bg-gray-50 hover:border-gray-200 text-gray-700"}`,children:[f.icon,u.jsxs("span",{className:"flex items-center gap-1",children:[f.label,f.ai&&u.jsx(t1,{size:14,className:"text-[#4ECDC4]"})]})]},f.key))}),yr!=="manual"&&u.jsxs("div",{className:"border border-gray-200 rounded-xl p-3 space-y-3 bg-gray-50",onPaste:yr==="image"?ks:void 0,children:[u.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[u.jsx(Af,{size:16,className:"text-[#4ECDC4]"}),u.jsx("span",{children:yr==="pdf"?"Upload booking PDF":"Upload or paste booking image"})]}),u.jsx("span",{className:"text-xs text-gray-500",children:"Cmd/Ctrl + V to paste"})]}),u.jsxs("label",{className:"inline-flex items-center gap-2 px-4 py-2 bg-white border rounded-lg cursor-pointer hover:border-[#4ECDC4] transition-colors text-sm",children:[u.jsx(Af,{size:14}),u.jsx("span",{children:"Select file"}),u.jsx("input",{type:"file",accept:yr==="pdf"?"application/pdf":"image/*",className:"hidden",onChange:f=>{var w;return wi(((w=f.target.files)==null?void 0:w[0])||null)}})]}),pi&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[u.jsx(Mf,{size:14,className:"text-[#4ECDC4]"}),u.jsx("span",{children:pi.name}),u.jsxs("span",{className:"text-gray-400",children:["(",pi.type,")"]}),u.jsx("button",{type:"button",onClick:Ca,className:"ml-1 inline-flex items-center justify-center rounded-full border border-red-200 text-red-500 hover:bg-red-50 w-6 h-6",title:"Remove file",children:u.jsx(gn,{size:12})})]}),yi.length>0&&!Je.price&&u.jsxs("div",{className:"border border-amber-200 bg-amber-50 rounded-lg p-3 space-y-2",children:[u.jsx("div",{className:"text-sm font-semibold text-amber-800",children:"Pick the total"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:yi.map((f,w)=>u.jsxs("button",{type:"button",onClick:()=>Ut(_=>({..._,price:f.value,priceCurrency:$l(f.value)||_.priceCurrency})),className:"px-3 py-1.5 rounded-lg border border-amber-200 bg-white text-sm text-amber-800 hover:border-amber-300 hover:-translate-y-0.5 transition-all shadow-sm",children:[f.label?`${f.label}: `:"",f.value]},`${f.label}-${w}`))}),u.jsx("div",{className:"text-xs text-amber-700",children:"We couldn't identify a single total; please choose the correct amount."})]}),Da&&u.jsx("div",{className:"rounded-lg overflow-hidden border bg-white",children:u.jsx("img",{src:Da,alt:"Hotel booking preview",className:"max-h-48 w-full object-contain"})}),To&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-[#1B7F79]",children:[u.jsx(e1,{size:14,className:"animate-spin"}),"Extracting details..."]}),On&&u.jsx("div",{className:"text-sm text-red-600",children:On})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[u.jsx("input",{type:"text",placeholder:"Hotel name *",value:Je.name,onChange:f=>Ut({...Je,name:f.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] transition"}),u.jsx("input",{type:"text",placeholder:"Address",value:Je.address,onChange:f=>Ut({...Je,address:f.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] transition"}),u.jsx("input",{type:"text",placeholder:"City",value:Je.city,onChange:f=>Ut({...Je,city:f.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] transition"}),u.jsx("input",{type:"text",placeholder:"State",value:Je.state,onChange:f=>Ut({...Je,state:f.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] transition"}),u.jsx("input",{type:"text",placeholder:"Country",value:Je.country,onChange:f=>Ut({...Je,country:f.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] transition"}),u.jsx("input",{type:"date",placeholder:"Check-in",value:Je.checkIn,onChange:f=>Ut({...Je,checkIn:f.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] transition"}),u.jsx("input",{type:"date",placeholder:"Check-out",value:Je.checkOut,onChange:f=>Ut({...Je,checkOut:f.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] transition"}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsx("input",{type:"text",placeholder:"Price",value:Je.price,onChange:f=>Ut({...Je,price:f.target.value,priceCurrency:$l(f.target.value)||Je.priceCurrency}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] transition"}),u.jsxs("select",{value:Je.priceCurrency,onChange:f=>Ut({...Je,priceCurrency:f.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] transition bg-white",children:[u.jsx("option",{value:"USD",children:"USD"}),u.jsx("option",{value:"EUR",children:"EUR"}),u.jsx("option",{value:"GBP",children:"GBP"}),u.jsx("option",{value:"CHF",children:"CHF"}),u.jsx("option",{value:"BRL",children:"BRL"}),u.jsx("option",{value:"CAD",children:"CAD"}),u.jsx("option",{value:"AUD",children:"AUD"}),u.jsx("option",{value:"JPY",children:"JPY"})]})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[u.jsx("button",{onClick:Oa,disabled:!Je.name||!Je.checkIn||!Je.checkOut,className:"flex-1 px-4 py-3 bg-gradient-to-r from-[#26DE81] to-[#1ABC9C] text-white rounded-xl hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base font-semibold",children:"Save Hotel"}),u.jsx("button",{onClick:()=>O(!1),className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl hover:bg-gray-50 text-sm sm:text-base transition-all",children:"Cancel"})]})]})]})})]}),b==="flights"&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h2",{className:"text-2xl font-bold",children:"Flights"}),u.jsxs("button",{onClick:()=>{un(),M(!0)},className:"px-4 py-2 bg-gradient-to-r from-[#4ECDC4] to-[#44A08D] text-white rounded-xl hover:shadow-lg transition-all hover:scale-[1.02] flex items-center gap-2 font-medium",children:[u.jsx(Ic,{size:20}),"Add Flight"]})]}),d.length===0?u.jsxs("div",{className:"text-center py-12 text-gray-500",children:[u.jsx(Ri,{size:48,className:"mx-auto mb-4 opacity-50 text-[#4ECDC4]"}),u.jsx("p",{children:'No flights added yet. Click "Add Flight" to get started.'})]}):u.jsx("div",{className:"space-y-3",children:d.map(f=>u.jsx("div",{className:"border-2 border-gray-100 rounded-xl p-4 hover:shadow-lg hover:border-[#4ECDC4]/30 transition-all",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsxs("span",{className:"font-bold text-lg",children:[f.airline," ",f.flightNumber]}),u.jsx("span",{className:"text-sm text-gray-500",children:f.bookingRef})]}),u.jsxs("div",{className:"flex items-center gap-4 text-gray-700",children:[u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:f.from}),u.jsx("div",{className:"text-sm",children:f.departureTime})]}),u.jsx(Ri,{size:20,className:"text-[#4ECDC4]"}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:f.to}),u.jsx("div",{className:"text-sm",children:f.arrivalTime})]})]}),u.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:[(()=>{const w=f.departureDate||f.date,_=f.arrivalDate,A=L=>L?new Date(L).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"";return w&&_&&w!==_?`${A(w)}  ${A(_)}`:w?A(w):"Date not set"})(),gp(f.price,f.priceCurrency)&&u.jsxs("span",{className:"ml-2 inline-flex items-center text-gray-700 font-semibold",children:[" ",gp(f.price,f.priceCurrency)]}),f.groupId&&u.jsxs("div",{className:"mt-1 inline-flex items-center gap-2 px-2 py-1 rounded-full bg-[#4ECDC4]/10 text-[#0b6559] text-xs font-semibold",children:["Round trip",u.jsx("span",{className:"px-2 py-[2px] bg-white/70 rounded border border-[#4ECDC4]/40",children:f.leg==="return"?"Return":"Outbound"})]})]})]}),u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("button",{onClick:()=>{ut({airline:f.airline||"",flightNumber:f.flightNumber||"",from:f.from||"",to:f.to||"",departureDate:f.departureDate||f.date||"",arrivalDate:f.arrivalDate||"",date:f.date||"",departureTime:f.departureTime||"",arrivalTime:f.arrivalTime||"",bookingRef:f.bookingRef||"",price:f.price||"",priceCurrency:f.priceCurrency||"USD",isRoundTrip:!1,returnDate:"",returnDepartureTime:"",returnArrivalTime:""}),es(f.id),M(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",children:u.jsx(rp,{size:18})}),u.jsx("button",{onClick:()=>ja(f.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:u.jsx(nu,{size:18})})]})]})},f.id))}),j&&u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-4 sm:p-5 max-w-3xl w-full max-h-[92vh] overflow-y-auto border border-gray-100",children:[u.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs uppercase tracking-[0.12em] text-[#1B7F79] font-semibold",children:"Flights"}),u.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:$e?"Edit Flight":"Add Flight"})]}),u.jsx("button",{onClick:()=>{un(),M(!1)},className:"p-2 rounded-full hover:bg-gray-100 text-gray-500",children:u.jsx(gn,{size:18})})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"grid sm:grid-cols-3 gap-2 bg-gray-50 border border-gray-200 rounded-xl p-2",children:[{key:"manual",label:"Manual",icon:u.jsx(rp,{size:16})},{key:"pdf",label:"PDF",icon:u.jsx(Mf,{size:16}),ai:!0},{key:"image",label:"Image",icon:u.jsx(Zb,{size:16}),ai:!0}].map(f=>u.jsxs("button",{onClick:()=>ba(f.key),className:`flex items-center justify-center gap-2 px-3 py-2 rounded-lg border text-sm transition-all ${Pn===f.key?"border-[#4ECDC4] bg-white shadow-sm text-[#1B7F79]":"border-transparent bg-gray-50 hover:border-gray-200 text-gray-700"}`,children:[f.icon,u.jsxs("span",{className:"flex items-center gap-1",children:[f.label,f.ai&&u.jsx(t1,{size:14,className:"text-[#4ECDC4]"})]})]},f.key))}),Pn!=="manual"&&u.jsxs("div",{className:"border border-gray-200 rounded-xl p-3 space-y-3 bg-gray-50",onPaste:Pn==="image"?Pa:void 0,children:[u.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[u.jsx(Af,{size:16,className:"text-[#4ECDC4]"}),u.jsx("span",{children:Pn==="pdf"?"Upload e-ticket PDF":"Upload or paste ticket image"})]}),u.jsx("span",{className:"text-xs text-gray-500",children:"Cmd/Ctrl + V to paste"})]}),u.jsxs("label",{className:"inline-flex items-center gap-2 px-4 py-2 bg-white border rounded-lg cursor-pointer hover:border-[#4ECDC4] transition-colors text-sm",children:[u.jsx(Af,{size:14}),u.jsx("span",{children:"Select file"}),u.jsx("input",{type:"file",accept:Pn==="pdf"?"application/pdf":"image/*",className:"hidden",onChange:f=>{var w;return Nn(((w=f.target.files)==null?void 0:w[0])||null)}})]}),Ns&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[u.jsx(Mf,{size:14,className:"text-[#4ECDC4]"}),u.jsx("span",{children:Ns.name}),u.jsxs("span",{className:"text-gray-400",children:["(",Ns.type,")"]})]}),Ea&&u.jsx("div",{className:"rounded-lg overflow-hidden border bg-white",children:u.jsx("img",{src:Ea,alt:"Flight ticket preview",className:"max-h-48 w-full object-contain"})}),Mr&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-[#1B7F79]",children:[u.jsx(e1,{size:14,className:"animate-spin"}),"Extracting details..."]}),Zn&&u.jsx("div",{className:"text-sm text-red-600",children:Zn})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[u.jsx("input",{type:"text",placeholder:"Airline *",value:he.airline,onChange:f=>ut({...he,airline:f.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] transition"}),u.jsx("input",{type:"text",placeholder:"Flight number *",value:he.flightNumber,onChange:f=>ut({...he,flightNumber:f.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] transition"}),u.jsx("input",{type:"text",placeholder:"From (airport) *",value:he.from,onChange:f=>ut({...he,from:f.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] transition"}),u.jsx("input",{type:"text",placeholder:"To (airport) *",value:he.to,onChange:f=>ut({...he,to:f.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] transition"}),u.jsx("input",{type:"date",value:he.departureDate||he.date,onChange:f=>ut({...he,departureDate:f.target.value,date:f.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] transition",placeholder:"Departure date"}),u.jsx("input",{type:"date",value:he.arrivalDate,onChange:f=>ut({...he,arrivalDate:f.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] transition",placeholder:"Arrival date"}),u.jsx("input",{type:"text",placeholder:"Booking reference",value:he.bookingRef,onChange:f=>ut({...he,bookingRef:f.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] transition"}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsx("input",{type:"text",placeholder:"Price (e.g., USD 350)",value:he.price,onChange:f=>ut({...he,price:f.target.value,priceCurrency:$l(f.target.value)||he.priceCurrency}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] transition"}),u.jsxs("select",{value:he.priceCurrency,onChange:f=>ut({...he,priceCurrency:f.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] transition bg-white",children:[u.jsx("option",{value:"USD",children:"USD"}),u.jsx("option",{value:"EUR",children:"EUR"}),u.jsx("option",{value:"GBP",children:"GBP"}),u.jsx("option",{value:"CHF",children:"CHF"}),u.jsx("option",{value:"BRL",children:"BRL"}),u.jsx("option",{value:"CAD",children:"CAD"}),u.jsx("option",{value:"AUD",children:"AUD"}),u.jsx("option",{value:"JPY",children:"JPY"})]})]}),u.jsx("input",{type:"time",placeholder:"Departure time",value:he.departureTime,onChange:f=>ut({...he,departureTime:f.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] transition"}),u.jsx("input",{type:"time",placeholder:"Arrival time",value:he.arrivalTime,onChange:f=>ut({...he,arrivalTime:f.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] transition"})]}),u.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50",children:[u.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-800 mb-3",children:[u.jsx("input",{type:"checkbox",checked:he.isRoundTrip,onChange:f=>ut({...he,isRoundTrip:f.target.checked})}),"Add return flight"]}),he.isRoundTrip&&u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[u.jsx("input",{type:"date",value:he.returnDate,onChange:f=>ut({...he,returnDate:f.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] transition",placeholder:"Return date"}),u.jsx("input",{type:"time",value:he.returnDepartureTime,onChange:f=>ut({...he,returnDepartureTime:f.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] transition",placeholder:"Return departure"}),u.jsx("input",{type:"time",value:he.returnArrivalTime,onChange:f=>ut({...he,returnArrivalTime:f.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#4ECDC4] focus:border-[#4ECDC4] transition",placeholder:"Return arrival"})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[u.jsx("button",{onClick:it,disabled:!he.airline||!he.flightNumber||!he.from||!he.to,className:"flex-1 px-4 py-3 bg-gradient-to-r from-[#4ECDC4] to-[#44A08D] text-white rounded-xl hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base font-semibold",children:$e?"Update Flight":"Save Flight"}),u.jsx("button",{onClick:()=>{un(),M(!1)},className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl hover:bg-gray-50 text-sm sm:text-base transition-all",children:"Cancel"})]})]})]})})]}),b==="expenses"&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h2",{className:"text-2xl font-bold",children:"Expenses"}),u.jsx("div",{className:"flex items-center gap-2",children:u.jsxs("div",{className:"flex items-center gap-2 bg-[#4ECDC4]/10 text-[#1B7F79] border border-[#4ECDC4]/30 rounded-full px-3 py-1 text-sm font-semibold",children:[u.jsx(Gs,{size:14}),u.jsx("span",{children:"Total"}),u.jsx("span",{children:Sl()}),u.jsxs("select",{value:Fs,onChange:f=>Sa(f.target.value),className:"bg-transparent outline-none font-semibold text-[#0b6559] text-xs border border-transparent rounded cursor-pointer",children:[u.jsx("option",{value:"EUR",children:"EUR"}),u.jsx("option",{value:"USD",children:"USD"}),u.jsx("option",{value:"GBP",children:"GBP"}),u.jsx("option",{value:"CHF",children:"CHF"}),u.jsx("option",{value:"BRL",children:"BRL"}),u.jsx("option",{value:"CAD",children:"CAD"}),u.jsx("option",{value:"AUD",children:"AUD"}),u.jsx("option",{value:"JPY",children:"JPY"})]})]})}),u.jsxs("button",{onClick:()=>tt(!0),className:"px-4 py-2 bg-gradient-to-r from-[#FFE66D] to-[#FFBE5C] text-gray-800 rounded-xl hover:shadow-lg transition-all hover:scale-[1.02] flex items-center gap-2 font-medium",children:[u.jsx(Ic,{size:20}),"Add Expense"]})]}),u.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl p-4 shadow-sm space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Gs,{size:16,className:"text-[#26DE81]"}),u.jsx("p",{className:"font-semibold text-gray-800",children:"Spending overview"})]}),u.jsx("div",{className:"flex items-center gap-2 text-sm",children:[{key:"category",label:"By category"},{key:"day",label:"By day"},{key:"city",label:"By city"},{key:"state",label:"By state"},{key:"country",label:"By country"}].map(f=>u.jsx("button",{onClick:()=>Kr(f.key),className:`px-3 py-1 rounded-full border text-sm transition ${Ta===f.key?"border-[#4ECDC4] text-[#1B7F79] bg-[#4ECDC4]/10":"border-gray-200 text-gray-600 hover:border-gray-300"}`,children:f.label},f.key))})]}),Zu(Ta)||u.jsx("p",{className:"text-sm text-gray-500",children:"No expenses yet to summarize."})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("h4",{className:"font-semibold text-gray-800",children:"Added expenses"}),R.length===0&&d.filter(f=>or(f.price)>0).length===0?u.jsx("div",{className:"text-sm text-gray-500",children:"No expenses added yet."}):u.jsx("div",{className:"space-y-2",children:(()=>{const f=[],w=new Set;return d.forEach(_=>{const A=or(_.price);if(A){if(_.groupId){if(w.has(_.groupId))return;w.add(_.groupId)}f.push({id:`flight-${_.id}`,description:`${_.airline||"Flight"} ${_.flightNumber||""}`.trim()||"Flight",category:"flight",amount:A,currency:_.priceCurrency||"USD",date:_.departureDate||_.date,city:_.from||"",country:"",leg:_.leg})}}),[...R,...f].sort((_,A)=>new Date(A.date||0)-new Date(_.date||0)).map(_=>u.jsx("div",{className:"border border-gray-200 rounded-lg p-2 bg-white hover:shadow-sm transition",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"flex items-center justify-center w-7 h-7 rounded-full bg-gray-50 border border-gray-200",children:bl(_.category)}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"font-semibold text-gray-900 truncate",children:_.description}),u.jsx("span",{className:"px-2 py-[2px] bg-gray-100 text-gray-700 rounded text-[11px] capitalize",children:_.category})]}),u.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-600",children:[u.jsx("span",{children:_.date?new Date(_.date).toLocaleDateString():"No date"}),_.city&&u.jsxs("span",{children:[" ",_.city]}),_.state&&u.jsxs("span",{children:[" ",_.state]}),_.country&&u.jsxs("span",{children:[" ",_.country]})]})]}),u.jsxs("div",{className:"text-right shrink-0",children:[u.jsxs("div",{className:"text-sm font-bold text-[#F7B731]",children:[_.currency||"USD"," $",parseFloat(_.amount||0).toFixed(2)]}),_.category!=="flight"&&_._source!=="place"&&u.jsx("button",{onClick:()=>is(_.id),className:"text-red-600 hover:text-red-700 text-[11px]",children:"Delete"})]})]})},_.id))})()})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h4",{className:"font-semibold text-gray-800",children:"Itinerary costs"}),D.every(f=>f.places.every(w=>!or(w.cost)))?u.jsx("div",{className:"text-sm text-gray-500",children:"No itinerary costs recorded."}):u.jsx("div",{className:"space-y-2",children:D.flatMap(f=>f.places.map(w=>{const _=or(w.cost);if(!_)return null;const A=Uf(w);return{id:`place-${f.id}-${w.id}`,description:w.name||"Place cost",amount:_,currency:w.currency||"EUR",date:f.date,city:A.city,state:A.state,country:A.country}}).filter(Boolean)).sort((f,w)=>new Date(w.date||0)-new Date(f.date||0)).map(f=>u.jsx("div",{className:"border border-gray-200 rounded-lg p-2 bg-white hover:shadow-sm transition",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"flex items-center justify-center w-7 h-7 rounded-full bg-gray-50 border border-gray-200",children:bl("places")}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"font-semibold text-gray-900 truncate",children:f.description}),u.jsx("span",{className:"px-2 py-[2px] bg-gray-100 text-gray-700 rounded text-[11px]",children:"Itinerary"})]}),u.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-600",children:[u.jsx("span",{children:f.date?new Date(f.date).toLocaleDateString():"No date"}),f.city&&u.jsxs("span",{children:[" ",f.city]}),f.state&&u.jsxs("span",{children:[" ",f.state]}),f.country&&u.jsxs("span",{children:[" ",f.country]})]})]}),u.jsx("div",{className:"text-right shrink-0",children:u.jsxs("div",{className:"text-sm font-bold text-[#F7B731]",children:[f.currency||"EUR"," $",parseFloat(f.amount||0).toFixed(2)]})})]})},f.id))})]})]}),et&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[u.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-4",children:"Add Expense"}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("input",{type:"text",placeholder:"Description *",value:gt.description,onChange:f=>_r({...gt,description:f.target.value}),className:"w-full px-3 py-2 border rounded-lg"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsx("input",{type:"number",step:"0.01",placeholder:"Amount *",value:gt.amount,onChange:f=>_r({...gt,amount:f.target.value}),className:"px-3 py-2 border rounded-lg"}),u.jsxs("select",{value:gt.currency,onChange:f=>_r({...gt,currency:f.target.value}),className:"px-3 py-2 border rounded-lg",children:[u.jsx("option",{value:"USD",children:"USD"}),u.jsx("option",{value:"EUR",children:"EUR"}),u.jsx("option",{value:"GBP",children:"GBP"}),u.jsx("option",{value:"BRL",children:"BRL"}),u.jsx("option",{value:"CHF",children:"CHF"})]}),u.jsxs("select",{value:gt.category,onChange:f=>_r({...gt,category:f.target.value}),className:"px-3 py-2 border rounded-lg",children:[u.jsx("option",{value:"food",children:"Food & Dining"}),u.jsx("option",{value:"accommodation",children:"Accommodation"}),u.jsx("option",{value:"transportation",children:"Transportation"}),u.jsx("option",{value:"activities",children:"Activities"}),u.jsx("option",{value:"shopping",children:"Shopping"}),u.jsx("option",{value:"other",children:"Other"})]}),u.jsx("input",{type:"date",value:gt.date,onChange:f=>_r({...gt,date:f.target.value}),className:"px-3 py-2 border rounded-lg"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",placeholder:"City",value:Dn||gt.city,onChange:f=>{oi(f.target.value),_r({...gt,city:f.target.value}),Yn(!0)},onFocus:()=>Yn(!0),onBlur:()=>setTimeout(()=>Yn(!1),200),className:"w-full px-3 py-2 border rounded-lg"}),ma&&Dn&&se(Dn).length>0&&u.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-60 overflow-y-auto",children:se(Dn).map(({city:f,country:w},_)=>u.jsxs("button",{onClick:()=>{_r({...gt,city:f,country:w}),oi(""),Yn(!1)},className:"w-full px-3 py-2 text-left hover:bg-indigo-50 flex justify-between items-center",children:[u.jsx("span",{className:"font-medium",children:f}),u.jsx("span",{className:"text-sm text-gray-500",children:w})]},_))})]}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",placeholder:"Country",value:Ds||gt.country,onChange:f=>{Hn(f.target.value),_r({...gt,country:f.target.value}),Tn(!0)},onFocus:()=>Tn(!0),onBlur:()=>setTimeout(()=>Tn(!1),200),className:"w-full px-3 py-2 border rounded-lg"}),qn&&Ds&&He(Ds).length>0&&u.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-60 overflow-y-auto",children:He(Ds).map((f,w)=>u.jsx("button",{onClick:()=>{_r({...gt,country:f}),Hn(""),Tn(!1)},className:"w-full px-3 py-2 text-left hover:bg-indigo-50",children:f},w))})]})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-6",children:[u.jsx("button",{onClick:Rr,disabled:!gt.description||!gt.amount,className:"flex-1 px-4 py-2 bg-gradient-to-r from-[#FFE66D] to-[#FFBE5C] text-gray-800 rounded-xl hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base font-medium",children:"Add Expense"}),u.jsx("button",{onClick:()=>tt(!1),className:"flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl hover:bg-gray-50 text-sm sm:text-base transition-all",children:"Cancel"})]})]})})]}),!1]}),Ht&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[u.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-4",children:"Google Maps API Setup"}),u.jsxs("div",{className:"space-y-4 mb-6",children:[u.jsx("p",{className:"text-gray-700",children:"To automatically calculate distances and travel times between places, you need a Google Maps API key."}),u.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg space-y-2 text-sm",children:[u.jsx("p",{className:"font-medium text-blue-900",children:"How to get your API key:"}),u.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-blue-800",children:[u.jsxs("li",{children:["Go to ",u.jsx("a",{href:"https://console.cloud.google.com/",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"Google Cloud Console"})]}),u.jsx("li",{children:"Create a new project or select an existing one"}),u.jsx("li",{children:'Enable "Distance Matrix API" and "Maps JavaScript API"'}),u.jsx("li",{children:'Go to "Credentials" and create an API key'}),u.jsx("li",{children:"Copy the API key and paste it below"})]})]}),u.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg text-sm text-yellow-800",children:[u.jsx("p",{className:"font-medium mb-1",children:" Important Notes:"}),u.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[u.jsx("li",{children:"Google provides $200 free credit per month"}),u.jsx("li",{children:"The API key is stored only in your browser"}),u.jsx("li",{children:"Never share your API key publicly"}),u.jsx("li",{children:"Consider restricting your API key to specific domains"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Google Maps API Key"}),u.jsx("input",{type:"text",value:Yt,onChange:f=>lt(f.target.value),placeholder:"Enter your API key here",className:"w-full px-3 py-2 border rounded-lg font-mono text-sm"})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[u.jsx("div",{className:"flex-1 px-4 py-2 text-center text-sm text-gray-500",children:"API key is provided via environment. No need to paste it here."}),u.jsx("button",{onClick:()=>Ur(!1),className:"flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl hover:bg-gray-50 text-sm sm:text-base transition-all",children:"Close"})]})]})}),Kn&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-6 max-w-md w-full",children:[u.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-4",children:"Account Settings"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),u.jsx("div",{className:"mt-1 text-gray-800",children:(n==null?void 0:n.displayName)||""})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),u.jsx("div",{className:"mt-1 text-gray-800",children:n==null?void 0:n.email})]})]}),u.jsx("div",{className:"mt-6 flex justify-end gap-3",children:u.jsx("button",{onClick:()=>ya(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Close"})})]})}),li&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-6 max-w-2xl w-full",children:[u.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-4",children:"Edit Trip Details"}),u.jsxs("div",{className:"space-y-4 mb-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trip Name"}),u.jsx("input",{type:"text",value:Ue.name,onChange:f=>qr({...Ue,name:f.target.value}),placeholder:"e.g., European Adventure 2026",className:"w-full px-3 py-2 border rounded-lg"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),u.jsx("input",{type:"date",value:Ue.startDate,onChange:f=>qr({...Ue,startDate:f.target.value}),className:"w-full px-3 py-2 border rounded-lg"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),u.jsx("input",{type:"date",value:Ue.endDate,onChange:f=>qr({...Ue,endDate:f.target.value}),className:"w-full px-3 py-2 border rounded-lg"})]})]}),Ue.startDate!==o.startDate||Ue.endDate!==o.endDate?u.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg text-sm text-yellow-800",children:[u.jsx("p",{className:"font-medium mb-1",children:" Note about changing dates:"}),u.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[u.jsx("li",{children:"Your existing daily plans will be preserved where dates match"}),u.jsx("li",{children:"New days will be added if you extend the trip"}),u.jsx("li",{children:"Days outside the new range will be removed"})]})]}):null]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[u.jsx("button",{onClick:Hu,disabled:!Ue.name||!Ue.startDate||!Ue.endDate,className:"flex-1 px-4 py-2 bg-gradient-to-r from-[#FF6B6B] to-[#FF8E53] text-white rounded-xl hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base font-medium",children:"Save Changes"}),u.jsx("button",{onClick:()=>$r(!1),className:"flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl hover:bg-gray-50 text-sm sm:text-base transition-all",children:"Cancel"})]})]})})]})})},uQ=({onBack:t,dayNumber:e,totalDays:r,dayTitle:n,dayDate:s,city:i})=>{const o=c=>new Date(c+"T00:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});return u.jsx("div",{className:"bg-white border-b-2 border-gray-100 sticky top-0 z-50 shadow-sm",children:u.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors",children:[u.jsx(nI,{size:20,className:"text-gray-700"}),u.jsx("span",{className:"font-medium text-gray-700",children:"Planning"})]}),u.jsxs("div",{className:"text-right",children:[u.jsxs("div",{className:"text-sm font-semibold text-[#4ECDC4]",children:["Day ",e," of ",r]}),u.jsx("div",{className:"text-xs text-gray-500",children:o(s)})]})]}),u.jsxs("div",{children:[n&&u.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:n}),i&&u.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[u.jsx(Xi,{size:16}),u.jsx("span",{className:"text-sm font-medium",children:i})]}),!n&&!i&&u.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Day ",e]})]})]})})},cQ=({place:t,onMarkVisited:e,onMarkSkipped:r})=>{const n=i=>{switch(i){case"walking":return u.jsx(Zo,{size:20,className:"text-[#4ECDC4]"});case"car":return u.jsx(Vh,{size:20,className:"text-[#4ECDC4]"});case"transit":return u.jsx($c,{size:20,className:"text-[#4ECDC4]"});case"plane":return u.jsx(Ri,{size:20,className:"text-[#4ECDC4]"});default:return u.jsx(Zo,{size:20,className:"text-[#4ECDC4]"})}},s=()=>{const o=`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(t.address||t.name)}`;window.open(o,"_blank")};return u.jsxs("div",{className:"bg-gradient-to-br from-[#4ECDC4] to-[#44A08D] rounded-2xl shadow-xl p-6 mb-6 mt-6",children:[u.jsx("div",{className:"flex items-start justify-between mb-4",children:u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"text-white/80 text-sm font-medium mb-1",children:"NEXT STOP"}),u.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:t.name}),t.address&&u.jsxs("div",{className:"flex items-start gap-2 text-white/90 text-sm",children:[u.jsx(Xi,{size:16,className:"mt-0.5 flex-shrink-0"}),u.jsx("span",{children:t.address})]})]})}),u.jsxs("div",{className:"flex items-center gap-4 mb-4 text-white",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[n(t.transportMode),u.jsx("span",{className:"font-medium capitalize",children:t.transportMode==="transit"?"Public Transport":t.transportMode})]}),t.transportTime&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-1 h-1 bg-white/50 rounded-full"}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(Gm,{size:16}),u.jsxs("span",{className:"font-medium",children:[t.transportTime," min"]})]})]}),t.distance&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-1 h-1 bg-white/50 rounded-full"}),u.jsxs("span",{className:"font-medium",children:[t.distance," km"]})]})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[u.jsxs("button",{onClick:s,className:"col-span-3 sm:col-span-1 flex items-center justify-center gap-2 px-4 py-3 bg-white text-[#4ECDC4] rounded-xl font-semibold hover:bg-gray-50 transition-all shadow-md",children:[u.jsx(iI,{size:18}),"Navigate"]}),u.jsxs("button",{onClick:e,className:"flex items-center justify-center gap-2 px-4 py-3 bg-white/20 text-white rounded-xl font-semibold hover:bg-white/30 transition-all backdrop-blur-sm border border-white/30",children:[u.jsx(Wc,{size:18}),"Visited"]}),u.jsxs("button",{onClick:r,className:"flex items-center justify-center gap-2 px-4 py-3 bg-white/20 text-white rounded-xl font-semibold hover:bg-white/30 transition-all backdrop-blur-sm border border-white/30",children:[u.jsx(gn,{size:18}),"Skip"]})]}),t.notes&&u.jsx("div",{className:"mt-4 pt-4 border-t border-white/20",children:u.jsx("div",{className:"text-white/90 text-sm",children:t.notes})})]})},dQ=({visited:t,total:e,distance:r,totalDistance:n,time:s,totalTime:i,todayExpenses:o})=>u.jsx("div",{className:"bg-white border-b-2 border-gray-100 shadow-sm",children:u.jsx("div",{className:"max-w-2xl mx-auto px-4 py-4",children:u.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[u.jsx(QB,{size:16,className:"text-[#26DE81]"}),u.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Places"})]}),u.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[t,u.jsxs("span",{className:"text-sm text-gray-400",children:["/",e]})]})]}),u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[u.jsx(Xi,{size:16,className:"text-[#4ECDC4]"}),u.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Distance"})]}),u.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[r.toFixed(1),u.jsxs("span",{className:"text-sm text-gray-400",children:["/",n.toFixed(1)," km"]})]})]}),u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[u.jsx(Gm,{size:16,className:"text-[#FF6B6B]"}),u.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Time"})]}),u.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[Math.floor(s),u.jsxs("span",{className:"text-sm text-gray-400",children:["/",Math.floor(i)," min"]})]})]}),u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[u.jsx(Gs,{size:16,className:"text-[#FFE66D]"}),u.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Spent"})]}),u.jsxs("div",{className:"text-lg font-bold text-gray-900",children:["",o.toFixed(0)]})]})]})})}),fQ=({place:t,index:e,onMarkVisited:r,onMarkSkipped:n,onUpdateActualCost:s})=>{const[i,o]=z.useState(!t.visited&&!t.skipped),[c,d]=z.useState(t.actualCost||""),h=y=>{switch(y){case"walking":return u.jsx(Zo,{size:14,className:"text-[#4ECDC4]"});case"car":return u.jsx(Vh,{size:14,className:"text-[#4ECDC4]"});case"transit":return u.jsx($c,{size:14,className:"text-[#4ECDC4]"});case"plane":return u.jsx(Ri,{size:14,className:"text-[#4ECDC4]"});default:return u.jsx(Zo,{size:14,className:"text-[#4ECDC4]"})}},g=()=>{const E=`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(t.address||t.name)}`;window.open(E,"_blank")},v=t.visited||t.skipped;return u.jsxs("div",{className:`bg-white rounded-xl shadow-md border-2 transition-all ${t.visited?"border-[#26DE81]/30 bg-gradient-to-r from-[#26DE81]/5 to-transparent":t.skipped?"border-gray-300 bg-gray-50 opacity-60":"border-gray-100 hover:border-[#4ECDC4]/30 hover:shadow-lg"}`,children:[u.jsxs("div",{className:"px-4 py-3 flex items-start justify-between cursor-pointer",onClick:()=>o(!i),children:[u.jsxs("div",{className:"flex-1 flex items-start gap-3",children:[u.jsx("div",{className:"flex-shrink-0",children:t.photoUrl?u.jsxs("div",{className:"relative w-20 h-20 rounded-xl overflow-hidden border border-gray-100 shadow-sm",children:[u.jsx("img",{src:t.photoUrl,alt:t.name,className:"w-full h-full object-cover",loading:"lazy"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 via-transparent to-transparent"}),u.jsx("div",{className:"absolute top-1 left-1",children:u.jsx("div",{className:"w-6 h-6 rounded-full bg-white/85 backdrop-blur flex items-center justify-center shadow",children:t.visited?u.jsx(Wc,{size:12,className:"text-[#26DE81]"}):t.skipped?u.jsx(gn,{size:12,className:"text-gray-500"}):u.jsx("span",{className:"text-[10px] font-bold text-gray-600",children:e+1})})})]}):u.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-gray-500 text-xs font-bold border",children:t.visited?u.jsx(Wc,{size:14}):t.skipped?u.jsx(gn,{size:14}):e+1})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:`font-semibold text-base mb-1 ${t.visited?"text-gray-700":t.skipped?"text-gray-500 line-through":"text-gray-900"}`,children:t.name}),!v&&u.jsx("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:t.transportMode&&u.jsxs(u.Fragment,{children:[h(t.transportMode),t.transportTime&&u.jsxs("span",{children:[t.transportTime," min"]}),t.distance&&u.jsxs("span",{children:[" ",t.distance," km"]})]})})]})]}),u.jsx("button",{className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:i?u.jsx(XB,{size:20,className:"text-gray-400"}):u.jsx(sI,{size:20,className:"text-gray-400"})})]}),i&&u.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[t.address&&u.jsxs("div",{className:"flex items-start gap-2 text-sm text-gray-600",children:[u.jsx(Xi,{size:14,className:"mt-0.5 text-[#4ECDC4] flex-shrink-0"}),u.jsx("span",{children:t.address})]}),(t.transportMode||t.transportTime||t.distance)&&!v&&u.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[t.transportMode&&u.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-[#4ECDC4]/10 rounded-lg",children:[h(t.transportMode),u.jsx("span",{className:"text-gray-700 capitalize",children:t.transportMode==="transit"?"Transit":t.transportMode})]}),t.transportTime&&u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(Gm,{size:14,className:"text-gray-400"}),u.jsxs("span",{className:"text-gray-600",children:[t.transportTime," min"]})]}),t.distance&&u.jsxs("span",{className:"text-gray-600",children:[t.distance," km"]})]}),t.notes&&u.jsxs("div",{className:"flex items-start gap-2 text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:[u.jsx(Ai,{size:14,className:"mt-0.5 text-gray-400 flex-shrink-0"}),u.jsx("span",{children:t.notes})]}),!v&&u.jsxs("div",{className:"bg-[#FFE66D]/10 border-2 border-[#FFE66D]/30 rounded-lg p-3",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx(Gs,{size:14,className:"text-[#F7B731]"}),u.jsx("label",{className:"text-xs font-semibold text-gray-700",children:"Actual Cost (Optional)"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-sm text-gray-600",children:""}),u.jsx("input",{type:"number",step:"0.01",value:c,onChange:y=>d(y.target.value),onBlur:()=>{c!==(t.actualCost||"")&&s(t.id,c)},onClick:y=>y.stopPropagation(),placeholder:t.estimatedCost?`Estimated: ${t.estimatedCost}`:"0.00",className:"flex-1 px-3 py-2 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-[#FFE66D] text-sm"})]}),t.estimatedCost&&u.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Estimated: ",t.estimatedCost,c&&parseFloat(c)!==parseFloat(t.estimatedCost)&&u.jsx("span",{className:`ml-2 font-medium ${parseFloat(c)>parseFloat(t.estimatedCost)?"text-red-600":"text-green-600"}`,children:parseFloat(c)>parseFloat(t.estimatedCost)?`+${(parseFloat(c)-parseFloat(t.estimatedCost)).toFixed(2)}`:`-${(parseFloat(t.estimatedCost)-parseFloat(c)).toFixed(2)}`})]})]}),v&&t.actualCost&&u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx(Gs,{size:14,className:"text-[#F7B731]"}),u.jsxs("span",{className:"text-gray-700",children:["Actual Cost: ",u.jsxs("span",{className:"font-semibold",children:["",t.actualCost]})]}),t.estimatedCost&&parseFloat(t.actualCost)!==parseFloat(t.estimatedCost)&&u.jsxs("span",{className:`text-xs ${parseFloat(t.actualCost)>parseFloat(t.estimatedCost)?"text-red-600":"text-green-600"}`,children:["(",parseFloat(t.actualCost)>parseFloat(t.estimatedCost)?"+":"-","",Math.abs(parseFloat(t.actualCost)-parseFloat(t.estimatedCost)).toFixed(2),")"]})]}),!v&&u.jsxs("div",{className:"grid grid-cols-3 gap-2 pt-2",children:[u.jsxs("button",{onClick:y=>{y.stopPropagation(),g()},className:"flex items-center justify-center gap-1 px-3 py-2 bg-[#4ECDC4] text-white rounded-lg font-medium text-sm hover:bg-[#44A08D] transition-all shadow-sm",children:[u.jsx(iI,{size:14}),"Navigate"]}),u.jsxs("button",{onClick:y=>{y.stopPropagation(),r(t.id)},className:"flex items-center justify-center gap-1 px-3 py-2 bg-[#26DE81] text-white rounded-lg font-medium text-sm hover:bg-[#20bf6b] transition-all shadow-sm",children:[u.jsx(Wc,{size:14}),"Visited"]}),u.jsxs("button",{onClick:y=>{y.stopPropagation(),n(t.id)},className:"flex items-center justify-center gap-1 px-3 py-2 bg-gray-400 text-white rounded-lg font-medium text-sm hover:bg-gray-500 transition-all shadow-sm",children:[u.jsx(gn,{size:14}),"Skip"]})]}),v&&u.jsxs("div",{className:"pt-2",children:[t.visited&&u.jsx("button",{onClick:y=>{y.stopPropagation(),r(t.id)},className:"text-sm text-gray-500 hover:text-gray-700 font-medium",children:"Undo visited"}),t.skipped&&u.jsx("button",{onClick:y=>{y.stopPropagation(),n(t.id)},className:"text-sm text-gray-500 hover:text-gray-700 font-medium",children:"Undo skip"})]})]})]})},hQ=({places:t,onMarkVisited:e,onMarkSkipped:r,onUpdateActualCost:n})=>!t||t.length===0?u.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-8 text-center",children:[u.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"No places planned for today"}),u.jsx("p",{className:"text-gray-500 text-sm",children:"Add places in the planning mode to see them here"})]}):u.jsx("div",{className:"space-y-3 pb-4",children:t.map((s,i)=>u.jsx(fQ,{place:s,index:i,onMarkVisited:e,onMarkSkipped:r,onUpdateActualCost:n},s.id))}),mQ=({places:t,nextPlaceId:e})=>{const r=z.useRef(null),n=z.useRef(null),s=z.useRef([]),i=z.useRef([]),[o,c]=z.useState(!1),[d,h]=z.useState(null);return z.useEffect(()=>{const g=()=>{window.google&&window.google.maps?c(!0):setTimeout(g,100)};g()},[]),z.useEffect(()=>{if(!(!o||!r.current||n.current))try{const g=new window.google.maps.Map(r.current,{zoom:12,center:{lat:0,lng:0},mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!0,zoomControl:!0});n.current=g}catch(g){console.error("Error initializing map:",g),h("Failed to initialize map")}},[o]),z.useEffect(()=>{if(!n.current||!o||!t||t.length===0)return;s.current.forEach(E=>E.setMap(null)),s.current=[],i.current.forEach(E=>E.setMap(null)),i.current=[];const g=new window.google.maps.LatLngBounds,v=t.filter(E=>E.location&&E.location.lat&&E.location.lng);if(v.length===0){h("No locations available for today");return}v.forEach((E,N)=>{const D={lat:parseFloat(E.location.lat),lng:parseFloat(E.location.lng)},k=E.id===e,S=E.visited,P=E.skipped;let C="#4ECDC4",R=(N+1).toString();S?C="#26DE81":P?C="#95a5a6":k&&(C="#FF6B6B");const Y=new window.google.maps.Marker({position:D,map:n.current,title:E.name,label:{text:R,color:"white",fontSize:"12px",fontWeight:"bold"},icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:14,fillColor:C,fillOpacity:1,strokeColor:"white",strokeWeight:2}}),q=new window.google.maps.InfoWindow({content:`
          <div style="padding: 8px;">
            <h3 style="margin: 0 0 4px 0; font-weight: bold; font-size: 14px;">${E.name}</h3>
            ${E.address?`<p style="margin: 0; font-size: 12px; color: #666;">${E.address}</p>`:""}
            ${k?'<p style="margin: 4px 0 0 0; font-size: 12px; color: #FF6B6B; font-weight: bold;"> Next Stop</p>':""}
            ${S?'<p style="margin: 4px 0 0 0; font-size: 12px; color: #26DE81; font-weight: bold;"> Visited</p>':""}
          </div>
        `});Y.addListener("click",()=>{q.open(n.current,Y)}),s.current.push(Y),g.extend(D)});const y={walking:"WALKING",car:"DRIVING",transit:"TRANSIT",plane:"DRIVING"};for(let E=0;E<v.length-1;E++){const N={lat:parseFloat(v[E].location.lat),lng:parseFloat(v[E].location.lng)},D={lat:parseFloat(v[E+1].location.lat),lng:parseFloat(v[E+1].location.lng)},k=v[E+1],S=y[k.transportMode]||"WALKING",P=new window.google.maps.DirectionsService,C=new window.google.maps.DirectionsRenderer({map:n.current,suppressMarkers:!0,polylineOptions:{strokeColor:"#4ECDC4",strokeWeight:3,strokeOpacity:.7}});P.route({origin:N,destination:D,travelMode:S},(R,Y)=>{Y==="OK"&&(C.setDirections(R),i.current.push(C))})}v.length>0&&(n.current.fitBounds(g),v.length===1&&n.current.setZoom(15)),h(null)},[t,e,o]),o?d?u.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-8 text-center",children:[u.jsx(rI,{size:48,className:"text-gray-400 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600 mb-2",children:d}),u.jsx("p",{className:"text-sm text-gray-500",children:"Add locations to places in planning mode"})]}):u.jsxs("div",{className:"bg-white rounded-2xl shadow-md overflow-hidden",children:[u.jsx("div",{ref:r,className:"w-full h-[500px] sm:h-[600px]"}),u.jsxs("div",{className:"p-4 border-t border-gray-100 flex flex-wrap gap-4 text-sm",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-4 h-4 bg-[#FF6B6B] rounded-full border-2 border-white"}),u.jsx("span",{className:"text-gray-600",children:"Next Stop"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-4 h-4 bg-[#4ECDC4] rounded-full border-2 border-white"}),u.jsx("span",{className:"text-gray-600",children:"Upcoming"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-4 h-4 bg-[#26DE81] rounded-full border-2 border-white"}),u.jsx("span",{className:"text-gray-600",children:"Visited"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-4 h-4 bg-[#95a5a6] rounded-full border-2 border-white"}),u.jsx("span",{className:"text-gray-600",children:"Skipped"})]})]})]}):u.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-8 text-center",children:[u.jsx("div",{className:"w-12 h-12 border-4 border-[#4ECDC4]/20 border-t-[#4ECDC4] rounded-full animate-spin mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Loading map..."})]})},gQ=({onAddExpense:t,onMarkNextVisited:e,onAddNote:r})=>u.jsxs("div",{className:"fixed bottom-6 right-6 z-40 flex flex-col gap-3",children:[e&&u.jsx("button",{onClick:e,className:"w-14 h-14 bg-[#26DE81] text-white rounded-full shadow-lg hover:shadow-xl hover:scale-110 transition-all flex items-center justify-center",title:"Mark next visited",children:u.jsx(Wc,{size:24})}),u.jsx("button",{onClick:t,className:"w-14 h-14 bg-gradient-to-r from-[#FFE66D] to-[#F7B731] text-white rounded-full shadow-lg hover:shadow-xl hover:scale-110 transition-all flex items-center justify-center",title:"Add expense",children:u.jsx(Gs,{size:24})}),r&&u.jsx("button",{onClick:r,className:"w-14 h-14 bg-[#4ECDC4] text-white rounded-full shadow-lg hover:shadow-xl hover:scale-110 transition-all flex items-center justify-center",title:"Add note",children:u.jsx(Ai,{size:24})})]}),pQ=({onClose:t,onSave:e})=>{const[r,n]=z.useState({description:"",amount:"",category:"food"}),s=[{value:"food",label:"Food",emoji:""},{value:"transport",label:"Transport",emoji:""},{value:"accommodation",label:"Hotel",emoji:""},{value:"activities",label:"Activities",emoji:""},{value:"shopping",label:"Shopping",emoji:""},{value:"other",label:"Other",emoji:""}],i=o=>{if(o.preventDefault(),!r.amount||!r.description.trim()){alert("Please enter amount and description");return}e(r)};return u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-end sm:items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-t-3xl sm:rounded-3xl w-full max-w-md shadow-2xl animate-slide-up",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-[#FFE66D] to-[#F7B731] rounded-full flex items-center justify-center",children:u.jsx(Gs,{size:20,className:"text-white"})}),u.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Quick Expense"})]}),u.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:u.jsx(gn,{size:20,className:"text-gray-600"})})]}),u.jsxs("form",{onSubmit:i,className:"p-6 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Amount ()"}),u.jsx("input",{type:"number",step:"0.01",value:r.amount,onChange:o=>n({...r,amount:o.target.value}),placeholder:"0.00",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-[#FFE66D] text-lg font-semibold",autoFocus:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),u.jsx("input",{type:"text",value:r.description,onChange:o=>n({...r,description:o.target.value}),placeholder:"e.g., Lunch at cafe",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-[#FFE66D]"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Category"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:s.map(o=>u.jsxs("button",{type:"button",onClick:()=>n({...r,category:o.value}),className:`px-3 py-3 rounded-xl border-2 transition-all text-center ${r.category===o.value?"border-[#FFE66D] bg-[#FFE66D]/10 shadow-md":"border-gray-200 hover:border-gray-300"}`,children:[u.jsx("div",{className:"text-2xl mb-1",children:o.emoji}),u.jsx("div",{className:"text-xs font-medium text-gray-700",children:o.label})]},o.value))})]}),u.jsxs("div",{className:"flex gap-3 pt-4",children:[u.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl font-semibold hover:bg-gray-50 transition-all",children:"Cancel"}),u.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-gradient-to-r from-[#FFE66D] to-[#F7B731] text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:"Add Expense"})]})]})]})})},DE=({onExitDayMode:t})=>{mx();const{dailyPlans:e,saveDailyPlans:r}=wO(),{expenses:n,saveExpense:s}=bO(),[i,o]=z.useState(null),[c,d]=z.useState(!1),[h,g]=z.useState(!1),v=R=>{const Y=R.getFullYear(),q=String(R.getMonth()+1).padStart(2,"0"),T=String(R.getDate()).padStart(2,"0");return`${Y}-${q}-${T}`};z.useEffect(()=>{var R;if(e.length>0&&!i){const Y=v(new Date),q=e.find(T=>T.date===Y);if(q)o(q.id);else{const T=[...e].sort((j,M)=>new Date(j.date)-new Date(M.date)),b=new Date,I=T.find(j=>new Date(j.date)>=b);o(I?I.id:(R=T[T.length-1])==null?void 0:R.id)}}},[e,i]);const y=z.useMemo(()=>e.find(R=>R.id===i),[e,i]),E=z.useMemo(()=>y?[...e].sort((Y,q)=>new Date(Y.date)-new Date(q.date)).findIndex(Y=>Y.id===i)+1:0,[e,i]),N=z.useMemo(()=>y!=null&&y.places?y.places.find(R=>!R.visited&&!R.skipped):null,[y]),D=z.useMemo(()=>{if(!(y!=null&&y.places))return{visited:0,total:0,distance:0,totalDistance:0,time:0,totalTime:0};const R=y.places.length,Y=y.places.filter(M=>M.visited).length,q=y.places.reduce((M,V)=>M+(parseFloat(V.distance)||0),0),T=y.places.reduce((M,V)=>M+(parseFloat(V.transportTime)||0),0),b=y.places.filter(M=>M.visited),I=b.reduce((M,V)=>M+(parseFloat(V.distance)||0),0),j=b.reduce((M,V)=>M+(parseFloat(V.transportTime)||0),0);return{visited:Y,total:R,distance:I,totalDistance:q,time:j,totalTime:T}},[y]),k=async R=>{if(!y)return;const Y=e.map(q=>q.id===i?{...q,places:q.places.map(T=>T.id===R?{...T,visited:!T.visited,visitedAt:T.visited?null:new Date().toISOString()}:T)}:q);try{await r(Y)}catch(q){console.error("Failed to mark place as visited:",q)}},S=async R=>{if(!y)return;const Y=e.map(q=>q.id===i?{...q,places:q.places.map(T=>T.id===R?{...T,skipped:!T.skipped}:T)}:q);try{await r(Y)}catch(q){console.error("Failed to mark place as skipped:",q)}},P=async R=>{try{const Y={id:Date.now(),date:y.date,city:y.city||"",country:y.country||"",...R};await s(Y),d(!1)}catch(Y){console.error("Failed to add expense:",Y),alert("Failed to add expense. Please try again.")}},C=z.useMemo(()=>y?n.filter(R=>R.date===y.date).reduce((R,Y)=>R+(parseFloat(Y.amount)||0),0):0,[n,y]);return y?u.jsxs("div",{className:"min-h-screen bg-[#F8F9FA] pb-24",children:[u.jsx(uQ,{onBack:t,dayNumber:E,totalDays:e.length,dayTitle:y.title,dayDate:y.date,city:y.city}),u.jsx(dQ,{visited:D.visited,total:D.total,distance:D.distance,totalDistance:D.totalDistance,time:D.time,totalTime:D.totalTime,todayExpenses:C}),u.jsxs("div",{className:"max-w-2xl mx-auto px-4",children:[N&&u.jsx(cQ,{place:N,onMarkVisited:()=>k(N.id),onMarkSkipped:()=>S(N.id)}),u.jsxs("div",{className:"flex gap-2 mb-4 mt-6",children:[u.jsx("button",{onClick:()=>g(!1),className:`flex-1 py-3 rounded-xl font-semibold transition-all ${h?"bg-white text-gray-600 border-2 border-gray-200":"bg-gradient-to-r from-[#4ECDC4] to-[#44A08D] text-white shadow-md"}`,children:"Timeline"}),u.jsx("button",{onClick:()=>g(!0),className:`flex-1 py-3 rounded-xl font-semibold transition-all ${h?"bg-gradient-to-r from-[#4ECDC4] to-[#44A08D] text-white shadow-md":"bg-white text-gray-600 border-2 border-gray-200"}`,children:"Map"})]}),h?u.jsx(mQ,{places:y.places||[],nextPlaceId:N==null?void 0:N.id}):u.jsx(hQ,{places:y.places||[],onMarkVisited:k,onMarkSkipped:S})]}),u.jsx(gQ,{onAddExpense:()=>d(!0),onMarkNextVisited:N?()=>k(N.id):null}),c&&u.jsx(pQ,{onClose:()=>d(!1),onSave:P})]}):u.jsx("div",{className:"min-h-screen bg-[#F8F9FA] flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 border-4 border-[#4ECDC4]/20 border-t-[#4ECDC4] rounded-full animate-spin mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600 text-lg",children:"Loading your day..."})]})})},vQ=()=>{const{signInWithGoogle:t,error:e}=fa(),[r,n]=z.useState(!1),[s,i]=z.useState(null),o=async()=>{try{n(!0),i(null),await t()}catch(c){console.error("Sign in error:",c),i(c.message||"Failed to sign in with Google")}finally{n(!1)}};return u.jsx("div",{className:"min-h-screen bg-[#F8F9FA] flex items-center justify-center p-4",children:u.jsxs("div",{className:"max-w-md w-full",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[u.jsx("div",{className:"bg-gradient-to-br from-[#4ECDC4] to-[#44A08D] p-3 rounded-2xl shadow-lg",children:u.jsx(Ri,{className:"w-8 h-8 text-white"})}),u.jsx("div",{className:"bg-gradient-to-br from-[#FF6B6B] to-[#FF8E53] p-3 rounded-2xl shadow-lg",children:u.jsx(Xi,{className:"w-8 h-8 text-white"})})]}),u.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Travel Planner"}),u.jsx("p",{className:"text-gray-600 text-lg",children:"Plan your perfect journey"})]}),u.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 border-2 border-gray-50",children:[u.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2 text-center",children:"Welcome!"}),u.jsx("p",{className:"text-gray-600 text-center mb-8",children:"Sign in to access your trips from any device"}),(e||s)&&u.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-red-50 to-red-50/50 border-2 border-red-200 rounded-xl flex items-start gap-3",children:[u.jsx(rI,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm text-red-800 font-medium",children:"Sign in failed"}),u.jsx("p",{className:"text-sm text-red-600 mt-1",children:s||e})]})]}),u.jsx("button",{onClick:o,disabled:r,className:"w-full bg-white border-2 border-gray-300 hover:border-[#4ECDC4] text-gray-700 font-semibold py-4 px-6 rounded-xl transition-all duration-200 flex items-center justify-center gap-3 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:r?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-[#4ECDC4] rounded-full animate-spin"}),u.jsx("span",{children:"Signing in..."})]}):u.jsxs(u.Fragment,{children:[u.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[u.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),u.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),u.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),u.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),u.jsx("span",{children:"Continue with Google"})]})}),u.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[u.jsx("p",{className:"text-sm font-medium text-gray-900 mb-4",children:"With your account you can:"}),u.jsxs("ul",{className:"space-y-3",children:[u.jsxs("li",{className:"flex items-start gap-3 text-sm text-gray-600",children:[u.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-[#4ECDC4]/20 to-[#4ECDC4]/10 flex items-center justify-center flex-shrink-0 mt-0.5",children:u.jsx("div",{className:"w-2 h-2 rounded-full bg-[#4ECDC4]"})}),u.jsx("span",{children:"Access your trips from any device"})]}),u.jsxs("li",{className:"flex items-start gap-3 text-sm text-gray-600",children:[u.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-[#FF6B6B]/20 to-[#FF6B6B]/10 flex items-center justify-center flex-shrink-0 mt-0.5",children:u.jsx("div",{className:"w-2 h-2 rounded-full bg-[#FF6B6B]"})}),u.jsx("span",{children:"Never lose your travel data"})]}),u.jsxs("li",{className:"flex items-start gap-3 text-sm text-gray-600",children:[u.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-[#FFE66D]/20 to-[#FFE66D]/10 flex items-center justify-center flex-shrink-0 mt-0.5",children:u.jsx("div",{className:"w-2 h-2 rounded-full bg-[#F7B731]"})}),u.jsx("span",{children:"Plan trips seamlessly across phone and desktop"})]})]})]})]}),u.jsx("p",{className:"text-center text-sm text-gray-600 mt-6",children:"By signing in, you agree to sync your data with Firebase"})]})})},yQ={Switzerland:["Zurich","Geneva","Basel","Lausanne","Bern","Winterthur","Lucerne","St. Gallen","Lugano","Biel/Bienne","Thun","Kniz","La Chaux-de-Fonds","Schaffhausen","Fribourg","Vernier","Chur","Neuchtel","Uster","Sion","Emmen","Zug","Yverdon-les-Bains","Kriens","Rapperswil-Jona","Dbendorf","Montreux","Frauenfeld","Dietikon","Wetzikon","Interlaken","Zermatt","Grindelwald","Lauterbrunnen","Wengen","Murren","Locarno","Ascona","Bellinzona","Davos","St. Moritz","Arosa","Engelberg","Andermatt"],Italy:["Rome","Milan","Naples","Turin","Palermo","Genoa","Bologna","Florence","Bari","Catania","Venice","Verona","Messina","Padua","Trieste","Brescia","Taranto","Prato","Parma","Modena","Reggio Calabria","Reggio Emilia","Perugia","Livorno","Ravenna","Cagliari","Foggia","Rimini","Salerno","Ferrara","Sassari","Latina","Giugliano in Campania","Monza","Syracuse","Pescara","Bergamo","Forl","Trento","Vicenza","Terni","Bolzano","Novara","Piacenza","Ancona","Andria","Arezzo","Udine","Cesena","Lecce","Pisa","Siena","Lucca","Como","La Spezia","Varese","Sorrento","Amalfi","Positano","Capri","Portofino","Cinque Terre","Matera","Assisi","Siracusa","Taormina","Pompeii","Pienza","San Gimignano","Orvieto"],France:["Paris","Marseille","Lyon","Toulouse","Nice","Nantes","Strasbourg","Montpellier","Bordeaux","Lille","Rennes","Reims","Le Havre","Saint-tienne","Toulon","Grenoble","Dijon","Angers","Nmes","Villeurbanne","Saint-Denis","Le Mans","Aix-en-Provence","Clermont-Ferrand","Brest","Tours","Amiens","Limoges","Annecy","Perpignan","Boulogne-Billancourt","Metz","Besanon","Orlans","Saint-Denis","Argenteuil","Rouen","Mulhouse","Montreuil","Caen","Nancy","Avignon","Cannes","Antibes","Saint-Tropez","Monaco","Versailles","Colmar","Chamonix","Annecy","Carcassonne","Arles","Aix-les-Bains","Menton","Grasse","Saint-Malo","La Rochelle","Biarritz","Lourdes","Mont-Saint-Michel","Giverny","Fontainebleau","Chartres","Beaune","pernay","Reims","Troyes"],Spain:["Madrid","Barcelona","Valencia","Seville","Bilbao","Mlaga","Granada"],Portugal:["Lisbon","Porto","Faro","Coimbra","Braga"],Germany:["Berlin","Munich","Hamburg","Frankfurt","Cologne","Stuttgart","Dsseldorf"],Austria:["Vienna","Salzburg","Innsbruck","Graz","Linz"],Netherlands:["Amsterdam","Rotterdam","The Hague","Utrecht","Eindhoven"],Belgium:["Brussels","Antwerp","Ghent","Bruges","Lige"],Greece:["Athens","Thessaloniki","Santorini","Mykonos","Crete","Rhodes"],"United Kingdom":["London","Edinburgh","Manchester","Liverpool","Oxford","Cambridge"],"Czech Republic":["Prague","Brno","esk Krumlov"],Croatia:["Zagreb","Dubrovnik","Split","Pula"],Poland:["Warsaw","Krakow","Gdansk","Wroclaw"],Hungary:["Budapest","Debrecen","Szeged"],"United States":["New York","Los Angeles","Chicago","San Francisco","Miami","Las Vegas"],Canada:["Toronto","Vancouver","Montreal","Quebec City","Calgary"],Japan:["Tokyo","Kyoto","Osaka","Hiroshima","Nara"],"South Korea":["Seoul","Busan","Jeju"],Thailand:["Bangkok","Chiang Mai","Phuket","Pattaya"],Australia:["Sydney","Melbourne","Brisbane","Perth","Adelaide"],"New Zealand":["Auckland","Wellington","Christchurch","Queenstown"],Brazil:["Rio de Janeiro","So Paulo","Salvador","Braslia"],Argentina:["Buenos Aires","Mendoza","Bariloche","Crdoba"],Mexico:["Mexico City","Cancun","Playa del Carmen","Guadalajara"],Egypt:["Cairo","Alexandria","Luxor","Aswan"],"United Arab Emirates":["Dubai","Abu Dhabi","Sharjah"],Turkey:["Istanbul","Ankara","Antalya","Izmir"],Morocco:["Marrakech","Casablanca","Fes","Rabat"],"South Africa":["Cape Town","Johannesburg","Durban","Pretoria"]},TE=({onCreateTrip:t})=>{const{trips:e,loading:r,deleteTrip:n}=hx(),[s,i]=z.useState([]),[o,c]=z.useState(!1),[d,h]=z.useState(""),[g,v]=z.useState([{startDate:new Date,endDate:new Date(Date.now()+7*24*60*60*1e3),key:"selection"}]),[y,E]=z.useState(!1),[N,D]=z.useState(""),[k,S]=z.useState(!1),[P,C]=z.useState(null),[R,Y]=z.useState(!1),[q,T]=z.useState(null),b=z.useRef(null),I=z.useRef(null),M=Object.keys(yQ).filter(B=>!s.includes(B)).filter(B=>B.toLowerCase().includes(d.toLowerCase())),V=B=>{i([...s,B]),h(""),c(!1)},O=B=>{i(s.filter(F=>F!==B))},et=B=>{C(B)},tt=(B,F)=>{B.preventDefault()},le=(B,F)=>{if(B.preventDefault(),P===null||P===F)return;const K=[...s],[ae]=K.splice(P,1);K.splice(F,0,ae),i(K),C(null)},Oe=()=>s.length===0?"":s.length===1?`Trip to ${s[0]}`:s.length===2?`Trip to ${s[0]} & ${s[1]}`:`Trip to ${s.slice(0,-1).join(", ")} & ${s[s.length-1]}`;z.useEffect(()=>{k||D(Oe())},[s,k]),z.useEffect(()=>{const B=F=>{b.current&&!b.current.contains(F.target)&&E(!1)};return y&&document.addEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}},[y]),z.useEffect(()=>{const B=F=>{I.current&&!I.current.contains(F.target)&&c(!1)};return o&&document.addEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}},[o]);const ee=B=>{const F=B.getFullYear(),K=String(B.getMonth()+1).padStart(2,"0"),ae=String(B.getDate()).padStart(2,"0");return`${F}-${K}-${ae}`},de=async()=>{if(s.length===0){alert("Please select at least one country");return}if(!N.trim()){alert("Please enter a trip name");return}const B={id:Date.now(),name:N.trim(),startDate:ee(g[0].startDate),endDate:ee(g[0].endDate),countries:s};try{console.log("TripSetup: creating trip",B),await t(B),console.log("TripSetup: onCreateTrip resolved")}catch(F){console.error("Failed to create trip:",F),alert("Failed to create trip. Please try again.")}},ue=async B=>{console.log("TripSetup: selecting existing trip",B),await t(B)},De=B=>{T(B),Y(!0)},X=async()=>{if(q)try{await n(q.id)}catch(B){console.error("Failed to delete trip:",B),alert("Failed to delete trip. Please try again.")}finally{Y(!1),T(null)}},G=e.sort((B,F)=>new Date(F.startDate)-new Date(B.startDate)).slice(0,6);return u.jsxs("div",{className:"min-h-screen bg-[#F8F9FA] flex items-center justify-center p-4",children:[u.jsxs("div",{className:"max-w-2xl w-full",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"inline-block p-4 bg-gradient-to-br from-[#FF6B6B] to-[#FF8E53] rounded-3xl shadow-lg mb-4",children:u.jsx(Xi,{className:"w-12 h-12 text-white"})}),u.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-2",children:"Plan Your Adventure"}),u.jsx("p",{className:"text-gray-600 text-lg",children:"Tell us where you're going and when"})]}),u.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 sm:p-8 border-2 border-gray-50",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("label",{className:"block text-lg font-semibold text-gray-900 mb-3",children:"Where are you travelling to?"}),u.jsxs("div",{className:"flex flex-wrap gap-3 mb-3",children:[s.map((B,F)=>u.jsxs("div",{draggable:!0,onDragStart:()=>et(F),onDragOver:K=>tt(K),onDrop:K=>le(K,F),className:`flex items-center gap-2 px-5 py-3 bg-gradient-to-r from-[#FF6B6B]/10 to-[#FF8E53]/10 text-[#FF6B6B] rounded-full border-2 border-[#FF6B6B]/20 cursor-move hover:shadow-md hover:border-[#FF6B6B]/40 transition-all ${P===F?"opacity-50 scale-95":""}`,children:[u.jsx(Jb,{size:20,className:"text-[#FF6B6B]/60 flex-shrink-0"}),u.jsx("span",{className:"font-medium text-base",children:B}),u.jsx("button",{onClick:K=>{K.stopPropagation(),O(B)},className:"hover:bg-[#FF6B6B]/20 rounded-full p-1 transition-colors",children:u.jsx(gn,{size:18})})]},B)),u.jsxs("button",{onClick:()=>c(!o),className:"flex items-center gap-2 px-5 py-3 border-2 border-dashed border-gray-300 hover:border-[#4ECDC4] text-gray-600 hover:text-[#4ECDC4] rounded-full transition-all",children:[u.jsx(Ic,{size:18}),u.jsx("span",{className:"font-medium",children:"Add Country"})]})]}),s.length>1&&u.jsxs("p",{className:"text-xs text-gray-500 mb-3 flex items-center gap-1",children:[u.jsx(Jb,{size:14}),"Drag countries to reorder them"]}),o&&u.jsxs("div",{ref:I,className:"relative mt-2",children:[u.jsx("input",{type:"text",placeholder:"Search countries...",value:d,onChange:B=>h(B.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-[#4ECDC4] transition-colors",autoFocus:!0}),u.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white border-2 border-gray-200 rounded-xl shadow-lg max-h-64 overflow-y-auto",children:M.length>0?M.map(B=>u.jsx("button",{onClick:()=>V(B),className:"w-full px-4 py-3 text-left hover:bg-gradient-to-r hover:from-[#4ECDC4]/10 hover:to-[#4ECDC4]/5 transition-colors border-b border-gray-100 last:border-b-0",children:u.jsx("span",{className:"font-medium",children:B})},B)):u.jsx("div",{className:"px-4 py-3 text-gray-500 text-center",children:"No countries found"})})]})]}),u.jsxs("div",{className:"mb-8",children:[u.jsx("label",{className:"block text-lg font-semibold text-gray-900 mb-3",children:"When are you going?"}),u.jsxs("button",{onClick:()=>E(!y),className:"w-full px-4 py-3 bg-gradient-to-r from-[#4ECDC4]/10 to-[#4ECDC4]/5 border-2 border-[#4ECDC4]/30 hover:border-[#4ECDC4] rounded-xl transition-all flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Bc,{className:"text-[#4ECDC4]",size:20}),u.jsxs("span",{className:"font-medium text-gray-700",children:[g[0].startDate.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),"  ",g[0].endDate.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),u.jsxs("span",{className:"text-sm text-gray-500",children:[Math.ceil((g[0].endDate-g[0].startDate)/(1e3*60*60*24))+1," days"]})]}),y&&u.jsx("div",{ref:b,className:"mt-4 flex justify-center",children:u.jsx("div",{className:"inline-block bg-white border-2 border-gray-200 rounded-xl shadow-lg p-4",children:u.jsx(j0.DateRange,{ranges:g,onChange:B=>{const F=B.selection;v([F]),F.startDate&&F.endDate&&F.startDate.getTime()!==F.endDate.getTime()&&E(!1)},months:2,direction:"horizontal",showDateDisplay:!1,rangeColors:["#4ECDC4"],className:"rounded-xl"})})})]}),s.length>0&&u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-lg font-semibold text-gray-900 mb-3",children:"Trip Name"}),u.jsx("input",{type:"text",value:N,onChange:B=>{D(B.target.value),S(!0)},onBlur:()=>{N.trim()||(D(Oe()),S(!1))},placeholder:"Enter trip name",className:"w-full px-4 py-3 border-2 border-[#FFE66D]/30 bg-gradient-to-r from-[#FFE66D]/10 to-[#FFE66D]/5 rounded-xl focus:outline-none focus:border-[#FFE66D] focus:bg-white transition-colors text-lg font-semibold text-gray-900"})]}),u.jsx("button",{onClick:de,disabled:s.length===0,className:"w-full px-6 py-4 bg-gradient-to-r from-[#FF6B6B] to-[#FF8E53] text-white rounded-xl font-semibold text-lg hover:shadow-lg transition-all hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:"Create My Trip"})]}),!r&&G.length>0&&u.jsxs("div",{className:"mt-8",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx(Gm,{size:20,className:"text-[#4ECDC4]"}),u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Trips"})]}),u.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Continue planning one of your previous trips"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:G.map(B=>u.jsxs("div",{className:"bg-white rounded-2xl shadow-md hover:shadow-xl border-2 border-gray-50 hover:border-[#4ECDC4] p-5 text-left transition-all hover:scale-[1.02] group relative",children:[u.jsx("button",{onClick:()=>De(B),className:"absolute top-3 right-3 p-2 rounded-full hover:bg-red-50 text-red-500 transition-colors",title:"Delete trip",children:u.jsx(nu,{size:18})}),u.jsxs("button",{onClick:()=>ue(B),className:"w-full text-left",children:[u.jsx("div",{className:"flex items-start justify-between mb-3 pr-6",children:u.jsx("h3",{className:"font-bold text-lg text-gray-900 line-clamp-2 group-hover:text-[#4ECDC4] transition-colors",children:B.name})}),u.jsxs("div",{className:"space-y-2 text-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Bc,{size:14,className:"text-[#4ECDC4]"}),u.jsxs("span",{children:[new Date(B.startDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ",new Date(B.endDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),B.countries&&B.countries.length>0&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Xi,{size:14,className:"text-[#FF6B6B]"}),u.jsxs("div",{className:"flex flex-wrap gap-1",children:[B.countries.slice(0,2).map((F,K)=>u.jsx("span",{className:"text-xs px-2 py-1 bg-gradient-to-r from-[#FF6B6B]/10 to-[#FF8E53]/10 text-[#FF6B6B] rounded-full font-medium",children:F},K)),B.countries.length>2&&u.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-600 rounded-full font-medium",children:["+",B.countries.length-2]})]})]})]}),u.jsx("div",{className:"mt-4 pt-3 border-t border-gray-100",children:u.jsx("span",{className:"text-xs text-[#4ECDC4] font-medium group-hover:underline",children:"Continue Planning "})})]})]},B.id))})]})]}),R&&q&&u.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 px-4",children:u.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-2xl max-w-md w-full",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-red-50 flex items-center justify-center",children:u.jsx(nu,{className:"text-red-500",size:20})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Delete trip?"})]}),u.jsxs("p",{className:"text-gray-600 mb-6",children:['"',q.name,'" will be removed from your trips. This action cannot be undone.']}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[u.jsx("button",{onClick:X,className:"flex-1 px-4 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:shadow-lg transition-all",children:"Delete Trip"}),u.jsx("button",{onClick:()=>{Y(!1),T(null)},className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl hover:bg-gray-50 transition-all",children:"Cancel"})]})]})})]})},_Q=()=>{const{currentUser:t,loading:e}=fa(),{currentTrip:r,loading:n,saveCurrentTrip:s}=mx(),{saveTrip:i}=hx(),[o,c]=zn.useState(null),[d,h]=zn.useState(!1),[g,v]=zn.useState("planning");if(e||t&&n)return u.jsx("div",{className:"min-h-screen bg-[#F8F9FA] flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 border-4 border-[#4ECDC4]/20 border-t-[#4ECDC4] rounded-full animate-spin mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600 text-lg",children:"Loading..."})]})});if(!t)return u.jsx(vQ,{});if(typeof window<"u"&&localStorage.getItem("showSetupOnLogin")==="1"&&!o&&(!r||!r.id)){try{localStorage.removeItem("showSetupOnLogin")}catch(y){console.warn("Could not remove showSetupOnLogin flag",y)}return u.jsx(TE,{onCreateTrip:async y=>{try{await i(y),await s(y),c(y),h(!1)}catch(E){console.error("Failed to create trip:",E),alert("Failed to create trip. Please try again.")}}})}return d||!r||!r.id?o&&!d?g==="planning"?u.jsx(EE,{initialTrip:o,onExitTrip:()=>{c(null),h(!0)},onEnterDayMode:()=>v("dayMode")}):u.jsx(DE,{onExitDayMode:()=>v("planning")}):u.jsx(TE,{onCreateTrip:async y=>{try{console.log("App: onCreateTrip start",y),await i(y),console.log("App: saveTrip completed"),await s(y),console.log("App: saveCurrentTrip completed"),c(y),console.log("App: setCreatedTrip",y),h(!1)}catch(E){console.error("Failed to create trip:",E),alert("Failed to create trip. Please try again.")}}}):g==="planning"?u.jsx(EE,{onExitTrip:()=>{c(null),h(!0)},onEnterDayMode:()=>v("dayMode")}):u.jsx(DE,{onExitDayMode:()=>v("planning")})},kv=document.getElementById("root"),DO=kv._reactRoot||vp.createRoot(kv);kv._reactRoot=DO;DO.render(u.jsx(zn.StrictMode,{children:u.jsx(nQ,{children:u.jsx(_Q,{})})}));
